{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/stock-movement-wizard/modals/EditPickModal.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/stock-movement-wizard/modals/EditPickModal.jsx","mtime":1698037750000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQpmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHsgdmFyIGtleSA9IF90b1ByaW1pdGl2ZShhcmcsICJzdHJpbmciKTsgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gInN5bWJvbCIgPyBrZXkgOiBTdHJpbmcoa2V5KTsgfQpmdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHsgaWYgKF90eXBlb2YoaW5wdXQpICE9PSAib2JqZWN0IiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0OyB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCAiZGVmYXVsdCIpOyBpZiAoX3R5cGVvZihyZXMpICE9PSAib2JqZWN0IikgcmV0dXJuIHJlczsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKTsgfSByZXR1cm4gKGhpbnQgPT09ICJzdHJpbmciID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7IH0KZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH0KZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IHsgZ2V0VHJhbnNsYXRlIH0gZnJvbSAncmVhY3QtbG9jYWxpemUtcmVkdXgnOwppbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAncmVhY3QtdGlwcHknOwppbXBvcnQgeyBoaWRlU3Bpbm5lciwgc2hvd1NwaW5uZXIgfSBmcm9tICdhY3Rpb25zJzsKaW1wb3J0IEFycmF5RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0FycmF5RmllbGQnOwppbXBvcnQgTGFiZWxGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvTGFiZWxGaWVsZCc7CmltcG9ydCBNb2RhbFdyYXBwZXIgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL01vZGFsV3JhcHBlcic7CmltcG9ydCBTZWxlY3RGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvU2VsZWN0RmllbGQnOwppbXBvcnQgVGV4dEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9UZXh0RmllbGQnOwppbXBvcnQgYXBpQ2xpZW50IGZyb20gJ3V0aWxzL2FwaUNsaWVudCc7CmltcG9ydCBUcmFuc2xhdGUsIHsgdHJhbnNsYXRlV2l0aERlZmF1bHRNZXNzYWdlIH0gZnJvbSAndXRpbHMvVHJhbnNsYXRlJzsKdmFyIEZJRUxEUyA9IHsKICByZWFzb25Db2RlOiB7CiAgICB0eXBlOiBTZWxlY3RGaWVsZCwKICAgIGxhYmVsOiBmdW5jdGlvbiBsYWJlbCgpIHsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJsYWJlbCIsIHsKICAgICAgICBodG1sRm9yOiAicmVhc29uQ29kZSIsCiAgICAgICAgY2xhc3NOYW1lOiAibWwtMyB0ZXh0LWNlbnRlciIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja01vdmVtZW50LnJlYXNvbkNvZGUubGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUmVhc29uIGNvZGUiCiAgICAgIH0pKTsKICAgIH0sCiAgICBkZWZhdWx0TWVzc2FnZTogJ1JlYXNvbiBjb2RlJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgY2xhc3NOYW1lOiAnbWItMicKICAgIH0sCiAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIocHJvcHMpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBvcHRpb25zOiBwcm9wcy5yZWFzb25Db2RlcwogICAgICB9OwogICAgfQogIH0sCiAgYXZhaWxhYmxlSXRlbXM6IHsKICAgIHR5cGU6IEFycmF5RmllbGQsCiAgICBnZXREeW5hbWljUm93QXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY1Jvd0F0dHIoX3JlZikgewogICAgICB2YXIgcm93VmFsdWVzID0gX3JlZi5yb3dWYWx1ZXM7CiAgICAgIHZhciBjbGFzc05hbWUgPSAnJzsKICAgICAgaWYgKCFyb3dWYWx1ZXMucXVhbnRpdHlBdmFpbGFibGUpIHsKICAgICAgICBjbGFzc05hbWUgPSAndGV4dC1kaXNhYmxlZCc7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZQogICAgICB9OwogICAgfSwKICAgIGZpZWxkczogewogICAgICBzdGF0dXM6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGZpZWxkS2V5OiAnJywKICAgICAgICBmaXhlZFdpZHRoOiAnMTIwcHgnLAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMikgewogICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IF9yZWYyLnRyYW5zbGF0ZTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNob3dWYWx1ZVRvb2x0aXA6IHRydWUsCiAgICAgICAgICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZShmaWVsZFZhbHVlKSB7CiAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUuc3RhdHVzID09PSAnQVZBSUxBQkxFJyAmJiBmaWVsZFZhbHVlLnBpY2tlZFJlcXVpc2l0aW9uTnVtYmVycy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgIHZhciBfc3RhdHVzID0gdHJhbnNsYXRlKCdyZWFjdC5zdG9ja01vdmVtZW50LmVudW0uQXZhaWxhYmxlSXRlbVN0YXR1cy5QSUNLRUQnLCAnUElDS0VEJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3N0YXR1cyArIChmaWVsZFZhbHVlLnBpY2tlZFJlcXVpc2l0aW9uTnVtYmVycyA/ICIgWyIuY29uY2F0KGZpZWxkVmFsdWUucGlja2VkUmVxdWlzaXRpb25OdW1iZXJzLCAiXSIpIDogJycpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWZpZWxkVmFsdWUuc3RhdHVzIHx8IGZpZWxkVmFsdWUuc3RhdHVzID09PSAnQVZBSUxBQkxFJykgewogICAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gdHJhbnNsYXRlKCJyZWFjdC5zdG9ja01vdmVtZW50LmVudW0uQXZhaWxhYmxlSXRlbVN0YXR1cy4iLmNvbmNhdChmaWVsZFZhbHVlLnN0YXR1cyksIGZpZWxkVmFsdWUuc3RhdHVzKTsKICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzICsgKGZpZWxkVmFsdWUucGlja2VkUmVxdWlzaXRpb25OdW1iZXJzID8gIiBbIi5jb25jYXQoZmllbGRWYWx1ZS5waWNrZWRSZXF1aXNpdGlvbk51bWJlcnMsICJdIikgOiAnJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LAogICAgICBsb3ROdW1iZXI6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5sb3QubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTG90JwogICAgICB9LAogICAgICBleHBpcmF0aW9uRGF0ZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LmV4cGlyeS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFeHBpcnknLAogICAgICAgIGZpeGVkV2lkdGg6ICcxMjBweCcKICAgICAgfSwKICAgICAgYmluTG9jYXRpb246IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5iaW5Mb2NhdGlvbi5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCaW4gTG9jYXRpb24nLAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMykgewogICAgICAgICAgdmFyIGhhc0JpbkxvY2F0aW9uU3VwcG9ydCA9IF9yZWYzLmhhc0JpbkxvY2F0aW9uU3VwcG9ydDsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGhpZGU6ICFoYXNCaW5Mb2NhdGlvblN1cHBvcnQKICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBzaG93VmFsdWVUb29sdGlwOiB0cnVlLAogICAgICAgICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKGZpZWxkVmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWUgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciIKICAgICAgICAgICAgfSwgZmllbGRWYWx1ZS56b25lTmFtZSA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAidGV4dC10cnVuY2F0ZSIsCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIG1pbldpZHRoOiAzMCwKICAgICAgICAgICAgICAgIGZsZXhTaHJpbms6IDIwCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmaWVsZFZhbHVlLnpvbmVOYW1lKSA6ICcnLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogInRleHQtdHJ1bmNhdGUiCiAgICAgICAgICAgIH0sIGZpZWxkVmFsdWUuem9uZU5hbWUgPyAiOiAiLmNvbmNhdChmaWVsZFZhbHVlLm5hbWUpIDogZmllbGRWYWx1ZS5uYW1lKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBxdWFudGl0eU9uSGFuZDogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50Lm9uSGFuZC5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPbiBIYW5kJywKICAgICAgICBmaXhlZFdpZHRoOiAnMTUwcHgnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b0xvY2FsZVN0cmluZygnZW4tVVMnKSA6IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBxdWFudGl0eUF2YWlsYWJsZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LmF2YWlsYWJsZS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBdmFpbGFibGUnLAogICAgICAgIGZpeGVkV2lkdGg6ICcxNTBweCcsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycpIDogbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHF1YW50aXR5UGlja2VkOiB7CiAgICAgICAgdHlwZTogVGV4dEZpZWxkLAogICAgICAgIGZpZWxkS2V5OiAnJywKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQucGlja2VkLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1BpY2tlZCcsCiAgICAgICAgaGVhZGVyQWxpZ246ICdsZWZ0JywKICAgICAgICBmaXhlZFdpZHRoOiAnMTIwcHgnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIHR5cGU6ICdudW1iZXInCiAgICAgICAgfSwKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjQpIHsKICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gX3JlZjQuZmllbGRWYWx1ZTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpc2FibGVkOiBmaWVsZFZhbHVlICYmICFmaWVsZFZhbHVlLnF1YW50aXR5QXZhaWxhYmxlICYmICFmaWVsZFZhbHVlLnF1YW50aXR5UGlja2VkCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTsKZnVuY3Rpb24gdmFsaWRhdGUodmFsdWVzKSB7CiAgdmFyIGVycm9ycyA9IHt9OwogIGVycm9ycy5hdmFpbGFibGVJdGVtcyA9IFtdOwogIF8uZm9yRWFjaCh2YWx1ZXMuYXZhaWxhYmxlSXRlbXMsIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgIGlmIChpdGVtLnF1YW50aXR5UGlja2VkID4gaXRlbS5xdWFudGl0eUF2YWlsYWJsZSkgewogICAgICBlcnJvcnMuYXZhaWxhYmxlSXRlbXNba2V5XSA9IHsKICAgICAgICBxdWFudGl0eVBpY2tlZDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuZXJyb3JzLmhpZ2hlclR5UGlja2VkLmxhYmVsJwogICAgICB9OwogICAgfQogICAgaWYgKGl0ZW0ucXVhbnRpdHlQaWNrZWQgPCAwKSB7CiAgICAgIGVycm9ycy5hdmFpbGFibGVJdGVtc1trZXldID0gewogICAgICAgIHF1YW50aXR5UGlja2VkOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5lcnJvcnMubmVnYXRpdmVRdHlQaWNrZWQubGFiZWwnCiAgICAgIH07CiAgICB9CiAgfSk7CiAgdmFyIHBpY2tlZFN1bSA9IF8ucmVkdWNlKHZhbHVlcy5hdmFpbGFibGVJdGVtcywgZnVuY3Rpb24gKHN1bSwgdmFsKSB7CiAgICByZXR1cm4gc3VtICsgKHZhbC5xdWFudGl0eVBpY2tlZCA/IF8udG9JbnRlZ2VyKHZhbC5xdWFudGl0eVBpY2tlZCkgOiAwKTsKICB9LCAwKTsKICBpZiAoXy5zb21lKHZhbHVlcy5hdmFpbGFibGVJdGVtcywgZnVuY3Rpb24gKHZhbCkgewogICAgcmV0dXJuICFfLmlzTmlsKHZhbC5xdWFudGl0eVBpY2tlZCk7CiAgfSkgJiYgIXZhbHVlcy5yZWFzb25Db2RlICYmIHBpY2tlZFN1bSAhPT0gdmFsdWVzLnF1YW50aXR5UmVxdWlyZWQpIHsKICAgIGVycm9ycy5yZWFzb25Db2RlID0gJ3JlYWN0LnN0b2NrTW92ZW1lbnQuZXJyb3JzLmRpZmZlcmVudFRvdGFsUXR5LmxhYmVsJzsKICB9CiAgcmV0dXJuIGVycm9yczsKfQoKLyoqIE1vZGFsIHdpbmRvdyB3aGVyZSB1c2VyIGNhbiBlZGl0IHBpY2suICovCi8qIGVzbGludCBuby1wYXJhbS1yZWFzc2lnbjogImVycm9yIiAqLwp2YXIgRWRpdFBpY2tNb2RhbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhFZGl0UGlja01vZGFsLCBfQ29tcG9uZW50KTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEVkaXRQaWNrTW9kYWwpOwogIGZ1bmN0aW9uIEVkaXRQaWNrTW9kYWwocHJvcHMpIHsKICAgIHZhciBfdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFZGl0UGlja01vZGFsKTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwogICAgdmFyIF9wcm9wcyRmaWVsZENvbmZpZyA9IHByb3BzLmZpZWxkQ29uZmlnLAogICAgICBhdHRyaWJ1dGVzID0gX3Byb3BzJGZpZWxkQ29uZmlnLmF0dHJpYnV0ZXMsCiAgICAgIGdldER5bmFtaWNBdHRyID0gX3Byb3BzJGZpZWxkQ29uZmlnLmdldER5bmFtaWNBdHRyOwogICAgdmFyIGR5bmFtaWNBdHRyID0gZ2V0RHluYW1pY0F0dHIgPyBnZXREeW5hbWljQXR0cihwcm9wcykgOiB7fTsKICAgIHZhciBhdHRyID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhdHRyaWJ1dGVzKSwgZHluYW1pY0F0dHIpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGF0dHI6IGF0dHIsCiAgICAgIGZvcm1WYWx1ZXM6IHt9CiAgICB9OwogICAgX3RoaXMub25PcGVuID0gX3RoaXMub25PcGVuLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMub25TYXZlID0gX3RoaXMub25TYXZlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoRWRpdFBpY2tNb2RhbCwgW3sKICAgIGtleTogImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgIHZhciBfbmV4dFByb3BzJGZpZWxkQ29uZmkgPSBuZXh0UHJvcHMuZmllbGRDb25maWcsCiAgICAgICAgYXR0cmlidXRlcyA9IF9uZXh0UHJvcHMkZmllbGRDb25maS5hdHRyaWJ1dGVzLAogICAgICAgIGdldER5bmFtaWNBdHRyID0gX25leHRQcm9wcyRmaWVsZENvbmZpLmdldER5bmFtaWNBdHRyOwogICAgICB2YXIgZHluYW1pY0F0dHIgPSBnZXREeW5hbWljQXR0ciA/IGdldER5bmFtaWNBdHRyKG5leHRQcm9wcykgOiB7fTsKICAgICAgdmFyIGF0dHIgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGF0dHJpYnV0ZXMpLCBkeW5hbWljQXR0cik7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGF0dHI6IGF0dHIKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBMb2FkcyBjaG9zZW4gaXRlbXMsIHJlcXVpcmVkIHF1YW50aXR5IGFuZCByZWFzb24gY29kZXMgaW50byBtb2RhbCdzIGZvcm0uCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJvbk9wZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uT3BlbigpIHsKICAgICAgdGhpcy5mZXRjaFBpY2tQYWdlSXRlbSgpOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZHMgYWxsIGNoYW5nZXMgbWFkZSBieSB1c2VyIGluIHRoaXMgbW9kYWwgdG8gQVBJIGFuZCB1cGRhdGVzIGRhdGEuCiAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVzCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJvblNhdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU2F2ZSh2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgdmFyIHBpY2tsaXN0VXJsID0gIi9vcGVuYm94ZXMvYXBpL3N0b2NrTW92ZW1lbnRJdGVtcy8iLmNvbmNhdCh0aGlzLnN0YXRlLmF0dHIuaXRlbUlkLCAiL3VwZGF0ZVBpY2tsaXN0Iik7CiAgICAgIHZhciBpdGVtc1VybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja01vdmVtZW50SXRlbXMvIi5jb25jYXQodGhpcy5zdGF0ZS5hdHRyLml0ZW1JZCwgIj9zdGVwTnVtYmVyPTQiKTsKICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgcGlja2xpc3RJdGVtczogXy5tYXAodmFsdWVzLmF2YWlsYWJsZUl0ZW1zLCBmdW5jdGlvbiAoYXZJdGVtKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogYXZJdGVtLmlkIHx8ICcnLAogICAgICAgICAgICAnaW52ZW50b3J5SXRlbS5pZCc6IGF2SXRlbVsnaW52ZW50b3J5SXRlbS5pZCddLAogICAgICAgICAgICAnYmluTG9jYXRpb24uaWQnOiBhdkl0ZW1bJ2JpbkxvY2F0aW9uLmlkJ10gfHwgJycsCiAgICAgICAgICAgIHF1YW50aXR5UGlja2VkOiBfLmlzTmlsKGF2SXRlbS5xdWFudGl0eVBpY2tlZCkgPyAnJyA6IGF2SXRlbS5xdWFudGl0eVBpY2tlZAogICAgICAgICAgfTsKICAgICAgICB9KSwKICAgICAgICByZWFzb25Db2RlOiB2YWx1ZXMucmVhc29uQ29kZS52YWx1ZSB8fCAnJwogICAgICB9OwogICAgICBhcGlDbGllbnQucG9zdChwaWNrbGlzdFVybCwgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgYXBpQ2xpZW50LmdldChpdGVtc1VybCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgdmFyIHBpY2tQYWdlSXRlbSA9IHJlc3AuZGF0YS5kYXRhOwogICAgICAgICAgX3RoaXMyLnN0YXRlLmF0dHIub25SZXNwb25zZShwaWNrUGFnZUl0ZW0pOwogICAgICAgICAgX3RoaXMyLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdW1zIHVwIHF1YW50aXR5IHBpY2tlZCBmcm9tIGFsbCBhdmFpbGFibGUgaXRlbXMuCiAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVzCiAgICAgKiBAcHVibGljCiAgICAgKi8KICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovCiAgfSwgewogICAga2V5OiAiY2FsY3VsYXRlUGlja2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGVQaWNrZWQodmFsdWVzKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJmb250LXdlaWdodC1ib2xkIHBiLTIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgIGlkOiAicmVhY3Quc3RvY2tNb3ZlbWVudC5xdWFudGl0eVBpY2tlZC5sYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJRdHkgUGlja2VkIgogICAgICB9KSwgIjogIiwgXy5yZWR1Y2UodmFsdWVzLmF2YWlsYWJsZUl0ZW1zLCBmdW5jdGlvbiAoc3VtLCB2YWwpIHsKICAgICAgICByZXR1cm4gc3VtICsgKHZhbC5xdWFudGl0eVBpY2tlZCA/IF8udG9JbnRlZ2VyKHZhbC5xdWFudGl0eVBpY2tlZCkgOiAwKTsKICAgICAgfSwgMCkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaHIiLCBudWxsKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hQaWNrUGFnZUl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoUGlja1BhZ2VJdGVtKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIGl0ZW1zVXJsID0gIi9vcGVuYm94ZXMvYXBpL3N0b2NrTW92ZW1lbnRJdGVtcy8iLmNvbmNhdCh0aGlzLnN0YXRlLmF0dHIuaXRlbUlkLCAiL2RldGFpbHM/c3RlcE51bWJlcj00Iik7CiAgICAgIGFwaUNsaWVudC5nZXQoaXRlbXNVcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICB2YXIgX3BpY2tQYWdlSXRlbSRwcm9kdWN0LCBfcGlja1BhZ2VJdGVtJHByb2R1Y3QyOwogICAgICAgIHZhciBwaWNrUGFnZUl0ZW0gPSByZXNwLmRhdGEuZGF0YTsKICAgICAgICB2YXIgYXZhaWxhYmxlSXRlbXMgPSBfLm1hcChwaWNrUGFnZUl0ZW0uYXZhaWxhYmxlSXRlbXMsIGZ1bmN0aW9uIChhdkl0ZW0pIHsKICAgICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgcGlja2xpc3QgaXRlbSBhbHJlYWR5IGV4aXN0cwogICAgICAgICAgdmFyIHBpY2tsaXN0SXRlbSA9IF8uZmluZChwaWNrUGFnZUl0ZW0ucGlja2xpc3RJdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW1bJ2ludmVudG9yeUl0ZW0uaWQnXSA9PT0gYXZJdGVtWydpbnZlbnRvcnlJdGVtLmlkJ10gJiYgaXRlbVsnYmluTG9jYXRpb24uaWQnXSA9PT0gYXZJdGVtWydiaW5Mb2NhdGlvbi5pZCddOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocGlja2xpc3RJdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGF2SXRlbSksIHt9LCB7CiAgICAgICAgICAgICAgaWQ6IHBpY2tsaXN0SXRlbS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eVBpY2tlZDogcGlja2xpc3RJdGVtLnF1YW50aXR5UGlja2VkLAogICAgICAgICAgICAgIGJpbkxvY2F0aW9uOiB7CiAgICAgICAgICAgICAgICBpZDogcGlja2xpc3RJdGVtWydiaW5Mb2NhdGlvbi5pZCddLAogICAgICAgICAgICAgICAgbmFtZTogcGlja2xpc3RJdGVtWydiaW5Mb2NhdGlvbi5uYW1lJ10sCiAgICAgICAgICAgICAgICB6b25lTmFtZTogcGlja2xpc3RJdGVtWydiaW5Mb2NhdGlvbi56b25lTmFtZSddCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGF2SXRlbSksIHt9LCB7CiAgICAgICAgICAgIGJpbkxvY2F0aW9uOiB7CiAgICAgICAgICAgICAgaWQ6IGF2SXRlbVsnYmluTG9jYXRpb24uaWQnXSwKICAgICAgICAgICAgICBuYW1lOiBhdkl0ZW1bJ2JpbkxvY2F0aW9uLm5hbWUnXSwKICAgICAgICAgICAgICB6b25lTmFtZTogYXZJdGVtWydiaW5Mb2NhdGlvbi56b25lTmFtZSddCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7CiAgICAgICAgICBmb3JtVmFsdWVzOiB7CiAgICAgICAgICAgIGF2YWlsYWJsZUl0ZW1zOiBhdmFpbGFibGVJdGVtcywKICAgICAgICAgICAgcmVhc29uQ29kZTogJycsCiAgICAgICAgICAgIHF1YW50aXR5UmVxdWlyZWQ6IHBpY2tQYWdlSXRlbS5xdWFudGl0eVJlcXVpcmVkLAogICAgICAgICAgICBwcm9kdWN0Q29kZTogcGlja1BhZ2VJdGVtLnByb2R1Y3RDb2RlLAogICAgICAgICAgICBwcm9kdWN0TmFtZTogcGlja1BhZ2VJdGVtLnByb2R1Y3QubmFtZSwKICAgICAgICAgICAgZGlzcGxheU5hbWU6IChfcGlja1BhZ2VJdGVtJHByb2R1Y3QgPSBwaWNrUGFnZUl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX3BpY2tQYWdlSXRlbSRwcm9kdWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BpY2tQYWdlSXRlbSRwcm9kdWN0MiA9IF9waWNrUGFnZUl0ZW0kcHJvZHVjdC5kaXNwbGF5TmFtZXMpID09PSBudWxsIHx8IF9waWNrUGFnZUl0ZW0kcHJvZHVjdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9waWNrUGFnZUl0ZW0kcHJvZHVjdDJbImRlZmF1bHQiXQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIF90aGlzMy5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUkZm9ybVZhbHVlOwogICAgICBpZiAodGhpcy5zdGF0ZS5hdHRyLnN1YmZpZWxkKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1vZGFsV3JhcHBlciwgX2V4dGVuZHMoe30sIHRoaXMuc3RhdGUuYXR0ciwgewogICAgICAgIG9uT3BlbjogdGhpcy5vbk9wZW4sCiAgICAgICAgb25TYXZlOiB0aGlzLm9uU2F2ZSwKICAgICAgICBmaWVsZHM6IEZJRUxEUywKICAgICAgICB2YWxpZGF0ZTogdmFsaWRhdGUsCiAgICAgICAgaW5pdGlhbFZhbHVlczogdGhpcy5zdGF0ZS5mb3JtVmFsdWVzLAogICAgICAgIGZvcm1Qcm9wczogewogICAgICAgICAgcmVhc29uQ29kZXM6IHRoaXMuc3RhdGUuYXR0ci5yZWFzb25Db2RlcywKICAgICAgICAgIGhhc0JpbkxvY2F0aW9uU3VwcG9ydDogdGhpcy5wcm9wcy5oYXNCaW5Mb2NhdGlvblN1cHBvcnQsCiAgICAgICAgICB0cmFuc2xhdGU6IHRoaXMucHJvcHMudHJhbnNsYXRlCiAgICAgICAgfSwKICAgICAgICByZW5kZXJCb2R5V2l0aFZhbHVlczogdGhpcy5jYWxjdWxhdGVQaWNrZWQKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImZvbnQtd2VpZ2h0LWJvbGQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgIGlkOiAicmVhY3Quc3RvY2tNb3ZlbWVudC5wcm9kdWN0Q29kZS5sYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJQcm9kdWN0IGNvZGUiCiAgICAgIH0pLCAiOiAiLCB0aGlzLnN0YXRlLmZvcm1WYWx1ZXMucHJvZHVjdENvZGUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImZvbnQtd2VpZ2h0LWJvbGQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgICAgICBodG1sOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgY2xhc3NOYW1lOiAidGV4dC10cnVuY2F0ZSIKICAgICAgICB9LCB0aGlzLnN0YXRlLmZvcm1WYWx1ZXMucHJvZHVjdE5hbWUpLAogICAgICAgIHRoZW1lOiAiZGFyayIsCiAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLmZvcm1WYWx1ZXMuZGlzcGxheU5hbWUsCiAgICAgICAgcG9zaXRpb246ICJ0b3Atc3RhcnQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgIGNsYXNzTmFtZTogImQtZmxleCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja01vdmVtZW50LnByb2R1Y3ROYW1lLmxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlByb2R1Y3QgbmFtZSIKICAgICAgfSksICI6IiwgJyAnLCAoX3RoaXMkc3RhdGUkZm9ybVZhbHVlID0gdGhpcy5zdGF0ZS5mb3JtVmFsdWVzLmRpc3BsYXlOYW1lKSAhPT0gbnVsbCAmJiBfdGhpcyRzdGF0ZSRmb3JtVmFsdWUgIT09IHZvaWQgMCA/IF90aGlzJHN0YXRlJGZvcm1WYWx1ZSA6IHRoaXMuc3RhdGUuZm9ybVZhbHVlcy5wcm9kdWN0TmFtZSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJmb250LXdlaWdodC1ib2xkIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICBpZDogInJlYWN0LnN0b2NrTW92ZW1lbnQucXVhbnRpdHlSZXF1aXJlZC5sYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJRdHkgUmVxdWlyZWQiCiAgICAgIH0pLCAiOiAiLCB0aGlzLnN0YXRlLmZvcm1WYWx1ZXMucXVhbnRpdHlSZXF1aXJlZCkpKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEVkaXRQaWNrTW9kYWw7Cn0oQ29tcG9uZW50KTsKdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkgewogIHJldHVybiB7CiAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZShnZXRUcmFuc2xhdGUoc3RhdGUubG9jYWxpemUpKQogIH07Cn07CmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCB7CiAgc2hvd1NwaW5uZXI6IHNob3dTcGlubmVyLAogIGhpZGVTcGlubmVyOiBoaWRlU3Bpbm5lcgp9KShFZGl0UGlja01vZGFsKTsKRWRpdFBpY2tNb2RhbC5wcm9wVHlwZXMgPSB7CiAgLyoqIE5hbWUgb2YgdGhlIGZpZWxkICovCiAgZmllbGROYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCiAgLyoqIENvbmZpZ3VyYXRpb24gb2YgdGhlIGZpZWxkICovCiAgZmllbGRDb25maWc6IFByb3BUeXBlcy5zaGFwZSh7CiAgICBnZXREeW5hbWljQXR0cjogUHJvcFR5cGVzLmZ1bmMKICB9KS5pc1JlcXVpcmVkLAogIC8qKiBGdW5jdGlvbiBjYWxsZWQgd2hlbiBkYXRhIGlzIGxvYWRpbmcgKi8KICBzaG93U3Bpbm5lcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICAvKiogRnVuY3Rpb24gY2FsbGVkIHdoZW4gZGF0YSBoYXMgbG9hZGVkICovCiAgaGlkZVNwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqIElzIHRydWUgd2hlbiBjdXJyZW50bHkgc2VsZWN0ZWQgbG9jYXRpb24gc3VwcG9ydHMgYmlucyAqLwogIGhhc0JpbkxvY2F0aW9uU3VwcG9ydDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCwKICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQKfTs="},null]}