{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/locations-configuration/LocationDetails.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/locations-configuration/LocationDetails.jsx","mtime":1698037748000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9pID0gbnVsbCA9PSBhcnIgPyBudWxsIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbIkBAaXRlcmF0b3IiXTsgaWYgKG51bGwgIT0gX2kpIHsgdmFyIF9zLCBfZSwgX3gsIF9yLCBfYXJyID0gW10sIF9uID0gITAsIF9kID0gITE7IHRyeSB7IGlmIChfeCA9IChfaSA9IF9pLmNhbGwoYXJyKSkubmV4dCwgMCA9PT0gaSkgeyBpZiAoT2JqZWN0KF9pKSAhPT0gX2kpIHJldHVybjsgX24gPSAhMTsgfSBlbHNlIGZvciAoOyAhKF9uID0gKF9zID0gX3guY2FsbChfaSkpLmRvbmUpICYmIChfYXJyLnB1c2goX3MudmFsdWUpLCBfYXJyLmxlbmd0aCAhPT0gaSk7IF9uID0gITApIHsgOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9ICEwLCBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBudWxsICE9IF9pWyJyZXR1cm4iXSAmJiAoX3IgPSBfaVsicmV0dXJuIl0oKSwgT2JqZWN0KF9yKSAhPT0gX3IpKSByZXR1cm47IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSB9CmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgInByb3RvdHlwZSIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQpmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHsgdmFyIGtleSA9IF90b1ByaW1pdGl2ZShhcmcsICJzdHJpbmciKTsgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gInN5bWJvbCIgPyBrZXkgOiBTdHJpbmcoa2V5KTsgfQpmdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHsgaWYgKF90eXBlb2YoaW5wdXQpICE9PSAib2JqZWN0IiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0OyB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCAiZGVmYXVsdCIpOyBpZiAoX3R5cGVvZihyZXMpICE9PSAib2JqZWN0IikgcmV0dXJuIHJlczsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKTsgfSByZXR1cm4gKGhpbnQgPT09ICJzdHJpbmciID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7IH0KaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IHsgRm9ybSB9IGZyb20gJ3JlYWN0LWZpbmFsLWZvcm0nOwppbXBvcnQgeyBnZXRUcmFuc2xhdGUgfSBmcm9tICdyZWFjdC1sb2NhbGl6ZS1yZWR1eCc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IEFsZXJ0IGZyb20gJ3JlYWN0LXMtYWxlcnQnOwppbXBvcnQgeyBmZXRjaFVzZXJzLCBoaWRlU3Bpbm5lciwgc2hvd1NwaW5uZXIgfSBmcm9tICdhY3Rpb25zJzsKaW1wb3J0IENoZWNrYm94RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0NoZWNrYm94RmllbGQnOwppbXBvcnQgQ29sb3JQaWNrZXJGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvQ29sb3JQaWNrZXJGaWVsZCc7CmltcG9ydCBGaWxlRmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0ZpbGVGaWVsZCc7CmltcG9ydCBTZWxlY3RGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvU2VsZWN0RmllbGQnOwppbXBvcnQgVGV4dEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9UZXh0RmllbGQnOwppbXBvcnQgQWRkTG9jYXRpb25Hcm91cE1vZGFsIGZyb20gJ2NvbXBvbmVudHMvbG9jYXRpb25zLWNvbmZpZ3VyYXRpb24vbW9kYWxzL0FkZExvY2F0aW9uR3JvdXBNb2RhbCc7CmltcG9ydCBBZGRPcmdhbml6YXRpb25Nb2RhbCBmcm9tICdjb21wb25lbnRzL2xvY2F0aW9ucy1jb25maWd1cmF0aW9uL21vZGFscy9BZGRPcmdhbml6YXRpb25Nb2RhbCc7CmltcG9ydCBBY3Rpdml0eUNvZGUgZnJvbSAnY29uc3RzL2FjdGl2aXR5Q29kZSc7CmltcG9ydCBhcGlDbGllbnQgZnJvbSAndXRpbHMvYXBpQ2xpZW50JzsKaW1wb3J0IENoZWNrYm94IGZyb20gJ3V0aWxzL0NoZWNrYm94JzsKaW1wb3J0IHsgY29udmVydFRvQmFzZTY0IH0gZnJvbSAndXRpbHMvZmlsZS11dGlscyc7CmltcG9ydCB7IHJlbmRlckZvcm1GaWVsZCB9IGZyb20gJ3V0aWxzL2Zvcm0tdXRpbHMnOwppbXBvcnQgeyBkZWJvdW5jZUxvY2F0aW9uR3JvdXBzRmV0Y2gsIGRlYm91bmNlT3JnYW5pemF0aW9uc0ZldGNoLCBkZWJvdW5jZVBlb3BsZUZldGNoIH0gZnJvbSAndXRpbHMvb3B0aW9uLXV0aWxzJzsKaW1wb3J0IFRyYW5zbGF0ZSwgeyB0cmFuc2xhdGVXaXRoRGVmYXVsdE1lc3NhZ2UgfSBmcm9tICd1dGlscy9UcmFuc2xhdGUnOwppbXBvcnQgc3BsaXRUcmFuc2xhdGlvbiBmcm9tICd1dGlscy90cmFuc2xhdGlvbi11dGlscyc7CmltcG9ydCAncmVhY3QtY29uZmlybS1hbGVydC9zcmMvcmVhY3QtY29uZmlybS1hbGVydC5jc3MnOwppbXBvcnQgJ2NvbXBvbmVudHMvbG9jYXRpb25zLWNvbmZpZ3VyYXRpb24vTG9jYXRpb25EZXRhaWxzLnNjc3MnOwpmdW5jdGlvbiB2YWxpZGF0ZSh2YWx1ZXMpIHsKICB2YXIgX3ZhbHVlcyRzdXBwb3J0ZWRBY3RpLCBfdmFsdWVzJHN1cHBvcnRlZEFjdGkyOwogIHZhciBlcnJvcnMgPSB7fTsKICBpZiAoIXZhbHVlcy5uYW1lKSB7CiAgICBlcnJvcnMubmFtZSA9ICdyZWFjdC5kZWZhdWx0LmVycm9yLnJlcXVpcmVkRmllbGQubGFiZWwnOwogIH0KICBpZiAoIXZhbHVlcy5vcmdhbml6YXRpb24pIHsKICAgIGVycm9ycy5vcmdhbml6YXRpb24gPSAncmVhY3QuZGVmYXVsdC5lcnJvci5yZXF1aXJlZEZpZWxkLmxhYmVsJzsKICB9CiAgaWYgKCF2YWx1ZXMubG9jYXRpb25UeXBlKSB7CiAgICBlcnJvcnMubG9jYXRpb25UeXBlID0gJ3JlYWN0LmRlZmF1bHQuZXJyb3IucmVxdWlyZWRGaWVsZC5sYWJlbCc7CiAgfQoKICAvLyBEb24ndCBhbGxvdyBoYXZpbmcgTk9ORSBzdXBwb3J0ZWQgYWN0aXZpdHkgaW4gY29tYmluYXRpb24gd2l0aCBhbnkgb3RoZXIgc3VwcG9ydGVkIGFjdGl2aXR5CiAgaWYgKCgoX3ZhbHVlcyRzdXBwb3J0ZWRBY3RpID0gdmFsdWVzLnN1cHBvcnRlZEFjdGl2aXRpZXMpID09PSBudWxsIHx8IF92YWx1ZXMkc3VwcG9ydGVkQWN0aSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRzdXBwb3J0ZWRBY3RpLmxlbmd0aCkgPiAxICYmIChfdmFsdWVzJHN1cHBvcnRlZEFjdGkyID0gdmFsdWVzLnN1cHBvcnRlZEFjdGl2aXRpZXMpICE9PSBudWxsICYmIF92YWx1ZXMkc3VwcG9ydGVkQWN0aTIgIT09IHZvaWQgMCAmJiBfdmFsdWVzJHN1cHBvcnRlZEFjdGkyLmZpbmQoZnVuY3Rpb24gKGFjdGl2aXR5KSB7CiAgICByZXR1cm4gYWN0aXZpdHkudmFsdWUgPT09IEFjdGl2aXR5Q29kZS5OT05FOwogIH0pKSB7CiAgICBlcnJvcnMuc3VwcG9ydGVkQWN0aXZpdGllcyA9ICdyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLmVycm9yLnN1cHBvcnRlZEFjdGl2aXRpZXMubGFiZWwnOwogIH0KICByZXR1cm4gZXJyb3JzOwp9CnZhciBGSUVMRFMgPSB7CiAgYWN0aXZlOiB7CiAgICB0eXBlOiBDaGVja2JveEZpZWxkLAogICAgbGFiZWw6ICdyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLmxvY2F0aW9uU3RhdHVzLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnTG9jYXRpb24gU3RhdHVzJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgd2l0aExhYmVsOiB0cnVlLAogICAgICBsYWJlbDogJ0FjdGl2ZScKICAgIH0KICB9LAogIG5hbWU6IHsKICAgIHR5cGU6IFRleHRGaWVsZCwKICAgIGxhYmVsOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5uYW1lLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnTmFtZScsCiAgICBhdHRyaWJ1dGVzOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICB3aXRoVG9vbHRpcDogdHJ1ZSwKICAgICAgdG9vbHRpcDogJ3JlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24ubmFtZS50b29sdGlwLmxhYmVsJwogICAgfQogIH0sCiAgbG9jYXRpb25OdW1iZXI6IHsKICAgIHR5cGU6IFRleHRGaWVsZCwKICAgIGxhYmVsOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5sb2NhdGlvbk51bWJlci5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0xvY2F0aW9uIE51bWJlcicsCiAgICBhdHRyaWJ1dGVzOiB7CiAgICAgIHdpdGhUb29sdGlwOiB0cnVlLAogICAgICB0b29sdGlwOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5sb2NhdGlvbk51bWJlci50b29sdGlwLmxhYmVsJwogICAgfQogIH0sCiAgb3JnYW5pemF0aW9uOiB7CiAgICB0eXBlOiBTZWxlY3RGaWVsZCwKICAgIGxhYmVsOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5vcmdhbml6YXRpb24ubGFiZWwnLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdPcmdhbml6YXRpb24nLAogICAgYXR0cmlidXRlczogewogICAgICBjcmVhdGVOZXdGcm9tTW9kYWw6IHRydWUsCiAgICAgIGNyZWF0ZU5ld0Zyb21Nb2RhbExhYmVsOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5vcmdhbml6YXRpb25Nb2RhbC50aXRsZS5sYWJlbCcsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWRkIG5ldyBPcmdhbml6YXRpb24nLAogICAgICBhc3luYzogdHJ1ZSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHNob3dWYWx1ZVRvb2x0aXA6IHRydWUsCiAgICAgIG9wZW5PbkNsaWNrOiBmYWxzZSwKICAgICAgYXV0b2xvYWQ6IGZhbHNlLAogICAgICBjYWNoZTogZmFsc2UsCiAgICAgIHdpdGhUb29sdGlwOiB0cnVlLAogICAgICB0b29sdGlwOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5vcmdhbml6YXRpb24udG9vbHRpcC5sYWJlbCcsCiAgICAgIG9wdGlvbnM6IFtdLAogICAgICBmaWx0ZXJPcHRpb25zOiBmdW5jdGlvbiBmaWx0ZXJPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgICByZXR1cm4gb3B0aW9uczsKICAgICAgfQogICAgfSwKICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmKSB7CiAgICAgIHZhciBkZWJvdW5jZWRPcmdhbml6YXRpb25zRmV0Y2ggPSBfcmVmLmRlYm91bmNlZE9yZ2FuaXphdGlvbnNGZXRjaCwKICAgICAgICBvcGVuTmV3T3JnYW5pemF0aW9uTW9kYWwgPSBfcmVmLm9wZW5OZXdPcmdhbml6YXRpb25Nb2RhbCwKICAgICAgICBpbmplY3Rpb25EYXRhID0gX3JlZi5pbmplY3Rpb25EYXRhOwogICAgICByZXR1cm4gewogICAgICAgIGxvYWRPcHRpb25zOiBkZWJvdW5jZWRPcmdhbml6YXRpb25zRmV0Y2gsCiAgICAgICAgbmV3T3B0aW9uTW9kYWxPcGVuOiBvcGVuTmV3T3JnYW5pemF0aW9uTW9kYWwsCiAgICAgICAgaW5qZWN0aW9uRGF0YTogaW5qZWN0aW9uRGF0YQogICAgICB9OwogICAgfQogIH0sCiAgbG9jYXRpb25Hcm91cDogewogICAgdHlwZTogU2VsZWN0RmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24ubG9jYXRpb25Hcm91cC5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0xvY2F0aW9uIEdyb3VwJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgY3JlYXRlTmV3RnJvbU1vZGFsOiB0cnVlLAogICAgICBjcmVhdGVOZXdGcm9tTW9kYWxMYWJlbDogJ3JlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24ubG9jYXRpb25Hcm91cC5sb2NhdGlvbk1vZGFsLnRpdGxlLmxhYmVsJywKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBZGQgbmV3IExvY2F0aW9uIEdyb3VwJywKICAgICAgYXN5bmM6IHRydWUsCiAgICAgIHNob3dWYWx1ZVRvb2x0aXA6IHRydWUsCiAgICAgIG9wZW5PbkNsaWNrOiBmYWxzZSwKICAgICAgYXV0b2xvYWQ6IGZhbHNlLAogICAgICBjYWNoZTogZmFsc2UsCiAgICAgIHdpdGhUb29sdGlwOiB0cnVlLAogICAgICB0b29sdGlwOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5sb2NhdGlvbkdyb3VwLnRvb2x0aXAubGFiZWwnLAogICAgICBvcHRpb25zOiBbXSwKICAgICAgZmlsdGVyT3B0aW9uczogZnVuY3Rpb24gZmlsdGVyT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICAgIH0KICAgIH0sCiAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjIpIHsKICAgICAgdmFyIGRlYm91bmNlZExvY2F0aW9uR3JvdXBzRmV0Y2ggPSBfcmVmMi5kZWJvdW5jZWRMb2NhdGlvbkdyb3Vwc0ZldGNoLAogICAgICAgIG9wZW5OZXdMb2NhdGlvbkdyb3VwTW9kYWwgPSBfcmVmMi5vcGVuTmV3TG9jYXRpb25Hcm91cE1vZGFsOwogICAgICByZXR1cm4gewogICAgICAgIGxvYWRPcHRpb25zOiBkZWJvdW5jZWRMb2NhdGlvbkdyb3Vwc0ZldGNoLAogICAgICAgIG5ld09wdGlvbk1vZGFsT3Blbjogb3Blbk5ld0xvY2F0aW9uR3JvdXBNb2RhbAogICAgICB9OwogICAgfQogIH0sCiAgbWFuYWdlcjogewogICAgdHlwZTogU2VsZWN0RmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24ubWFuYWdlci5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ01hbmFnZXInLAogICAgYXR0cmlidXRlczogewogICAgICBhc3luYzogdHJ1ZSwKICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZSwKICAgICAgb3Blbk9uQ2xpY2s6IGZhbHNlLAogICAgICBhdXRvbG9hZDogZmFsc2UsCiAgICAgIGNhY2hlOiBmYWxzZSwKICAgICAgb3B0aW9uczogW10sCiAgICAgIGxhYmVsS2V5OiAnbmFtZScsCiAgICAgIGZpbHRlck9wdGlvbnM6IGZ1bmN0aW9uIGZpbHRlck9wdGlvbnMob3B0aW9ucykgewogICAgICAgIHJldHVybiBvcHRpb25zOwogICAgICB9CiAgICB9LAogICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYzKSB7CiAgICAgIHZhciBkZWJvdW5jZWRQZW9wbGVGZXRjaCA9IF9yZWYzLmRlYm91bmNlZFBlb3BsZUZldGNoOwogICAgICByZXR1cm4gewogICAgICAgIGxvYWRPcHRpb25zOiBkZWJvdW5jZWRQZW9wbGVGZXRjaAogICAgICB9OwogICAgfQogIH0KfTsKdmFyIFNUWUxFX0ZJRUxEUyA9IHsKICBsb2dvRmlsZTogewogICAgdHlwZTogRmlsZUZpZWxkLAogICAgbGFiZWw6ICdyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLmxvY2F0aW9uTG9nby5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ1VwbG9hZCBMb2dvJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgd2l0aFRvb2x0aXA6IHRydWUsCiAgICAgIHRvb2x0aXA6ICdyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLmxvY2F0aW9uTG9nby50b29sdGlwLmxhYmVsJwogICAgfQogIH0sCiAgYmdDb2xvcjogewogICAgdHlwZTogQ29sb3JQaWNrZXJGaWVsZCwKICAgIGxhYmVsOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5iYWNrZ3JvdW5kQ29sb3IubGFiZWwnLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdCYWNrZ3JvdW5kIGNvbG9yJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgd2l0aFRvb2x0aXA6IHRydWUsCiAgICAgIHRvb2x0aXA6ICdyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLmNvbG9yLnRvb2x0aXAubGFiZWwnCiAgICB9CiAgfSwKICBmZ0NvbG9yOiB7CiAgICB0eXBlOiBDb2xvclBpY2tlckZpZWxkLAogICAgbGFiZWw6ICdyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLmZvcmVncm91bmRDb2xvci5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0ZvcmVncm91bmQgY29sb3InLAogICAgYXR0cmlidXRlczogewogICAgICB3aXRoVG9vbHRpcDogdHJ1ZSwKICAgICAgdG9vbHRpcDogJ3JlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24uY29sb3IudG9vbHRpcC5sYWJlbCcKICAgIH0KICB9Cn07CnZhciBMb2NhdGlvbkRldGFpbHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoTG9jYXRpb25EZXRhaWxzLCBfQ29tcG9uZW50KTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKExvY2F0aW9uRGV0YWlscyk7CiAgZnVuY3Rpb24gTG9jYXRpb25EZXRhaWxzKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9jYXRpb25EZXRhaWxzKTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZGF0YUZldGNoZWQiLCBmYWxzZSk7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgc2hvd09yZ2FuaXphdGlvbk1vZGFsOiBmYWxzZSwKICAgICAgc2hvd0xvY2F0aW9uR3JvdXBNb2RhbDogZmFsc2UsCiAgICAgIHZhbHVlczogX3RoaXMucHJvcHMuaW5pdGlhbFZhbHVlcywKICAgICAgdXNlRGVmYXVsdEFjdGl2aXRpZXM6IF90aGlzLnByb3BzLmluaXRpYWxWYWx1ZXMudXNlRGVmYXVsdEFjdGl2aXRpZXMgIT09IGZhbHNlLAogICAgICBsb2NhdGlvblR5cGVzOiBbXSwKICAgICAgc3VwcG9ydGVkQWN0aXZpdGllczogW10sCiAgICAgIHN1cHBvcnRMaW5rczoge30KICAgIH07CiAgICBfdGhpcy5vcGVuTmV3T3JnYW5pemF0aW9uTW9kYWwgPSBfdGhpcy5vcGVuTmV3T3JnYW5pemF0aW9uTW9kYWwuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy5vcGVuTmV3TG9jYXRpb25Hcm91cE1vZGFsID0gX3RoaXMub3Blbk5ld0xvY2F0aW9uR3JvdXBNb2RhbC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLmRlYm91bmNlZFBlb3BsZUZldGNoID0gZGVib3VuY2VQZW9wbGVGZXRjaChfdGhpcy5wcm9wcy5kZWJvdW5jZVRpbWUsIF90aGlzLnByb3BzLm1pblNlYXJjaExlbmd0aCk7CiAgICBfdGhpcy5kZWJvdW5jZWRMb2NhdGlvbkdyb3Vwc0ZldGNoID0gZGVib3VuY2VMb2NhdGlvbkdyb3Vwc0ZldGNoKF90aGlzLnByb3BzLmRlYm91bmNlVGltZSwgX3RoaXMucHJvcHMubWluU2VhcmNoTGVuZ3RoKTsKICAgIF90aGlzLmRlYm91bmNlZE9yZ2FuaXphdGlvbnNGZXRjaCA9IGRlYm91bmNlT3JnYW5pemF0aW9uc0ZldGNoKF90aGlzLnByb3BzLmRlYm91bmNlVGltZSwgX3RoaXMucHJvcHMubWluU2VhcmNoTGVuZ3RoLCBbXSwgdHJ1ZSk7CiAgICBfdGhpcy5nZXRTdXBwb3J0TGlua3MgPSBfdGhpcy5nZXRTdXBwb3J0TGlua3MuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhMb2NhdGlvbkRldGFpbHMsIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMuc2V0SW5pdGlhbFZhbHVlcygpOwogICAgICB0aGlzLmZldGNoTG9jYXRpb25UeXBlcygpOwogICAgICB0aGlzLmdldFN1cHBvcnRMaW5rcygpOwogICAgICBpZiAodGhpcy5wcm9wcy5sb2NDb25mVHJhbnNsYXRpb25zRmV0Y2hlZCkgewogICAgICAgIHRoaXMuZGF0YUZldGNoZWQgPSB0cnVlOwogICAgICAgIHRoaXMuZmV0Y2hTdXBwb3J0ZWRBY3Rpdml0aWVzKCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmxvY2F0aW9uSWQpIHsKICAgICAgICB0aGlzLmZldGNoTG9jYXRpb24oKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgIGlmICghdGhpcy5kYXRhRmV0Y2hlZCAmJiBuZXh0UHJvcHMubG9jQ29uZlRyYW5zbGF0aW9uc0ZldGNoZWQpIHsKICAgICAgICB0aGlzLmRhdGFGZXRjaGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLmZldGNoU3VwcG9ydGVkQWN0aXZpdGllcygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0SW5pdGlhbFZhbHVlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SW5pdGlhbFZhbHVlcygpIHsKICAgICAgaWYgKF8uaXNFbXB0eSh0aGlzLnByb3BzLmluaXRpYWxWYWx1ZXMpKSB7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgYWN0aXZlOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcwogIH0sIHsKICAgIGtleTogImdldFN1cHBvcnRMaW5rcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3VwcG9ydExpbmtzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHVybCA9ICcvb3BlbmJveGVzL2FwaS9zdXBwb3J0TGlua3MnOwogICAgICBhcGlDbGllbnQuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgc3VwcG9ydExpbmtzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICBzdXBwb3J0TGlua3M6IHN1cHBvcnRMaW5rcwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTdXBwb3J0ZWRBY3Rpdml0aWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdXBwb3J0ZWRBY3Rpdml0aWVzKGxvY2F0aW9uVHlwZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF8uY2hhaW4obG9jYXRpb25UeXBlKS5nZXQoJ3N1cHBvcnRlZEFjdGl2aXRpZXMnKS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgIGxhYmVsOiBfdGhpczMucHJvcHMudHJhbnNsYXRlKCJyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLkFjdGl2aXR5Q29kZS4iLmNvbmNhdCh2YWx1ZSksIHZhbHVlKQogICAgICAgIH07CiAgICAgIH0pLnZhbHVlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hMb2NhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hMb2NhdGlvbigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvbG9jYXRpb25zLyIuY29uY2F0KHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmxvY2F0aW9uSWQpOwogICAgICBhcGlDbGllbnQuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgbG9jYXRpb24gPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgaWYgKCFsb2NhdGlvbikgewogICAgICAgICAgX3RoaXM0LnByb3BzLmhpc3RvcnkucHVzaCgnL29wZW5ib3hlcy9sb2NhdGlvbnNDb25maWd1cmF0aW9uL2NyZWF0ZScpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBfdGhpczQuc2V0U3RhdGUoewogICAgICAgICAgdmFsdWVzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXM0LnN0YXRlLnZhbHVlcyksIHt9LCB7CiAgICAgICAgICAgIGxvY2F0aW9uSWQ6IF90aGlzNC5wcm9wcy5tYXRjaC5wYXJhbXMubG9jYXRpb25JZAogICAgICAgICAgfSwgbG9jYXRpb24pLCB7fSwgewogICAgICAgICAgICBsb2NhdGlvbkdyb3VwOiBsb2NhdGlvbi5sb2NhdGlvbkdyb3VwID8gewogICAgICAgICAgICAgIHZhbHVlOiBsb2NhdGlvbi5sb2NhdGlvbkdyb3VwLmlkLAogICAgICAgICAgICAgIGlkOiBsb2NhdGlvbi5sb2NhdGlvbkdyb3VwLmlkLAogICAgICAgICAgICAgIG5hbWU6IGxvY2F0aW9uLmxvY2F0aW9uR3JvdXAubmFtZSwKICAgICAgICAgICAgICBsYWJlbDogbG9jYXRpb24ubG9jYXRpb25Hcm91cC5uYW1lCiAgICAgICAgICAgIH0gOiAnJywKICAgICAgICAgICAgbWFuYWdlcjogbG9jYXRpb24ubWFuYWdlciA/IGxvY2F0aW9uLm1hbmFnZXIgOiAnJywKICAgICAgICAgICAgbG9jYXRpb25UeXBlOiBsb2NhdGlvbi5sb2NhdGlvblR5cGUgPyB7CiAgICAgICAgICAgICAgdmFsdWU6IGxvY2F0aW9uLmxvY2F0aW9uVHlwZS5pZCwKICAgICAgICAgICAgICBpZDogbG9jYXRpb24ubG9jYXRpb25UeXBlLmlkLAogICAgICAgICAgICAgIG5hbWU6IGxvY2F0aW9uLmxvY2F0aW9uVHlwZS5uYW1lLAogICAgICAgICAgICAgIGxhYmVsOiBzcGxpdFRyYW5zbGF0aW9uKGxvY2F0aW9uLmxvY2F0aW9uVHlwZS5uYW1lLCBfdGhpczQucHJvcHMubG9jYWxlKQogICAgICAgICAgICB9IDogJycsCiAgICAgICAgICAgIHN1cHBvcnRlZEFjdGl2aXRpZXM6IF8ubWFwKGxvY2F0aW9uLnN1cHBvcnRlZEFjdGl2aXRpZXMsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBsYWJlbDogX3RoaXM0LnByb3BzLnRyYW5zbGF0ZSgicmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5BY3Rpdml0eUNvZGUuIi5jb25jYXQodmFsdWUpLCB2YWx1ZSkKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgb3JnYW5pemF0aW9uOiB7CiAgICAgICAgICAgICAgdmFsdWU6IGxvY2F0aW9uLm9yZ2FuaXphdGlvbi5pZCwKICAgICAgICAgICAgICBpZDogbG9jYXRpb24ub3JnYW5pemF0aW9uLmlkLAogICAgICAgICAgICAgIG5hbWU6IGxvY2F0aW9uLm9yZ2FuaXphdGlvbi5uYW1lLAogICAgICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQobG9jYXRpb24ub3JnYW5pemF0aW9uLmNvZGUsICIgIikuY29uY2F0KGxvY2F0aW9uLm9yZ2FuaXphdGlvbi5uYW1lKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihfdGhpczQucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLmVycm9yLmZldGNoaW5nTG9jYXRpb24nLCAnQ291bGQgbm90IGxvYWQgbG9jYXRpb24gZGF0YScpKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoTG9jYXRpb25UeXBlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hMb2NhdGlvblR5cGVzKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdmFyIHVybCA9ICcvb3BlbmJveGVzL2FwaS9sb2NhdGlvbnMvbG9jYXRpb25UeXBlcyc7CiAgICAgIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXNwID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgIHZhciBsb2NhdGlvblR5cGVzID0gXy5tYXAocmVzcCwgZnVuY3Rpb24gKGxvY2F0aW9uVHlwZSkgewogICAgICAgICAgdmFyIF8kc3BsaXQgPSBfLnNwbGl0KGxvY2F0aW9uVHlwZS5uYW1lLCAnfGZyOicpLAogICAgICAgICAgICBfJHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF8kc3BsaXQsIDIpLAogICAgICAgICAgICBlbiA9IF8kc3BsaXQyWzBdLAogICAgICAgICAgICBmciA9IF8kc3BsaXQyWzFdOwogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbG9jYXRpb25UeXBlKSwge30sIHsKICAgICAgICAgICAgbGFiZWw6IF90aGlzNS5wcm9wcy5sb2NhbGUgPT09ICdmcicgJiYgZnIgPyBmciA6IGVuCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBpZiAoX3RoaXM1LnN0YXRlLnZhbHVlcy5sb2NhdGlvblR5cGUpIHsKICAgICAgICAgIF90aGlzNS5zZXRTdGF0ZSh7CiAgICAgICAgICAgIGxvY2F0aW9uVHlwZXM6IGxvY2F0aW9uVHlwZXMKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbG9jYXRpb25UeXBlID0gXy5maW5kKGxvY2F0aW9uVHlwZXMsIGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgICAgIHJldHVybiBfLnN0YXJ0c1dpdGgodHlwZS5uYW1lLCAnRGVwb3QnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHN1cHBvcnRlZEFjdGl2aXRpZXMgPSBfdGhpczUuZ2V0U3VwcG9ydGVkQWN0aXZpdGllcyhsb2NhdGlvblR5cGUpOwogICAgICAgICAgX3RoaXM1LnNldFN0YXRlKHsKICAgICAgICAgICAgbG9jYXRpb25UeXBlczogbG9jYXRpb25UeXBlcywKICAgICAgICAgICAgdmFsdWVzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIF90aGlzNS5zdGF0ZS52YWx1ZXMpLCB7fSwgewogICAgICAgICAgICAgIGxvY2F0aW9uVHlwZTogbG9jYXRpb25UeXBlLAogICAgICAgICAgICAgIHN1cHBvcnRlZEFjdGl2aXRpZXM6IHN1cHBvcnRlZEFjdGl2aXRpZXMKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hTdXBwb3J0ZWRBY3Rpdml0aWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaFN1cHBvcnRlZEFjdGl2aXRpZXMoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB2YXIgdXJsID0gJy9vcGVuYm94ZXMvYXBpL2xvY2F0aW9ucy9zdXBwb3J0ZWRBY3Rpdml0aWVzJzsKICAgICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHJlc3AgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgdmFyIHN1cHBvcnRlZEFjdGl2aXRpZXMgPSBfLm1hcChyZXNwLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgbGFiZWw6IF90aGlzNi5wcm9wcy50cmFuc2xhdGUoInJlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24uQWN0aXZpdHlDb2RlLiIuY29uY2F0KHZhbHVlKSwgdmFsdWUpCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIF90aGlzNi5zZXRTdGF0ZSh7CiAgICAgICAgICBzdXBwb3J0ZWRBY3Rpdml0aWVzOiBzdXBwb3J0ZWRBY3Rpdml0aWVzCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW5OZXdPcmdhbml6YXRpb25Nb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3Blbk5ld09yZ2FuaXphdGlvbk1vZGFsKCkgewogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBzaG93T3JnYW5pemF0aW9uTW9kYWw6IHRydWUKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib3Blbk5ld0xvY2F0aW9uR3JvdXBNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3Blbk5ld0xvY2F0aW9uR3JvdXBNb2RhbCgpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc2hvd0xvY2F0aW9uR3JvdXBNb2RhbDogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlTG9jYXRpb25EZXRhaWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlTG9jYXRpb25EZXRhaWxzKHZhbHVlcykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgaWYgKHZhbHVlcy5uYW1lICYmIHZhbHVlcy5vcmdhbml6YXRpb24pIHsKICAgICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgICAgdmFyIGxvY2F0aW9uVXJsID0gJyc7CiAgICAgICAgaWYgKHZhbHVlcy5sb2NhdGlvbklkKSB7CiAgICAgICAgICBsb2NhdGlvblVybCA9ICIvb3BlbmJveGVzL2FwaS9sb2NhdGlvbnMvIi5jb25jYXQodmFsdWVzLmxvY2F0aW9uSWQsICI/dXNlRGVmYXVsdEFjdGl2aXRpZXM9IikuY29uY2F0KHRoaXMuc3RhdGUudXNlRGVmYXVsdEFjdGl2aXRpZXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsb2NhdGlvblVybCA9ICIvb3BlbmJveGVzL2FwaS9sb2NhdGlvbnM/dXNlRGVmYXVsdEFjdGl2aXRpZXM9Ii5jb25jYXQodGhpcy5zdGF0ZS51c2VEZWZhdWx0QWN0aXZpdGllcyk7CiAgICAgICAgfQogICAgICAgIHZhciBwYXlsb2FkID0gewogICAgICAgICAgbmFtZTogdmFsdWVzLm5hbWUsCiAgICAgICAgICBhY3RpdmU6IHZhbHVlcy5hY3RpdmUsCiAgICAgICAgICBsb2NhdGlvbk51bWJlcjogdmFsdWVzLmxvY2F0aW9uTnVtYmVyLAogICAgICAgICAgJ29yZ2FuaXphdGlvbi5pZCc6IHZhbHVlcy5vcmdhbml6YXRpb24uaWQsCiAgICAgICAgICAnbG9jYXRpb25Hcm91cC5pZCc6IF8uZ2V0KHZhbHVlcy5sb2NhdGlvbkdyb3VwLCAnaWQnKSB8fCAnJywKICAgICAgICAgICdtYW5hZ2VyLmlkJzogXy5nZXQodmFsdWVzLm1hbmFnZXIsICdpZCcpIHx8ICcnLAogICAgICAgICAgJ2xvY2F0aW9uVHlwZS5pZCc6IF8uZ2V0KHZhbHVlcy5sb2NhdGlvblR5cGUsICdpZCcpIHx8ICcnLAogICAgICAgICAgc3VwcG9ydGVkQWN0aXZpdGllczogXy5tYXAodmFsdWVzLnN1cHBvcnRlZEFjdGl2aXRpZXMsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbC52YWx1ZTsKICAgICAgICAgIH0pLAogICAgICAgICAgbG9nbzogdmFsdWVzLmxvZ28sCiAgICAgICAgICBiZ0NvbG9yOiB2YWx1ZXMuYmdDb2xvciB8fCAnJywKICAgICAgICAgIGZnQ29sb3I6IHZhbHVlcy5mZ0NvbG9yIHx8ICcnCiAgICAgICAgfTsKICAgICAgICBhcGlDbGllbnQucG9zdChsb2NhdGlvblVybCwgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzNy5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgICAgQWxlcnQuc3VjY2VzcyhfdGhpczcucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLmFsZXJ0LmxvY2F0aW9uU2F2ZUNvbXBsZXRlZC5sYWJlbCcsICdMb2NhdGlvbiB3YXMgc3VjY2Vzc2Z1bGx5IHNhdmVkIScpLCB7CiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHJlc3AgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICBfdGhpczcucHJvcHMuaGlzdG9yeS5wdXNoKCIvb3BlbmJveGVzL2xvY2F0aW9uc0NvbmZpZ3VyYXRpb24vY3JlYXRlLyIuY29uY2F0KHJlc3AuaWQpKTsKICAgICAgICAgIF90aGlzNy5wcm9wcy5uZXh0UGFnZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlcyksIHt9LCB7CiAgICAgICAgICAgIGxvY2F0aW9uSWQ6IHJlc3AuaWQsCiAgICAgICAgICAgIHVzZURlZmF1bHRBY3Rpdml0aWVzOiBfdGhpczcuc3RhdGUudXNlRGVmYXVsdEFjdGl2aXRpZXMKICAgICAgICAgIH0pKTsKICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczcucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoX3RoaXM3LnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5lcnJvci5jcmVhdGVTdG9ja01vdmVtZW50LmxhYmVsJywgJ0NvdWxkIG5vdCBjcmVhdGUgbG9jYXRpb24nKSkpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIm5leHRQYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0UGFnZSh2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIGlmICh2YWx1ZXMubG9nb0ZpbGUpIHsKICAgICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgICAgY29udmVydFRvQmFzZTY0KHZhbHVlcy5sb2dvRmlsZSkudGhlbihmdW5jdGlvbiAobG9nbykgewogICAgICAgICAgX3RoaXM4LnNhdmVMb2NhdGlvbkRldGFpbHMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZXMpLCB7fSwgewogICAgICAgICAgICBsb2dvOiBsb2dvCiAgICAgICAgICB9KSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zYXZlTG9jYXRpb25EZXRhaWxzKHZhbHVlcyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImNvbmZpZ3VyYXRpb24td2l6YXJkLWNvbnRlbnQgZmxleC1jb2x1bW4iCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm0sIHsKICAgICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM5Lm5leHRQYWdlKHZhbHVlcyk7CiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0ZTogdmFsaWRhdGUsCiAgICAgICAgaW5pdGlhbFZhbHVlczogdGhpcy5zdGF0ZS52YWx1ZXMsCiAgICAgICAgbXV0YXRvcnM6IHsKICAgICAgICAgIHNldExvY2F0aW9uR3JvdXBWYWx1ZTogZnVuY3Rpb24gc2V0TG9jYXRpb25Hcm91cFZhbHVlKF9yZWY0LCBzdGF0ZSwgdXRpbHMpIHsKICAgICAgICAgICAgdmFyIF9yZWY1ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjQsIDEpLAogICAgICAgICAgICAgIF9yZWY1JCA9IF9yZWY1WzBdLAogICAgICAgICAgICAgIGlkID0gX3JlZjUkLmlkLAogICAgICAgICAgICAgIG5hbWUgPSBfcmVmNSQubmFtZTsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgIGxhYmVsOiBuYW1lLAogICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgdmFsdWU6IGlkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHV0aWxzLmNoYW5nZVZhbHVlKHN0YXRlLCAnbG9jYXRpb25Hcm91cCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0T3JnYW5pemF0aW9uVmFsdWU6IGZ1bmN0aW9uIHNldE9yZ2FuaXphdGlvblZhbHVlKF9yZWY2LCBzdGF0ZSwgdXRpbHMpIHsKICAgICAgICAgICAgdmFyIF9yZWY3ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjYsIDEpLAogICAgICAgICAgICAgIF9yZWY3JCA9IF9yZWY3WzBdLAogICAgICAgICAgICAgIGlkID0gX3JlZjckLmlkLAogICAgICAgICAgICAgIG5hbWUgPSBfcmVmNyQubmFtZTsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgIGxhYmVsOiBuYW1lLAogICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgdmFsdWU6IGlkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHV0aWxzLmNoYW5nZVZhbHVlKHN0YXRlLCAnb3JnYW5pemF0aW9uJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sCiAgICAgICAgICByZXNldFN1cHBvcnRlZEFjdGl2aXRpZXM6IGZ1bmN0aW9uIHJlc2V0U3VwcG9ydGVkQWN0aXZpdGllcyhfcmVmOCwgc3RhdGUsIHV0aWxzKSB7CiAgICAgICAgICAgIHZhciBfcmVmOSA9IF9zbGljZWRUb0FycmF5KF9yZWY4LCAxKSwKICAgICAgICAgICAgICBsb2NhdGlvblR5cGUgPSBfcmVmOVswXTsKICAgICAgICAgICAgdmFyIHN1cHBvcnRlZEFjdGl2aXRpZXMgPSBfdGhpczkuZ2V0U3VwcG9ydGVkQWN0aXZpdGllcyhsb2NhdGlvblR5cGUpOwogICAgICAgICAgICB1dGlscy5jaGFuZ2VWYWx1ZShzdGF0ZSwgJ3N1cHBvcnRlZEFjdGl2aXRpZXMnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRlZEFjdGl2aXRpZXM7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoX3JlZjEwKSB7CiAgICAgICAgICB2YXIgX3JlZjEwJGZvcm0kbXV0YXRvcnMgPSBfcmVmMTAuZm9ybS5tdXRhdG9ycywKICAgICAgICAgICAgcmVzZXRTdXBwb3J0ZWRBY3Rpdml0aWVzID0gX3JlZjEwJGZvcm0kbXV0YXRvcnMucmVzZXRTdXBwb3J0ZWRBY3Rpdml0aWVzLAogICAgICAgICAgICBzZXRMb2NhdGlvbkdyb3VwVmFsdWUgPSBfcmVmMTAkZm9ybSRtdXRhdG9ycy5zZXRMb2NhdGlvbkdyb3VwVmFsdWUsCiAgICAgICAgICAgIHNldE9yZ2FuaXphdGlvblZhbHVlID0gX3JlZjEwJGZvcm0kbXV0YXRvcnMuc2V0T3JnYW5pemF0aW9uVmFsdWUsCiAgICAgICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYxMC5oYW5kbGVTdWJtaXQsCiAgICAgICAgICAgIHZhbHVlcyA9IF9yZWYxMC52YWx1ZXM7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFkZE9yZ2FuaXphdGlvbk1vZGFsLCB7CiAgICAgICAgICAgIGlzT3BlbjogX3RoaXM5LnN0YXRlLnNob3dPcmdhbml6YXRpb25Nb2RhbCwKICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHNob3dPcmdhbml6YXRpb25Nb2RhbDogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25SZXNwb25zZTogc2V0T3JnYW5pemF0aW9uVmFsdWUKICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBZGRMb2NhdGlvbkdyb3VwTW9kYWwsIHsKICAgICAgICAgICAgaXNPcGVuOiBfdGhpczkuc3RhdGUuc2hvd0xvY2F0aW9uR3JvdXBNb2RhbCwKICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHNob3dMb2NhdGlvbkdyb3VwTW9kYWw6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uUmVzcG9uc2U6IHNldExvY2F0aW9uR3JvdXBWYWx1ZQogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJmb3JtIiwgewogICAgICAgICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICAgICAgICBjbGFzc05hbWU6ICJ3LTEwMCIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImNsYXNzaWMtZm9ybSB3aXRoLWRlc2NyaXB0aW9uIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZm9ybS10aXRsZSIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24uZGV0YWlscy5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGV0YWlscyIKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZm9ybS1zdWJ0aXRsZSIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24uYWRkaXRpb25hbFRpdGxlLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJGaWxsIGluIHRoZSBkZXRhaWxzIGZvciB5b3VyIGxvY2F0aW9uLiBDbGljayB0aGUgcXVlc3Rpb24gbWFyayBuZXh0IHRvIHRoZSBmaWVsZCBuYW1lIHRvIGZpbmQgb3V0IG1vcmUuIgogICAgICAgICAgfSkpLCBfLm1hcChGSUVMRFMsIGZ1bmN0aW9uIChmaWVsZENvbmZpZywgZmllbGROYW1lKSB7CiAgICAgICAgICAgIHJldHVybiByZW5kZXJGb3JtRmllbGQoZmllbGRDb25maWcsIGZpZWxkTmFtZSwgewogICAgICAgICAgICAgIGFjdGl2ZTogdmFsdWVzLmFjdGl2ZSwKICAgICAgICAgICAgICBkZWJvdW5jZWRMb2NhdGlvbkdyb3Vwc0ZldGNoOiBfdGhpczkuZGVib3VuY2VkTG9jYXRpb25Hcm91cHNGZXRjaCwKICAgICAgICAgICAgICBkZWJvdW5jZWRPcmdhbml6YXRpb25zRmV0Y2g6IF90aGlzOS5kZWJvdW5jZWRPcmdhbml6YXRpb25zRmV0Y2gsCiAgICAgICAgICAgICAgZGVib3VuY2VkUGVvcGxlRmV0Y2g6IF90aGlzOS5kZWJvdW5jZWRQZW9wbGVGZXRjaCwKICAgICAgICAgICAgICBvcGVuTmV3T3JnYW5pemF0aW9uTW9kYWw6IF90aGlzOS5vcGVuTmV3T3JnYW5pemF0aW9uTW9kYWwsCiAgICAgICAgICAgICAgb3Blbk5ld0xvY2F0aW9uR3JvdXBNb2RhbDogX3RoaXM5Lm9wZW5OZXdMb2NhdGlvbkdyb3VwTW9kYWwsCiAgICAgICAgICAgICAgaW5qZWN0aW9uRGF0YTogX3RoaXM5LnN0YXRlLnN1cHBvcnRMaW5rcwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmb3JtLXRpdGxlIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi50eXBlQW5kQWN0aXZpdGllcy5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTG9jYXRpb24gVHlwZSBhbmQgU3VwcG9ydGVkIEFjdGl2aXRpZXMiCiAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImZvcm0tc3VidGl0bGUiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24udHlwZUFuZEFjdGl2aXRpZXNEZXNjcmlwdGlvbi5sYWJlbCIKICAgICAgICAgIH0pLCAiXHhBMCIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgICAgICAgICByZWw6ICJub29wZW5lciBub3JlZmVycmVyIiwKICAgICAgICAgICAgaHJlZjogImh0dHBzOi8vb3BlbmJveGVzLmF0bGFzc2lhbi5uZXQvd2lraS9zcGFjZXMvT0JXL3BhZ2VzLzE3NDQ2MzM4NTcvTG9jYXRpb24rVHlwZXMrYW5kK1N1cHBvcnRlZCtBY3Rpdml0aWVzIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5oZXJlLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJoZXJlIgogICAgICAgICAgfSkpLCAiLiIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0RmllbGQsIHsKICAgICAgICAgICAgZmllbGROYW1lOiAibG9jYXRpb25UeXBlIiwKICAgICAgICAgICAgZmllbGRDb25maWc6IHsKICAgICAgICAgICAgICBsYWJlbDogJ3JlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24ubG9jYXRpb25UeXBlLmxhYmVsJywKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0xvY2F0aW9uIFR5cGUnLAogICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ211bHRpLXNlbGVjdCcsCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIHZhbHVlS2V5OiAnaWQnLAogICAgICAgICAgICAgICAgd2l0aFRvb2x0aXA6IHRydWUsCiAgICAgICAgICAgICAgICB0b29sdGlwOiAncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5sb2NhdGlvblR5cGUudG9vbHRpcC5sYWJlbCcKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMTEpIHsKICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvblR5cGVzID0gX3JlZjExLmxvY2F0aW9uVHlwZXM7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhdGlvblR5cGVzLAogICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UodmFsKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzZXRTdXBwb3J0ZWRBY3Rpdml0aWVzKHZhbCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2NhdGlvblR5cGVzOiBfdGhpczkuc3RhdGUubG9jYXRpb25UeXBlcwogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImQtZmxleCB3LTEwMCBtbC0xIHB0LTIganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ2hlY2tib3gsIHsKICAgICAgICAgICAgaWQ6ICJ1c2VEZWZhdWx0QWN0aXZpdGllcyIsCiAgICAgICAgICAgIHZhbHVlOiBfdGhpczkuc3RhdGUudXNlRGVmYXVsdEFjdGl2aXRpZXMsCiAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSh2YWwpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHVzZURlZmF1bHRBY3Rpdml0aWVzOiB2YWwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2l0aExhYmVsOiB0cnVlLAogICAgICAgICAgICBsYWJlbDogX3RoaXM5LnByb3BzLnRyYW5zbGF0ZSgncmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi51c2VEZWZhdWx0QWN0aXZpdGllcy5sYWJlbCcsICdVc2UgZGVmYXVsdCBzZXR0aW5ncyBmb3IgU3VwcG9ydGVkIEFjdGl2aXRpZXMnKQogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLXByaW1hcnkgYnRuLXhzIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICBfdGhpczkuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgdXNlRGVmYXVsdEFjdGl2aXRpZXM6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXNldFN1cHBvcnRlZEFjdGl2aXRpZXModmFsdWVzLmxvY2F0aW9uVHlwZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImkiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImZhIGZhLXJlZnJlc2ggcHItMiIKICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5sb2NhdGlvbnNDb25maWd1cmF0aW9uLnJlc2V0VG9EZWZhdWx0LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZXNldCB0byBkZWZhdWx0IHNldHRpbmdzIgogICAgICAgICAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImxvY2F0aW9uLXN1cHBvcnRlZC1hY3Rpdml0aWVzIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0RmllbGQsIHsKICAgICAgICAgICAgZmllbGROYW1lOiAic3VwcG9ydGVkQWN0aXZpdGllcyIsCiAgICAgICAgICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgICAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgICAgICAgbXVsdGk6IHRydWUKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMTIpIHsKICAgICAgICAgICAgICAgIHZhciBzdXBwb3J0ZWRBY3Rpdml0aWVzID0gX3JlZjEyLnN1cHBvcnRlZEFjdGl2aXRpZXMsCiAgICAgICAgICAgICAgICAgIHVzZURlZmF1bHRBY3Rpdml0aWVzID0gX3JlZjEyLnVzZURlZmF1bHRBY3Rpdml0aWVzOwogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHVzZURlZmF1bHRBY3Rpdml0aWVzLAogICAgICAgICAgICAgICAgICBvcHRpb25zOiBzdXBwb3J0ZWRBY3Rpdml0aWVzCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VwcG9ydGVkQWN0aXZpdGllczogX3RoaXM5LnN0YXRlLnN1cHBvcnRlZEFjdGl2aXRpZXMsCiAgICAgICAgICAgIHVzZURlZmF1bHRBY3Rpdml0aWVzOiBfdGhpczkuc3RhdGUudXNlRGVmYXVsdEFjdGl2aXRpZXMKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZm9ybS10aXRsZSIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmxvY2F0aW9uc0NvbmZpZ3VyYXRpb24uc3R5bGUubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlN0eWxlIgogICAgICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmb3JtLXN1YnRpdGxlIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QubG9jYXRpb25zQ29uZmlndXJhdGlvbi5zdHlsZURlc2NyaXB0aW9uLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZXQgYSBjdXN0b20gbG9nbyBhbmQgY29sb3Igc2NoZW1lLiBGb3IgZGVwb3QgbG9jYXRpb25zIG9ubHkuIgogICAgICAgICAgfSkpLCBfLm1hcChTVFlMRV9GSUVMRFMsIGZ1bmN0aW9uIChmaWVsZENvbmZpZywgZmllbGROYW1lKSB7CiAgICAgICAgICAgIHJldHVybiByZW5kZXJGb3JtRmllbGQoZmllbGRDb25maWcsIGZpZWxkTmFtZSk7CiAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogInN1Ym1pdC1idXR0b25zIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzOS5zdGF0ZS51c2VEZWZhdWx0QWN0aXZpdGllcykgewogICAgICAgICAgICAgICAgcmVzZXRTdXBwb3J0ZWRBY3Rpdml0aWVzKHZhbHVlcy5sb2NhdGlvblR5cGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgZmxvYXQtcmlnaHQgYnRuLXhzIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24ubmV4dC5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTmV4dCIKICAgICAgICAgIH0pKSkpKTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIExvY2F0aW9uRGV0YWlsczsKfShDb21wb25lbnQpOwp2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7CiAgcmV0dXJuIHsKICAgIGxvY2F0aW9uOiBzdGF0ZS5zZXNzaW9uLmN1cnJlbnRMb2NhdGlvbiwKICAgIGxvY2FsZTogc3RhdGUuc2Vzc2lvbi5hY3RpdmVMYW5ndWFnZSwKICAgIGlzU3VwZXJ1c2VyOiBzdGF0ZS5zZXNzaW9uLmlzU3VwZXJ1c2VyLAogICAgdHJhbnNsYXRlOiB0cmFuc2xhdGVXaXRoRGVmYXVsdE1lc3NhZ2UoZ2V0VHJhbnNsYXRlKHN0YXRlLmxvY2FsaXplKSksCiAgICBkZWJvdW5jZVRpbWU6IHN0YXRlLnNlc3Npb24uc2VhcmNoQ29uZmlnLmRlYm91bmNlVGltZSwKICAgIGRlYm91bmNlZExvY2F0aW9uVHlwZXNGZXRjaDogc3RhdGUuc2Vzc2lvbi5zZWFyY2hDb25maWcsCiAgICBtaW5TZWFyY2hMZW5ndGg6IHN0YXRlLnNlc3Npb24uc2VhcmNoQ29uZmlnLm1pblNlYXJjaExlbmd0aCwKICAgIGxvY0NvbmZUcmFuc2xhdGlvbnNGZXRjaGVkOiBzdGF0ZS5zZXNzaW9uLmZldGNoZWRUcmFuc2xhdGlvbnMubG9jYXRpb25zQ29uZmlndXJhdGlvbiwKICAgIHVzZXI6IHN0YXRlLnNlc3Npb24udXNlcgogIH07Cn07CmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIHsKICBzaG93U3Bpbm5lcjogc2hvd1NwaW5uZXIsCiAgaGlkZVNwaW5uZXI6IGhpZGVTcGlubmVyLAogIGZldGNoVXNlcnM6IGZldGNoVXNlcnMKfSkoTG9jYXRpb25EZXRhaWxzKSk7CkxvY2F0aW9uRGV0YWlscy5wcm9wVHlwZXMgPSB7CiAgaW5pdGlhbFZhbHVlczogUHJvcFR5cGVzLnNoYXBlKHsKICAgIGFjdGl2ZTogUHJvcFR5cGVzLmJvb2wsCiAgICB1c2VEZWZhdWx0QWN0aXZpdGllczogUHJvcFR5cGVzLmJvb2wsCiAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLAogICAgbG9jYXRpb25OdW1iZXI6IFByb3BUeXBlcy5zdHJpbmcsCiAgICBsb2NhdGlvblR5cGU6IFByb3BUeXBlcy5zdHJpbmcsCiAgICBvcmdhbml6YXRpb246IFByb3BUeXBlcy5zdHJpbmcsCiAgICBsb2NhdGlvbkdyb3VwOiBQcm9wVHlwZXMuc3RyaW5nLAogICAgbWFuYWdlcjogUHJvcFR5cGVzLnN0cmluZwogIH0pLmlzUmVxdWlyZWQsCiAgbmV4dFBhZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgc2hvd1NwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgaGlkZVNwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgZGVib3VuY2VUaW1lOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsCiAgbWluU2VhcmNoTGVuZ3RoOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsCiAgdHJhbnNsYXRlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIGxvY0NvbmZUcmFuc2xhdGlvbnNGZXRjaGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLAogIGxvY2FsZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLAogIG1hdGNoOiBQcm9wVHlwZXMuc2hhcGUoewogICAgcGFyYW1zOiBQcm9wVHlwZXMuc2hhcGUoewogICAgICBsb2NhdGlvbklkOiBQcm9wVHlwZXMuc3RyaW5nCiAgICB9KQogIH0pLmlzUmVxdWlyZWQsCiAgaGlzdG9yeTogUHJvcFR5cGVzLnNoYXBlKHsKICAgIHB1c2g6IFByb3BUeXBlcy5mdW5jCiAgfSkuaXNSZXF1aXJlZAp9Ow=="},null]}