{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/invoice/InvoiceItemsModal.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/invoice/InvoiceItemsModal.jsx","mtime":1698037748000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgInByb3RvdHlwZSIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgdXBkYXRlIGZyb20gJ2ltbXV0YWJpbGl0eS1oZWxwZXInOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnOwppbXBvcnQgeyBnZXRUcmFuc2xhdGUgfSBmcm9tICdyZWFjdC1sb2NhbGl6ZS1yZWR1eCc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IGhpZGVTcGlubmVyLCBzaG93U3Bpbm5lciB9IGZyb20gJ2FjdGlvbnMnOwppbXBvcnQgQXJyYXlGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvQXJyYXlGaWVsZCc7CmltcG9ydCBMYWJlbEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9MYWJlbEZpZWxkJzsKaW1wb3J0IE1vZGFsV3JhcHBlciBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvTW9kYWxXcmFwcGVyJzsKaW1wb3J0IFRleHRGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvVGV4dEZpZWxkJzsKaW1wb3J0IGFwaUNsaWVudCBmcm9tICd1dGlscy9hcGlDbGllbnQnOwppbXBvcnQgQ2hlY2tib3ggZnJvbSAndXRpbHMvQ2hlY2tib3gnOwppbXBvcnQgeyBnZXRJbnZvaWNlRGVzY3JpcHRpb24gfSBmcm9tICd1dGlscy9mb3JtLXZhbHVlcy11dGlscyc7CmltcG9ydCBhY2NvdW50aW5nRm9ybWF0IGZyb20gJ3V0aWxzL251bWJlci11dGlscyc7CmltcG9ydCBTZWxlY3QgZnJvbSAndXRpbHMvU2VsZWN0JzsKaW1wb3J0IHsgdHJhbnNsYXRlV2l0aERlZmF1bHRNZXNzYWdlIH0gZnJvbSAndXRpbHMvVHJhbnNsYXRlJzsKdmFyIEZJRUxEUyA9IHsKICBpbnZvaWNlSXRlbXM6IHsKICAgIHR5cGU6IEFycmF5RmllbGQsCiAgICBhcnJvd3NOYXZpZ2F0aW9uOiB0cnVlLAogICAgbWF4VGFibGVIZWlnaHQ6ICdjYWxjKDEwMHZoIC0gNTAwcHgpJywKICAgIG92ZXJmbG93U3R5bGU6ICdvdmVybGF5JywKICAgIGZpZWxkczogewogICAgICBjaGVja2VkOiB7CiAgICAgICAgZmllbGRLZXk6ICcnLAogICAgICAgIGxhYmVsOiAnJywKICAgICAgICBmbGV4V2lkdGg6ICcwLjQnLAogICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUoX3JlZikgewogICAgICAgICAgdmFyIHJvd0luZGV4ID0gX3JlZi5yb3dJbmRleCwKICAgICAgICAgICAgZmllbGRWYWx1ZSA9IF9yZWYuZmllbGRWYWx1ZSwKICAgICAgICAgICAgc2VsZWN0Um93ID0gX3JlZi5zZWxlY3RSb3c7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ2hlY2tib3gsIHsKICAgICAgICAgICAgaWQ6IHJvd0luZGV4LnRvU3RyaW5nKCksCiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAibWwtMSIsCiAgICAgICAgICAgIHZhbHVlOiBmaWVsZFZhbHVlLmNoZWNrZWQsCiAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSh2YWx1ZSkgewogICAgICAgICAgICAgIHJldHVybiBzZWxlY3RSb3codmFsdWUsIHJvd0luZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBvcmRlck51bWJlcjogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5pbnZvaWNlLm9yZGVyTnVtYmVyLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1BPIE51bWJlcicsCiAgICAgICAgZmxleFdpZHRoOiAnMScsCiAgICAgICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYyKSB7CiAgICAgICAgICB2YXIgdmFsdWVzID0gX3JlZjIudmFsdWVzLAogICAgICAgICAgICByb3dJbmRleCA9IF9yZWYyLnJvd0luZGV4OwogICAgICAgICAgdmFyIG9yZGVySWQgPSB2YWx1ZXMgJiYgdmFsdWVzLmludm9pY2VJdGVtcyAmJiB2YWx1ZXMuaW52b2ljZUl0ZW1zW3Jvd0luZGV4XSAmJiB2YWx1ZXMuaW52b2ljZUl0ZW1zW3Jvd0luZGV4XS5vcmRlcklkOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdXJsOiBvcmRlcklkID8gIi9vcGVuYm94ZXMvb3JkZXIvc2hvdy8iLmNvbmNhdChvcmRlcklkKSA6ICcnCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2hpcG1lbnROdW1iZXI6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3QuaW52b2ljZS5zaGlwbWVudE51bWJlci5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaGlwbWVudCBOdW1iZXInLAogICAgICAgIGZsZXhXaWR0aDogJzEnLAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMykgewogICAgICAgICAgdmFyIHZhbHVlcyA9IF9yZWYzLnZhbHVlcywKICAgICAgICAgICAgcm93SW5kZXggPSBfcmVmMy5yb3dJbmRleDsKICAgICAgICAgIHZhciBzaGlwbWVudElkID0gdmFsdWVzICYmIHZhbHVlcy5pbnZvaWNlSXRlbXMgJiYgdmFsdWVzLmludm9pY2VJdGVtc1tyb3dJbmRleF0gJiYgdmFsdWVzLmludm9pY2VJdGVtc1tyb3dJbmRleF0uc2hpcG1lbnRJZDsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHVybDogc2hpcG1lbnRJZCA/ICIvb3BlbmJveGVzL3N0b2NrTW92ZW1lbnQvc2hvdy8iLmNvbmNhdChzaGlwbWVudElkKSA6ICcnCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgYnVkZ2V0Q29kZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5pbnZvaWNlLmJ1ZGdldENvZGUubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQnVkZ2V0IENvZGUnLAogICAgICAgIGZsZXhXaWR0aDogJzEnCiAgICAgIH0sCiAgICAgIGdsQ29kZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5pbnZvaWNlLmdsQ29kZS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdHTCBDb2RlJywKICAgICAgICBmbGV4V2lkdGg6ICcxJwogICAgICB9LAogICAgICBwcm9kdWN0Q29kZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5pbnZvaWNlLml0ZW1OdW1iZXIubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSXRlbSBObycsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfSwKICAgICAgZGVzY3JpcHRpb246IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3QuaW52b2ljZS5kZXNjcmlwdGlvbi5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZXNjcmlwdGlvbicsCiAgICAgICAgZmxleFdpZHRoOiAnMycsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgY2xhc3NOYW1lOiAndGV4dC1sZWZ0JwogICAgICAgIH0sCiAgICAgICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKCkgewogICAgICAgICAgICAgIHZhciBfdmFsdWVzJGludm9pY2VJdGVtczsKICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gcGFyYW1zLnZhbHVlcywKICAgICAgICAgICAgICAgIHJvd0luZGV4ID0gcGFyYW1zLnJvd0luZGV4OwogICAgICAgICAgICAgIHZhciByb3dWYWx1ZSA9IHZhbHVlcyA9PT0gbnVsbCB8fCB2YWx1ZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdmFsdWVzJGludm9pY2VJdGVtcyA9IHZhbHVlcy5pbnZvaWNlSXRlbXMpID09PSBudWxsIHx8IF92YWx1ZXMkaW52b2ljZUl0ZW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWVzJGludm9pY2VJdGVtc1tyb3dJbmRleF07CiAgICAgICAgICAgICAgLy8gSWYgaXQncyBub3QgYW4gYWRqdXN0bWVudCwgYnV0IHByb2R1Y3QsIGFuZCBpdCBoYXMgYSBzeW5vbnltLCBkaXNwbGF5IGl0CiAgICAgICAgICAgICAgLy8gd2l0aCBhIHRvb2x0aXAgd2l0aCB0aGUgb3JpZ2luYWwgbmFtZSBvZiB0aGUgcHJvZHVjdAogICAgICAgICAgICAgIHJldHVybiBnZXRJbnZvaWNlRGVzY3JpcHRpb24ocm93VmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgc3VwcGxpZXJDb2RlOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lmludm9pY2Uuc3VwcGxpZXJDb2RlLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1N1cHBsaWVyIENvZGUnLAogICAgICAgIGZsZXhXaWR0aDogJzEnCiAgICAgIH0sCiAgICAgIHF1YW50aXR5OiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lmludm9pY2UucXVhbnRpdHkubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUXR5JywKICAgICAgICBmbGV4V2lkdGg6ICcxJwogICAgICB9LAogICAgICBxdWFudGl0eVRvSW52b2ljZTogewogICAgICAgIHR5cGU6IFRleHRGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lmludm9pY2UucXVhbnRpdHlUb0ludm9pY2UubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUXR5IHRvIEludm9pY2UnLAogICAgICAgIGZsZXhXaWR0aDogJzEnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIHR5cGU6ICdudW1iZXInCiAgICAgICAgfSwKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjQpIHsKICAgICAgICAgIHZhciB1cGRhdGVSb3cgPSBfcmVmNC51cGRhdGVSb3csCiAgICAgICAgICAgIHZhbHVlcyA9IF9yZWY0LnZhbHVlcywKICAgICAgICAgICAgcm93SW5kZXggPSBfcmVmNC5yb3dJbmRleDsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlUm93KHZhbHVlcywgcm93SW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgdW9tOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lmludm9pY2UudW9tLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VvTScsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfSwKICAgICAgdW5pdFByaWNlOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lmludm9pY2UudW5pdFByaWNlLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VuaXQgUHJpY2UnLAogICAgICAgIGZsZXhXaWR0aDogJzEnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gdmFsdWUgPyBhY2NvdW50aW5nRm9ybWF0KHZhbHVlKSA6IHZhbHVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTsKZnVuY3Rpb24gdmFsaWRhdGUodmFsdWVzKSB7CiAgdmFyIGVycm9ycyA9IHt9OwogIGVycm9ycy5pbnZvaWNlSXRlbXMgPSBbXTsKICBfLmZvckVhY2godmFsdWVzLmludm9pY2VJdGVtcywgZnVuY3Rpb24gKGl0ZW0sIGtleSkgewogICAgaWYgKGl0ZW0uY2hlY2tlZCAmJiAoXy50b0ludGVnZXIoaXRlbS5xdWFudGl0eVRvSW52b2ljZSkgPiBpdGVtLnF1YW50aXR5IHx8IF8udG9JbnRlZ2VyKGl0ZW0ucXVhbnRpdHlUb0ludm9pY2UpIDw9IDApKSB7CiAgICAgIGVycm9ycy5pbnZvaWNlSXRlbXNba2V5XSA9IHsKICAgICAgICBxdWFudGl0eVRvSW52b2ljZTogJ3JlYWN0Lmludm9pY2UuZXJyb3JzLnF1YW50aXR5VG9JbnZvaWNlLmxhYmVsJwogICAgICB9OwogICAgfQogIH0pOwogIHJldHVybiBlcnJvcnM7Cn0KdmFyIElOSVRJQUxfU1RBVEUgPSB7CiAgc2VsZWN0ZWRJbnZvaWNlSXRlbXM6IG51bGwsCiAgZm9ybVZhbHVlczogewogICAgaW52b2ljZUl0ZW1zOiBbXQogIH0sCiAgc29ydE9yZGVyOiAwLAogIG9yZGVyTnVtYmVyT3B0aW9uczogW10sCiAgc2hpcG1lbnROdW1iZXJPcHRpb25zOiBbXSwKICBzZWxlY3RlZE9yZGVyTnVtYmVyczogW10sCiAgc2VsZWN0ZWRTaGlwbWVudE51bWJlcnM6IFtdCn07CnZhciBJbnZvaWNlSXRlbXNNb2RhbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhJbnZvaWNlSXRlbXNNb2RhbCwgX0NvbXBvbmVudCk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihJbnZvaWNlSXRlbXNNb2RhbCk7CiAgZnVuY3Rpb24gSW52b2ljZUl0ZW1zTW9kYWwocHJvcHMpIHsKICAgIHZhciBfdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbnZvaWNlSXRlbXNNb2RhbCk7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKICAgIF90aGlzLnN0YXRlID0gSU5JVElBTF9TVEFURTsKICAgIF90aGlzLm9uT3BlbiA9IF90aGlzLm9uT3Blbi5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLm9uU2F2ZSA9IF90aGlzLm9uU2F2ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLnNlbGVjdFJvdyA9IF90aGlzLnNlbGVjdFJvdy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLnVwZGF0ZVJvdyA9IF90aGlzLnVwZGF0ZVJvdy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIHJldHVybiBfdGhpczsKICB9CiAgX2NyZWF0ZUNsYXNzKEludm9pY2VJdGVtc01vZGFsLCBbewogICAga2V5OiAib25PcGVuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbk9wZW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLnByb3BzLm9uT3BlbigpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5zZXRTdGF0ZShJTklUSUFMX1NUQVRFLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuZmV0Y2hJbnZvaWNlSXRlbUNhbmRpZGF0ZXMoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25TYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNhdmUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgIHZhciBpbnZvaWNlSWQgPSB0aGlzLnByb3BzLmludm9pY2VJZDsKICAgICAgdmFyIHNlbGVjdGVkSW52b2ljZUl0ZW1zID0gdGhpcy5zdGF0ZS5zZWxlY3RlZEludm9pY2VJdGVtczsKICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgaW52b2ljZUl0ZW1zOiBfLm1hcChzZWxlY3RlZEludm9pY2VJdGVtcywgZnVuY3Rpb24gKGl0ZW0sIGtleSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6IGtleSwKICAgICAgICAgICAgcXVhbnRpdHlUb0ludm9pY2U6IF8udG9JbnRlZ2VyKGl0ZW0ucXVhbnRpdHlUb0ludm9pY2UpCiAgICAgICAgICB9OwogICAgICAgIH0pCiAgICAgIH07CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvaW52b2ljZXMvIi5jb25jYXQoaW52b2ljZUlkLCAiL2l0ZW1zIik7CiAgICAgIGFwaUNsaWVudC5wb3N0KHVybCwgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLnNldFN0YXRlKElOSVRJQUxfU1RBVEUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgICAgX3RoaXMzLnByb3BzLm9uUmVzcG9uc2UoewogICAgICAgICAgICBzdGFydEluZGV4OiAwCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0U2VsZWN0ZWRPcmRlcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdGVkT3JkZXJzKHNlbGVjdGVkT3JkZXJOdW1iZXJzKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RlZE9yZGVyTnVtYmVyczogc2VsZWN0ZWRPcmRlck51bWJlcnMKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczQuZmV0Y2hJbnZvaWNlSXRlbUNhbmRpZGF0ZXMoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0U2VsZWN0ZWRTaGlwbWVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdGVkU2hpcG1lbnRzKHNlbGVjdGVkU2hpcG1lbnROdW1iZXJzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RlZFNoaXBtZW50TnVtYmVyczogc2VsZWN0ZWRTaGlwbWVudE51bWJlcnMKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczUuZmV0Y2hJbnZvaWNlSXRlbUNhbmRpZGF0ZXMoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U29ydE9yZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTb3J0T3JkZXIoKSB7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIHNvcnRPcmRlcjogdGhpcy5zdGF0ZS5zb3J0T3JkZXIgKyAxCiAgICAgIH0pOwogICAgICByZXR1cm4gdGhpcy5zdGF0ZS5zb3J0T3JkZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VsZWN0Um93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RSb3codmFsdWUsIHJvd0luZGV4KSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgZm9ybVZhbHVlcyA9IF90aGlzJHN0YXRlLmZvcm1WYWx1ZXMsCiAgICAgICAgc2VsZWN0ZWRJbnZvaWNlSXRlbXMgPSBfdGhpcyRzdGF0ZS5zZWxlY3RlZEludm9pY2VJdGVtczsKICAgICAgdmFyIG5ld1N0YXRlID0gewogICAgICAgIGZvcm1WYWx1ZXM6IHsKICAgICAgICAgIGludm9pY2VJdGVtczogXy5tYXAoZm9ybVZhbHVlcy5pbnZvaWNlSXRlbXMsIGZ1bmN0aW9uIChpdGVtLCBpZHgpIHsKICAgICAgICAgICAgaWYgKHJvd0luZGV4ID09PSBpZHgpIHsKICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHZhbHVlLAogICAgICAgICAgICAgICAgcXVhbnRpdHlUb0ludm9pY2U6IHZhbHVlID8gaXRlbS5xdWFudGl0eSA6ICcnLAogICAgICAgICAgICAgICAgc29ydE9yZGVyOiB2YWx1ZSA/IGl0ZW0uc29ydE9yZGVyIDogJycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgaXRlbSk7CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIGRlbGV0ZSBzZWxlY3RlZEludm9pY2VJdGVtc1tmb3JtVmFsdWVzLmludm9pY2VJdGVtc1tyb3dJbmRleF0uaWRdOwogICAgICAgIG5ld1N0YXRlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBuZXdTdGF0ZSksIHt9LCB7CiAgICAgICAgICBzZWxlY3RlZEludm9pY2VJdGVtczogc2VsZWN0ZWRJbnZvaWNlSXRlbXMKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXdTdGF0ZSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbmV3U3RhdGUpLCB7fSwgewogICAgICAgICAgc2VsZWN0ZWRJbnZvaWNlSXRlbXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc2VsZWN0ZWRJbnZvaWNlSXRlbXMpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBmb3JtVmFsdWVzLmludm9pY2VJdGVtc1tyb3dJbmRleF0uaWQsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZm9ybVZhbHVlcy5pbnZvaWNlSXRlbXNbcm93SW5kZXhdKSwge30sIHsKICAgICAgICAgICAgcXVhbnRpdHlUb0ludm9pY2U6IHZhbHVlID8gZm9ybVZhbHVlcy5pbnZvaWNlSXRlbXNbcm93SW5kZXhdLnF1YW50aXR5IDogJycsCiAgICAgICAgICAgIHNvcnRPcmRlcjogdmFsdWUgPyBmb3JtVmFsdWVzLmludm9pY2VJdGVtc1tyb3dJbmRleF0uc29ydE9yZGVyIDogJycKICAgICAgICAgIH0pKSkKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVSb3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVJvdyh2YWx1ZXMsIGluZGV4KSB7CiAgICAgIHZhciBzZWxlY3RlZEludm9pY2VJdGVtcyA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRJbnZvaWNlSXRlbXM7CiAgICAgIHZhciBpdGVtID0gdmFsdWVzLmludm9pY2VJdGVtc1tpbmRleF07CiAgICAgIGl0ZW0uY2hlY2tlZCA9IHRydWU7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGZvcm1WYWx1ZXM6IHVwZGF0ZSh2YWx1ZXMsIHsKICAgICAgICAgIGludm9pY2VJdGVtczogX2RlZmluZVByb3BlcnR5KHt9LCBpbmRleCwgewogICAgICAgICAgICAkc2V0OiBpdGVtCiAgICAgICAgICB9KQogICAgICAgIH0pLAogICAgICAgIHNlbGVjdGVkSW52b2ljZUl0ZW1zOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNlbGVjdGVkSW52b2ljZUl0ZW1zKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgaXRlbS5pZCwgewogICAgICAgICAgcXVhbnRpdHlUb0ludm9pY2U6IGl0ZW0ucXVhbnRpdHlUb0ludm9pY2UsCiAgICAgICAgICBzb3J0T3JkZXI6IGl0ZW0uc29ydE9yZGVyCiAgICAgICAgfSkpCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoSW52b2ljZUl0ZW1DYW5kaWRhdGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaEludm9pY2VJdGVtQ2FuZGlkYXRlcygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSB0aGlzLnN0YXRlLAogICAgICAgIHNlbGVjdGVkT3JkZXJOdW1iZXJzID0gX3RoaXMkc3RhdGUyLnNlbGVjdGVkT3JkZXJOdW1iZXJzLAogICAgICAgIHNlbGVjdGVkU2hpcG1lbnROdW1iZXJzID0gX3RoaXMkc3RhdGUyLnNlbGVjdGVkU2hpcG1lbnROdW1iZXJzLAogICAgICAgIHNlbGVjdGVkSW52b2ljZUl0ZW1zID0gX3RoaXMkc3RhdGUyLnNlbGVjdGVkSW52b2ljZUl0ZW1zOwogICAgICB2YXIgaW52b2ljZUlkID0gdGhpcy5wcm9wcy5pbnZvaWNlSWQ7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvaW52b2ljZXMvIi5jb25jYXQoaW52b2ljZUlkLCAiL2ludm9pY2VJdGVtQ2FuZGlkYXRlcyIpOwogICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICBvcmRlck51bWJlcnM6IF8ubWFwKHNlbGVjdGVkT3JkZXJOdW1iZXJzLCBmdW5jdGlvbiAob3JkZXJOdW1iZXIpIHsKICAgICAgICAgIHJldHVybiBvcmRlck51bWJlci52YWx1ZTsKICAgICAgICB9KSwKICAgICAgICBzaGlwbWVudE51bWJlcnM6IF8ubWFwKHNlbGVjdGVkU2hpcG1lbnROdW1iZXJzLCBmdW5jdGlvbiAoc2hpcG1lbnROdW1iZXIpIHsKICAgICAgICAgIHJldHVybiBzaGlwbWVudE51bWJlci52YWx1ZTsKICAgICAgICB9KQogICAgICB9OwogICAgICByZXR1cm4gYXBpQ2xpZW50LnBvc3QodXJsLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXM2LnNldFN0YXRlKHsKICAgICAgICAgIGZvcm1WYWx1ZXM6IHsKICAgICAgICAgICAgaW52b2ljZUl0ZW1zOiBfLm1hcChyZXNwLmRhdGEuZGF0YSwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHNlbGVjdGVkSW52b2ljZUl0ZW1zICYmICEhc2VsZWN0ZWRJbnZvaWNlSXRlbXNbaXRlbS5pZF0sCiAgICAgICAgICAgICAgICBxdWFudGl0eVRvSW52b2ljZTogc2VsZWN0ZWRJbnZvaWNlSXRlbXMgJiYgc2VsZWN0ZWRJbnZvaWNlSXRlbXNbaXRlbS5pZF0gPyBzZWxlY3RlZEludm9pY2VJdGVtc1tpdGVtLmlkXS5xdWFudGl0eVRvSW52b2ljZSA6ICcnLAogICAgICAgICAgICAgICAgc29ydE9yZGVyOiBfdGhpczYuZ2V0U29ydE9yZGVyKCkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczYuZmV0Y2hPcmRlck51bWJlcnMoaW52b2ljZUlkKTsKICAgICAgICAgIF90aGlzNi5mZXRjaFNoaXBtZW50TnVtYmVycyhpbnZvaWNlSWQpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmZXRjaE9yZGVyTnVtYmVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hPcmRlck51bWJlcnMoaW52b2ljZUlkKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICBpZiAodGhpcy5zdGF0ZS5vcmRlck51bWJlck9wdGlvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9pbnZvaWNlcy8iLmNvbmNhdChpbnZvaWNlSWQsICIvb3JkZXJzIik7CiAgICAgICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIF90aGlzNy5zZXRTdGF0ZSh7CiAgICAgICAgICAgIG9yZGVyTnVtYmVyT3B0aW9uczogXy5tYXAocmVzcC5kYXRhLmRhdGEsIGZ1bmN0aW9uIChvcmRlck51bWJlcikgewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXJOdW1iZXIsCiAgICAgICAgICAgICAgICBsYWJlbDogb3JkZXJOdW1iZXIKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJmZXRjaFNoaXBtZW50TnVtYmVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hTaGlwbWVudE51bWJlcnMoaW52b2ljZUlkKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICBpZiAodGhpcy5zdGF0ZS5zaGlwbWVudE51bWJlck9wdGlvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9pbnZvaWNlcy8iLmNvbmNhdChpbnZvaWNlSWQsICIvc2hpcG1lbnRzIik7CiAgICAgICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHNoaXBtZW50TnVtYmVyT3B0aW9uczogXy5tYXAocmVzcC5kYXRhLmRhdGEsIGZ1bmN0aW9uIChzaGlwbWVudE51bWJlcikgewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB2YWx1ZTogc2hpcG1lbnROdW1iZXIsCiAgICAgICAgICAgICAgICBsYWJlbDogc2hpcG1lbnROdW1iZXIKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGVja0FsbFZpc2libGVJdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tBbGxWaXNpYmxlSXRlbXModmFsdWUpIHsKICAgICAgdmFyIGZvcm1WYWx1ZXMgPSB1cGRhdGUodGhpcy5zdGF0ZS5mb3JtVmFsdWVzLCB7CiAgICAgICAgaW52b2ljZUl0ZW1zOiB7CiAgICAgICAgICAkYXBwbHk6IGZ1bmN0aW9uICRhcHBseShpdGVtcykgewogICAgICAgICAgICByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uIChpbnZvaWNlSXRlbSkgewogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGludm9pY2VJdGVtKSwge30sIHsKICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHZhbHVlLAogICAgICAgICAgICAgICAgcXVhbnRpdHlUb0ludm9pY2U6IHZhbHVlID8gaW52b2ljZUl0ZW0ucXVhbnRpdHkgOiAnJywKICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogdmFsdWUgPyBpbnZvaWNlSXRlbS5zb3J0T3JkZXIgOiAnJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgc2VsZWN0ZWRJdGVtcyA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRJbnZvaWNlSXRlbXMgPyB0aGlzLnN0YXRlLnNlbGVjdGVkSW52b2ljZUl0ZW1zIDogW107CiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXNzaWduCiAgICAgICAgXy5tYXAoZm9ybVZhbHVlcy5pbnZvaWNlSXRlbXMsIGZ1bmN0aW9uIChpbnZvaWNlSXRlbSwga2V5KSB7CiAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtc1tpbnZvaWNlSXRlbS5pZF0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGZvcm1WYWx1ZXMuaW52b2ljZUl0ZW1zW2tleV0pLCB7fSwgewogICAgICAgICAgICBxdWFudGl0eVRvSW52b2ljZTogdmFsdWUgPyBmb3JtVmFsdWVzLmludm9pY2VJdGVtc1trZXldLnF1YW50aXR5IDogJycsCiAgICAgICAgICAgIHNvcnRPcmRlcjogdmFsdWUgPyBmb3JtVmFsdWVzLmludm9pY2VJdGVtc1trZXldLnNvcnRPcmRlciA6ICcnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfLm1hcChmb3JtVmFsdWVzLmludm9pY2VJdGVtcywgZnVuY3Rpb24gKGludm9pY2VJdGVtLCBrZXkpIHsKICAgICAgICAgIGRlbGV0ZSBzZWxlY3RlZEl0ZW1zW2Zvcm1WYWx1ZXMuaW52b2ljZUl0ZW1zW2tleV0uaWRdOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGZvcm1WYWx1ZXM6IGZvcm1WYWx1ZXMsCiAgICAgICAgc2VsZWN0ZWRJbnZvaWNlSXRlbXM6IF9vYmplY3RTcHJlYWQoe30sIHNlbGVjdGVkSXRlbXMpCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNoZWNrU2VsZWN0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrU2VsZWN0ZWQoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICByZXR1cm4gXy5ldmVyeSh0aGlzLnN0YXRlLmZvcm1WYWx1ZXMuaW52b2ljZUl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfLmluY2x1ZGVzKF8ua2V5cyhfdGhpczkuc3RhdGUuc2VsZWN0ZWRJbnZvaWNlSXRlbXMpLCBpdGVtLmlkKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKICAgICAgdmFyIF90aGlzJHN0YXRlMyA9IHRoaXMuc3RhdGUsCiAgICAgICAgZm9ybVZhbHVlcyA9IF90aGlzJHN0YXRlMy5mb3JtVmFsdWVzLAogICAgICAgIG9yZGVyTnVtYmVyT3B0aW9ucyA9IF90aGlzJHN0YXRlMy5vcmRlck51bWJlck9wdGlvbnMsCiAgICAgICAgc2hpcG1lbnROdW1iZXJPcHRpb25zID0gX3RoaXMkc3RhdGUzLnNoaXBtZW50TnVtYmVyT3B0aW9ucywKICAgICAgICBzZWxlY3RlZE9yZGVyTnVtYmVycyA9IF90aGlzJHN0YXRlMy5zZWxlY3RlZE9yZGVyTnVtYmVycywKICAgICAgICBzZWxlY3RlZFNoaXBtZW50TnVtYmVycyA9IF90aGlzJHN0YXRlMy5zZWxlY3RlZFNoaXBtZW50TnVtYmVyczsKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICBidG5PcGVuVGV4dCA9IF90aGlzJHByb3BzLmJ0bk9wZW5UZXh0LAogICAgICAgIGJ0bk9wZW5EZWZhdWx0VGV4dCA9IF90aGlzJHByb3BzLmJ0bk9wZW5EZWZhdWx0VGV4dCwKICAgICAgICB0cmFuc2xhdGUgPSBfdGhpcyRwcm9wcy50cmFuc2xhdGUsCiAgICAgICAgYnRuT3BlbkRpc2FibGVkID0gX3RoaXMkcHJvcHMuYnRuT3BlbkRpc2FibGVkOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTW9kYWxXcmFwcGVyLCB7CiAgICAgICAgb25PcGVuOiB0aGlzLm9uT3BlbiwKICAgICAgICBvblNhdmU6IHRoaXMub25TYXZlLAogICAgICAgIGZpZWxkczogRklFTERTLAogICAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSwKICAgICAgICBpbml0aWFsVmFsdWVzOiBmb3JtVmFsdWVzLAogICAgICAgIHRpdGxlOiAicmVhY3QuaW52b2ljZS5hZGRJbnZvaWNlSXRlbXMubGFiZWwiLAogICAgICAgIGRlZmF1bHRUaXRsZU1lc3NhZ2U6ICJBZGQgaW52b2ljZSBpdGVtcyIsCiAgICAgICAgZm9ybVByb3BzOiB7CiAgICAgICAgICBzZWxlY3RSb3c6IHRoaXMuc2VsZWN0Um93LAogICAgICAgICAgdXBkYXRlUm93OiB0aGlzLnVwZGF0ZVJvdwogICAgICAgIH0sCiAgICAgICAgYnRuU2F2ZVRleHQ6ICJyZWFjdC5pbnZvaWNlLmFkZEludm9pY2VJdGVtcy5sYWJlbCIsCiAgICAgICAgYnRuU2F2ZURlZmF1bHRUZXh0OiAiQWRkIGludm9pY2UgaXRlbXMiLAogICAgICAgIGJ0bk9wZW5UZXh0OiBidG5PcGVuVGV4dCwKICAgICAgICBidG5PcGVuRGVmYXVsdFRleHQ6IGJ0bk9wZW5EZWZhdWx0VGV4dCwKICAgICAgICBidG5PcGVuRGlzYWJsZWQ6IGJ0bk9wZW5EaXNhYmxlZCwKICAgICAgICBidG5TYXZlRGlzYWJsZWQ6ICFfLmZpbmQoZm9ybVZhbHVlcy5pbnZvaWNlSXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5jaGVja2VkOwogICAgICAgIH0pCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IG1iLTMganVzdGlmeS1jb250ZW50LXN0YXJ0IGFsaWduLWl0ZW1zLWNlbnRlciB3LTEwMCBjb21iaW5lZC1zaGlwbWVudC1maWx0ZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICAgIGZpZWxkTmFtZTogIm9yZGVyTnVtYmVyIiwKICAgICAgICBwbGFjZWhvbGRlcjogdHJhbnNsYXRlKCdyZWFjdC5pbnZvaWNlLnNlbGVjdE9yZGVycy5sYWJlbCcsICdTZWxlY3Qgb3JkZXJzLi4uJyksCiAgICAgICAgdmFsdWU6IHNlbGVjdGVkT3JkZXJOdW1iZXJzLAogICAgICAgIG11bHRpOiB0cnVlLAogICAgICAgIG9wdGlvbnM6IG9yZGVyTnVtYmVyT3B0aW9ucywKICAgICAgICBzaG93VmFsdWVUb29sdGlwOiB0cnVlLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSh2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTAuc2V0U2VsZWN0ZWRPcmRlcnModmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgY2xhc3NlczogIiIsCiAgICAgICAgY2FjaGU6IGZhbHNlCiAgICAgIH0pLCAiXHhBMCIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICAgIGZpZWxkTmFtZTogInNoaXBtZW50TnVtYmVyIiwKICAgICAgICBwbGFjZWhvbGRlcjogdHJhbnNsYXRlKCdyZWFjdC5pbnZvaWNlLnNlbGVjdFNoaXBtZW50cy5sYWJlbCcsICdTZWxlY3Qgc2hpcG1lbnRzLi4uJyksCiAgICAgICAgdmFsdWU6IHNlbGVjdGVkU2hpcG1lbnROdW1iZXJzLAogICAgICAgIG11bHRpOiB0cnVlLAogICAgICAgIG9wdGlvbnM6IHNoaXBtZW50TnVtYmVyT3B0aW9ucywKICAgICAgICBzaG93VmFsdWVUb29sdGlwOiB0cnVlLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSh2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTAuc2V0U2VsZWN0ZWRTaGlwbWVudHModmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgY2xhc3NlczogIiIsCiAgICAgICAgY2FjaGU6IGZhbHNlCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENoZWNrYm94LCB7CiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGNsYXNzTmFtZTogIm0tMyIsCiAgICAgICAgY2hlY2tlZDogdGhpcy5jaGVja1NlbGVjdGVkKCksCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMxMC5jaGVja0FsbFZpc2libGVJdGVtcyh2YWx1ZSk7CiAgICAgICAgfQogICAgICB9KSkpOwogICAgfQogIH1dKTsKICByZXR1cm4gSW52b2ljZUl0ZW1zTW9kYWw7Cn0oQ29tcG9uZW50KTsKdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkgewogIHJldHVybiB7CiAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZShnZXRUcmFuc2xhdGUoc3RhdGUubG9jYWxpemUpKQogIH07Cn07CmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCB7CiAgc2hvd1NwaW5uZXI6IHNob3dTcGlubmVyLAogIGhpZGVTcGlubmVyOiBoaWRlU3Bpbm5lcgp9KShJbnZvaWNlSXRlbXNNb2RhbCk7Ckludm9pY2VJdGVtc01vZGFsLnByb3BUeXBlcyA9IHsKICBzaG93U3Bpbm5lcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBoaWRlU3Bpbm5lcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgb25SZXNwb25zZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBvbk9wZW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgaW52b2ljZUlkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCiAgYnRuT3BlblRleHQ6IFByb3BUeXBlcy5zdHJpbmcsCiAgYnRuT3BlbkRlZmF1bHRUZXh0OiBQcm9wVHlwZXMuc3RyaW5nLAogIGJ0bk9wZW5EaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wKfTsKSW52b2ljZUl0ZW1zTW9kYWwuZGVmYXVsdFByb3BzID0gewogIGJ0bk9wZW5UZXh0OiAnJywKICBidG5PcGVuRGVmYXVsdFRleHQ6ICcnLAogIGJ0bk9wZW5EaXNhYmxlZDogZmFsc2UKfTs="},null]}