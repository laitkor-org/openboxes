{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/utils/Select.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/utils/Select.jsx","mtime":1698037753000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9leGNsdWRlZCA9IFsib3B0aW9ucyIsICJ2YWx1ZSIsICJtdWx0aSIsICJkZWxpbWl0ZXIiLCAiYXN5bmMiLCAic2hvd1ZhbHVlVG9vbHRpcCIsICJzaG93TGFiZWxUb29sdGlwIiwgImNsZWFyYWJsZSIsICJhcnJvd0xlZnQiLCAiYXJyb3dVcCIsICJhcnJvd1JpZ2h0IiwgImFycm93RG93biIsICJmaWVsZFJlZiIsICJvblRhYlByZXNzIiwgIm9uRW50ZXJQcmVzcyIsICJjdXN0b21TZWxlY3RDb21wb25lbnRzIiwgIm9wdGlvblJlbmRlcmVyIiwgImNsYXNzTmFtZVByZWZpeCIsICJzaG93U2VsZWN0ZWRPcHRpb25Db2xvciJdOwpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyAiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2YiOyByZXR1cm4gX3R5cGVvZiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9LCBfdHlwZW9mKG9iaik7IH0KZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTsgdmFyIGtleSwgaTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSB7fTsgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyB2YXIga2V5LCBpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IHJldHVybiB0YXJnZXQ7IH0KZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyWyJAQGl0ZXJhdG9yIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgInByb3RvdHlwZSIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH0KZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnOwppbXBvcnQgeyBnZXRUcmFuc2xhdGUgfSBmcm9tICdyZWFjdC1sb2NhbGl6ZS1yZWR1eCc7CmltcG9ydCB7IE92ZXJsYXkgfSBmcm9tICdyZWFjdC1vdmVybGF5cyc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCBSZWFjdFNlbGVjdCwgeyBBc3luYywgY29tcG9uZW50cyB9IGZyb20gJ3JlYWN0LXNlbGVjdCc7CmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdyZWFjdC10aXBweSc7CmltcG9ydCB7IHNlbGVjdE51bGxPcHRpb24gfSBmcm9tICd1dGlscy9vcHRpb24tdXRpbHMnOwppbXBvcnQgVHJhbnNsYXRlLCB7IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZSB9IGZyb20gJ3V0aWxzL1RyYW5zbGF0ZSc7CmltcG9ydCAncmVhY3QtdGlwcHkvZGlzdC90aXBweS5jc3MnOwp2YXIgRHJvcGRvd24gPSBmdW5jdGlvbiBEcm9wZG93bihfcmVmKSB7CiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbiwKICAgIHN0eWxlID0gX3JlZi5zdHlsZSwKICAgIHdpZHRoID0gX3JlZi53aWR0aDsKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0eWxlKSwge30sIHsKICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsCiAgICAgIHpJbmRleDogOTk5OSwKICAgICAgd2lkdGg6IHdpZHRoLAogICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsCiAgICAgIGJvcmRlcjogJzFweCBzb2xpZCBoc2woMGRlZyAwJSA4MCUpJwogICAgfSkKICB9LCBjaGlsZHJlbik7Cn07CkRyb3Bkb3duLnByb3BUeXBlcyA9IHsKICBjaGlsZHJlbjogUHJvcFR5cGVzLmVsZW1lbnQuaXNSZXF1aXJlZCwKICBzdHlsZTogUHJvcFR5cGVzLnNoYXBlKHt9KS5pc1JlcXVpcmVkLAogIHdpZHRoOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQKfTsKdmFyIE1lbnUgPSBmdW5jdGlvbiBNZW51KHByb3BzKSB7CiAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCIiLmNvbmNhdChwcm9wcy5zZWxlY3RQcm9wcy5pZCwgIi1jb250YWluZXIiKSk7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJsYXksIHsKICAgIHNob3c6IHRydWUsCiAgICBwbGFjZW1lbnQ6ICJib3R0b20iLAogICAgdGFyZ2V0OiB0YXJnZXQsCiAgICBjb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEcm9wZG93biwgewogICAgd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aC50b1N0cmluZygpCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIF9leHRlbmRzKHsKICAgIGNsYXNzTmFtZTogImN1c3RvbS1vcHRpb24iCiAgfSwgcHJvcHMuaW5uZXJQcm9wcyksIHByb3BzLnNlbGVjdFByb3BzLmNyZWF0ZU5ld0Zyb21Nb2RhbCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgY2xhc3NOYW1lOiAiYWRkLW5ldy1idXR0b24iLAogICAgb25DbGljazogcHJvcHMuc2VsZWN0UHJvcHMubmV3T3B0aW9uTW9kYWxPcGVuLAogICAgb25LZXlQcmVzczogcHJvcHMuc2VsZWN0UHJvcHMubmV3T3B0aW9uTW9kYWxPcGVuLAogICAgcm9sZTogImJ1dHRvbiIsCiAgICB0YWJJbmRleDogMAogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImkiLCB7CiAgICBjbGFzc05hbWU6ICJmYSBmYS1wbHVzIHByLTIiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgaWQ6IHByb3BzLnNlbGVjdFByb3BzLmNyZWF0ZU5ld0Zyb21Nb2RhbExhYmVsLAogICAgZGVmYXVsdE1lc3NhZ2U6IHByb3BzLnNlbGVjdFByb3BzLmRlZmF1bHRNZXNzYWdlCiAgfSkpKSwgcHJvcHMuY2hpbGRyZW4pKSk7Cn07Ck1lbnUucHJvcFR5cGVzID0gewogIGNoaWxkcmVuOiBQcm9wVHlwZXMuZWxlbWVudC5pc1JlcXVpcmVkLAogIGlubmVyUHJvcHM6IFByb3BUeXBlcy5zaGFwZSh7fSkuaXNSZXF1aXJlZCwKICBzZWxlY3RQcm9wczogUHJvcFR5cGVzLnNoYXBlKHsKICAgIGlkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCiAgICBjcmVhdGVOZXdGcm9tTW9kYWw6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsCiAgICBuZXdPcHRpb25Nb2RhbE9wZW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgICBjcmVhdGVOZXdGcm9tTW9kYWxMYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLAogICAgZGVmYXVsdE1lc3NhZ2U6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZAogIH0pLmlzUmVxdWlyZWQKfTsKdmFyIE9wdGlvbiA9IGZ1bmN0aW9uIE9wdGlvbihwcm9wcykgewogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLk9wdGlvbiwgcHJvcHMsIHByb3BzLnNlbGVjdFByb3BzLm9wdGlvblJlbmRlcmVyID8gcHJvcHMuc2VsZWN0UHJvcHMub3B0aW9uUmVuZGVyZXIocHJvcHMuZGF0YSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgcHJvcHMuZGF0YS5sYWJlbCkpOwp9OwpPcHRpb24ucHJvcFR5cGVzID0gewogIGRhdGE6IFByb3BUeXBlcy5zaGFwZSh7CiAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkCiAgfSkuaXNSZXF1aXJlZCwKICBzZWxlY3RQcm9wczogUHJvcFR5cGVzLnNoYXBlKHsKICAgIG9wdGlvblJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYwogIH0pLmlzUmVxdWlyZWQKfTsKdmFyIFNlbGVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhTZWxlY3QsIF9Db21wb25lbnQpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU2VsZWN0KTsKICBmdW5jdGlvbiBTZWxlY3QocHJvcHMpIHsKICAgIHZhciBfdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWxlY3QpOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgdmFsdWU6IHByb3BzLmluaXRpYWxWYWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHByb3BzLmluaXRpYWxWYWx1ZSwKICAgICAgaWQ6IF8udW5pcXVlSWQoJ3NlbGVjdC1pZF8nKSwKICAgICAgc29ydGVkT3B0aW9uc0J5Q2hlY2tlZDogbnVsbAogICAgfTsKICAgIF90aGlzLmhhbmRsZUNoYW5nZSA9IF90aGlzLmhhbmRsZUNoYW5nZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLmdldFRvb2x0aXBIdG1sID0gX3RoaXMuZ2V0VG9vbHRpcEh0bWwuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy5nZXRWYWx1ZUxhYmVsID0gX3RoaXMuZ2V0VmFsdWVMYWJlbC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLm1hcE9wdGlvbnMgPSBfdGhpcy5tYXBPcHRpb25zLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoU2VsZWN0LCBbewogICAga2V5OiAib3B0aW9ucyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIHZhbHVlc09wdGlvbnMgPSB0aGlzLm1hcE9wdGlvbnModGhpcy5wcm9wcy5vcHRpb25zKTsKICAgICAgaWYgKHRoaXMucHJvcHMubnVsbE9wdGlvbikgewogICAgICAgIHZhciBudWxsT3B0aW9uID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzZWxlY3ROdWxsT3B0aW9uKSwge30sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSh0aGlzLnByb3BzLm51bGxPcHRpb25MYWJlbCwgdGhpcy5wcm9wcy5udWxsT3B0aW9uRGVmYXVsdExhYmVsKQogICAgICAgIH0pOwogICAgICAgIHZhbHVlc09wdGlvbnMudW5zaGlmdChudWxsT3B0aW9uKTsKICAgICAgfQogICAgICByZXR1cm4gdmFsdWVzT3B0aW9uczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWYWx1ZUxhYmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZUxhYmVsKCkgewogICAgICB2YXIgX3ZhbHVlJGRpc3BsYXlOYW1lcywKICAgICAgICBfdGhpczIgPSB0aGlzLAogICAgICAgIF92YWx1ZSRsYWJlbDsKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICBtdWx0aSA9IF90aGlzJHByb3BzLm11bHRpLAogICAgICAgIHZhbHVlID0gX3RoaXMkcHJvcHMudmFsdWUsCiAgICAgICAgbGFiZWxLZXkgPSBfdGhpcyRwcm9wcy5sYWJlbEtleTsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCAmJiAoX3ZhbHVlJGRpc3BsYXlOYW1lcyA9IHZhbHVlLmRpc3BsYXlOYW1lcykgIT09IG51bGwgJiYgX3ZhbHVlJGRpc3BsYXlOYW1lcyAhPT0gdm9pZCAwICYmIF92YWx1ZSRkaXNwbGF5TmFtZXNbImRlZmF1bHQiXSB8fCB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwICYmIHZhbHVlLmRpc3BsYXlOYW1lKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWx1ZS5uYW1lOwogICAgICB9CiAgICAgIGlmIChtdWx0aSkgewogICAgICAgIHJldHVybiB0aGlzLnByb3BzLnZhbHVlLm1hcChmdW5jdGlvbiAodikgewogICAgICAgICAgdmFyIF92JGxhYmVsS2V5LCBfb3B0aW9uJGxhYmVsS2V5OwogICAgICAgICAgdmFyIGxhYmVsID0gKF92JGxhYmVsS2V5ID0gdiA9PT0gbnVsbCB8fCB2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2W2xhYmVsS2V5XSkgIT09IG51bGwgJiYgX3YkbGFiZWxLZXkgIT09IHZvaWQgMCA/IF92JGxhYmVsS2V5IDogdiA9PT0gbnVsbCB8fCB2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2LmxhYmVsOwogICAgICAgICAgaWYgKGxhYmVsKSB7CiAgICAgICAgICAgIHJldHVybiBsYWJlbDsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBsYWJlbHMgb24gdmFsdWUgaXRlbQogICAgICAgICAgLy8gdGhlbiB0cnkgdG8gZXh0cmFjdCB0aGVzZSBsYWJlbHMgZnJvbSBzZWxlY3Qgb3B0aW9ucwogICAgICAgICAgdmFyIG9wdGlvbiA9IF90aGlzMi5vcHRpb25zLmZpbmQoZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgICAgIHJldHVybiAoaXQgPT09IG51bGwgfHwgaXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0LmlkKSAmJiAoaXQgPT09IG51bGwgfHwgaXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0LmlkKSA9PT0gKHYgPT09IG51bGwgfHwgdiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdi5pZCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiAoX29wdGlvbiRsYWJlbEtleSA9IG9wdGlvbiA9PT0gbnVsbCB8fCBvcHRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbltsYWJlbEtleV0pICE9PSBudWxsICYmIF9vcHRpb24kbGFiZWxLZXkgIT09IHZvaWQgMCA/IF9vcHRpb24kbGFiZWxLZXkgOiBvcHRpb24gPT09IG51bGwgfHwgb3B0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb24ubGFiZWw7CiAgICAgICAgfSkuam9pbignLCAnKTsKICAgICAgfQogICAgICByZXR1cm4gKF92YWx1ZSRsYWJlbCA9IHZhbHVlLmxhYmVsKSAhPT0gbnVsbCAmJiBfdmFsdWUkbGFiZWwgIT09IHZvaWQgMCA/IF92YWx1ZSRsYWJlbCA6IHZhbHVlLm5hbWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VG9vbHRpcEh0bWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRvb2x0aXBIdG1sKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICBwbGFjZWhvbGRlciA9IF90aGlzJHByb3BzMi5wbGFjZWhvbGRlciwKICAgICAgICBzaG93TGFiZWxUb29sdGlwID0gX3RoaXMkcHJvcHMyLnNob3dMYWJlbFRvb2x0aXAsCiAgICAgICAgZGVmYXVsdFBsYWNlaG9sZGVyID0gX3RoaXMkcHJvcHMyLmRlZmF1bHRQbGFjZWhvbGRlcjsKICAgICAgdmFyIHZhbHVlTGFiZWwgPSB0aGlzLmdldFZhbHVlTGFiZWwoKTsKICAgICAgaWYgKHNob3dMYWJlbFRvb2x0aXApIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInAtMSIKICAgICAgICB9LCAiIi5jb25jYXQodGhpcy5wcm9wcy50cmFuc2xhdGUocGxhY2Vob2xkZXIsIGRlZmF1bHRQbGFjZWhvbGRlciAhPT0gbnVsbCAmJiBkZWZhdWx0UGxhY2Vob2xkZXIgIT09IHZvaWQgMCA/IGRlZmF1bHRQbGFjZWhvbGRlciA6IHBsYWNlaG9sZGVyKSkuY29uY2F0KHZhbHVlTGFiZWwgPyAiOiAiLmNvbmNhdCh2YWx1ZUxhYmVsKSA6ICcnKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAicC0xIgogICAgICB9LCB2YWx1ZUxhYmVsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXBPcHRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBPcHRpb25zKHZhbHVlcykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF8ubWFwKHZhbHVlcywgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIG5ld1ZhbHVlID0gdmFsdWU7CiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgbGFiZWw6IHZhbHVlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBpZiAodmFsdWUub3B0aW9ucykgewogICAgICAgICAgbmV3VmFsdWUub3B0aW9ucyA9IF90aGlzMy5tYXBPcHRpb25zKHZhbHVlLm9wdGlvbnMpOwogICAgICAgIH0KICAgICAgICBpZiAodmFsdWUgJiYgX3RoaXMzLnByb3BzLmxhYmVsS2V5ICYmICF2YWx1ZS5sYWJlbCkgewogICAgICAgICAgbmV3VmFsdWUubGFiZWwgPSB2YWx1ZVtfdGhpczMucHJvcHMubGFiZWxLZXldOwogICAgICAgIH0KICAgICAgICBpZiAodmFsdWUgJiYgX3RoaXMzLnByb3BzLnZhbHVlS2V5ICYmICF2YWx1ZS52YWx1ZSkgewogICAgICAgICAgbmV3VmFsdWUudmFsdWUgPSB2YWx1ZVtfdGhpczMucHJvcHMudmFsdWVLZXldOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3VmFsdWU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh2YWx1ZSk7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKG51bGwpOwogICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgdmFsdWU6IG51bGwKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNvcnRPcHRpb25zQnlDaGVja2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzb3J0T3B0aW9uc0J5Q2hlY2tlZChvcHRpb25zLCBjaGVja2VkVmFsdWVzKSB7CiAgICAgIHZhciBncm91cEJ5Q2hlY2tlZCA9IGZ1bmN0aW9uIGdyb3VwQnlDaGVja2VkKCkgewogICAgICAgIGlmIChvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCAmJiBvcHRpb25zLmxlbmd0aCkgewogICAgICAgICAgcmV0dXJuIG9wdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cnIpIHsKICAgICAgICAgICAgLy8gSWYgY2hlY2tlZCB2YWx1ZXMgY29udGFpbiBjdXJyZW50IG9wdGlvbiwgYWRkIGl0IHRvIGNoZWNrZWQgb3B0aW9ucwogICAgICAgICAgICBpZiAoY2hlY2tlZFZhbHVlcyAhPT0gbnVsbCAmJiBjaGVja2VkVmFsdWVzICE9PSB2b2lkIDAgJiYgY2hlY2tlZFZhbHVlcy5zb21lKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgICByZXR1cm4gdmFsLmlkID09PSBjdXJyLmlkOwogICAgICAgICAgICB9KSkgewogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGFjYyksIHt9LCB7CiAgICAgICAgICAgICAgICBjaGVja2VkOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFjYy5jaGVja2VkKSwgW2N1cnJdKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIElmIGNoZWNrZWQgdmFsdWVzIGRvbid0IGNvbnRhaW4gY3VycmVudCBvcHRpb24sIGFkZCBpdCB0byB1bmNoZWNrZWQKICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYWNjKSwge30sIHsKICAgICAgICAgICAgICB1bmNoZWNrZWQ6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjLnVuY2hlY2tlZCksIFtjdXJyXSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGNoZWNrZWQ6IFtdLAogICAgICAgICAgICB1bmNoZWNrZWQ6IFtdCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGNoZWNrZWQ6IFtdLAogICAgICAgICAgdW5jaGVja2VkOiBbXQogICAgICAgIH07CiAgICAgIH07CiAgICAgIHZhciBfZ3JvdXBCeUNoZWNrZWQgPSBncm91cEJ5Q2hlY2tlZCgpLAogICAgICAgIGNoZWNrZWQgPSBfZ3JvdXBCeUNoZWNrZWQuY2hlY2tlZCwKICAgICAgICB1bmNoZWNrZWQgPSBfZ3JvdXBCeUNoZWNrZWQudW5jaGVja2VkOwogICAgICAvLyBDb25jYXQgY2hlY2tlZCBhbmQgdW5jaGVja2VkIG9wdGlvbnMgaW4gb3JkZXI6IGNoZWNrZWQsIHVuY2hlY2tlZCwgc28gY2hlY2tlZCBhcmUgYXQgdGhlIHRvcAogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBzb3J0ZWRPcHRpb25zQnlDaGVja2VkOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGNoZWNrZWQpLCBfdG9Db25zdW1hYmxlQXJyYXkodW5jaGVja2VkKSkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzLAogICAgICAgIF92YWx1ZSwKICAgICAgICBfY3VzdG9tU2VsZWN0Q29tcG9uZW4sCiAgICAgICAgX2N1c3RvbVNlbGVjdENvbXBvbmVuMiwKICAgICAgICBfY3VzdG9tU2VsZWN0Q29tcG9uZW4zOwogICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcywKICAgICAgICBzZWxlY3RPcHRpb25zID0gX3RoaXMkcHJvcHMzLm9wdGlvbnMsCiAgICAgICAgX3RoaXMkcHJvcHMzJHZhbHVlID0gX3RoaXMkcHJvcHMzLnZhbHVlLAogICAgICAgIHNlbGVjdFZhbHVlID0gX3RoaXMkcHJvcHMzJHZhbHVlID09PSB2b2lkIDAgPyB0aGlzLnN0YXRlLnZhbHVlIDogX3RoaXMkcHJvcHMzJHZhbHVlLAogICAgICAgIF90aGlzJHByb3BzMyRtdWx0aSA9IF90aGlzJHByb3BzMy5tdWx0aSwKICAgICAgICBtdWx0aSA9IF90aGlzJHByb3BzMyRtdWx0aSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfdGhpcyRwcm9wczMkbXVsdGksCiAgICAgICAgX3RoaXMkcHJvcHMzJGRlbGltaXRlID0gX3RoaXMkcHJvcHMzLmRlbGltaXRlciwKICAgICAgICBkZWxpbWl0ZXIgPSBfdGhpcyRwcm9wczMkZGVsaW1pdGUgPT09IHZvaWQgMCA/ICc7JyA6IF90aGlzJHByb3BzMyRkZWxpbWl0ZSwKICAgICAgICBfdGhpcyRwcm9wczMkYXN5bmMgPSBfdGhpcyRwcm9wczMuYXN5bmMsCiAgICAgICAgYXN5bmMgPSBfdGhpcyRwcm9wczMkYXN5bmMgPT09IHZvaWQgMCA/IGZhbHNlIDogX3RoaXMkcHJvcHMzJGFzeW5jLAogICAgICAgIHNob3dWYWx1ZVRvb2x0aXAgPSBfdGhpcyRwcm9wczMuc2hvd1ZhbHVlVG9vbHRpcCwKICAgICAgICBzaG93TGFiZWxUb29sdGlwID0gX3RoaXMkcHJvcHMzLnNob3dMYWJlbFRvb2x0aXAsCiAgICAgICAgX3RoaXMkcHJvcHMzJGNsZWFyYWJsID0gX3RoaXMkcHJvcHMzLmNsZWFyYWJsZSwKICAgICAgICBjbGVhcmFibGUgPSBfdGhpcyRwcm9wczMkY2xlYXJhYmwgPT09IHZvaWQgMCA/IHRydWUgOiBfdGhpcyRwcm9wczMkY2xlYXJhYmwsCiAgICAgICAgYXJyb3dMZWZ0ID0gX3RoaXMkcHJvcHMzLmFycm93TGVmdCwKICAgICAgICBhcnJvd1VwID0gX3RoaXMkcHJvcHMzLmFycm93VXAsCiAgICAgICAgYXJyb3dSaWdodCA9IF90aGlzJHByb3BzMy5hcnJvd1JpZ2h0LAogICAgICAgIGFycm93RG93biA9IF90aGlzJHByb3BzMy5hcnJvd0Rvd24sCiAgICAgICAgZmllbGRSZWYgPSBfdGhpcyRwcm9wczMuZmllbGRSZWYsCiAgICAgICAgb25UYWJQcmVzcyA9IF90aGlzJHByb3BzMy5vblRhYlByZXNzLAogICAgICAgIG9uRW50ZXJQcmVzcyA9IF90aGlzJHByb3BzMy5vbkVudGVyUHJlc3MsCiAgICAgICAgY3VzdG9tU2VsZWN0Q29tcG9uZW50cyA9IF90aGlzJHByb3BzMy5jdXN0b21TZWxlY3RDb21wb25lbnRzLAogICAgICAgIG9wdGlvblJlbmRlcmVyID0gX3RoaXMkcHJvcHMzLm9wdGlvblJlbmRlcmVyLAogICAgICAgIGNsYXNzTmFtZVByZWZpeCA9IF90aGlzJHByb3BzMy5jbGFzc05hbWVQcmVmaXgsCiAgICAgICAgc2hvd1NlbGVjdGVkT3B0aW9uQ29sb3IgPSBfdGhpcyRwcm9wczMuc2hvd1NlbGVjdGVkT3B0aW9uQ29sb3IsCiAgICAgICAgYXR0cmlidXRlcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfdGhpcyRwcm9wczMsIF9leGNsdWRlZCk7CiAgICAgIHZhciBmb3JtYXRWYWx1ZSA9IGF0dHJpYnV0ZXMuZm9ybWF0VmFsdWUsCiAgICAgICAgY2xhc3NOYW1lID0gYXR0cmlidXRlcy5jbGFzc05hbWUsCiAgICAgICAgX2F0dHJpYnV0ZXMkc2hvd0xhYmVsID0gYXR0cmlidXRlcy5zaG93TGFiZWwsCiAgICAgICAgc2hvd0xhYmVsID0gX2F0dHJpYnV0ZXMkc2hvd0xhYmVsID09PSB2b2lkIDAgPyBmYWxzZSA6IF9hdHRyaWJ1dGVzJHNob3dMYWJlbDsKICAgICAgdmFyIHZhbHVlID0gc2VsZWN0VmFsdWUgfHwgbnVsbDsKICAgICAgaWYgKHNlbGVjdFZhbHVlICYmIHR5cGVvZiBzZWxlY3RWYWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb24gPSBfLmZpbmQodGhpcy5vcHRpb25zLCBmdW5jdGlvbiAobykgewogICAgICAgICAgcmV0dXJuIG8udmFsdWUgPT09IHNlbGVjdFZhbHVlOwogICAgICAgIH0pOwogICAgICAgIHZhbHVlID0gewogICAgICAgICAgdmFsdWU6IHNlbGVjdFZhbHVlLAogICAgICAgICAgbGFiZWw6IHNlbGVjdGVkT3B0aW9uID8gc2VsZWN0ZWRPcHRpb24ubGFiZWwgOiAnJwogICAgICAgIH07CiAgICAgIH0KICAgICAgaWYgKCFtdWx0aSkgewogICAgICAgIGlmICh2YWx1ZSAmJiBhdHRyaWJ1dGVzLnZhbHVlS2V5ICYmICF2YWx1ZS52YWx1ZSkgewogICAgICAgICAgdmFsdWUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHsKICAgICAgICAgICAgdmFsdWU6IHZhbHVlW2F0dHJpYnV0ZXMudmFsdWVLZXldCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbHVlICYmIGF0dHJpYnV0ZXMubGFiZWxLZXkgJiYgIXZhbHVlLmxhYmVsKSB7CiAgICAgICAgICB2YWx1ZSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwgewogICAgICAgICAgICBsYWJlbDogdmFsdWVbYXR0cmlidXRlcy5sYWJlbEtleV0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgU2VsZWN0VHlwZSA9IGFzeW5jID8gQXN5bmMgOiBSZWFjdFNlbGVjdDsKICAgICAgdmFyIFNpbmdsZVZhbHVlID0gZnVuY3Rpb24gU2luZ2xlVmFsdWUocHJvcHMpIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5TaW5nbGVWYWx1ZSwgcHJvcHMsIF90aGlzNC5wcm9wcy52YWx1ZVJlbmRlcmVyID8gX3RoaXM0LnByb3BzLnZhbHVlUmVuZGVyZXIoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcy5kYXRhKSwge30sIHsKICAgICAgICAgIHNob3dTZWxlY3RlZE9wdGlvbkNvbG9yOiBzaG93U2VsZWN0ZWRPcHRpb25Db2xvcgogICAgICAgIH0pKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBwcm9wcy5kYXRhLmxhYmVsKSk7CiAgICAgIH07CiAgICAgIGlmIChhdHRyaWJ1dGVzLmRpc2FibGVkICYmIHRoaXMucHJvcHMudmFsdWUgJiYgc2hvd0xhYmVsKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5CiAgICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0VmFsdWUgPyBmb3JtYXRWYWx1ZSh0aGlzLnByb3BzLnZhbHVlKSA6IHRoaXMucHJvcHMudmFsdWUubGFiZWwgPyB0aGlzLnByb3BzLnZhbHVlLmxhYmVsIDogdGhpcy5wcm9wcy52YWx1ZTsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgIGlkOiAiIi5jb25jYXQodGhpcy5zdGF0ZS5pZCwgIi1jb250YWluZXIiKQogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgICAgICAgIGh0bWw6IHRoaXMucHJvcHMudmFsdWUubGFiZWwsCiAgICAgICAgICBkaXNhYmxlZDogIXNob3dWYWx1ZVRvb2x0aXAsCiAgICAgICAgICB0aGVtZTogInRyYW5zcGFyZW50IiwKICAgICAgICAgIGRlbGF5OiAiMTUwIiwKICAgICAgICAgIGR1cmF0aW9uOiAiMjUwIiwKICAgICAgICAgIGhpZGVEZWxheTogIjUwIgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgICBjbGFzc05hbWU6ICJmb250LXNpemUteHMgdGV4dC10cnVuY2F0ZSAiLmNvbmNhdChjbGFzc05hbWUpCiAgICAgICAgfSwgZm9ybWF0dGVkVmFsdWUpKSk7CiAgICAgIH0KICAgICAgdmFyIGdldFBsYWNlaG9sZGVyID0gZnVuY3Rpb24gZ2V0UGxhY2Vob2xkZXIoKSB7CiAgICAgICAgaWYgKGF0dHJpYnV0ZXMucGxhY2Vob2xkZXIpIHsKICAgICAgICAgIHZhciBfYXR0cmlidXRlcyRkZWZhdWx0UGw7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiBhdHRyaWJ1dGVzLnBsYWNlaG9sZGVyLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogKF9hdHRyaWJ1dGVzJGRlZmF1bHRQbCA9IGF0dHJpYnV0ZXMuZGVmYXVsdFBsYWNlaG9sZGVyKSAhPT0gbnVsbCAmJiBfYXR0cmlidXRlcyRkZWZhdWx0UGwgIT09IHZvaWQgMCA/IF9hdHRyaWJ1dGVzJGRlZmF1bHRQbCA6IGF0dHJpYnV0ZXMucGxhY2Vob2xkZXIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfTsKCiAgICAgIC8qIFdlIHdvdWxkIGxpa2UgdG8gc2VlIHRoZSB0b29sdGlwIHdoZW4gYW4gaXRlbQogICAgICAgIGhhcyBkaXNwbGF5TmFtZSBvciB3aGVuIHRoZSBzaG93TGFiZWxUb29sdGlwCiAgICAgICAgb3Igc2hvd1ZhbHVlVG9vbHRpcCBhcmUgdHJ1dGh5LiBXZSByZXR1cm4gZmFsc2UKICAgICAgICB3aGVuIGF0IGxlYXN0IG9uZSBwcm9wZXJ0eSBpcyB0cnVlLCBiZWNhdXNlIHdlIG5lZWQKICAgICAgICBhbiBpbmZvcm1hdGlvbiB3aGVuIHRoZSB0b29sdGlwIHNob3VsZCBiZSBkaXNhYmxlZC4KICAgICAgICovCiAgICAgIHZhciBpc1Rvb2x0aXBEaXNhYmxlZCA9IGZ1bmN0aW9uIGlzVG9vbHRpcERpc2FibGVkKCkgewogICAgICAgIHZhciBmaWVsZFZhbHVlID0gX3RoaXM0LnByb3BzLnZhbHVlOwogICAgICAgIGlmIChmaWVsZFZhbHVlICE9PSBudWxsICYmIGZpZWxkVmFsdWUgIT09IHZvaWQgMCAmJiBmaWVsZFZhbHVlLmRpc3BsYXlOYW1lIHx8IHNob3dMYWJlbFRvb2x0aXApIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICEoc2hvd1ZhbHVlVG9vbHRpcCAmJiBmaWVsZFZhbHVlKTsKICAgICAgfTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgaWQ6ICIiLmNvbmNhdCh0aGlzLnN0YXRlLmlkLCAiLWNvbnRhaW5lciIpCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgICAgICBodG1sOiB0aGlzLmdldFRvb2x0aXBIdG1sKCksCiAgICAgICAgZGlzYWJsZWQ6IGlzVG9vbHRpcERpc2FibGVkKCksCiAgICAgICAgdGhlbWU6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgYXJyb3c6ICJ0cnVlIiwKICAgICAgICBkZWxheTogIjE1MCIsCiAgICAgICAgZHVyYXRpb246ICIyNTAiLAogICAgICAgIGhpZGVEZWxheTogIjUwIiwKICAgICAgICB0aXRsZTogIiAiLAogICAgICAgIGNsYXNzZXM6ICIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdFR5cGUsIF9leHRlbmRzKHt9LCBhdHRyaWJ1dGVzLCB7CiAgICAgICAgcGxhY2Vob2xkZXI6IGdldFBsYWNlaG9sZGVyKCksCiAgICAgICAgaXNEaXNhYmxlZDogYXR0cmlidXRlcy5kaXNhYmxlZCwKICAgICAgICBvcHRpb25zOiAoKF92YWx1ZSA9IHZhbHVlKSA9PT0gbnVsbCB8fCBfdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZS5sZW5ndGgpICYmIHRoaXMuc3RhdGUuc29ydGVkT3B0aW9uc0J5Q2hlY2tlZCB8fCB0aGlzLm9wdGlvbnMsCiAgICAgICAgaXNNdWx0aTogbXVsdGksCiAgICAgICAgaXNDbGVhcmFibGU6IGNsZWFyYWJsZSwKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgZGVsaW1pdGVyOiBkZWxpbWl0ZXIsCiAgICAgICAgb25NZW51Q2xvc2U6IGZ1bmN0aW9uIG9uTWVudUNsb3NlKCkgewogICAgICAgICAgaWYgKG11bHRpKSBfdGhpczQuc29ydE9wdGlvbnNCeUNoZWNrZWQoX3RoaXM0Lm9wdGlvbnMsIHZhbHVlKTsKICAgICAgICAgIGlmIChfdGhpczQucHJvcHMub25NZW51Q2xvc2UpIF90aGlzNC5wcm9wcy5vbk1lbnVDbG9zZSgpOwogICAgICAgIH0sCiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZSwKICAgICAgICBjb21wb25lbnRzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGN1c3RvbVNlbGVjdENvbXBvbmVudHMpLCB7fSwgewogICAgICAgICAgTWVudTogKF9jdXN0b21TZWxlY3RDb21wb25lbiA9IGN1c3RvbVNlbGVjdENvbXBvbmVudHMuTWVudSkgIT09IG51bGwgJiYgX2N1c3RvbVNlbGVjdENvbXBvbmVuICE9PSB2b2lkIDAgPyBfY3VzdG9tU2VsZWN0Q29tcG9uZW4gOiBNZW51LAogICAgICAgICAgT3B0aW9uOiAoX2N1c3RvbVNlbGVjdENvbXBvbmVuMiA9IGN1c3RvbVNlbGVjdENvbXBvbmVudHMuT3B0aW9uKSAhPT0gbnVsbCAmJiBfY3VzdG9tU2VsZWN0Q29tcG9uZW4yICE9PSB2b2lkIDAgPyBfY3VzdG9tU2VsZWN0Q29tcG9uZW4yIDogT3B0aW9uLAogICAgICAgICAgU2luZ2xlVmFsdWU6IChfY3VzdG9tU2VsZWN0Q29tcG9uZW4zID0gY3VzdG9tU2VsZWN0Q29tcG9uZW50cy5TaW5nbGVWYWx1ZSkgIT09IG51bGwgJiYgX2N1c3RvbVNlbGVjdENvbXBvbmVuMyAhPT0gdm9pZCAwID8gX2N1c3RvbVNlbGVjdENvbXBvbmVuMyA6IFNpbmdsZVZhbHVlCiAgICAgICAgfSksCiAgICAgICAgcmVmOiBmaWVsZFJlZiwKICAgICAgICBjbGFzc05hbWVQcmVmaXg6IGNsYXNzTmFtZVByZWZpeCwKICAgICAgICBsb2FkaW5nTWVzc2FnZTogZnVuY3Rpb24gbG9hZGluZ01lc3NhZ2UoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM0LnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC5sb2FkaW5nLmxhYmVsJywgJ0xvYWRpbmcuLi4nKTsKICAgICAgICB9LAogICAgICAgIG5vT3B0aW9uc01lc3NhZ2U6IGZ1bmN0aW9uIG5vT3B0aW9uc01lc3NhZ2UoKSB7CiAgICAgICAgICByZXR1cm4gYXN5bmMgPyBfdGhpczQucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5kZWZhdWx0LnNlbGVjdC5ub1Jlc3VsdHNGb3VuZC5sYWJlbCcsICdObyByZXN1bHRzIGZvdW5kJykgOiBfdGhpczQucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5kZWZhdWx0LnNlbGVjdC50eXBlVG9TZWFyY2gubGFiZWwnLCAnVHlwZSB0byBzZWFyY2gnKTsKICAgICAgICB9LAogICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb24gb25LZXlEb3duKGV2ZW50KSB7CiAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHsKICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICAvKiBhcnJvdyBsZWZ0ICovCiAgICAgICAgICAgICAgaWYgKGFycm93TGVmdCkgewogICAgICAgICAgICAgICAgYXJyb3dMZWZ0KCk7CiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgIC8qIGFycm93IHVwICovCiAgICAgICAgICAgICAgaWYgKGFycm93VXApIHsKICAgICAgICAgICAgICAgIGFycm93VXAoKTsKICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgLyogYXJyb3cgcmlnaHQgKi8KICAgICAgICAgICAgICBpZiAoYXJyb3dSaWdodCkgewogICAgICAgICAgICAgICAgYXJyb3dSaWdodCgpOwogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgICAgICAvKiBhcnJvdyBkb3duICovCiAgICAgICAgICAgICAgaWYgKGFycm93RG93bikgewogICAgICAgICAgICAgICAgYXJyb3dEb3duKCk7CiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgLyogVGFiIGtleSAqLwogICAgICAgICAgICAgIGlmIChvblRhYlByZXNzKSB7CiAgICAgICAgICAgICAgICBvblRhYlByZXNzKGV2ZW50KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgLyogRW50ZXIga2V5ICovCiAgICAgICAgICAgICAgaWYgKG9uRW50ZXJQcmVzcykgewogICAgICAgICAgICAgICAgb25FbnRlclByZXNzKGV2ZW50KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBuYW1lOiB0aGlzLnN0YXRlLmlkLAogICAgICAgIGlkOiB0aGlzLnN0YXRlLmlkLAogICAgICAgIG9wdGlvblJlbmRlcmVyOiBvcHRpb25SZW5kZXJlcgogICAgICB9KSkpKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFNlbGVjdDsKfShDb21wb25lbnQpOwp2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7CiAgcmV0dXJuIHsKICAgIHRyYW5zbGF0ZTogdHJhbnNsYXRlV2l0aERlZmF1bHRNZXNzYWdlKGdldFRyYW5zbGF0ZShzdGF0ZS5sb2NhbGl6ZSkpCiAgfTsKfTsKZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKFNlbGVjdCk7ClNlbGVjdC5wcm9wVHlwZXMgPSB7CiAgb3B0aW9uczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLnNoYXBlKHt9KV0pKS5pc1JlcXVpcmVkLAogIHZhbHVlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuc2hhcGUoe30pLCBQcm9wVHlwZXMuYW55XSksCiAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLAogIG9uTWVudUNsb3NlOiBQcm9wVHlwZXMuZnVuYywKICBtdWx0aTogUHJvcFR5cGVzLmJvb2wsCiAgY2xlYXJhYmxlOiBQcm9wVHlwZXMuYm9vbCwKICBhc3luYzogUHJvcFR5cGVzLmJvb2wsCiAgZGVsaW1pdGVyOiBQcm9wVHlwZXMuc3RyaW5nLAogIHNob3dWYWx1ZVRvb2x0aXA6IFByb3BUeXBlcy5ib29sLAogIHNob3dMYWJlbFRvb2x0aXA6IFByb3BUeXBlcy5ib29sLAogIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLAogIGluaXRpYWxWYWx1ZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLnNoYXBlKHt9KSwgUHJvcFR5cGVzLmFueV0pLAogIGFycm93TGVmdDogUHJvcFR5cGVzLmZ1bmMsCiAgYXJyb3dVcDogUHJvcFR5cGVzLmZ1bmMsCiAgYXJyb3dSaWdodDogUHJvcFR5cGVzLmZ1bmMsCiAgYXJyb3dEb3duOiBQcm9wVHlwZXMuZnVuYywKICBmaWVsZFJlZjogUHJvcFR5cGVzLmZ1bmMsCiAgb25UYWJQcmVzczogUHJvcFR5cGVzLmZ1bmMsCiAgb25FbnRlclByZXNzOiBQcm9wVHlwZXMuZnVuYywKICBvcHRpb25SZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsCiAgdmFsdWVSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsCiAgY3VzdG9tU2VsZWN0Q29tcG9uZW50czogUHJvcFR5cGVzLnNoYXBlKHt9KSwKICBjbGFzc05hbWVQcmVmaXg6IFByb3BUeXBlcy5zdHJpbmcsCiAgdHJhbnNsYXRlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIGRlZmF1bHRQbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZywKICBzaG93U2VsZWN0ZWRPcHRpb25Db2xvcjogUHJvcFR5cGVzLmJvb2wsCiAgbGFiZWxLZXk6IFByb3BUeXBlcy5zdHJpbmcsCiAgdmFsdWVLZXk6IFByb3BUeXBlcy5zdHJpbmcsCiAgbnVsbE9wdGlvbjogUHJvcFR5cGVzLmJvb2wsCiAgbnVsbE9wdGlvbkxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLAogIG51bGxPcHRpb25EZWZhdWx0TGFiZWw6IFByb3BUeXBlcy5zdHJpbmcKfTsKU2VsZWN0LmRlZmF1bHRQcm9wcyA9IHsKICB2YWx1ZTogdW5kZWZpbmVkLAogIG9uQ2hhbmdlOiBudWxsLAogIG9uTWVudUNsb3NlOiBudWxsLAogIG11bHRpOiBmYWxzZSwKICBjbGVhcmFibGU6IHRydWUsCiAgYXN5bmM6IGZhbHNlLAogIGRlbGltaXRlcjogJzsnLAogIHBsYWNlaG9sZGVyOiAnJywKICBkZWZhdWx0UGxhY2Vob2xkZXI6ICcnLAogIGluaXRpYWxWYWx1ZTogbnVsbCwKICBzaG93VmFsdWVUb29sdGlwOiBmYWxzZSwKICBzaG93TGFiZWxUb29sdGlwOiBmYWxzZSwKICBhcnJvd0xlZnQ6IG51bGwsCiAgYXJyb3dVcDogbnVsbCwKICBhcnJvd1JpZ2h0OiBudWxsLAogIGFycm93RG93bjogbnVsbCwKICBmaWVsZFJlZjogbnVsbCwKICBvblRhYlByZXNzOiBudWxsLAogIG9uRW50ZXJQcmVzczogbnVsbCwKICBvcHRpb25SZW5kZXJlcjogbnVsbCwKICB2YWx1ZVJlbmRlcmVyOiBudWxsLAogIHNob3dTZWxlY3RlZE9wdGlvbkNvbG9yOiBmYWxzZSwKICBjdXN0b21TZWxlY3RDb21wb25lbnRzOiB7fSwKICBjbGFzc05hbWVQcmVmaXg6ICdyZWFjdC1zZWxlY3QnLAogIGxhYmVsS2V5OiBudWxsLAogIHZhbHVlS2V5OiBudWxsLAogIG51bGxPcHRpb246IGZhbHNlLAogIG51bGxPcHRpb25MYWJlbDogJycsCiAgbnVsbE9wdGlvbkRlZmF1bHRMYWJlbDogJ251bGwnCn07"},null]}