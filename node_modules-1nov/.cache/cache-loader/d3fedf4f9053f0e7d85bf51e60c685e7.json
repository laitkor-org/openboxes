{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/returns/outbound/AddItemsPage.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/returns/outbound/AddItemsPage.jsx","mtime":1698037749000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlclsiQEBpdGVyYXRvciJdICE9IG51bGwpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9CmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgYXJyYXlNdXRhdG9ycyBmcm9tICdmaW5hbC1mb3JtLWFycmF5cyc7CmltcG9ydCB1cGRhdGUgZnJvbSAnaW1tdXRhYmlsaXR5LWhlbHBlcic7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IHF1ZXJ5U3RyaW5nIGZyb20gJ3F1ZXJ5LXN0cmluZyc7CmltcG9ydCBEYXRlUGlja2VyIGZyb20gJ3JlYWN0LWRhdGVwaWNrZXInOwppbXBvcnQgeyBGb3JtIH0gZnJvbSAncmVhY3QtZmluYWwtZm9ybSc7CmltcG9ydCB7IGdldFRyYW5zbGF0ZSB9IGZyb20gJ3JlYWN0LWxvY2FsaXplLXJlZHV4JzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IEFsZXJ0IGZyb20gJ3JlYWN0LXMtYWxlcnQnOwppbXBvcnQgeyBoaWRlU3Bpbm5lciwgc2hvd1NwaW5uZXIgfSBmcm9tICdhY3Rpb25zJzsKaW1wb3J0IEFycmF5RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0FycmF5RmllbGQnOwppbXBvcnQgTGFiZWxGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvTGFiZWxGaWVsZCc7CmltcG9ydCBUZXh0RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL1RleHRGaWVsZCc7CmltcG9ydCBQcm9kdWN0U2VsZWN0IGZyb20gJ2NvbXBvbmVudHMvcHJvZHVjdC1zZWxlY3QvUHJvZHVjdFNlbGVjdCc7CmltcG9ydCBhcGlDbGllbnQsIHsgZmxhdHRlblJlcXVlc3QsIHBhcnNlUmVzcG9uc2UgfSBmcm9tICd1dGlscy9hcGlDbGllbnQnOwppbXBvcnQgQ2hlY2tib3ggZnJvbSAndXRpbHMvQ2hlY2tib3gnOwppbXBvcnQgeyByZW5kZXJGb3JtRmllbGQgfSBmcm9tICd1dGlscy9mb3JtLXV0aWxzJzsKaW1wb3J0IHsgZm9ybWF0UHJvZHVjdERpc3BsYXlOYW1lIH0gZnJvbSAndXRpbHMvZm9ybS12YWx1ZXMtdXRpbHMnOwppbXBvcnQgeyBkZWJvdW5jZUF2YWlsYWJsZUl0ZW1zRmV0Y2ggfSBmcm9tICd1dGlscy9vcHRpb24tdXRpbHMnOwppbXBvcnQgU2VsZWN0IGZyb20gJ3V0aWxzL1NlbGVjdCc7CmltcG9ydCBUcmFuc2xhdGUsIHsgdHJhbnNsYXRlV2l0aERlZmF1bHRNZXNzYWdlIH0gZnJvbSAndXRpbHMvVHJhbnNsYXRlJzsKaW1wb3J0ICdyZWFjdC10YWJsZS9yZWFjdC10YWJsZS5jc3MnOwppbXBvcnQgJ3JlYWN0LWRhdGVwaWNrZXIvZGlzdC9yZWFjdC1kYXRlcGlja2VyLmNzcyc7CnZhciBGSUVMRFMgPSB7CiAgcmV0dXJuSXRlbXM6IHsKICAgIHR5cGU6IEFycmF5RmllbGQsCiAgICBtYXhUYWJsZUhlaWdodDogJ2NhbGMoMTAwdmggLSA1MDBweCknLAogICAgZ2V0RHluYW1pY1Jvd0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNSb3dBdHRyKF9yZWYpIHsKICAgICAgdmFyIHJvd1ZhbHVlcyA9IF9yZWYucm93VmFsdWVzLAogICAgICAgIHRyYW5zbGF0ZSA9IF9yZWYudHJhbnNsYXRlOwogICAgICB2YXIgY2xhc3NOYW1lID0gJyc7CiAgICAgIHZhciB0b29sdGlwID0gJyc7CiAgICAgIGlmIChyb3dWYWx1ZXMucmVjYWxsZWQgJiYgcm93VmFsdWVzLm9uSG9sZCkgewogICAgICAgIGNsYXNzTmFtZSA9ICdyZWNhbGxlZC1hbmQtb24taG9sZCc7CiAgICAgICAgdG9vbHRpcCA9IHRyYW5zbGF0ZSgncmVhY3Qub3V0Ym91bmRSZXR1cm5zLnJlY2FsbGVkQW5kT25Ib2xkLmxhYmVsJyk7CiAgICAgIH0gZWxzZSBpZiAocm93VmFsdWVzLnJlY2FsbGVkKSB7CiAgICAgICAgY2xhc3NOYW1lID0gJ3JlY2FsbGVkJzsKICAgICAgICB0b29sdGlwID0gdHJhbnNsYXRlKCdyZWFjdC5vdXRib3VuZFJldHVybnMucmVjYWxsZWQubGFiZWwnKTsKICAgICAgfSBlbHNlIGlmIChyb3dWYWx1ZXMub25Ib2xkKSB7CiAgICAgICAgY2xhc3NOYW1lID0gJ29uLWhvbGQnOwogICAgICAgIHRvb2x0aXAgPSB0cmFuc2xhdGUoJ3JlYWN0Lm91dGJvdW5kUmV0dXJucy5vbkhvbGQubGFiZWwnKTsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLAogICAgICAgIHRvb2x0aXA6IHRvb2x0aXAKICAgICAgfTsKICAgIH0sCiAgICBmaWVsZHM6IHsKICAgICAgY2hlY2tlZDogewogICAgICAgIGZpZWxkS2V5OiAnJywKICAgICAgICBsYWJlbDogJycsCiAgICAgICAgZmxleFdpZHRoOiAnMC41JywKICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKF9yZWYyKSB7CiAgICAgICAgICB2YXIgcm93SW5kZXggPSBfcmVmMi5yb3dJbmRleCwKICAgICAgICAgICAgZmllbGRWYWx1ZSA9IF9yZWYyLmZpZWxkVmFsdWUsCiAgICAgICAgICAgIHNlbGVjdFJvdyA9IF9yZWYyLnNlbGVjdFJvdzsKICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDaGVja2JveCwgewogICAgICAgICAgICBpZDogcm93SW5kZXgudG9TdHJpbmcoKSwKICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgICAgICBjbGFzc05hbWU6ICJtbC00IiwKICAgICAgICAgICAgdmFsdWU6IGZpZWxkVmFsdWUuY2hlY2tlZCwKICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdFJvdyh2YWx1ZSwgcm93SW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgICdwcm9kdWN0LnByb2R1Y3RDb2RlJzogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5vdXRib3VuZFJldHVybnMucHJvZHVjdENvZGUubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ29kZScsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfSwKICAgICAgcHJvZHVjdDogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5vdXRib3VuZFJldHVybnMucHJvZHVjdE5hbWUubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUHJvZHVjdCcsCiAgICAgICAgZmxleFdpZHRoOiAnNC41JywKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjMpIHsKICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gX3JlZjMuZmllbGRWYWx1ZTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRvb2x0aXBWYWx1ZTogZmllbGRWYWx1ZSA9PT0gbnVsbCB8fCBmaWVsZFZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaWVsZFZhbHVlLm5hbWUKICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBmb3JtYXRWYWx1ZTogZm9ybWF0UHJvZHVjdERpc3BsYXlOYW1lLAogICAgICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZSwKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtbGVmdCBtbC0xJwogICAgICAgIH0KICAgICAgfSwKICAgICAgbG90TnVtYmVyOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lm91dGJvdW5kUmV0dXJucy5sb3QubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTG90JywKICAgICAgICBmbGV4V2lkdGg6ICcxJwogICAgICB9LAogICAgICBleHBpcmF0aW9uRGF0ZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5vdXRib3VuZFJldHVybnMuZXhwaXJ5LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0V4cGlyeScsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfSwKICAgICAgcXVhbnRpdHlPbkhhbmQ6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Qub3V0Ym91bmRSZXR1cm5zLnFvaC5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdRT0gnLAogICAgICAgIGZsZXhXaWR0aDogJzEnCiAgICAgIH0sCiAgICAgIHF1YW50aXR5Tm90UGlja2VkOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lm91dGJvdW5kUmV0dXJucy5xdHlOb3RQaWNrZWQubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUXVhbnRpdHkgQXZhaWxhYmxlIHRvIFJldHVybicsCiAgICAgICAgaGVhZGVyVG9vbHRpcDogJ3JlYWN0Lm91dGJvdW5kUmV0dXJucy5xdHlOb3RQaWNrZWRUb29sdGlwLmxhYmVsJywKICAgICAgICBoZWFkZXJEZWZhdWx0VG9vbHRpcDogJ1RoaXMgaXMgdGhlIHF1YW50aXR5IG9uIGhhbmQgdGhhdCBpcyBub3QgY3VycmVudGx5IHBpY2tlZCBpbiBhIHNoaXBtZW50JywKICAgICAgICBmbGV4V2lkdGg6ICcxJwogICAgICB9LAogICAgICBvcmlnaW5ab25lOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lm91dGJvdW5kUmV0dXJucy56b25lLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1pvbmUnLAogICAgICAgIGZsZXhXaWR0aDogJzEnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIHNob3dWYWx1ZVRvb2x0aXA6IHRydWUKICAgICAgICB9CiAgICAgIH0sCiAgICAgICdvcmlnaW5CaW5Mb2NhdGlvbi5uYW1lJzogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5vdXRib3VuZFJldHVybnMuYmluLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0JpbiBMb2NhdGlvbicsCiAgICAgICAgZmxleFdpZHRoOiAnMScsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZQogICAgICAgIH0KICAgICAgfSwKICAgICAgcXVhbnRpdHk6IHsKICAgICAgICB0eXBlOiBUZXh0RmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5vdXRib3VuZFJldHVybnMucXVhbnRpdHkubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUXR5IHRvIFJldHVybicsCiAgICAgICAgZmxleFdpZHRoOiAnMScsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgdHlwZTogJ251bWJlcicKICAgICAgICB9LAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmNCkgewogICAgICAgICAgdmFyIHVwZGF0ZVJvdyA9IF9yZWY0LnVwZGF0ZVJvdywKICAgICAgICAgICAgdmFsdWVzID0gX3JlZjQudmFsdWVzLAogICAgICAgICAgICByb3dJbmRleCA9IF9yZWY0LnJvd0luZGV4OwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkgewogICAgICAgICAgICAgIHJldHVybiB1cGRhdGVSb3codmFsdWVzLCByb3dJbmRleCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9OwpmdW5jdGlvbiB2YWxpZGF0ZSh2YWx1ZXMpIHsKICB2YXIgZXJyb3JzID0ge307CiAgZXJyb3JzLnJldHVybkl0ZW1zID0gW107CiAgXy5mb3JFYWNoKHZhbHVlcy5yZXR1cm5JdGVtcywgZnVuY3Rpb24gKGl0ZW0sIGtleSkgewogICAgaWYgKGl0ZW0uY2hlY2tlZCAmJiAoXy50b0ludGVnZXIoaXRlbS5xdWFudGl0eSkgPiBpdGVtLnF1YW50aXR5Tm90UGlja2VkIHx8IF8udG9JbnRlZ2VyKGl0ZW0ucXVhbnRpdHkpIDwgMCkpIHsKICAgICAgZXJyb3JzLnJldHVybkl0ZW1zW2tleV0gPSB7CiAgICAgICAgcXVhbnRpdHk6ICdyZWFjdC5vdXRib3VuZFJldHVybnMuZXJyb3JzLnF1YW50aXR5VG9SZXR1cm4ubGFiZWwnCiAgICAgIH07CiAgICB9CiAgfSk7CiAgcmV0dXJuIGVycm9yczsKfQp2YXIgSU5JVElBTF9TVEFURSA9IHsKICAvLyBGaWx0ZXJzCiAgc2VsZWN0ZWRQcm9kdWN0SWQ6ICcnLAogIHNlbGVjdGVkTG90TnVtYmVyOiAnJywKICBzZWxlY3RlZEV4cGlyYXRpb25EYXRlOiAnJywKICBzZWxlY3RlZEJpbkxvY2F0aW9uOiAnJywKICAvLyBTZWxlY3RlZCBpdGVtcyBmb3IgcmV0dXJuCiAgc2VsZWN0ZWRJdGVtczogW10sCiAgZm9ybVZhbHVlczogewogICAgcmV0dXJuSXRlbXM6IFtdCiAgfSwKICBvdXRib3VuZFJldHVybjoge30sCiAgLy8gT3B0aW9ucwogIGJpbnM6IFtdCn07CnZhciBBZGRJdGVtc1BhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoQWRkSXRlbXNQYWdlLCBfQ29tcG9uZW50KTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEFkZEl0ZW1zUGFnZSk7CiAgZnVuY3Rpb24gQWRkSXRlbXNQYWdlKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRkSXRlbXNQYWdlKTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZGF0YUZldGNoZWQiLCBmYWxzZSk7CiAgICBfdGhpcy5zdGF0ZSA9IElOSVRJQUxfU1RBVEU7CiAgICBfdGhpcy5kZWJvdW5jZUF2YWlsYWJsZUl0ZW1zRmV0Y2ggPSBkZWJvdW5jZUF2YWlsYWJsZUl0ZW1zRmV0Y2goX3RoaXMucHJvcHMuZGVib3VuY2VUaW1lLCBfdGhpcy5wcm9wcy5taW5TZWFyY2hMZW5ndGgpOwogICAgX3RoaXMuc2VsZWN0Um93ID0gX3RoaXMuc2VsZWN0Um93LmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMudXBkYXRlUm93ID0gX3RoaXMudXBkYXRlUm93LmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoQWRkSXRlbXNQYWdlLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICBpZiAodGhpcy5wcm9wcy5vdXRib3VuZFJldHVybnNUcmFuc2xhdGlvbnNGZXRjaGVkKSB7CiAgICAgICAgdGhpcy5kYXRhRmV0Y2hlZCA9IHRydWU7CiAgICAgICAgdGhpcy5mZXRjaEJpbnMoKTsKICAgICAgICB0aGlzLmZldGNoT3V0Ym91bmRSZXR1cm4oKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgIGlmIChuZXh0UHJvcHMub3V0Ym91bmRSZXR1cm5zVHJhbnNsYXRpb25zRmV0Y2hlZCkgewogICAgICAgIGlmICghdGhpcy5kYXRhRmV0Y2hlZCkgewogICAgICAgICAgdGhpcy5kYXRhRmV0Y2hlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLmZldGNoQmlucygpOwogICAgICAgICAgdGhpcy5mZXRjaE91dGJvdW5kUmV0dXJuKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmxvY2F0aW9uSWQgIT09IG5leHRQcm9wcy5sb2NhdGlvbklkKSB7CiAgICAgICAgICB0aGlzLmZldGNoQmlucygpOwogICAgICAgICAgdGhpcy5mZXRjaE91dGJvdW5kUmV0dXJuKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0U2VsZWN0ZWRQcm9kdWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3RlZFByb2R1Y3Qoc2VsZWN0ZWRQcm9kdWN0KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RlZFByb2R1Y3RJZDogc2VsZWN0ZWRQcm9kdWN0ID8gc2VsZWN0ZWRQcm9kdWN0LmlkIDogJycKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczIuZmV0Y2hSZXR1cm5DYW5kaWRhdGVzKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFNlbGVjdGVkTG90TnVtYmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3RlZExvdE51bWJlcihzZWxlY3RlZExvdE51bWJlcikgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc2VsZWN0ZWRMb3ROdW1iZXI6IHNlbGVjdGVkTG90TnVtYmVyIHx8ICcnCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoc2VsZWN0ZWRMb3ROdW1iZXIubGVuZ3RoID49IF90aGlzMy5wcm9wcy5taW5TZWFyY2hMZW5ndGggfHwgIXNlbGVjdGVkTG90TnVtYmVyKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLmZldGNoUmV0dXJuQ2FuZGlkYXRlcygpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0U2VsZWN0ZWRFeHBpcmF0aW9uRGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2VsZWN0ZWRFeHBpcmF0aW9uRGF0ZShzZWxlY3RlZEV4cGlyYXRpb25EYXRlKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RlZEV4cGlyYXRpb25EYXRlOiBzZWxlY3RlZEV4cGlyYXRpb25EYXRlID8gbW9tZW50KHNlbGVjdGVkRXhwaXJhdGlvbkRhdGUpLmZvcm1hdCgnTU0vREQvWVlZWScpIDogJycKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczQuZmV0Y2hSZXR1cm5DYW5kaWRhdGVzKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFNlbGVjdGVkQmluTG9jYXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdGVkQmluTG9jYXRpb24oc2VsZWN0ZWRCaW5Mb2NhdGlvbikgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc2VsZWN0ZWRCaW5Mb2NhdGlvbjogc2VsZWN0ZWRCaW5Mb2NhdGlvbiB8fCAnJwogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS5mZXRjaFJldHVybkNhbmRpZGF0ZXMoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hPdXRib3VuZFJldHVybiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hPdXRib3VuZFJldHVybigpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIGlmICh0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5vdXRib3VuZFJldHVybklkKSB7CiAgICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tUcmFuc2ZlcnMvIi5jb25jYXQodGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMub3V0Ym91bmRSZXR1cm5JZCk7CiAgICAgICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIHZhciBvdXRib3VuZFJldHVybiA9IHBhcnNlUmVzcG9uc2UocmVzcC5kYXRhLmRhdGEpOwogICAgICAgICAgdmFyIHJldHVybkl0ZW1zID0gXy5tYXAob3V0Ym91bmRSZXR1cm4uc3RvY2tUcmFuc2Zlckl0ZW1zLAogICAgICAgICAgLy8gUGlja2VkIHZhbHVlIGFkZGVkIHRvIGNvbXBlbnNhdGUgdmFsdWUgYWxyZWFkeSBzdWJ0cmFjdGVkCiAgICAgICAgICBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgICAgICBxdWFudGl0eU5vdFBpY2tlZDogaXRlbS5xdWFudGl0eU5vdFBpY2tlZCArIF8uc3VtQnkoaXRlbS5waWNrbGlzdEl0ZW1zLCAncXVhbnRpdHknKSwKICAgICAgICAgICAgICBjaGVja2VkOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczYuc2V0U3RhdGUoewogICAgICAgICAgICBvdXRib3VuZFJldHVybjogb3V0Ym91bmRSZXR1cm4sCiAgICAgICAgICAgIHNlbGVjdGVkSXRlbXM6IF8uY2hhaW4ocmV0dXJuSXRlbXMpLmtleUJ5KCdwcm9kdWN0QXZhaWxhYmlsaXR5SWQnKS52YWx1ZSgpLAogICAgICAgICAgICBmb3JtVmFsdWVzOiB7CiAgICAgICAgICAgICAgcmV0dXJuSXRlbXM6IHJldHVybkl0ZW1zCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgICAgfSk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNi5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hSZXR1cm5DYW5kaWRhdGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaFJldHVybkNhbmRpZGF0ZXMoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICB2YXIgbG9jYXRpb25JZCA9IHRoaXMucHJvcHMubG9jYXRpb25JZDsKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICBzZWxlY3RlZFByb2R1Y3RJZCA9IF90aGlzJHN0YXRlLnNlbGVjdGVkUHJvZHVjdElkLAogICAgICAgIHNlbGVjdGVkTG90TnVtYmVyID0gX3RoaXMkc3RhdGUuc2VsZWN0ZWRMb3ROdW1iZXIsCiAgICAgICAgc2VsZWN0ZWRFeHBpcmF0aW9uRGF0ZSA9IF90aGlzJHN0YXRlLnNlbGVjdGVkRXhwaXJhdGlvbkRhdGUsCiAgICAgICAgc2VsZWN0ZWRCaW5Mb2NhdGlvbiA9IF90aGlzJHN0YXRlLnNlbGVjdGVkQmluTG9jYXRpb247CiAgICAgIGlmIChzZWxlY3RlZFByb2R1Y3RJZCB8fCBzZWxlY3RlZExvdE51bWJlciB8fCBzZWxlY3RlZEV4cGlyYXRpb25EYXRlIHx8IHNlbGVjdGVkQmluTG9jYXRpb24pIHsKICAgICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgICAgdmFyIHVybCA9ICcvb3BlbmJveGVzL2FwaS9zdG9ja1RyYW5zZmVycy9jYW5kaWRhdGVzJzsKICAgICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICAgIHByb2R1Y3RJZDogc2VsZWN0ZWRQcm9kdWN0SWQsCiAgICAgICAgICBsb3ROdW1iZXI6IHNlbGVjdGVkTG90TnVtYmVyLAogICAgICAgICAgZXhwaXJhdGlvbkRhdGU6IHNlbGVjdGVkRXhwaXJhdGlvbkRhdGUsCiAgICAgICAgICBiaW5Mb2NhdGlvbklkOiBzZWxlY3RlZEJpbkxvY2F0aW9uLmlkLAogICAgICAgICAgbG9jYXRpb25JZDogbG9jYXRpb25JZAogICAgICAgIH07CiAgICAgICAgYXBpQ2xpZW50LnBvc3QodXJsLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICB2YXIgcmV0dXJuSXRlbXMgPSBfLm1hcChwYXJzZVJlc3BvbnNlKHJlc3AuZGF0YS5kYXRhKSwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbSksIHt9LCB7CiAgICAgICAgICAgICAgcXVhbnRpdHk6IF90aGlzNy5zdGF0ZS5zZWxlY3RlZEl0ZW1zW2l0ZW0ucHJvZHVjdEF2YWlsYWJpbGl0eUlkXSA/IF90aGlzNy5zdGF0ZS5zZWxlY3RlZEl0ZW1zW2l0ZW0ucHJvZHVjdEF2YWlsYWJpbGl0eUlkXS5xdWFudGl0eSA6ICcnLAogICAgICAgICAgICAgIC8vIFBpY2tlZCB2YWx1ZSBhZGRlZCB0byBjb21wZW5zYXRlIHZhbHVlIGFscmVhZHkgc3VidHJhY3RlZAogICAgICAgICAgICAgIHF1YW50aXR5Tm90UGlja2VkOiBfdGhpczcuc3RhdGUuc2VsZWN0ZWRJdGVtc1tpdGVtLnByb2R1Y3RBdmFpbGFiaWxpdHlJZF0gPyBpdGVtLnF1YW50aXR5Tm90UGlja2VkICsgX3RoaXM3LnN0YXRlLnNlbGVjdGVkSXRlbXNbaXRlbS5wcm9kdWN0QXZhaWxhYmlsaXR5SWRdLnF1YW50aXR5IDogaXRlbS5xdWFudGl0eU5vdFBpY2tlZCwKICAgICAgICAgICAgICBjaGVja2VkOiAhIV90aGlzNy5zdGF0ZS5zZWxlY3RlZEl0ZW1zW2l0ZW0ucHJvZHVjdEF2YWlsYWJpbGl0eUlkXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXM3LnNldFN0YXRlKHsKICAgICAgICAgICAgZm9ybVZhbHVlczogewogICAgICAgICAgICAgIHJldHVybkl0ZW1zOiByZXR1cm5JdGVtcwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczcucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczcucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICghc2VsZWN0ZWRQcm9kdWN0SWQgJiYgIXNlbGVjdGVkTG90TnVtYmVyICYmICFzZWxlY3RlZEV4cGlyYXRpb25EYXRlICYmICFzZWxlY3RlZEJpbkxvY2F0aW9uKSB7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBmb3JtVmFsdWVzOiB7CiAgICAgICAgICAgIHJldHVybkl0ZW1zOiBfLnZhbHVlcyh0aGlzLnN0YXRlLnNlbGVjdGVkSXRlbXMpCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlQW5kVHJhbnNpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUFuZFRyYW5zaXRpb24oY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHZhciBlcnJvcnMgPSB2YWxpZGF0ZSh7CiAgICAgICAgcmV0dXJuSXRlbXM6IF8udmFsdWVzKHRoaXMuc3RhdGUuc2VsZWN0ZWRJdGVtcykKICAgICAgfSk7CiAgICAgIGlmIChlcnJvcnMgJiYgZXJyb3JzLnJldHVybkl0ZW1zLmxlbmd0aCkgewogICAgICAgIEFsZXJ0LmVycm9yKHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5vdXRib3VuZFJldHVybnMuZXJyb3JzLnF1YW50aXR5VG9SZXR1cm4ubGFiZWwnKSk7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBzZWxlY3RlZFByb2R1Y3RJZDogJycsCiAgICAgICAgICBzZWxlY3RlZExvdE51bWJlcjogJycsCiAgICAgICAgICBzZWxlY3RlZEV4cGlyYXRpb25EYXRlOiAnJywKICAgICAgICAgIHNlbGVjdGVkQmluTG9jYXRpb246ICcnCiAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzOC5mZXRjaFJldHVybkNhbmRpZGF0ZXMoKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB2YXIgcGF5bG9hZCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5zdGF0ZS5vdXRib3VuZFJldHVybiksIHt9LCB7CiAgICAgICAgc3RhdHVzOiAnQVBQUk9WRUQnLAogICAgICAgIHN0b2NrVHJhbnNmZXJJdGVtczogXy52YWx1ZXModGhpcy5zdGF0ZS5zZWxlY3RlZEl0ZW1zKQogICAgICB9KTsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja1RyYW5zZmVycy8iLmNvbmNhdCh0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5vdXRib3VuZFJldHVybklkKTsKICAgICAgYXBpQ2xpZW50LnB1dCh1cmwsIGZsYXR0ZW5SZXF1ZXN0KHBheWxvYWQpKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgdmFyIG91dGJvdW5kUmV0dXJucyA9IHJlc3AuZGF0YS5kYXRhOwogICAgICAgIF90aGlzOC5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgIGNhbGxiYWNrKG91dGJvdW5kUmV0dXJucyk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM4LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoQmlucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hCaW5zKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB2YXIgdXJsID0gJy9vcGVuYm94ZXMvYXBpL2ludGVybmFsTG9jYXRpb25zJzsKICAgICAgdmFyIG1hcEJpbnMgPSBmdW5jdGlvbiBtYXBCaW5zKGJpbnMpIHsKICAgICAgICByZXR1cm4gXy5jaGFpbihiaW5zKS5vcmRlckJ5KFsnbmFtZSddLCBbJ2FzYyddKS52YWx1ZSgpOwogICAgICB9OwogICAgICByZXR1cm4gYXBpQ2xpZW50LmdldCh1cmwsIHsKICAgICAgICBwYXJhbXNTZXJpYWxpemVyOiBmdW5jdGlvbiBwYXJhbXNTZXJpYWxpemVyKHBhcmFtZXRlcnMpIHsKICAgICAgICAgIHJldHVybiBxdWVyeVN0cmluZy5zdHJpbmdpZnkocGFyYW1ldGVycyk7CiAgICAgICAgfSwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGxvY2F0aW9uVHlwZUNvZGU6IFsnQklOX0xPQ0FUSU9OJywgJ0lOVEVSTkFMJ10sCiAgICAgICAgICBpZ25vcmVBY3Rpdml0eUNvZGVzOiBbJ1JFQ0VJVkVfU1RPQ0snXSwKICAgICAgICAgICdsb2NhdGlvbi5pZCc6IHRoaXMucHJvcHMubG9jYXRpb25JZAogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgYmluR3JvdXBzID0gXy5wYXJ0aXRpb24ocmVzcG9uc2UuZGF0YS5kYXRhLCBmdW5jdGlvbiAoYmluKSB7CiAgICAgICAgICByZXR1cm4gYmluLnpvbmVOYW1lOwogICAgICAgIH0pOwogICAgICAgIHZhciBiaW5zV2l0aFpvbmUgPSBfLmNoYWluKGJpbkdyb3Vwc1swXSkuZ3JvdXBCeSgnem9uZU5hbWUnKS5tYXAoZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5hbWU6IGtleSwKICAgICAgICAgICAgb3B0aW9uczogbWFwQmlucyh2YWx1ZSkKICAgICAgICAgIH07CiAgICAgICAgfSkub3JkZXJCeShbJ25hbWUnXSwgWydhc2MnXSkudmFsdWUoKTsKICAgICAgICB2YXIgYmluc1dpdGhvdXRab25lID0gbWFwQmlucyhiaW5Hcm91cHNbMV0pOwogICAgICAgIF90aGlzOS5zZXRTdGF0ZSh7CiAgICAgICAgICBiaW5zOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGJpbnNXaXRoWm9uZSksIF90b0NvbnN1bWFibGVBcnJheShiaW5zV2l0aG91dFpvbmUpKQogICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczkucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VsZWN0Um93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RSb3codmFsdWUsIHJvd0luZGV4KSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSB0aGlzLnN0YXRlLAogICAgICAgIGZvcm1WYWx1ZXMgPSBfdGhpcyRzdGF0ZTIuZm9ybVZhbHVlcywKICAgICAgICBzZWxlY3RlZEl0ZW1zID0gX3RoaXMkc3RhdGUyLnNlbGVjdGVkSXRlbXM7CiAgICAgIHZhciBuZXdTdGF0ZSA9IHsKICAgICAgICBmb3JtVmFsdWVzOiB7CiAgICAgICAgICByZXR1cm5JdGVtczogXy5tYXAoZm9ybVZhbHVlcy5yZXR1cm5JdGVtcywgZnVuY3Rpb24gKGl0ZW0sIGlkeCkgewogICAgICAgICAgICBpZiAocm93SW5kZXggPT09IGlkeCkgewogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgICAgICAgICAgY2hlY2tlZDogdmFsdWUsCiAgICAgICAgICAgICAgICBxdWFudGl0eTogdmFsdWUgPyBpdGVtLnF1YW50aXR5Tm90UGlja2VkIDogJycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgaXRlbSk7CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIGRlbGV0ZSBzZWxlY3RlZEl0ZW1zW2Zvcm1WYWx1ZXMucmV0dXJuSXRlbXNbcm93SW5kZXhdLnByb2R1Y3RBdmFpbGFiaWxpdHlJZF07CiAgICAgICAgbmV3U3RhdGUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG5ld1N0YXRlKSwge30sIHsKICAgICAgICAgIHNlbGVjdGVkSXRlbXM6IHNlbGVjdGVkSXRlbXMKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXdTdGF0ZSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbmV3U3RhdGUpLCB7fSwgewogICAgICAgICAgc2VsZWN0ZWRJdGVtczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzZWxlY3RlZEl0ZW1zKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgZm9ybVZhbHVlcy5yZXR1cm5JdGVtc1tyb3dJbmRleF0ucHJvZHVjdEF2YWlsYWJpbGl0eUlkLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGZvcm1WYWx1ZXMucmV0dXJuSXRlbXNbcm93SW5kZXhdKSwge30sIHsKICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZSwKICAgICAgICAgICAgcXVhbnRpdHk6IHZhbHVlID8gZm9ybVZhbHVlcy5yZXR1cm5JdGVtc1tyb3dJbmRleF0ucXVhbnRpdHlPbkhhbmQgOiAnJwogICAgICAgICAgfSkpKQogICAgICAgIH0pOwogICAgICB9CiAgICAgIG5ld1N0YXRlID0gewogICAgICAgIGZvcm1WYWx1ZXM6IHVwZGF0ZShmb3JtVmFsdWVzLCB7CiAgICAgICAgICByZXR1cm5JdGVtczogX2RlZmluZVByb3BlcnR5KHt9LCByb3dJbmRleCwgewogICAgICAgICAgICAkc2V0OiBuZXdTdGF0ZS5mb3JtVmFsdWVzLnJldHVybkl0ZW1zW3Jvd0luZGV4XQogICAgICAgICAgfSkKICAgICAgICB9KSwKICAgICAgICBzZWxlY3RlZEl0ZW1zOiBuZXdTdGF0ZS5zZWxlY3RlZEl0ZW1zCiAgICAgIH07CiAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVJvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUm93KHZhbHVlcywgaW5kZXgpIHsKICAgICAgdmFyIHNlbGVjdGVkSXRlbXMgPSB0aGlzLnN0YXRlLnNlbGVjdGVkSXRlbXM7CiAgICAgIHZhciBpdGVtID0gdmFsdWVzLnJldHVybkl0ZW1zW2luZGV4XTsKICAgICAgaWYgKGl0ZW0ucXVhbnRpdHkgJiYgaXRlbS5xdWFudGl0eSA+IDApIHsKICAgICAgICBpdGVtLmNoZWNrZWQgPSB0cnVlOwogICAgICAgIHNlbGVjdGVkSXRlbXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNlbGVjdGVkSXRlbXMpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBpdGVtLnByb2R1Y3RBdmFpbGFiaWxpdHlJZCwgX29iamVjdFNwcmVhZCh7fSwgaXRlbSkpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICBkZWxldGUgc2VsZWN0ZWRJdGVtc1tpdGVtLnByb2R1Y3RBdmFpbGFiaWxpdHlJZF07CiAgICAgIH0KICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZm9ybVZhbHVlczogdXBkYXRlKHZhbHVlcywgewogICAgICAgICAgcmV0dXJuSXRlbXM6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgaW5kZXgsIHsKICAgICAgICAgICAgJHNldDogaXRlbQogICAgICAgICAgfSkKICAgICAgICB9KSwKICAgICAgICBzZWxlY3RlZEl0ZW1zOiBzZWxlY3RlZEl0ZW1zCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTMgPSB0aGlzLnN0YXRlLAogICAgICAgIHNlbGVjdGVkRXhwaXJhdGlvbkRhdGUgPSBfdGhpcyRzdGF0ZTMuc2VsZWN0ZWRFeHBpcmF0aW9uRGF0ZSwKICAgICAgICBzZWxlY3RlZExvdE51bWJlciA9IF90aGlzJHN0YXRlMy5zZWxlY3RlZExvdE51bWJlciwKICAgICAgICBiaW5zID0gX3RoaXMkc3RhdGUzLmJpbnMsCiAgICAgICAgc2VsZWN0ZWRCaW5Mb2NhdGlvbiA9IF90aGlzJHN0YXRlMy5zZWxlY3RlZEJpbkxvY2F0aW9uLAogICAgICAgIGZvcm1WYWx1ZXMgPSBfdGhpcyRzdGF0ZTMuZm9ybVZhbHVlczsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm0sIHsKICAgICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMxMC5zYXZlQW5kVHJhbnNpdGlvbihfdGhpczEwLnByb3BzLm5leHRQYWdlKTsKICAgICAgICB9LAogICAgICAgIG11dGF0b3JzOiBfb2JqZWN0U3ByZWFkKHt9LCBhcnJheU11dGF0b3JzKSwKICAgICAgICBpbml0aWFsVmFsdWVzOiBmb3JtVmFsdWVzLAogICAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSwKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihfcmVmNSkgewogICAgICAgICAgdmFyIGhhbmRsZVN1Ym1pdCA9IF9yZWY1LmhhbmRsZVN1Ym1pdCwKICAgICAgICAgICAgdmFsdWVzID0gX3JlZjUudmFsdWVzOwogICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImQtZmxleCBmbGV4LWNvbHVtbiIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImQtZmxleCBtYi0zIGp1c3RpZnktY29udGVudC1zdGFydCBhbGlnbi1pdGVtcy1jZW50ZXIgdy0xMDAgY29tYmluZWQtc2hpcG1lbnQtZmlsdGVyIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUHJvZHVjdFNlbGVjdCwgewogICAgICAgICAgICBwbGFjZWhvbGRlcjogX3RoaXMxMC5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0Lm91dGJvdW5kUmV0dXJucy5zZWxlY3RQcm9kdWN0LmxhYmVsJywgJ1NlbGVjdCBwcm9kdWN0Li4uJyksCiAgICAgICAgICAgIGxvYWRPcHRpb25zOiBfdGhpczEwLmRlYm91bmNlQXZhaWxhYmxlSXRlbXNGZXRjaCwKICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAuc2V0U2VsZWN0ZWRQcm9kdWN0KHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksICJceEEwIiwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICBpZDogInNlbGVjdGVkTG90TnVtYmVyIiwKICAgICAgICAgICAgbmFtZTogInNlbGVjdGVkTG90TnVtYmVyIiwKICAgICAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgICAgICBjbGFzc05hbWU6ICJmb3JtLWNvbnRyb2wgbXktMiIsCiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBfdGhpczEwLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Qub3V0Ym91bmRSZXR1cm5zLmVudGVyTG90TnVtYmVyLmxhYmVsJywgJ0VudGVyIGxvdCBudW1iZXIuLi4nKSwKICAgICAgICAgICAgdmFsdWU6IHNlbGVjdGVkTG90TnVtYmVyLAogICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5zZXRTZWxlY3RlZExvdE51bWJlcihldmVudC50YXJnZXQudmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwgIlx4QTAiLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmb3JtLWVsZW1lbnQtY29udGFpbmVyIHJldHVybnMtZGF0ZS1waWNrZXIiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEYXRlUGlja2VyLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgIHNlbGVjdGVkOiBtb21lbnQoc2VsZWN0ZWRFeHBpcmF0aW9uRGF0ZSwgJ01NL0REL1lZWVknKS5pc1ZhbGlkKCkgPyBtb21lbnQoc2VsZWN0ZWRFeHBpcmF0aW9uRGF0ZSwgJ01NL0REL1lZWVknKSA6IG51bGwsCiAgICAgICAgICAgIGhpZ2hsaWdodERhdGVzOiBbIW1vbWVudChzZWxlY3RlZEV4cGlyYXRpb25EYXRlLCAnTU0vREQvWVlZWScpLmlzVmFsaWQoKSA/IG1vbWVudChuZXcgRGF0ZSgpLCAnTU0vREQvWVlZWScpIDoge31dLAogICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZGF0ZSkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLnNldFNlbGVjdGVkRXhwaXJhdGlvbkRhdGUoZGF0ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBvcHBlckNsYXNzTmFtZTogImZvcmNlLW9uLXRvcCIsCiAgICAgICAgICAgIHNob3dZZWFyRHJvcGRvd246IHRydWUsCiAgICAgICAgICAgIHNjcm9sbGFibGVZZWFyRHJvcGRvd246IHRydWUsCiAgICAgICAgICAgIGRhdGVGb3JtYXQ6ICJNTS9ERC9ZWVlZIiwKICAgICAgICAgICAgeWVhckRyb3Bkb3duSXRlbU51bWJlcjogMywKICAgICAgICAgICAgdXRjT2Zmc2V0OiAwLAogICAgICAgICAgICBwbGFjZWhvbGRlclRleHQ6IF90aGlzMTAucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5vdXRib3VuZFJldHVybnMuc2VsZWN0RXhwaXJhdGlvbkRhdGUubGFiZWwnLCAnU2VsZWN0IGV4cGlyYXRpb24gZGF0ZS4uLicpCiAgICAgICAgICB9KSksICJceEEwIiwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgICAgICAgIG9wdGlvbnM6IGJpbnMsCiAgICAgICAgICAgIHZhbHVlS2V5OiAiaWQiLAogICAgICAgICAgICBsYWJlbEtleTogIm5hbWUiLAogICAgICAgICAgICB2YWx1ZTogc2VsZWN0ZWRCaW5Mb2NhdGlvbiB8fCBudWxsLAogICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UodmFsdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5zZXRTZWxlY3RlZEJpbkxvY2F0aW9uKHZhbHVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGxhY2Vob2xkZXI6IF90aGlzMTAucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5vdXRib3VuZFJldHVybnMuc2VsZWN0QmluTG9jYXRpb24ubGFiZWwnLCAnU2VsZWN0IGJpbiBsb2NhdGlvbi4uLicpCiAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJmb3JtIiwgewogICAgICAgICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICAgICAgICBjbGFzc05hbWU6ICJwcmludC1tdCIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogInRhYmxlLWZvcm0iCiAgICAgICAgICB9LCBfLm1hcChGSUVMRFMsIGZ1bmN0aW9uIChmaWVsZENvbmZpZywgZmllbGROYW1lKSB7CiAgICAgICAgICAgIHJldHVybiByZW5kZXJGb3JtRmllbGQoZmllbGRDb25maWcsIGZpZWxkTmFtZSwgewogICAgICAgICAgICAgIG91dGJvdW5kUmV0dXJuSWQ6IF90aGlzMTAucHJvcHMubWF0Y2gucGFyYW1zLm91dGJvdW5kUmV0dXJuSWQsCiAgICAgICAgICAgICAgbG9jYXRpb25JZDogX3RoaXMxMC5wcm9wcy5sb2NhdGlvbklkLAogICAgICAgICAgICAgIHRyYW5zbGF0ZTogX3RoaXMxMC5wcm9wcy50cmFuc2xhdGUsCiAgICAgICAgICAgICAgc2VsZWN0Um93OiBfdGhpczEwLnNlbGVjdFJvdywKICAgICAgICAgICAgICB1cGRhdGVSb3c6IF90aGlzMTAudXBkYXRlUm93LAogICAgICAgICAgICAgIHZhbHVlczogdmFsdWVzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJzdWJtaXQtYnV0dG9ucyBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4iCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5zYXZlQW5kVHJhbnNpdGlvbihfdGhpczEwLnByb3BzLnByZXZpb3VzUGFnZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsYXNzTmFtZTogImJ0biBidG4tb3V0bGluZS1wcmltYXJ5IGJ0bi1mb3JtIGZsb2F0LXJpZ2h0IGJ0bi14cyIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LnJlcGxlbmlzaG1lbnQubmV4dC5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUHJldmlvdXMiCiAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJzdWJtaXQiLAogICAgICAgICAgICBkaXNhYmxlZDogIV8uc29tZSh2YWx1ZXMucmV0dXJuSXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF8ucGFyc2VJbnQoaXRlbS5xdWFudGl0eSkgJiYgaXRlbS5jaGVja2VkOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLWZvcm0gZmxvYXQtcmlnaHQgYnRuLXhzIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QucmVwbGVuaXNobWVudC5uZXh0LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJOZXh0IgogICAgICAgICAgfSkpKSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBBZGRJdGVtc1BhZ2U7Cn0oQ29tcG9uZW50KTsKdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkgewogIHJldHVybiB7CiAgICBkZWJvdW5jZVRpbWU6IHN0YXRlLnNlc3Npb24uc2VhcmNoQ29uZmlnLmRlYm91bmNlVGltZSwKICAgIG1pblNlYXJjaExlbmd0aDogc3RhdGUuc2Vzc2lvbi5zZWFyY2hDb25maWcubWluU2VhcmNoTGVuZ3RoLAogICAgdHJhbnNsYXRlOiB0cmFuc2xhdGVXaXRoRGVmYXVsdE1lc3NhZ2UoZ2V0VHJhbnNsYXRlKHN0YXRlLmxvY2FsaXplKSksCiAgICBvdXRib3VuZFJldHVybnNUcmFuc2xhdGlvbnNGZXRjaGVkOiBzdGF0ZS5zZXNzaW9uLmZldGNoZWRUcmFuc2xhdGlvbnMub3V0Ym91bmRSZXR1cm5zCiAgfTsKfTsKZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIHsKICBzaG93U3Bpbm5lcjogc2hvd1NwaW5uZXIsCiAgaGlkZVNwaW5uZXI6IGhpZGVTcGlubmVyCn0pKEFkZEl0ZW1zUGFnZSk7CkFkZEl0ZW1zUGFnZS5wcm9wVHlwZXMgPSB7CiAgcHJldmlvdXNQYWdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIG5leHRQYWdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIHNob3dTcGlubmVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIGhpZGVTcGlubmVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIHRyYW5zbGF0ZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBvdXRib3VuZFJldHVybnNUcmFuc2xhdGlvbnNGZXRjaGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLAogIGxvY2F0aW9uSWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwKICBkZWJvdW5jZVRpbWU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCwKICBtaW5TZWFyY2hMZW5ndGg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCwKICBtYXRjaDogUHJvcFR5cGVzLnNoYXBlKHsKICAgIHBhcmFtczogUHJvcFR5cGVzLnNoYXBlKHsKICAgICAgb3V0Ym91bmRSZXR1cm5JZDogUHJvcFR5cGVzLnN0cmluZwogICAgfSkKICB9KS5pc1JlcXVpcmVkCn07"},null]}