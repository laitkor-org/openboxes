{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/stock-movement-wizard/combined-shipments/CreateStockMovement.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/stock-movement-wizard/combined-shipments/CreateStockMovement.jsx","mtime":1698037749000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgInByb3RvdHlwZSIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnOwppbXBvcnQgcXVlcnlTdHJpbmcgZnJvbSAncXVlcnktc3RyaW5nJzsKaW1wb3J0IHsgRm9ybSB9IGZyb20gJ3JlYWN0LWZpbmFsLWZvcm0nOwppbXBvcnQgeyBnZXRUcmFuc2xhdGUgfSBmcm9tICdyZWFjdC1sb2NhbGl6ZS1yZWR1eCc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IHsgaGlkZVNwaW5uZXIsIHNob3dTcGlubmVyIH0gZnJvbSAnYWN0aW9ucyc7CmltcG9ydCBTZWxlY3RGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvU2VsZWN0RmllbGQnOwppbXBvcnQgVGV4dEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9UZXh0RmllbGQnOwppbXBvcnQgYXBpQ2xpZW50IGZyb20gJ3V0aWxzL2FwaUNsaWVudCc7CmltcG9ydCB7IHJlbmRlckZvcm1GaWVsZCB9IGZyb20gJ3V0aWxzL2Zvcm0tdXRpbHMnOwppbXBvcnQgeyBkZWJvdW5jZUxvY2F0aW9uc0ZldGNoIH0gZnJvbSAndXRpbHMvb3B0aW9uLXV0aWxzJzsKaW1wb3J0IFRyYW5zbGF0ZSwgeyB0cmFuc2xhdGVXaXRoRGVmYXVsdE1lc3NhZ2UgfSBmcm9tICd1dGlscy9UcmFuc2xhdGUnOwppbXBvcnQgJ3JlYWN0LWNvbmZpcm0tYWxlcnQvc3JjL3JlYWN0LWNvbmZpcm0tYWxlcnQuY3NzJzsKdmFyIF9xdWVyeVN0cmluZyRwYXJzZSA9IHF1ZXJ5U3RyaW5nLnBhcnNlKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpLAogIG9yZGVySWQgPSBfcXVlcnlTdHJpbmckcGFyc2Uub3JkZXJJZDsKZnVuY3Rpb24gdmFsaWRhdGUodmFsdWVzKSB7CiAgdmFyIGVycm9ycyA9IHt9OwogIGlmICghdmFsdWVzLmRlc2NyaXB0aW9uKSB7CiAgICBlcnJvcnMuZGVzY3JpcHRpb24gPSAncmVhY3QuZGVmYXVsdC5lcnJvci5yZXF1aXJlZEZpZWxkLmxhYmVsJzsKICB9CiAgaWYgKCF2YWx1ZXMub3JpZ2luKSB7CiAgICBlcnJvcnMub3JpZ2luID0gJ3JlYWN0LmRlZmF1bHQuZXJyb3IucmVxdWlyZWRGaWVsZC5sYWJlbCc7CiAgfQogIGlmICghdmFsdWVzLmRlc3RpbmF0aW9uKSB7CiAgICBlcnJvcnMuZGVzdGluYXRpb24gPSAncmVhY3QuZGVmYXVsdC5lcnJvci5yZXF1aXJlZEZpZWxkLmxhYmVsJzsKICB9CiAgcmV0dXJuIGVycm9yczsKfQp2YXIgRklFTERTID0gewogIGRlc2NyaXB0aW9uOiB7CiAgICB0eXBlOiBUZXh0RmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuZGVzY3JpcHRpb24ubGFiZWwnLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdEZXNjcmlwdGlvbicsCiAgICBhdHRyaWJ1dGVzOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBhdXRvRm9jdXM6IHRydWUKICAgIH0KICB9LAogIG9yaWdpbjogewogICAgdHlwZTogU2VsZWN0RmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQub3JpZ2luLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnT3JpZ2luJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIGFzeW5jOiB0cnVlLAogICAgICBzaG93VmFsdWVUb29sdGlwOiB0cnVlLAogICAgICBvcGVuT25DbGljazogZmFsc2UsCiAgICAgIGF1dG9sb2FkOiBmYWxzZSwKICAgICAgY2FjaGU6IGZhbHNlLAogICAgICBvcHRpb25zOiBbXSwKICAgICAgZmlsdGVyT3B0aW9uczogZnVuY3Rpb24gZmlsdGVyT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICAgIH0KICAgIH0sCiAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIocHJvcHMpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBsb2FkT3B0aW9uczogcHJvcHMuZGVib3VuY2VkT3JpZ2luTG9jYXRpb25zRmV0Y2gsCiAgICAgICAgZGlzYWJsZWQ6ICFfLmlzTmlsKHByb3BzLnN0b2NrTW92ZW1lbnRJZCkKICAgICAgfTsKICAgIH0KICB9LAogIGRlc3RpbmF0aW9uOiB7CiAgICB0eXBlOiBTZWxlY3RGaWVsZCwKICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5kZXN0aW5hdGlvbi5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0Rlc3RpbmF0aW9uJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIGFzeW5jOiB0cnVlLAogICAgICBzaG93VmFsdWVUb29sdGlwOiB0cnVlLAogICAgICBvcGVuT25DbGljazogZmFsc2UsCiAgICAgIGF1dG9sb2FkOiBmYWxzZSwKICAgICAgY2FjaGU6IGZhbHNlLAogICAgICBvcHRpb25zOiBbXSwKICAgICAgZmlsdGVyT3B0aW9uczogZnVuY3Rpb24gZmlsdGVyT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICAgIH0KICAgIH0sCiAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIocHJvcHMpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBsb2FkT3B0aW9uczogcHJvcHMuZGVib3VuY2VkRGVzdGluYXRpb25Mb2NhdGlvbnNGZXRjaCwKICAgICAgICBkaXNhYmxlZDogKCFwcm9wcy5pc1N1cGVydXNlciB8fCAhXy5pc05pbChwcm9wcy5zdG9ja01vdmVtZW50SWQpKSAmJiAhcHJvcHMuaGFzQ2VudHJhbFB1cmNoYXNpbmdFbmFibGVkCiAgICAgIH07CiAgICB9CiAgfQp9OwoKLyoqIFRoZSBmaXJzdCBzdGVwIG9mIHN0b2NrIG1vdmVtZW50IHdoZXJlIHVzZXIgY2FuIGFkZCBhbGwgdGhlIGJhc2ljIGluZm9ybWF0aW9uLiAqLwp2YXIgQ3JlYXRlU3RvY2tNb3ZlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhDcmVhdGVTdG9ja01vdmVtZW50LCBfQ29tcG9uZW50KTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKENyZWF0ZVN0b2NrTW92ZW1lbnQpOwogIGZ1bmN0aW9uIENyZWF0ZVN0b2NrTW92ZW1lbnQocHJvcHMpIHsKICAgIHZhciBfdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDcmVhdGVTdG9ja01vdmVtZW50KTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIHNldEluaXRpYWxWYWx1ZXM6IHRydWUsCiAgICAgIHZhbHVlczogX3RoaXMucHJvcHMuaW5pdGlhbFZhbHVlcwogICAgfTsKICAgIF90aGlzLmRlYm91bmNlZE9yaWdpbkxvY2F0aW9uc0ZldGNoID0gZGVib3VuY2VMb2NhdGlvbnNGZXRjaChfdGhpcy5wcm9wcy5kZWJvdW5jZVRpbWUsIF90aGlzLnByb3BzLm1pblNlYXJjaExlbmd0aCwgbnVsbCwKICAgIC8vIGFjdGl2aXR5Q29kZXMKICAgIGZhbHNlLAogICAgLy8gZmV0Y2hBbGwKICAgIHRydWUsCiAgICAvLyB3aXRoT3JnQ29kZQogICAgZmFsc2UgLy8gd2l0aFR5cGVEZXNjcmlwdGlvbgogICAgKTsKCiAgICBfdGhpcy5kZWJvdW5jZWREZXN0aW5hdGlvbkxvY2F0aW9uc0ZldGNoID0gZGVib3VuY2VMb2NhdGlvbnNGZXRjaChfdGhpcy5wcm9wcy5kZWJvdW5jZVRpbWUsIF90aGlzLnByb3BzLm1pblNlYXJjaExlbmd0aCwgbnVsbCwgdHJ1ZSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhDcmVhdGVTdG9ja01vdmVtZW50LCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKG9yZGVySWQpIHsKICAgICAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL2NvbWJpbmVTaGlwbWVudHMvIi5jb25jYXQob3JkZXJJZCk7CiAgICAgICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgICAgICBfdGhpczIuc2V0SW5pdGlhbFZhbHVlcyhkYXRhLm9yaWdpbiwgZGF0YS5kZXN0aW5hdGlvbik7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgIGlmICghdGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMuc3RvY2tNb3ZlbWVudElkICYmIHRoaXMuc3RhdGUuc2V0SW5pdGlhbFZhbHVlcyAmJiBuZXh0UHJvcHMubG9jYXRpb24uaWQgJiYgIW9yZGVySWQgJiYgIXRoaXMucHJvcHMuaGFzQ2VudHJhbFB1cmNoYXNpbmdFbmFibGVkKSB7CiAgICAgICAgdGhpcy5zZXRJbml0aWFsVmFsdWVzKG51bGwsIG5leHRQcm9wcy5sb2NhdGlvbik7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRJbml0aWFsVmFsdWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRJbml0aWFsVmFsdWVzKG9yaWdpbiwgZGVzdGluYXRpb24pIHsKICAgICAgdmFyIG9yaWdpbkxvY2F0aW9uID0gW107CiAgICAgIHZhciBkZXN0aW5hdGlvbkxvY2F0aW9uID0gW107CiAgICAgIGlmIChvcmlnaW4pIHsKICAgICAgICBvcmlnaW5Mb2NhdGlvbiA9IHsKICAgICAgICAgIGlkOiBvcmlnaW4uaWQsCiAgICAgICAgICB0eXBlOiBvcmlnaW4ubG9jYXRpb25UeXBlID8gb3JpZ2luLmxvY2F0aW9uVHlwZS5sb2NhdGlvblR5cGVDb2RlIDogbnVsbCwKICAgICAgICAgIG5hbWU6IG9yaWdpbi5uYW1lLAogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChvcmlnaW4ub3JnYW5pemF0aW9uQ29kZSA/ICIiLmNvbmNhdChvcmlnaW4ub3JnYW5pemF0aW9uQ29kZSwgIiAtICIpIDogJycpLmNvbmNhdChvcmlnaW4ubmFtZSkKICAgICAgICB9OwogICAgICB9CiAgICAgIGlmIChkZXN0aW5hdGlvbikgewogICAgICAgIGRlc3RpbmF0aW9uTG9jYXRpb24gPSB7CiAgICAgICAgICBpZDogZGVzdGluYXRpb24uaWQsCiAgICAgICAgICB0eXBlOiBkZXN0aW5hdGlvbi5sb2NhdGlvblR5cGUgPyBkZXN0aW5hdGlvbi5sb2NhdGlvblR5cGUubG9jYXRpb25UeXBlQ29kZSA6IG51bGwsCiAgICAgICAgICBuYW1lOiBkZXN0aW5hdGlvbi5uYW1lLAogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChkZXN0aW5hdGlvbi5uYW1lLCAiIFsiKS5jb25jYXQoZGVzdGluYXRpb24ubG9jYXRpb25UeXBlID8gZGVzdGluYXRpb24ubG9jYXRpb25UeXBlLmRlc2NyaXB0aW9uIDogbnVsbCwgIl0iKQogICAgICAgIH07CiAgICAgIH0KICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBkZXN0aW5hdGlvbjogZGVzdGluYXRpb25Mb2NhdGlvbiwKICAgICAgICAgIG9yaWdpbjogb3JpZ2luTG9jYXRpb24KICAgICAgICB9LAogICAgICAgIHNldEluaXRpYWxWYWx1ZXM6IGZhbHNlCiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlcyBvciB1cGRhdGVzIHN0b2NrIG1vdmVtZW50IHdpdGggZ2l2ZW4gZGF0YQogICAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlcwogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAic2F2ZVN0b2NrTW92ZW1lbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVTdG9ja01vdmVtZW50KHZhbHVlcykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgaWYgKHZhbHVlcy5vcmlnaW4gJiYgdmFsdWVzLmRlc3RpbmF0aW9uICYmIHZhbHVlcy5kZXNjcmlwdGlvbikgewogICAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICAgIGRlc2NyaXB0aW9uOiB2YWx1ZXMuZGVzY3JpcHRpb24sCiAgICAgICAgICAnb3JpZ2luLmlkJzogdmFsdWVzLm9yaWdpbi5pZCwKICAgICAgICAgICdkZXN0aW5hdGlvbi5pZCc6IHZhbHVlcy5kZXN0aW5hdGlvbi5pZAogICAgICAgIH07CiAgICAgICAgdmFyIHN0b2NrTW92ZW1lbnRVcmwgPSAnJzsKICAgICAgICBpZiAodmFsdWVzLnN0b2NrTW92ZW1lbnRJZCkgewogICAgICAgICAgc3RvY2tNb3ZlbWVudFVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja01vdmVtZW50cy8iLmNvbmNhdCh2YWx1ZXMuc3RvY2tNb3ZlbWVudElkLCAiL3VwZGF0ZVJlcXVpc2l0aW9uIik7CiAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICBkZXNjcmlwdGlvbjogdmFsdWVzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAnZGVzdGluYXRpb24uaWQnOiB2YWx1ZXMuZGVzdGluYXRpb24uaWQKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0b2NrTW92ZW1lbnRVcmwgPSAnL29wZW5ib3hlcy9hcGkvc3RvY2tNb3ZlbWVudHMvY3JlYXRlQ29tYmluZWRTaGlwbWVudHMnOwogICAgICAgIH0KICAgICAgICBhcGlDbGllbnQucG9zdChzdG9ja01vdmVtZW50VXJsLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgdmFyIHJlc3AgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgIF90aGlzMy5wcm9wcy5oaXN0b3J5LnB1c2goIi9vcGVuYm94ZXMvc3RvY2tNb3ZlbWVudC9jcmVhdGVDb21iaW5lZFNoaXBtZW50cy8iLmNvbmNhdChyZXNwLmlkKSk7CiAgICAgICAgICAgIF90aGlzMy5wcm9wcy5uZXh0UGFnZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlcyksIHt9LCB7CiAgICAgICAgICAgICAgc3RvY2tNb3ZlbWVudElkOiByZXNwLmlkLAogICAgICAgICAgICAgIGxpbmVJdGVtczogcmVzcC5saW5lSXRlbXMsCiAgICAgICAgICAgICAgbW92ZW1lbnROdW1iZXI6IHJlc3AuaWRlbnRpZmllciwKICAgICAgICAgICAgICBuYW1lOiByZXNwLm5hbWUKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihfdGhpczMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja01vdmVtZW50LmVycm9yLmNyZWF0ZVN0b2NrTW92ZW1lbnQubGFiZWwnLCAnQ291bGQgbm90IGNyZWF0ZSBzdG9jayBtb3ZlbWVudCcpKSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtLCB7CiAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlcykgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5zYXZlU3RvY2tNb3ZlbWVudCh2YWx1ZXMpOwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlLAogICAgICAgIGluaXRpYWxWYWx1ZXM6IHRoaXMuc3RhdGUudmFsdWVzLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKF9yZWYpIHsKICAgICAgICAgIHZhciBoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCwKICAgICAgICAgICAgdmFsdWVzID0gX3JlZi52YWx1ZXM7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImZvcm0iLCB7CiAgICAgICAgICAgIG9uU3VibWl0OiBoYW5kbGVTdWJtaXQKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImNsYXNzaWMtZm9ybSB3aXRoLWRlc2NyaXB0aW9uIgogICAgICAgICAgfSwgXy5tYXAoRklFTERTLCBmdW5jdGlvbiAoZmllbGRDb25maWcsIGZpZWxkTmFtZSkgewogICAgICAgICAgICByZXR1cm4gcmVuZGVyRm9ybUZpZWxkKGZpZWxkQ29uZmlnLCBmaWVsZE5hbWUsIHsKICAgICAgICAgICAgICBpc1N1cGVydXNlcjogX3RoaXM0LnByb3BzLmlzU3VwZXJ1c2VyLAogICAgICAgICAgICAgIGRlYm91bmNlZERlc3RpbmF0aW9uTG9jYXRpb25zRmV0Y2g6IF90aGlzNC5kZWJvdW5jZWREZXN0aW5hdGlvbkxvY2F0aW9uc0ZldGNoLAogICAgICAgICAgICAgIGRlYm91bmNlZE9yaWdpbkxvY2F0aW9uc0ZldGNoOiBfdGhpczQuZGVib3VuY2VkT3JpZ2luTG9jYXRpb25zRmV0Y2gsCiAgICAgICAgICAgICAgc3RvY2tNb3ZlbWVudElkOiB2YWx1ZXMuc3RvY2tNb3ZlbWVudElkLAogICAgICAgICAgICAgIGhhc0NlbnRyYWxQdXJjaGFzaW5nRW5hYmxlZDogX3RoaXM0LnByb3BzLmhhc0NlbnRyYWxQdXJjaGFzaW5nRW5hYmxlZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAic3VibWl0LWJ1dHRvbnMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgZmxvYXQtcmlnaHQgYnRuLXhzIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24ubmV4dC5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTmV4dCIKICAgICAgICAgIH0pKSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBDcmVhdGVTdG9ja01vdmVtZW50Owp9KENvbXBvbmVudCk7CnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHsKICByZXR1cm4gewogICAgbG9jYXRpb246IHN0YXRlLnNlc3Npb24uY3VycmVudExvY2F0aW9uLAogICAgaXNTdXBlcnVzZXI6IHN0YXRlLnNlc3Npb24uaXNTdXBlcnVzZXIsCiAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZShnZXRUcmFuc2xhdGUoc3RhdGUubG9jYWxpemUpKSwKICAgIGRlYm91bmNlVGltZTogc3RhdGUuc2Vzc2lvbi5zZWFyY2hDb25maWcuZGVib3VuY2VUaW1lLAogICAgbWluU2VhcmNoTGVuZ3RoOiBzdGF0ZS5zZXNzaW9uLnNlYXJjaENvbmZpZy5taW5TZWFyY2hMZW5ndGgsCiAgICBoYXNDZW50cmFsUHVyY2hhc2luZ0VuYWJsZWQ6IHN0YXRlLnNlc3Npb24uY3VycmVudExvY2F0aW9uLmhhc0NlbnRyYWxQdXJjaGFzaW5nRW5hYmxlZAogIH07Cn07CmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIHsKICBzaG93U3Bpbm5lcjogc2hvd1NwaW5uZXIsCiAgaGlkZVNwaW5uZXI6IGhpZGVTcGlubmVyCn0pKENyZWF0ZVN0b2NrTW92ZW1lbnQpKTsKQ3JlYXRlU3RvY2tNb3ZlbWVudC5wcm9wVHlwZXMgPSB7CiAgLyoqIFJlYWN0IHJvdXRlcidzIG9iamVjdCB3aGljaCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB1cmwgdmFyYWlhYmxlcyBhbmQgcGFyYW1zICovCiAgbWF0Y2g6IFByb3BUeXBlcy5zaGFwZSh7CiAgICBwYXJhbXM6IFByb3BUeXBlcy5zaGFwZSh7CiAgICAgIHN0b2NrTW92ZW1lbnRJZDogUHJvcFR5cGVzLnN0cmluZwogICAgfSkKICB9KS5pc1JlcXVpcmVkLAogIC8qKiBJbml0aWFsIGNvbXBvbmVudCdzIGRhdGEgKi8KICBpbml0aWFsVmFsdWVzOiBQcm9wVHlwZXMuc2hhcGUoewogICAgb3JpZ2luOiBQcm9wVHlwZXMuc2hhcGUoewogICAgICBpZDogUHJvcFR5cGVzLnN0cmluZwogICAgfSksCiAgICBkZXN0aW5hdGlvbjogUHJvcFR5cGVzLnNoYXBlKHsKICAgICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcKICAgIH0pLAogICAgc3RvY2tsaXN0OiBQcm9wVHlwZXMuc2hhcGUoe30pCiAgfSkuaXNSZXF1aXJlZCwKICAvKiogRnVuY3Rpb24gY2FsbGVkIHdoZW4gZGF0YSBpcyBsb2FkaW5nICovCiAgc2hvd1NwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRhdGEgaGFzIGxvYWRlZCAqLwogIGhpZGVTcGlubmVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIC8qKgogICAqIEZ1bmN0aW9uIGNhbGxlZCB3aXRoIHRoZSBmb3JtIGRhdGEgd2hlbiB0aGUgaGFuZGxlU3VibWl0KCkKICAgKiBpcyBmaXJlZCBmcm9tIHdpdGhpbiB0aGUgZm9ybSBjb21wb25lbnQuCiAgICovCiAgbmV4dFBhZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqIFJlYWN0IHJvdXRlcidzIG9iamVjdCB1c2VkIHRvIG1hbmFnZSBzZXNzaW9uIGhpc3RvcnkgKi8KICBoaXN0b3J5OiBQcm9wVHlwZXMuc2hhcGUoewogICAgcHVzaDogUHJvcFR5cGVzLmZ1bmMKICB9KS5pc1JlcXVpcmVkLAogIC8qKiBDdXJyZW50IGxvY2F0aW9uICovCiAgbG9jYXRpb246IFByb3BUeXBlcy5zaGFwZSh7CiAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLAogICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcsCiAgICBsb2NhdGlvblR5cGU6IFByb3BUeXBlcy5zaGFwZSh7CiAgICAgIGRlc2NyaXB0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLAogICAgICBsb2NhdGlvblR5cGVDb2RlOiBQcm9wVHlwZXMuc3RyaW5nCiAgICB9KQogIH0pLmlzUmVxdWlyZWQsCiAgLyoqIFJldHVybiB0cnVlIGlmIGN1cnJlbnQgdXNlciBpcyBzdXBlcnVzZXIgKi8KICBpc1N1cGVydXNlcjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCwKICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgZGVib3VuY2VUaW1lOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsCiAgbWluU2VhcmNoTGVuZ3RoOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsCiAgLyoqIElzIHRydWUgd2hlbiBjdXJyZW50bHkgc2VsZWN0ZWQgbG9jYXRpb24gaGFzIGNlbnRyYWwgcHVyY2hhc2luZyBlbmFibGVkICovCiAgaGFzQ2VudHJhbFB1cmNoYXNpbmdFbmFibGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkCn07"},null]}