{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/stock-movement-wizard/outbound/PackingPage.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/stock-movement-wizard/outbound/PackingPage.jsx","mtime":1698037750000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9CmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgYXJyYXlNdXRhdG9ycyBmcm9tICdmaW5hbC1mb3JtLWFycmF5cyc7CmltcG9ydCB1cGRhdGUgZnJvbSAnaW1tdXRhYmlsaXR5LWhlbHBlcic7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7CmltcG9ydCB7IGNvbmZpcm1BbGVydCB9IGZyb20gJ3JlYWN0LWNvbmZpcm0tYWxlcnQnOwppbXBvcnQgeyBGb3JtIH0gZnJvbSAncmVhY3QtZmluYWwtZm9ybSc7CmltcG9ydCB7IGdldFRyYW5zbGF0ZSB9IGZyb20gJ3JlYWN0LWxvY2FsaXplLXJlZHV4JzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IEFsZXJ0IGZyb20gJ3JlYWN0LXMtYWxlcnQnOwppbXBvcnQgeyBoaWRlU3Bpbm5lciwgc2hvd1NwaW5uZXIgfSBmcm9tICdhY3Rpb25zJzsKaW1wb3J0IEFycmF5RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0FycmF5RmllbGQnOwppbXBvcnQgRmlsdGVySW5wdXQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0ZpbHRlcklucHV0JzsKaW1wb3J0IExhYmVsRmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0xhYmVsRmllbGQnOwppbXBvcnQgU2VsZWN0RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL1NlbGVjdEZpZWxkJzsKaW1wb3J0IFRleHRGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvVGV4dEZpZWxkJzsKaW1wb3J0IFBhY2tpbmdTcGxpdExpbmVNb2RhbCBmcm9tICdjb21wb25lbnRzL3N0b2NrLW1vdmVtZW50LXdpemFyZC9tb2RhbHMvUGFja2luZ1NwbGl0TGluZU1vZGFsJzsKaW1wb3J0IEFsZXJ0TWVzc2FnZSBmcm9tICd1dGlscy9BbGVydE1lc3NhZ2UnOwppbXBvcnQgeyBmbGF0dGVuUmVxdWVzdCwgaGFuZGxlRXJyb3IsIGhhbmRsZVN1Y2Nlc3MgfSBmcm9tICd1dGlscy9hcGlDbGllbnQnOwppbXBvcnQgeyByZW5kZXJGb3JtRmllbGQgfSBmcm9tICd1dGlscy9mb3JtLXV0aWxzJzsKaW1wb3J0IHsgZm9ybWF0UHJvZHVjdERpc3BsYXlOYW1lLCBtYXRjaGVzUHJvZHVjdENvZGVPck5hbWUgfSBmcm9tICd1dGlscy9mb3JtLXZhbHVlcy11dGlscyc7CmltcG9ydCB7IGRlYm91bmNlUGVvcGxlRmV0Y2ggfSBmcm9tICd1dGlscy9vcHRpb24tdXRpbHMnOwppbXBvcnQgVHJhbnNsYXRlLCB7IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZSB9IGZyb20gJ3V0aWxzL1RyYW5zbGF0ZSc7CmltcG9ydCAncmVhY3QtY29uZmlybS1hbGVydC9zcmMvcmVhY3QtY29uZmlybS1hbGVydC5jc3MnOwp2YXIgRklFTERTID0gewogIHBhY2tQYWdlSXRlbXM6IHsKICAgIHR5cGU6IEFycmF5RmllbGQsCiAgICBhcnJvd3NOYXZpZ2F0aW9uOiB0cnVlLAogICAgdmlydHVhbGl6ZWQ6IHRydWUsCiAgICB0b3RhbENvdW50OiBmdW5jdGlvbiB0b3RhbENvdW50KF9yZWYpIHsKICAgICAgdmFyIF90b3RhbENvdW50ID0gX3JlZi50b3RhbENvdW50OwogICAgICByZXR1cm4gX3RvdGFsQ291bnQ7CiAgICB9LAogICAgaXNSb3dMb2FkZWQ6IGZ1bmN0aW9uIGlzUm93TG9hZGVkKF9yZWYyKSB7CiAgICAgIHZhciBfaXNSb3dMb2FkZWQgPSBfcmVmMi5pc1Jvd0xvYWRlZDsKICAgICAgcmV0dXJuIF9pc1Jvd0xvYWRlZDsKICAgIH0sCiAgICBsb2FkTW9yZVJvd3M6IGZ1bmN0aW9uIGxvYWRNb3JlUm93cyhfcmVmMykgewogICAgICB2YXIgX2xvYWRNb3JlUm93cyA9IF9yZWYzLmxvYWRNb3JlUm93czsKICAgICAgcmV0dXJuIF9sb2FkTW9yZVJvd3MoKTsKICAgIH0sCiAgICBpc0ZpcnN0UGFnZUxvYWRlZDogZnVuY3Rpb24gaXNGaXJzdFBhZ2VMb2FkZWQoX3JlZjQpIHsKICAgICAgdmFyIF9pc0ZpcnN0UGFnZUxvYWRlZCA9IF9yZWY0LmlzRmlyc3RQYWdlTG9hZGVkOwogICAgICByZXR1cm4gX2lzRmlyc3RQYWdlTG9hZGVkOwogICAgfSwKICAgIGdldER5bmFtaWNSb3dBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljUm93QXR0cihfcmVmNSkgewogICAgICB2YXIgcm93VmFsdWVzID0gX3JlZjUucm93VmFsdWVzLAogICAgICAgIGl0ZW1GaWx0ZXIgPSBfcmVmNS5pdGVtRmlsdGVyOwogICAgICB2YXIgaGlkZVJvdyA9IGl0ZW1GaWx0ZXIgJiYgIW1hdGNoZXNQcm9kdWN0Q29kZU9yTmFtZSh7CiAgICAgICAgcHJvZHVjdDogcm93VmFsdWVzID09PSBudWxsIHx8IHJvd1ZhbHVlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcm93VmFsdWVzLnByb2R1Y3QsCiAgICAgICAgZmlsdGVyVmFsdWU6IGl0ZW1GaWx0ZXIKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgaGlkZVJvdzogaGlkZVJvdwogICAgICB9OwogICAgfSwKICAgIGZpZWxkczogewogICAgICBwcm9kdWN0Q29kZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgZmxleFdpZHRoOiAnMC43JywKICAgICAgICBoZWFkZXJBbGlnbjogJ2xlZnQnLAogICAgICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5jb2RlLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NvZGUnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtbGVmdCBtbC0xJwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHJvZHVjdDogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LnByb2R1Y3ROYW1lLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Byb2R1Y3QgTmFtZScsCiAgICAgICAgZmxleFdpZHRoOiAnMy41JywKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjYpIHsKICAgICAgICAgIHZhciBfZmllbGRWYWx1ZSRkaXNwbGF5TmE7CiAgICAgICAgICB2YXIgZmllbGRWYWx1ZSA9IF9yZWY2LmZpZWxkVmFsdWU7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaG93VmFsdWVUb29sdGlwOiAhIShmaWVsZFZhbHVlICE9PSBudWxsICYmIGZpZWxkVmFsdWUgIT09IHZvaWQgMCAmJiAoX2ZpZWxkVmFsdWUkZGlzcGxheU5hID0gZmllbGRWYWx1ZS5kaXNwbGF5TmFtZXMpICE9PSBudWxsICYmIF9maWVsZFZhbHVlJGRpc3BsYXlOYSAhPT0gdm9pZCAwICYmIF9maWVsZFZhbHVlJGRpc3BsYXlOYVsiZGVmYXVsdCJdKSwKICAgICAgICAgICAgdG9vbHRpcFZhbHVlOiBmaWVsZFZhbHVlID09PSBudWxsIHx8IGZpZWxkVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpZWxkVmFsdWUubmFtZQogICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtbGVmdCBtbC0xJywKICAgICAgICAgIGZvcm1hdFZhbHVlOiBmb3JtYXRQcm9kdWN0RGlzcGxheU5hbWUKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJpbkxvY2F0aW9uOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuYmluTG9jYXRpb24ubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQmluIGxvY2F0aW9uJywKICAgICAgICBmbGV4V2lkdGg6ICcxJywKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjcpIHsKICAgICAgICAgIHZhciBoYXNCaW5Mb2NhdGlvblN1cHBvcnQgPSBfcmVmNy5oYXNCaW5Mb2NhdGlvblN1cHBvcnQ7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoaWRlOiAhaGFzQmluTG9jYXRpb25TdXBwb3J0CiAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZSwKICAgICAgICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZShmaWVsZFZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IgogICAgICAgICAgICB9LCBmaWVsZFZhbHVlLnpvbmVOYW1lID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJ0ZXh0LXRydW5jYXRlIiwKICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgbWluV2lkdGg6IDMwLAogICAgICAgICAgICAgICAgZmxleFNocmluazogMjAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZpZWxkVmFsdWUuem9uZU5hbWUpIDogJycsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAidGV4dC10cnVuY2F0ZSIKICAgICAgICAgICAgfSwgZmllbGRWYWx1ZS56b25lTmFtZSA/ICI6ICIuY29uY2F0KGZpZWxkVmFsdWUubmFtZSkgOiBmaWVsZFZhbHVlLm5hbWUpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxvdE51bWJlcjogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LmxvdC5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdMb3QnLAogICAgICAgIGZsZXhXaWR0aDogJzEnCiAgICAgIH0sCiAgICAgIGV4cGlyYXRpb25EYXRlOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuZXhwaXJ5LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0V4cGlyeScsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfSwKICAgICAgcXVhbnRpdHlTaGlwcGVkOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQucXVhbnRpdHlTaGlwcGVkLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1F0eSBzaGlwcGVkJywKICAgICAgICBmbGV4V2lkdGg6ICcwLjgnCiAgICAgIH0sCiAgICAgIHVvbTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LnVvbS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVb00nLAogICAgICAgIGZsZXhXaWR0aDogJzAuOCcKICAgICAgfSwKICAgICAgcmVjaXBpZW50OiB7CiAgICAgICAgdHlwZTogU2VsZWN0RmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LnJlY2lwaWVudC5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWNpcGllbnQnLAogICAgICAgIGZsZXhXaWR0aDogJzInLAogICAgICAgIGZpZWxkS2V5OiAnJywKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBhc3luYzogdHJ1ZSwKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZSwKICAgICAgICAgIG9wZW5PbkNsaWNrOiBmYWxzZSwKICAgICAgICAgIGF1dG9sb2FkOiBmYWxzZSwKICAgICAgICAgIGNhY2hlOiBmYWxzZSwKICAgICAgICAgIG9wdGlvbnM6IFtdLAogICAgICAgICAgbGFiZWxLZXk6ICduYW1lJywKICAgICAgICAgIGZpbHRlck9wdGlvbnM6IGZ1bmN0aW9uIGZpbHRlck9wdGlvbnMob3B0aW9ucykgewogICAgICAgICAgICByZXR1cm4gb3B0aW9uczsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihwcm9wcykgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbG9hZE9wdGlvbnM6IHByb3BzLmRlYm91bmNlZFBlb3BsZUZldGNoLAogICAgICAgICAgICBkaXNhYmxlZDogcHJvcHMuc2hvd09ubHkKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LAogICAgICBwYWxsZXROYW1lOiB7CiAgICAgICAgdHlwZTogVGV4dEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5wYWNrTGV2ZWwxLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1BhY2sgbGV2ZWwgMScsCiAgICAgICAgZmxleFdpZHRoOiAnMC44JywKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjgpIHsKICAgICAgICAgIHZhciBzaG93T25seSA9IF9yZWY4LnNob3dPbmx5OwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGlzYWJsZWQ6IHNob3dPbmx5CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgYm94TmFtZTogewogICAgICAgIHR5cGU6IFRleHRGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQucGFja0xldmVsMi5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQYWNrIGxldmVsIDInLAogICAgICAgIGZsZXhXaWR0aDogJzAuOCcsCiAgICAgICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWY5KSB7CiAgICAgICAgICB2YXIgc2hvd09ubHkgPSBfcmVmOS5zaG93T25seTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpc2FibGVkOiBzaG93T25seQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNwbGl0TGluZUl0ZW1zOiB7CiAgICAgICAgdHlwZTogUGFja2luZ1NwbGl0TGluZU1vZGFsLAogICAgICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5zcGxpdExpbmUubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU3BsaXQgbGluZScsCiAgICAgICAgZmxleFdpZHRoOiAnMScsCiAgICAgICAgZmllbGRLZXk6ICcnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIHRpdGxlOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5zcGxpdExpbmUubGFiZWwnLAogICAgICAgICAgYnRuT3BlblRleHQ6ICdyZWFjdC5zdG9ja01vdmVtZW50LnNwbGl0TGluZS5sYWJlbCcsCiAgICAgICAgICBidG5PcGVuRGVmYXVsdFRleHQ6ICdTcGxpdCBsaW5lJywKICAgICAgICAgIGJ0bk9wZW5DbGFzc05hbWU6ICdidG4gYnRuLW91dGxpbmUtc3VjY2VzcycsCiAgICAgICAgICBkZWZhdWx0VGl0bGVNZXNzYWdlOiAnU3BsaXQgbGluZScKICAgICAgICB9LAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMTApIHsKICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gX3JlZjEwLmZpZWxkVmFsdWUsCiAgICAgICAgICAgIHJvd0luZGV4ID0gX3JlZjEwLnJvd0luZGV4LAogICAgICAgICAgICBfb25TYXZlID0gX3JlZjEwLm9uU2F2ZSwKICAgICAgICAgICAgZm9ybVZhbHVlcyA9IF9yZWYxMC5mb3JtVmFsdWVzLAogICAgICAgICAgICBzaG93T25seSA9IF9yZWYxMC5zaG93T25seTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxpbmVJdGVtOiBmaWVsZFZhbHVlLAogICAgICAgICAgICBidG5PcGVuRGlzYWJsZWQ6IHNob3dPbmx5LAogICAgICAgICAgICBvblNhdmU6IGZ1bmN0aW9uIG9uU2F2ZShzcGxpdExpbmVJdGVtcykgewogICAgICAgICAgICAgIHJldHVybiBfb25TYXZlKGZvcm1WYWx1ZXMsIHJvd0luZGV4LCBzcGxpdExpbmVJdGVtcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Owp2YXIgYXBpQ2xpZW50ID0gYXhpb3MuY3JlYXRlKHt9KTsKZnVuY3Rpb24gdmFsaWRhdGUodmFsdWVzKSB7CiAgdmFyIGVycm9ycyA9IHt9OwogIGVycm9ycy5wYWNrUGFnZUl0ZW1zID0gW107CiAgXy5mb3JFYWNoKHZhbHVlcy5wYWNrUGFnZUl0ZW1zLCBmdW5jdGlvbiAoaXRlbSwga2V5KSB7CiAgICBpZiAoIV8uaXNFbXB0eShpdGVtLmJveE5hbWUpICYmIF8uaXNFbXB0eShpdGVtLnBhbGxldE5hbWUpKSB7CiAgICAgIGVycm9ycy5wYWNrUGFnZUl0ZW1zW2tleV0gPSB7CiAgICAgICAgYm94TmFtZTogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuZXJyb3IuYm94V2l0aG91dFBhbGxldC5sYWJlbCcKICAgICAgfTsKICAgIH0KICB9KTsKICByZXR1cm4gZXJyb3JzOwp9CgovKioKICogVGhlIGZpZnRoIHN0ZXAgb2Ygc3RvY2sgbW92ZW1lbnQoZm9yIG1vdmVtZW50cyBmcm9tIGEgZGVwb3QpIHdoZXJlIHVzZXIgY2FuIHNlZSB0aGUKICogcGFja2luZyBpbmZvcm1hdGlvbi4KICovCnZhciBQYWNraW5nUGFnZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhQYWNraW5nUGFnZSwgX0NvbXBvbmVudCk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihQYWNraW5nUGFnZSk7CiAgZnVuY3Rpb24gUGFja2luZ1BhZ2UocHJvcHMpIHsKICAgIHZhciBfdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYWNraW5nUGFnZSk7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRhdGFGZXRjaGVkIiwgZmFsc2UpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIHZhbHVlczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5wcm9wcy5pbml0aWFsVmFsdWVzKSwge30sIHsKICAgICAgICBwYWNrUGFnZUl0ZW1zOiBbXQogICAgICB9KSwKICAgICAgdG90YWxDb3VudDogMCwKICAgICAgaXNGaXJzdFBhZ2VMb2FkZWQ6IGZhbHNlLAogICAgICBzaG93QWxlcnQ6IGZhbHNlLAogICAgICBhbGVydE1lc3NhZ2U6ICcnLAogICAgICBpdGVtRmlsdGVyOiAnJwogICAgfTsKICAgIF90aGlzLmlucHV0UmVmID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZVJlZigpOwogICAgX3RoaXMuc2F2ZVNwbGl0TGluZXMgPSBfdGhpcy5zYXZlU3BsaXRMaW5lcy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLmlzUm93TG9hZGVkID0gX3RoaXMuaXNSb3dMb2FkZWQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy5sb2FkTW9yZVJvd3MgPSBfdGhpcy5sb2FkTW9yZVJvd3MuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy5oYW5kbGVWYWxpZGF0aW9uRXJyb3JzID0gX3RoaXMuaGFuZGxlVmFsaWRhdGlvbkVycm9ycy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIGFwaUNsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGhhbmRsZVN1Y2Nlc3MsIF90aGlzLmhhbmRsZVZhbGlkYXRpb25FcnJvcnMpOwogICAgX3RoaXMuZGVib3VuY2VkUGVvcGxlRmV0Y2ggPSBkZWJvdW5jZVBlb3BsZUZldGNoKF90aGlzLnByb3BzLmRlYm91bmNlVGltZSwgX3RoaXMucHJvcHMubWluU2VhcmNoTGVuZ3RoKTsKICAgIF90aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhQYWNraW5nUGFnZSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHRoaXMucHJvcHMuc3RvY2tNb3ZlbWVudFRyYW5zbGF0aW9uc0ZldGNoZWQpIHsKICAgICAgICB0aGlzLmRhdGFGZXRjaGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLmZldGNoQWxsRGF0YSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHsKICAgICAgaWYgKG5leHRQcm9wcy5zdG9ja01vdmVtZW50VHJhbnNsYXRpb25zRmV0Y2hlZCAmJiAhdGhpcy5kYXRhRmV0Y2hlZCkgewogICAgICAgIHRoaXMuZGF0YUZldGNoZWQgPSB0cnVlOwogICAgICAgIHRoaXMuZmV0Y2hBbGxEYXRhKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRQYWNrUGFnZUl0ZW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQYWNrUGFnZUl0ZW1zKHJlc3BvbnNlLCBzdGFydEluZGV4KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgdmFsdWVzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuc3RhdGUudmFsdWVzKSwge30sIHsKICAgICAgICAgIHBhY2tQYWdlSXRlbXM6IF8udW5pcUJ5KF8uY29uY2F0KHRoaXMuc3RhdGUudmFsdWVzLnBhY2tQYWdlSXRlbXMsIGRhdGEpLCAnc2hpcG1lbnRJdGVtSWQnKQogICAgICAgIH0pCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlbgogICAgICAgIGlmICghXy5pc051bGwoc3RhcnRJbmRleCkgJiYgX3RoaXMyLnN0YXRlLnZhbHVlcy5wYWNrUGFnZUl0ZW1zLmxlbmd0aCAhPT0gX3RoaXMyLnN0YXRlLnRvdGFsQ291bnQpIHsKICAgICAgICAgIF90aGlzMi5sb2FkTW9yZVJvd3MoewogICAgICAgICAgICBzdGFydEluZGV4OiBzdGFydEluZGV4ICsgX3RoaXMyLnByb3BzLnBhZ2VTaXplCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoQWxsRGF0YSIsCiAgICB2YWx1ZToKICAgIC8qKgogICAgICogRmV0Y2hlcyBhbGwgcmVxdWlyZWQgZGF0YS4KICAgICAqIEBwdWJsaWMKICAgICAqLwogICAgZnVuY3Rpb24gZmV0Y2hBbGxEYXRhKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja01vdmVtZW50cy8iLmNvbmNhdCh0aGlzLnN0YXRlLnZhbHVlcy5zdG9ja01vdmVtZW50SWQsICI/c3RlcE51bWJlcj01Iik7CiAgICAgIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgdmFyIHN0YXR1c0NvZGUgPSByZXNwLmRhdGEuZGF0YS5zdGF0dXNDb2RlOwogICAgICAgIHZhciB0b3RhbENvdW50ID0gcmVzcC5kYXRhLnRvdGFsQ291bnQ7CiAgICAgICAgX3RoaXMzLnNldFN0YXRlKHsKICAgICAgICAgIHZhbHVlczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpczMuc3RhdGUudmFsdWVzKSwge30sIHsKICAgICAgICAgICAgc3RhdHVzQ29kZTogc3RhdHVzQ29kZQogICAgICAgICAgfSksCiAgICAgICAgICB0b3RhbENvdW50OiB0b3RhbENvdW50CiAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICAgIGlmICghdGhpcy5wcm9wcy5pc1BhZ2luYXRlZCkgewogICAgICAgIHRoaXMuZmV0Y2hMaW5lSXRlbXMoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMzLnNldFBhY2tQYWdlSXRlbXMocmVzcG9uc2UsIG51bGwpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZE1vcmVSb3dzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkTW9yZVJvd3MoX3JlZjExKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB2YXIgc3RhcnRJbmRleCA9IF9yZWYxMS5zdGFydEluZGV4OwogICAgICBpZiAodGhpcy5zdGF0ZS50b3RhbENvdW50KSB7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBpc0ZpcnN0UGFnZUxvYWRlZDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tNb3ZlbWVudHMvIi5jb25jYXQodGhpcy5zdGF0ZS52YWx1ZXMuc3RvY2tNb3ZlbWVudElkLCAiL3N0b2NrTW92ZW1lbnRJdGVtcz9vZmZzZXQ9IikuY29uY2F0KHN0YXJ0SW5kZXgsICImbWF4PSIpLmNvbmNhdCh0aGlzLnByb3BzLnBhZ2VTaXplLCAiJnN0ZXBOdW1iZXI9NSIpOwogICAgICAgIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM0LnNldFBhY2tQYWdlSXRlbXMocmVzcG9uc2UsIHN0YXJ0SW5kZXgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNSb3dMb2FkZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzUm93TG9hZGVkKF9yZWYxMikgewogICAgICB2YXIgaW5kZXggPSBfcmVmMTIuaW5kZXg7CiAgICAgIHJldHVybiAhIXRoaXMuc3RhdGUudmFsdWVzLnBhY2tQYWdlSXRlbXNbaW5kZXhdOwogICAgfQoKICAgIC8qKgogICAgICogRmV0Y2hlcyA1dGggc3RlcCBkYXRhIGZyb20gY3VycmVudCBzdG9jayBtb3ZlbWVudC4KICAgICAqIEBwdWJsaWMKICAgICAqLwogIH0sIHsKICAgIGtleTogImZldGNoTGluZUl0ZW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaExpbmVJdGVtcygpIHsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja01vdmVtZW50cy8iLmNvbmNhdCh0aGlzLnN0YXRlLnZhbHVlcy5zdG9ja01vdmVtZW50SWQsICIvc3RvY2tNb3ZlbWVudEl0ZW1zP3N0ZXBOdW1iZXI9NSIpOwogICAgICByZXR1cm4gYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICByZXR1cm4gcmVzcDsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBlcnI7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogU2F2ZXMgcGFja2luZyBkYXRhCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZm9ybVZhbHVlcwogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZShmb3JtVmFsdWVzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgIHRoaXMuc2F2ZVBhY2tpbmdEYXRhKGZvcm1WYWx1ZXMucGFja1BhZ2VJdGVtcykudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHZhciBkYXRhID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgICAgX3RoaXM1LnNldFN0YXRlKHsKICAgICAgICAgIHZhbHVlczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpczUuc3RhdGUudmFsdWVzKSwge30sIHsKICAgICAgICAgICAgcGFja1BhZ2VJdGVtczogZGF0YQogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgICBfdGhpczUucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICBBbGVydC5zdWNjZXNzKF90aGlzNS5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuYWxlcnQuc2F2ZVN1Y2Nlc3MubGFiZWwnLCAnQ2hhbmdlcyBzYXZlZCBzdWNjZXNzZnVsbHknKSwgewogICAgICAgICAgdGltZW91dDogMzAwMAogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlZmV0Y2ggdGhlIGRhdGEsIGFsbCBub3Qgc2F2ZWQgY2hhbmdlcyB3aWxsIGJlIGxvc3QuCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgY29uZmlybUFsZXJ0KHsKICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQubWVzc2FnZS5jb25maXJtUmVmcmVzaC5sYWJlbCcsICdDb25maXJtIHJlZnJlc2gnKSwKICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5jb25maXJtUmVmcmVzaC5tZXNzYWdlJywgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZWZyZXNoPyBZb3VyIHByb2dyZXNzIHNpbmNlIGxhc3Qgc2F2ZSB3aWxsIGJlIGxvc3QuJyksCiAgICAgICAgYnV0dG9uczogW3sKICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC55ZXMubGFiZWwnLCAnWWVzJyksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXM2LmZldGNoQWxsRGF0YSgpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC5uby5sYWJlbCcsICdObycpCiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2l0aW9uIHRvIG5leHQgc3RvY2sgbW92ZW1lbnQgc3RhdHVzCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJ0cmFuc2l0aW9uVG9OZXh0U3RlcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNpdGlvblRvTmV4dFN0ZXAoKSB7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tNb3ZlbWVudHMvIi5jb25jYXQodGhpcy5zdGF0ZS52YWx1ZXMuc3RvY2tNb3ZlbWVudElkLCAiL3N0YXR1cyIpOwogICAgICB2YXIgc3RhdHVzID0gJ0NIRUNLSU5HJzsKICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgc3RhdHVzOiBzdGF0dXMKICAgICAgfTsKICAgICAgaWYgKHRoaXMuc3RhdGUudmFsdWVzLnN0YXR1c0NvZGUgIT09ICdQQUNLRUQnKSB7CiAgICAgICAgcmV0dXJuIGFwaUNsaWVudC5wb3N0KHVybCwgcGF5bG9hZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVBbmRUcmFuc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlQW5kVHJhbnNpdGlvbihmb3JtVmFsdWVzKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy5zYXZlUGFja2luZ0RhdGEoZm9ybVZhbHVlcy5wYWNrUGFnZUl0ZW1zKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczcudHJhbnNpdGlvblRvTmV4dFN0ZXAoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNy5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgICAgX3RoaXM3LnByb3BzLm5leHRQYWdlKGZvcm1WYWx1ZXMpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczcucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczcucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidmFsaWRhdGVQaWNrbGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVQaWNrbGlzdCgpIHsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja01vdmVtZW50cy8iLmNvbmNhdCh0aGlzLnN0YXRlLnZhbHVlcy5zdG9ja01vdmVtZW50SWQsICIvdmFsaWRhdGVQaWNrbGlzdCIpOwogICAgICByZXR1cm4gYXBpQ2xpZW50LmdldCh1cmwpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZVZhbGlkYXRpb25FcnJvcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVZhbGlkYXRpb25FcnJvcnMoZXJyb3IpIHsKICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKSB7CiAgICAgICAgdmFyIGFsZXJ0TWVzc2FnZSA9IF8uam9pbihfLmdldChlcnJvciwgJ3Jlc3BvbnNlLmRhdGEuZXJyb3JNZXNzYWdlcycsICcnKSwgJyAnKTsKICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGFsZXJ0TWVzc2FnZTogYWxlcnRNZXNzYWdlLAogICAgICAgICAgc2hvd0FsZXJ0OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfQogICAgICByZXR1cm4gaGFuZGxlRXJyb3IoZXJyb3IpOwogICAgfQoKICAgIC8qKgogICAgICogU2F2ZXMgY3VycmVudCBzdG9jayBtb3ZlbWVudCBwcm9ncmVzcyAobGluZSBpdGVtcykgYW5kIGdvZXMgdG8gdGhlIG5leHQgc3RvY2sgbW92ZW1lbnQgc3RlcC4KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBmb3JtVmFsdWVzCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJuZXh0UGFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dFBhZ2UoZm9ybVZhbHVlcykgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB0aGlzLnZhbGlkYXRlUGlja2xpc3QoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM4LnNhdmVBbmRUcmFuc2l0aW9uKGZvcm1WYWx1ZXMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzOC5wcm9wcy5uZXh0UGFnZShmb3JtVmFsdWVzKTsKICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM4LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbmZpcm1IaWRkZW5MaW5lc0FuZEdvVG9OZXh0UGFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29uZmlybUhpZGRlbkxpbmVzQW5kR29Ub05leHRQYWdlKGZvcm1WYWx1ZXMpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgIHZhciBwYWNrUGFnZUl0ZW1zID0gZm9ybVZhbHVlcy5wYWNrUGFnZUl0ZW1zOwogICAgICB2YXIgaXNBbnlMaW5lSGlkZGVuID0gdGhpcy5zdGF0ZS5pdGVtRmlsdGVyICYmIHBhY2tQYWdlSXRlbXMuc29tZShmdW5jdGlvbiAocm93VmFsdWUpIHsKICAgICAgICB2YXIgcHJvZHVjdCA9IHJvd1ZhbHVlLnByb2R1Y3Q7CiAgICAgICAgcmV0dXJuICFtYXRjaGVzUHJvZHVjdENvZGVPck5hbWUoewogICAgICAgICAgcHJvZHVjdDogcHJvZHVjdCwKICAgICAgICAgIGZpbHRlclZhbHVlOiBfdGhpczkuc3RhdGUuaXRlbUZpbHRlcgogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgaWYgKGlzQW55TGluZUhpZGRlbikgewogICAgICAgIGNvbmZpcm1BbGVydCh7CiAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuY29uZmlybUhpZGRlbkxpbmVzLmxhYmVsJywgJ0NvbmZpcm0gaGlkZGVuIGxpbmVzJyksCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5jb25maXJtSGlkZGVuTGluZXMubWVzc2FnZScsICdBcmUgeW91IHN1cmUgeW91IGhhdmUgZmlsbGVkIGFsbCB0aGUgbGluZXM/IFNvbWUgbGluZXMgYXJlIGhpZGRlbi4nKSwKICAgICAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC55ZXMubGFiZWwnLCAnWWVzJyksCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOS5uZXh0UGFnZShmb3JtVmFsdWVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgewogICAgICAgICAgICBsYWJlbDogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LmRlZmF1bHQubm8ubGFiZWwnLCAnTm8nKSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICB2YXIgX3RoaXM5JGlucHV0UmVmJGN1cnJlOwogICAgICAgICAgICAgIHJldHVybiAoX3RoaXM5JGlucHV0UmVmJGN1cnJlID0gX3RoaXM5LmlucHV0UmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF90aGlzOSRpbnB1dFJlZiRjdXJyZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXM5JGlucHV0UmVmJGN1cnJlLmZvY3VzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH1dCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubmV4dFBhZ2UoZm9ybVZhbHVlcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTYXZlcyBwYWNraW5nIGRhdGEKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYWNrUGFnZUl0ZW1zCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJzYXZlUGFja2luZ0RhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVQYWNraW5nRGF0YShwYWNrUGFnZUl0ZW1zKSB7CiAgICAgIHZhciB1cGRhdGVJdGVtc1VybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja01vdmVtZW50cy8iLmNvbmNhdCh0aGlzLnN0YXRlLnZhbHVlcy5zdG9ja01vdmVtZW50SWQsICIvdXBkYXRlU2hpcG1lbnRJdGVtcyIpOwogICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICBpZDogdGhpcy5zdGF0ZS52YWx1ZXMuc3RvY2tNb3ZlbWVudElkLAogICAgICAgIHN0ZXBOdW1iZXI6ICc1JywKICAgICAgICBwYWNrUGFnZUl0ZW1zOiBwYWNrUGFnZUl0ZW1zCiAgICAgIH07CiAgICAgIGlmIChwYXlsb2FkLnBhY2tQYWdlSXRlbXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGFwaUNsaWVudC5wb3N0KHVwZGF0ZUl0ZW1zVXJsLCBmbGF0dGVuUmVxdWVzdChwYXlsb2FkKSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigncmVhY3Quc3RvY2tNb3ZlbWVudC5lcnJvci5zYXZlUmVxdWlzaXRpb25JdGVtcy5sYWJlbCcpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTYXZlcyBzcGxpdCBsaW5lIGl0ZW1zCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZm9ybVZhbHVlcwogICAgICogQHBhcmFtIHtudW1iZXJ9IGxpbmVJdGVtSW5kZXgKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBzcGxpdExpbmVJdGVtcwogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAic2F2ZVNwbGl0TGluZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVTcGxpdExpbmVzKGZvcm1WYWx1ZXMsIGxpbmVJdGVtSW5kZXgsIHNwbGl0TGluZUl0ZW1zKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB0aGlzLnNhdmVQYWNraW5nRGF0YSh1cGRhdGUoZm9ybVZhbHVlcy5wYWNrUGFnZUl0ZW1zLCBfZGVmaW5lUHJvcGVydHkoe30sIGxpbmVJdGVtSW5kZXgsIHsKICAgICAgICBzcGxpdExpbmVJdGVtczogewogICAgICAgICAgJHNldDogc3BsaXRMaW5lSXRlbXMKICAgICAgICB9CiAgICAgIH0pKSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHZhciBkYXRhID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgICAgX3RoaXMxMC5zZXRTdGF0ZSh7CiAgICAgICAgICB2YWx1ZXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXMxMC5zdGF0ZS52YWx1ZXMpLCB7fSwgewogICAgICAgICAgICBwYWNrUGFnZUl0ZW1zOiBkYXRhCiAgICAgICAgICB9KSwKICAgICAgICAgIHRvdGFsQ291bnQ6IF90aGlzMTAuc3RhdGUudG90YWxDb3VudCArIChzcGxpdExpbmVJdGVtcy5sZW5ndGggLSAxKQogICAgICAgIH0pOwogICAgICAgIF90aGlzMTAucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczEwLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CiAgICAgIHZhciBzaG93T25seSA9IHRoaXMucHJvcHMuc2hvd09ubHk7CiAgICAgIHZhciBpdGVtRmlsdGVyID0gdGhpcy5zdGF0ZS5pdGVtRmlsdGVyOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybSwgewogICAgICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXMpIHsKICAgICAgICAgIHJldHVybiBfdGhpczExLm5leHRQYWdlKHZhbHVlcyk7CiAgICAgICAgfSwKICAgICAgICBtdXRhdG9yczogX29iamVjdFNwcmVhZCh7fSwgYXJyYXlNdXRhdG9ycyksCiAgICAgICAgaW5pdGlhbFZhbHVlczogdGhpcy5zdGF0ZS52YWx1ZXMsCiAgICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKF9yZWYxMykgewogICAgICAgICAgdmFyIGhhbmRsZVN1Ym1pdCA9IF9yZWYxMy5oYW5kbGVTdWJtaXQsCiAgICAgICAgICAgIHZhbHVlcyA9IF9yZWYxMy52YWx1ZXMsCiAgICAgICAgICAgIGludmFsaWQgPSBfcmVmMTMuaW52YWxpZDsKICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXggZmxleC1jb2x1bW4iCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBbGVydE1lc3NhZ2UsIHsKICAgICAgICAgICAgc2hvdzogX3RoaXMxMS5zdGF0ZS5zaG93QWxlcnQsCiAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzMTEuc3RhdGUuYWxlcnRNZXNzYWdlLAogICAgICAgICAgICBkYW5nZXI6IHRydWUKICAgICAgICAgIH0pLCAhc2hvd09ubHkgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnV0dG9ucy1jb250YWluZXIiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWx0ZXJJbnB1dCwgewogICAgICAgICAgICBpdGVtRmlsdGVyOiBpdGVtRmlsdGVyLAogICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczExLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGl0ZW1GaWx0ZXI6IGUudGFyZ2V0LnZhbHVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQ2xlYXI6IGZ1bmN0aW9uIG9uQ2xlYXIoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXRlbUZpbHRlcjogJycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5wdXRSZWY6IF90aGlzMTEuaW5wdXRSZWYKICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMS5yZWZyZXNoKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsYXNzTmFtZTogImZsb2F0LXJpZ2h0IG1iLTEgYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBhbGlnbi1zZWxmLWVuZCBtbC0xIGJ0bi14cyIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImkiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImZhIGZhLXJlZnJlc2ggcHItMiIKICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5kZWZhdWx0LmJ1dHRvbi5yZWZyZXNoLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZWxvYWQiCiAgICAgICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgZGlzYWJsZWQ6IGludmFsaWQsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuc2F2ZSh2YWx1ZXMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJmbG9hdC1yaWdodCBtYi0xIGJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYWxpZ24tc2VsZi1lbmQgYnRuLXhzIG1sLTMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1zYXZlIHByLTIiCiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uc2F2ZS5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2F2ZSIKICAgICAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBkaXNhYmxlZDogaW52YWxpZCwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMS5zYXZlUGFja2luZ0RhdGEodmFsdWVzLnBhY2tQYWdlSXRlbXMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gIi9vcGVuYm94ZXMvc3RvY2tNb3ZlbWVudC9zaG93LyIuY29uY2F0KHZhbHVlcy5zdG9ja01vdmVtZW50SWQpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJmbG9hdC1yaWdodCBtYi0xIGJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYWxpZ24tc2VsZi1lbmQgYnRuLXhzIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZmEgZmEtc2lnbi1vdXQgcHItMiIKICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5kZWZhdWx0LmJ1dHRvbi5zYXZlQW5kRXhpdC5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2F2ZSBhbmQgZXhpdCIKICAgICAgICAgIH0pKSkpIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgIGRpc2FibGVkOiBpbnZhbGlkLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvb3BlbmJveGVzL3N0b2NrTW92ZW1lbnQvbGlzdD9kaXJlY3Rpb249T1VUQk9VTkQnOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJmbG9hdC1yaWdodCBtYi0xIGJ0biBidG4tb3V0bGluZS1kYW5nZXIgYWxpZ24tc2VsZi1lbmQgYnRuLXhzIG1yLTIiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1zaWduLW91dCBwci0yIgogICAgICAgICAgfSksICIgIiwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uZXhpdC5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXhpdCIKICAgICAgICAgIH0pLCAiICIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImZvcm0iLCB7CiAgICAgICAgICAgIG9uU3VibWl0OiBoYW5kbGVTdWJtaXQKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogInRhYmxlLWZvcm0iCiAgICAgICAgICB9LCBfLm1hcChGSUVMRFMsIGZ1bmN0aW9uIChmaWVsZENvbmZpZywgZmllbGROYW1lKSB7CiAgICAgICAgICAgIHJldHVybiByZW5kZXJGb3JtRmllbGQoZmllbGRDb25maWcsIGZpZWxkTmFtZSwgewogICAgICAgICAgICAgIG9uU2F2ZTogX3RoaXMxMS5zYXZlU3BsaXRMaW5lcywKICAgICAgICAgICAgICBmb3JtVmFsdWVzOiB2YWx1ZXMsCiAgICAgICAgICAgICAgZGVib3VuY2VkUGVvcGxlRmV0Y2g6IF90aGlzMTEuZGVib3VuY2VkUGVvcGxlRmV0Y2gsCiAgICAgICAgICAgICAgaGFzQmluTG9jYXRpb25TdXBwb3J0OiBfdGhpczExLnByb3BzLmhhc0JpbkxvY2F0aW9uU3VwcG9ydCwKICAgICAgICAgICAgICB0b3RhbENvdW50OiBfdGhpczExLnN0YXRlLnRvdGFsQ291bnQsCiAgICAgICAgICAgICAgbG9hZE1vcmVSb3dzOiBfdGhpczExLmxvYWRNb3JlUm93cywKICAgICAgICAgICAgICBpc1Jvd0xvYWRlZDogX3RoaXMxMS5pc1Jvd0xvYWRlZCwKICAgICAgICAgICAgICBpc1BhZ2luYXRlZDogX3RoaXMxMS5wcm9wcy5pc1BhZ2luYXRlZCwKICAgICAgICAgICAgICBpc0ZpcnN0UGFnZUxvYWRlZDogX3RoaXMxMS5zdGF0ZS5pc0ZpcnN0UGFnZUxvYWRlZCwKICAgICAgICAgICAgICBzaG93T25seTogc2hvd09ubHksCiAgICAgICAgICAgICAgaXRlbUZpbHRlcjogaXRlbUZpbHRlcgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAic3VibWl0LWJ1dHRvbnMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLWZvcm0gYnRuLXhzIiwKICAgICAgICAgICAgZGlzYWJsZWQ6IHNob3dPbmx5IHx8IGludmFsaWQsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuc2F2ZVBhY2tpbmdEYXRhKHZhbHVlcy5wYWNrUGFnZUl0ZW1zKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczExLnByb3BzLnByZXZpb3VzUGFnZSh2YWx1ZXMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5kZWZhdWx0LmJ1dHRvbi5wcmV2aW91cy5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUHJldmlvdXMiCiAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczExLmNvbmZpcm1IaWRkZW5MaW5lc0FuZEdvVG9OZXh0UGFnZSh2YWx1ZXMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtcHJpbWFyeSBidG4tZm9ybSBmbG9hdC1yaWdodCBidG4teHMiLAogICAgICAgICAgICBkaXNhYmxlZDogc2hvd09ubHkgfHwgaW52YWxpZAogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24ubmV4dC5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTmV4dCIKICAgICAgICAgIH0pKSkpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH1dKTsKICByZXR1cm4gUGFja2luZ1BhZ2U7Cn0oQ29tcG9uZW50KTsKdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkgewogIHJldHVybiB7CiAgICByZWNpcGllbnRzOiBzdGF0ZS51c2Vycy5kYXRhLAogICAgcmVjaXBpZW50c0ZldGNoZWQ6IHN0YXRlLnVzZXJzLmZldGNoZWQsCiAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZShnZXRUcmFuc2xhdGUoc3RhdGUubG9jYWxpemUpKSwKICAgIHN0b2NrTW92ZW1lbnRUcmFuc2xhdGlvbnNGZXRjaGVkOiBzdGF0ZS5zZXNzaW9uLmZldGNoZWRUcmFuc2xhdGlvbnMuc3RvY2tNb3ZlbWVudCwKICAgIGRlYm91bmNlVGltZTogc3RhdGUuc2Vzc2lvbi5zZWFyY2hDb25maWcuZGVib3VuY2VUaW1lLAogICAgbWluU2VhcmNoTGVuZ3RoOiBzdGF0ZS5zZXNzaW9uLnNlYXJjaENvbmZpZy5taW5TZWFyY2hMZW5ndGgsCiAgICBoYXNCaW5Mb2NhdGlvblN1cHBvcnQ6IHN0YXRlLnNlc3Npb24uY3VycmVudExvY2F0aW9uLmhhc0JpbkxvY2F0aW9uU3VwcG9ydCwKICAgIGlzUGFnaW5hdGVkOiBzdGF0ZS5zZXNzaW9uLmlzUGFnaW5hdGVkLAogICAgcGFnZVNpemU6IHN0YXRlLnNlc3Npb24ucGFnZVNpemUKICB9Owp9OwpleHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgewogIHNob3dTcGlubmVyOiBzaG93U3Bpbm5lciwKICBoaWRlU3Bpbm5lcjogaGlkZVNwaW5uZXIKfSkoUGFja2luZ1BhZ2UpOwpQYWNraW5nUGFnZS5wcm9wVHlwZXMgPSB7CiAgLyoqIEluaXRpYWwgY29tcG9uZW50J3MgZGF0YSAqLwogIGluaXRpYWxWYWx1ZXM6IFByb3BUeXBlcy5zaGFwZSh7fSkuaXNSZXF1aXJlZCwKICAvKiogRnVuY3Rpb24gcmV0dXJuaW5nIHVzZXIgdG8gdGhlIHByZXZpb3VzIHBhZ2UgKi8KICBwcmV2aW91c1BhZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqCiAgICogRnVuY3Rpb24gY2FsbGVkIHdpdGggdGhlIGZvcm0gZGF0YSB3aGVuIHRoZSBoYW5kbGVTdWJtaXQoKQogICAqIGlzIGZpcmVkIGZyb20gd2l0aGluIHRoZSBmb3JtIGNvbXBvbmVudC4KICAgKi8KICBuZXh0UGFnZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICAvKiogRnVuY3Rpb24gY2FsbGVkIHdoZW4gZGF0YSBpcyBsb2FkaW5nICovCiAgc2hvd1NwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRhdGEgaGFzIGxvYWRlZCAqLwogIGhpZGVTcGlubmVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIHRyYW5zbGF0ZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBzdG9ja01vdmVtZW50VHJhbnNsYXRpb25zRmV0Y2hlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCwKICBkZWJvdW5jZVRpbWU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCwKICBtaW5TZWFyY2hMZW5ndGg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCwKICAvKiogSXMgdHJ1ZSB3aGVuIGN1cnJlbnRseSBzZWxlY3RlZCBsb2NhdGlvbiBzdXBwb3J0cyBiaW5zICovCiAgaGFzQmluTG9jYXRpb25TdXBwb3J0OiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLAogIC8qKiBSZXR1cm4gdHJ1ZSBpZiBwYWdpbmF0aW9uIGlzIGVuYWJsZWQgKi8KICBpc1BhZ2luYXRlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCwKICAvKiogUmV0dXJuIHRydWUgaWYgc2hvdyBvbmx5ICovCiAgc2hvd09ubHk6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsCiAgcGFnZVNpemU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZAp9Ow=="},null]}