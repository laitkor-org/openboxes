{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/receiving/ReceivingCheckScreen.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/receiving/ReceivingCheckScreen.jsx","mtime":1698037749000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9pID0gbnVsbCA9PSBhcnIgPyBudWxsIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbIkBAaXRlcmF0b3IiXTsgaWYgKG51bGwgIT0gX2kpIHsgdmFyIF9zLCBfZSwgX3gsIF9yLCBfYXJyID0gW10sIF9uID0gITAsIF9kID0gITE7IHRyeSB7IGlmIChfeCA9IChfaSA9IF9pLmNhbGwoYXJyKSkubmV4dCwgMCA9PT0gaSkgeyBpZiAoT2JqZWN0KF9pKSAhPT0gX2kpIHJldHVybjsgX24gPSAhMTsgfSBlbHNlIGZvciAoOyAhKF9uID0gKF9zID0gX3guY2FsbChfaSkpLmRvbmUpICYmIChfYXJyLnB1c2goX3MudmFsdWUpLCBfYXJyLmxlbmd0aCAhPT0gaSk7IF9uID0gITApIHsgOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9ICEwLCBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBudWxsICE9IF9pWyJyZXR1cm4iXSAmJiAoX3IgPSBfaVsicmV0dXJuIl0oKSwgT2JqZWN0KF9yKSAhPT0gX3IpKSByZXR1cm47IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSB9CmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQpmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHsgdmFyIGtleSA9IF90b1ByaW1pdGl2ZShhcmcsICJzdHJpbmciKTsgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gInN5bWJvbCIgPyBrZXkgOiBTdHJpbmcoa2V5KTsgfQpmdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHsgaWYgKF90eXBlb2YoaW5wdXQpICE9PSAib2JqZWN0IiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0OyB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCAiZGVmYXVsdCIpOyBpZiAoX3R5cGVvZihyZXMpICE9PSAib2JqZWN0IikgcmV0dXJuIHJlczsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKTsgfSByZXR1cm4gKGhpbnQgPT09ICJzdHJpbmciID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7IH0KZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH0KZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IGFycmF5TXV0YXRvcnMgZnJvbSAnZmluYWwtZm9ybS1hcnJheXMnOwppbXBvcnQgdXBkYXRlIGZyb20gJ2ltbXV0YWJpbGl0eS1oZWxwZXInOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7CmltcG9ydCB7IGNvbmZpcm1BbGVydCB9IGZyb20gJ3JlYWN0LWNvbmZpcm0tYWxlcnQnOwppbXBvcnQgeyBGb3JtIH0gZnJvbSAncmVhY3QtZmluYWwtZm9ybSc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IGhpZGVTcGlubmVyLCBzaG93U3Bpbm5lciB9IGZyb20gJ2FjdGlvbnMnOwppbXBvcnQgQXJyYXlGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvQXJyYXlGaWVsZCc7CmltcG9ydCBDaGVja2JveEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9DaGVja2JveEZpZWxkJzsKaW1wb3J0IERhdGVGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvRGF0ZUZpZWxkJzsKaW1wb3J0IExhYmVsRmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0xhYmVsRmllbGQnOwppbXBvcnQgVGFibGVSb3dXaXRoU3ViZmllbGRzIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9UYWJsZVJvd1dpdGhTdWJmaWVsZHMnOwppbXBvcnQgVGV4dEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9UZXh0RmllbGQnOwppbXBvcnQgYXBpQ2xpZW50LCB7IGZsYXR0ZW5SZXF1ZXN0LCBwYXJzZVJlc3BvbnNlIH0gZnJvbSAndXRpbHMvYXBpQ2xpZW50JzsKaW1wb3J0IHsgcmVuZGVyRm9ybUZpZWxkIH0gZnJvbSAndXRpbHMvZm9ybS11dGlscyc7CmltcG9ydCB7IGZvcm1hdFByb2R1Y3REaXNwbGF5TmFtZSwgZ2V0UmVjZWl2aW5nUGF5bG9hZENvbnRhaW5lcnMgfSBmcm9tICd1dGlscy9mb3JtLXZhbHVlcy11dGlscyc7CmltcG9ydCBUcmFuc2xhdGUgZnJvbSAndXRpbHMvVHJhbnNsYXRlJzsKdmFyIFNISVBNRU5UX0ZJRUxEUyA9IHsKICAnb3JpZ2luLm5hbWUnOiB7CiAgICBsYWJlbDogJ3JlYWN0LnBhcnRpYWxSZWNlaXZpbmcub3JpZ2luLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnT3JpZ2luJywKICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUocGFyYW1zKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0RmllbGQsIHBhcmFtcyk7CiAgICB9LAogICAgYXR0cmlidXRlczogewogICAgICBkaXNhYmxlZDogdHJ1ZQogICAgfQogIH0sCiAgJ2Rlc3RpbmF0aW9uLm5hbWUnOiB7CiAgICBsYWJlbDogJ3JlYWN0LnBhcnRpYWxSZWNlaXZpbmcuZGVzdGluYXRpb24ubGFiZWwnLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdEZXN0aW5hdGlvbicsCiAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEZpZWxkLCBwYXJhbXMpOwogICAgfSwKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgZGlzYWJsZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGVTaGlwcGVkOiB7CiAgICBsYWJlbDogJ3JlYWN0LnBhcnRpYWxSZWNlaXZpbmcuc2hpcHBlZE9uLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnU2hpcHBlZCBvbicsCiAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0ZUZpZWxkLCBwYXJhbXMpOwogICAgfSwKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgZGlzYWJsZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGVEZWxpdmVyZWQ6IHsKICAgIGxhYmVsOiAncmVhY3QucGFydGlhbFJlY2VpdmluZy5kZWxpdmVyZWRPbi5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0RlbGl2ZXJlZCBvbicsCiAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0ZUZpZWxkLCBwYXJhbXMpOwogICAgfSwKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgZGF0ZUZvcm1hdDogJ01NL0REL1lZWVkgSEg6bW0gWicsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBzaG93VGltZVNlbGVjdDogdHJ1ZSwKICAgICAgYXV0b0NvbXBsZXRlOiAnb2ZmJwogICAgfQogIH0KfTsKdmFyIFRBQkxFX0ZJRUxEUyA9IHsKICBjb250YWluZXJzOiB7CiAgICB0eXBlOiBBcnJheUZpZWxkLAogICAgcm93Q29tcG9uZW50OiBUYWJsZVJvd1dpdGhTdWJmaWVsZHMsCiAgICBzdWJmaWVsZEtleTogJ3NoaXBtZW50SXRlbXMnLAogICAgaGVhZGVyRm9udFNpemU6ICcwLjc3NXJlbScsCiAgICBmaWVsZHM6IHsKICAgICAgJ3BhcmVudENvbnRhaW5lci5uYW1lJzogewogICAgICAgIGZpZWxkS2V5OiAnJywKICAgICAgICBmbGV4V2lkdGg6ICcxJywKICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICAgICAgcmV0dXJuICFwYXJhbXMuc3ViZmllbGQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbEZpZWxkLCBwYXJhbXMpIDogbnVsbDsKICAgICAgICB9LAogICAgICAgIGxhYmVsOiAncmVhY3QucGFydGlhbFJlY2VpdmluZy5wYWNrTGV2ZWwxLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1BhY2sgbGV2ZWwgMScsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKGZpZWxkVmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIF8uZ2V0KGZpZWxkVmFsdWUsICdwYXJlbnRDb250YWluZXIubmFtZScpIHx8IF8uZ2V0KGZpZWxkVmFsdWUsICdjb250YWluZXIubmFtZScpIHx8ICdVbnBhY2tlZCc7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAnY29udGFpbmVyLm5hbWUnOiB7CiAgICAgICAgZmllbGRLZXk6ICcnLAogICAgICAgIGZsZXhXaWR0aDogJzEnLAogICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUocGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gIXBhcmFtcy5zdWJmaWVsZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsRmllbGQsIHBhcmFtcykgOiBudWxsOwogICAgICAgIH0sCiAgICAgICAgbGFiZWw6ICdyZWFjdC5wYXJ0aWFsUmVjZWl2aW5nLnBhY2tMZXZlbDIubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUGFjayBsZXZlbCAyJywKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBmb3JtYXRWYWx1ZTogZnVuY3Rpb24gZm9ybWF0VmFsdWUoZmllbGRWYWx1ZSkgewogICAgICAgICAgICByZXR1cm4gXy5nZXQoZmllbGRWYWx1ZSwgJ3BhcmVudENvbnRhaW5lci5uYW1lJykgPyBfLmdldChmaWVsZFZhbHVlLCAnY29udGFpbmVyLm5hbWUnKSB8fCAnJyA6ICcnOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgJ3Byb2R1Y3QucHJvZHVjdENvZGUnOiB7CiAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiBwYXJhbXMuc3ViZmllbGQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbEZpZWxkLCBwYXJhbXMpIDogbnVsbDsKICAgICAgICB9LAogICAgICAgIGxhYmVsOiAncmVhY3QucGFydGlhbFJlY2VpdmluZy5jb2RlLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NvZGUnLAogICAgICAgIGhlYWRlckFsaWduOiAnbGVmdCcsCiAgICAgICAgZmxleFdpZHRoOiAnMScsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgY2xhc3NOYW1lOiAndGV4dC1sZWZ0IG1sLTEnCiAgICAgICAgfQogICAgICB9LAogICAgICBwcm9kdWN0OiB7CiAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiBwYXJhbXMuc3ViZmllbGQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbEZpZWxkLCBwYXJhbXMpIDogbnVsbDsKICAgICAgICB9LAogICAgICAgIGxhYmVsOiAncmVhY3QucGFydGlhbFJlY2VpdmluZy5wcm9kdWN0LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Byb2R1Y3QnLAogICAgICAgIGhlYWRlckFsaWduOiAnbGVmdCcsCiAgICAgICAgZmxleFdpZHRoOiAnNCcsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgY2xhc3NOYW1lOiAndGV4dC1sZWZ0IG1sLTEnLAogICAgICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZSwKICAgICAgICAgIGZvcm1hdFZhbHVlOiBmb3JtYXRQcm9kdWN0RGlzcGxheU5hbWUKICAgICAgICB9LAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmKSB7CiAgICAgICAgICB2YXIgZmllbGRWYWx1ZSA9IF9yZWYuZmllbGRWYWx1ZTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRvb2x0aXBWYWx1ZTogZmllbGRWYWx1ZSA9PT0gbnVsbCB8fCBmaWVsZFZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaWVsZFZhbHVlLm5hbWUKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LAogICAgICBsb3ROdW1iZXI6IHsKICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIHBhcmFtcy5zdWJmaWVsZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsRmllbGQsIHBhcmFtcykgOiBudWxsOwogICAgICAgIH0sCiAgICAgICAgbGFiZWw6ICdyZWFjdC5wYXJ0aWFsUmVjZWl2aW5nLmxvdFNlcmlhbE5vLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0xvdC9TZXJpYWwgTm8uJywKICAgICAgICBmbGV4V2lkdGg6ICcxJwogICAgICB9LAogICAgICBleHBpcmF0aW9uRGF0ZTogewogICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUocGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gcGFyYW1zLnN1YmZpZWxkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGFiZWxGaWVsZCwgcGFyYW1zKSA6IG51bGw7CiAgICAgICAgfSwKICAgICAgICBsYWJlbDogJ3JlYWN0LnBhcnRpYWxSZWNlaXZpbmcuZXhwaXJhdGlvbkRhdGUubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXhwaXJhdGlvbiBkYXRlJywKICAgICAgICBmbGV4V2lkdGg6ICcxJwogICAgICB9LAogICAgICBiaW5Mb2NhdGlvbjogewogICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUocGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gcGFyYW1zLnN1YmZpZWxkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGFiZWxGaWVsZCwgcGFyYW1zKSA6IG51bGw7CiAgICAgICAgfSwKICAgICAgICBsYWJlbDogJ3JlYWN0LnBhcnRpYWxSZWNlaXZpbmcuYmluTG9jYXRpb24ubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQmluIExvY2F0aW9uJywKICAgICAgICBmbGV4V2lkdGg6ICcxLjUnLAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMikgewogICAgICAgICAgdmFyIGhhc0JpbkxvY2F0aW9uU3VwcG9ydCA9IF9yZWYyLmhhc0JpbkxvY2F0aW9uU3VwcG9ydDsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGhpZGU6ICFoYXNCaW5Mb2NhdGlvblN1cHBvcnQKICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBzaG93VmFsdWVUb29sdGlwOiB0cnVlLAogICAgICAgICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKGZpZWxkVmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IgogICAgICAgICAgICB9LCBmaWVsZFZhbHVlLnpvbmVOYW1lID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJ0ZXh0LXRydW5jYXRlIiwKICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgbWluV2lkdGg6IDMwLAogICAgICAgICAgICAgICAgZmxleFNocmluazogMjAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZpZWxkVmFsdWUuem9uZU5hbWUpIDogJycsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAidGV4dC10cnVuY2F0ZSIKICAgICAgICAgICAgfSwgZmllbGRWYWx1ZS56b25lTmFtZSA/ICI6ICIuY29uY2F0KGZpZWxkVmFsdWUubmFtZSkgOiBmaWVsZFZhbHVlLm5hbWUpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgICdyZWNpcGllbnQubmFtZSc6IHsKICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIHBhcmFtcy5zdWJmaWVsZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsRmllbGQsIHBhcmFtcykgOiBudWxsOwogICAgICAgIH0sCiAgICAgICAgbGFiZWw6ICdyZWFjdC5wYXJ0aWFsUmVjZWl2aW5nLnJlY2lwaWVudC5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWNpcGllbnQnLAogICAgICAgIGZsZXhXaWR0aDogJzEuNScKICAgICAgfSwKICAgICAgcXVhbnRpdHlSZWNlaXZpbmc6IHsKICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIHBhcmFtcy5zdWJmaWVsZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsRmllbGQsIHBhcmFtcykgOiBudWxsOwogICAgICAgIH0sCiAgICAgICAgbGFiZWw6ICdyZWFjdC5wYXJ0aWFsUmVjZWl2aW5nLnJlY2VpdmluZ05vdy5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWNlaXZpbmcgbm93JywKICAgICAgICBmbGV4V2lkdGg6ICcxJywKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBmb3JtYXRWYWx1ZTogZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlID8gdmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJykgOiB2YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHF1YW50aXR5UmVtYWluaW5nOiB7CiAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiBwYXJhbXMuc3ViZmllbGQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbEZpZWxkLCBwYXJhbXMpIDogbnVsbDsKICAgICAgICB9LAogICAgICAgIGxhYmVsOiAncmVhY3QucGFydGlhbFJlY2VpdmluZy5yZW1haW5pbmcubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVtYWluaW5nJywKICAgICAgICBmaWVsZEtleTogJycsCiAgICAgICAgZmxleFdpZHRoOiAnMScsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKGZpZWxkVmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWUgJiYgZmllbGRWYWx1ZS5xdWFudGl0eVJlbWFpbmluZyA/IGZpZWxkVmFsdWUucXVhbnRpdHlSZW1haW5pbmcudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJykgOiBmaWVsZFZhbHVlLnF1YW50aXR5UmVtYWluaW5nOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYzKSB7CiAgICAgICAgICB2YXIgZmllbGRWYWx1ZSA9IF9yZWYzLmZpZWxkVmFsdWU7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjbGFzc05hbWU6IGZpZWxkVmFsdWUgJiYgKGZpZWxkVmFsdWUuY2FuY2VsUmVtYWluaW5nIHx8ICFmaWVsZFZhbHVlLnF1YW50aXR5UmVtYWluaW5nKSA/ICdzdHJpa2UtdGhyb3VnaCcgOiAndGV4dC1kYW5nZXInCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgY2FuY2VsUmVtYWluaW5nOiB7CiAgICAgICAgZmllbGRLZXk6ICdxdWFudGl0eVJlbWFpbmluZycsCiAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiBwYXJhbXMuc3ViZmllbGQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDaGVja2JveEZpZWxkLCBwYXJhbXMpIDogbnVsbDsKICAgICAgICB9LAogICAgICAgIGxhYmVsOiAncmVhY3QucGFydGlhbFJlY2VpdmluZy5jYW5jZWxSZW1haW5pbmcubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2FuY2VsIHJlbWFpbmluZycsCiAgICAgICAgZmxleFdpZHRoOiAnMScsCiAgICAgICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWY0KSB7CiAgICAgICAgICB2YXIgc2F2ZURpc2FibGVkID0gX3JlZjQuc2F2ZURpc2FibGVkLAogICAgICAgICAgICBmaWVsZFZhbHVlID0gX3JlZjQuZmllbGRWYWx1ZSwKICAgICAgICAgICAgaGFzUGFydGlhbFJlY2VpdmluZ1N1cHBvcnQgPSBfcmVmNC5oYXNQYXJ0aWFsUmVjZWl2aW5nU3VwcG9ydDsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpc2FibGVkOiBzYXZlRGlzYWJsZWQgfHwgXy50b0ludGVnZXIoZmllbGRWYWx1ZSkgPD0gMCB8fCAhaGFzUGFydGlhbFJlY2VpdmluZ1N1cHBvcnQsCiAgICAgICAgICAgIGhpZGU6ICFoYXNQYXJ0aWFsUmVjZWl2aW5nU3VwcG9ydAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvbW1lbnQ6IHsKICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIHBhcmFtcy5zdWJmaWVsZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsRmllbGQsIHBhcmFtcykgOiBudWxsOwogICAgICAgIH0sCiAgICAgICAgbGFiZWw6ICdyZWFjdC5wYXJ0aWFsUmVjZWl2aW5nLmNvbW1lbnQubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ29tbWVudCcsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfQogICAgfQogIH0KfTsKZnVuY3Rpb24gdmFsaWRhdGUodmFsdWVzKSB7CiAgdmFyIGVycm9ycyA9IHt9OwogIGVycm9ycy5jb250YWluZXJzID0gW107CiAgdmFyIGRhdGVEZWxpdmVyZWQgPSBtb21lbnQodmFsdWVzLmRhdGVEZWxpdmVyZWQsICdNTS9ERC9ZWVlZJyk7CiAgaWYgKCF2YWx1ZXMuZGF0ZURlbGl2ZXJlZCkgewogICAgZXJyb3JzLmRhdGVEZWxpdmVyZWQgPSAncmVhY3QuZGVmYXVsdC5lcnJvci5yZXF1aXJlZEZpZWxkLmxhYmVsJzsKICB9CiAgaWYgKG1vbWVudCgpLmRpZmYoZGF0ZURlbGl2ZXJlZCkgPCAwKSB7CiAgICBlcnJvcnMuZGF0ZURlbGl2ZXJlZCA9ICdyZWFjdC5wYXJ0aWFsUmVjZWl2aW5nLmVycm9yLmZ1dHVyZURhdGUubGFiZWwnOwogIH0KICBfLmZvckVhY2godmFsdWVzLmNvbnRhaW5lcnMsIGZ1bmN0aW9uIChjb250YWluZXIsIGtleSkgewogICAgZXJyb3JzLmNvbnRhaW5lcnNba2V5XSA9IHsKICAgICAgc2hpcG1lbnRJdGVtczogW10KICAgIH07CiAgICBfLmZvckVhY2goY29udGFpbmVyLnNoaXBtZW50SXRlbXMsIGZ1bmN0aW9uIChpdGVtLCBrZXkyKSB7CiAgICAgIGlmIChpdGVtLnF1YW50aXR5UmVjZWl2aW5nIDwgMCkgewogICAgICAgIGVycm9ycy5jb250YWluZXJzW2tleV0uc2hpcG1lbnRJdGVtc1trZXkyXSA9IHsKICAgICAgICAgIHF1YW50aXR5UmVjZWl2aW5nOiAncmVhY3QucGFydGlhbFJlY2VpdmluZy5lcnJvci5xdWFudGl0eVRvUmVjZWl2ZU5lZ2F0aXZlLmxhYmVsJwogICAgICAgIH07CiAgICAgIH0KICAgIH0pOwogIH0pOwogIHJldHVybiBlcnJvcnM7Cn0KCi8qKgogKiBUaGUgc2Vjb25kIHBhZ2Ugb2YgcGFydGlhbCByZWNlaXZpbmcgd2hlcmUgdXNlciBjYW4gdmlldyBhbGwgY2hhbmdlcyBtYWRlIGR1cmluZyB0aGUKICogcmVjZWl2aW5nIHByb2Nlc3MuIFRoZSB1c2VyIGNhbiBjYW5jZWwgcXVhbnRpdGllcyBub3QgcmVjZWl2ZWQgYW5kIGZpbmFsaXplIHRoZSByZWNlaXB0LgogKi8KdmFyIFJlY2VpdmluZ0NoZWNrU2NyZWVuID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFJlY2VpdmluZ0NoZWNrU2NyZWVuLCBfQ29tcG9uZW50KTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFJlY2VpdmluZ0NoZWNrU2NyZWVuKTsKICBmdW5jdGlvbiBSZWNlaXZpbmdDaGVja1NjcmVlbihwcm9wcykgewogICAgdmFyIF90aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2VpdmluZ0NoZWNrU2NyZWVuKTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGNvbXBsZXRlZDogX3RoaXMucHJvcHMuY29tcGxldGVkLAogICAgICB2YWx1ZXM6IHt9CiAgICB9OwogICAgX3RoaXMub25TYXZlID0gX3RoaXMub25TYXZlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMuY2FuY2VsQWxsUmVtYWluaW5nID0gX3RoaXMuY2FuY2VsQWxsUmVtYWluaW5nLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoUmVjZWl2aW5nQ2hlY2tTY3JlZW4sIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMuZmV0Y2hQYXJ0aWFsUmVjZWlwdENhbmRpZGF0ZXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvblNhdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU2F2ZSgpIHsKICAgICAgdGhpcy5zYXZlKHRoaXMuc3RhdGUudmFsdWVzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvblN1Ym1pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZm9ybVZhbHVlcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIGlzQmluTG9jYXRpb25DaG9zZW4gPSAhXy5zb21lKGZvcm1WYWx1ZXMuY29udGFpbmVycywgZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgIHJldHVybiBfLnNvbWUoY29udGFpbmVyLnNoaXBtZW50SXRlbXMsIGZ1bmN0aW9uIChzaGlwbWVudEl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfLmlzTnVsbChzaGlwbWVudEl0ZW0uYmluTG9jYXRpb24uaWQpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgaWYgKCFpc0JpbkxvY2F0aW9uQ2hvc2VuICYmIHRoaXMucHJvcHMuaGFzQmluTG9jYXRpb25TdXBwb3J0ICYmICEoZm9ybVZhbHVlcy5zaGlwbWVudFN0YXR1cyA9PT0gJ1JFQ0VJVkVEJykpIHsKICAgICAgICB0aGlzLmNvbmZpcm1SZWNlaXZlKGZvcm1WYWx1ZXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2F2ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGZvcm1WYWx1ZXMpLCB7fSwgewogICAgICAgICAgcmVjZWlwdFN0YXR1czogJ0NPTVBMRVRFRCcKICAgICAgICB9KSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgY29tcGxldGVkOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciByZXF1aXNpdGlvbiA9IGZvcm1WYWx1ZXMucmVxdWlzaXRpb24sCiAgICAgICAgICAgIHNoaXBtZW50SWQgPSBmb3JtVmFsdWVzLnNoaXBtZW50SWQ7CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAiL29wZW5ib3hlcy9zdG9ja01vdmVtZW50L3Nob3cvIi5jb25jYXQocmVxdWlzaXRpb24gfHwgc2hpcG1lbnRJZCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZldGNoZXMgYXZhaWxhYmxlIHJlY2VpcHRzIGZyb20gQVBJLgogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAiZmV0Y2hQYXJ0aWFsUmVjZWlwdENhbmRpZGF0ZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoUGFydGlhbFJlY2VpcHRDYW5kaWRhdGVzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL3BhcnRpYWxSZWNlaXZpbmcvIi5jb25jYXQodGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMuc2hpcG1lbnRJZCwgIj9zdGVwTnVtYmVyPTIiKTsKICAgICAgcmV0dXJuIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciB2YWx1ZXMgPSBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlLmRhdGEuZGF0YSk7CiAgICAgICAgaWYgKCFfdGhpczMucHJvcHMuaGFzUGFydGlhbFJlY2VpdmluZ1N1cHBvcnQpIHsKICAgICAgICAgIHZhbHVlcy5jb250YWluZXJzID0gXy5tYXAodmFsdWVzLmNvbnRhaW5lcnMsIGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY29udGFpbmVyKSwge30sIHsKICAgICAgICAgICAgICBzaGlwbWVudEl0ZW1zOiBfLmNoYWluKGNvbnRhaW5lci5zaGlwbWVudEl0ZW1zKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLnJlY2VpcHRJdGVtSWQgJiYgaXRlbS5xdWFudGl0eVJlbWFpbmluZyA+IDApIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVtYWluaW5nOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIV8uaXNOaWwoaXRlbS5xdWFudGl0eVJlY2VpdmluZykgJiYgaXRlbS5xdWFudGl0eVJlY2VpdmluZyAhPT0gJyc7CiAgICAgICAgICAgICAgfSkudmFsdWUoKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBfdGhpczMuc2V0U3RhdGUoewogICAgICAgICAgdmFsdWVzOiB7fQogICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHZhbHVlczogdmFsdWVzCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29uZmlybVJlY2VpdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmZpcm1SZWNlaXZlKGZvcm1WYWx1ZXMpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIGNvbmZpcm1BbGVydCh7CiAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5wYXJ0aWFsUmVjZWl2aW5nLm1lc3NhZ2UuY29uZmlybVJlY2VpdmUubGFiZWwnLCAnQ29uZmlybSByZWNlaXZpbmcnKSwKICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QucGFydGlhbFJlY2VpdmluZy5jb25maXJtUmVjZWl2ZS5tZXNzYWdlJywgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZWNlaXZlPyBUaGVyZSBhcmUgc29tZSBsaW5lcyB3aXRoIGVtcHR5IGJpbiBsb2NhdGlvbnMuJyksCiAgICAgICAgYnV0dG9uczogW3sKICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC55ZXMubGFiZWwnLCAnWWVzJyksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXM0LnNhdmUoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBmb3JtVmFsdWVzKSwge30sIHsKICAgICAgICAgICAgICByZWNlaXB0U3RhdHVzOiAnQ09NUExFVEVEJwogICAgICAgICAgICB9KSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzNC5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB2YXIgcmVxdWlzaXRpb24gPSBmb3JtVmFsdWVzLnJlcXVpc2l0aW9uLAogICAgICAgICAgICAgICAgc2hpcG1lbnRJZCA9IGZvcm1WYWx1ZXMuc2hpcG1lbnRJZDsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAiL29wZW5ib3hlcy9zdG9ja01vdmVtZW50L3Nob3cvIi5jb25jYXQocmVxdWlzaXRpb24gfHwgc2hpcG1lbnRJZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC5uby5sYWJlbCcsICdObycpCiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsQWxsUmVtYWluaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxBbGxSZW1haW5pbmcoKSB7CiAgICAgIHZhciBjb250YWluZXJzID0gdXBkYXRlKHRoaXMuc3RhdGUudmFsdWVzLmNvbnRhaW5lcnMsIHsKICAgICAgICAkYXBwbHk6IGZ1bmN0aW9uICRhcHBseShpdGVtcykgewogICAgICAgICAgcmV0dXJuICFpdGVtcyA/IFtdIDogaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiB1cGRhdGUoaXRlbSwgewogICAgICAgICAgICAgIHNoaXBtZW50SXRlbXM6IHsKICAgICAgICAgICAgICAgICRhcHBseTogZnVuY3Rpb24gJGFwcGx5KHNoaXBtZW50SXRlbXMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICFzaGlwbWVudEl0ZW1zID8gW10gOiBzaGlwbWVudEl0ZW1zLm1hcChmdW5jdGlvbiAoc2hpcG1lbnRJdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc2hpcG1lbnRJdGVtKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFJlbWFpbmluZzogc2hpcG1lbnRJdGVtLnF1YW50aXR5UmVtYWluaW5nID4gMAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIHZhbHVlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0ZS52YWx1ZXMpKTsKICAgICAgdmFsdWVzLmNvbnRhaW5lcnMgPSBjb250YWluZXJzOwogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICB2YWx1ZXM6IHZhbHVlcwogICAgICB9KTsKICAgICAgd2luZG93LnNldEZvcm1WYWx1ZSgnY29udGFpbmVycycsIGNvbnRhaW5lcnMpOwogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVBbmRFeGl0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlQW5kRXhpdChmb3JtVmFsdWVzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLnNhdmVWYWx1ZXMoZm9ybVZhbHVlcykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHJlcXVpc2l0aW9uID0gZm9ybVZhbHVlcy5yZXF1aXNpdGlvbiwKICAgICAgICAgIHNoaXBtZW50SWQgPSBmb3JtVmFsdWVzLnNoaXBtZW50SWQ7CiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gIi9vcGVuYm94ZXMvc3RvY2tNb3ZlbWVudC9zaG93LyIuY29uY2F0KHJlcXVpc2l0aW9uIHx8IHNoaXBtZW50SWQpOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlVmFsdWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlVmFsdWVzKGZvcm1WYWx1ZXMpIHsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL3BhcnRpYWxSZWNlaXZpbmcvIi5jb25jYXQodGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMuc2hpcG1lbnRJZCwgIj9zdGVwTnVtYmVyPTIiKTsKICAgICAgdmFyIHBheWxvYWQgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGZvcm1WYWx1ZXMpLCB7fSwgewogICAgICAgIGNvbnRhaW5lcnM6IGdldFJlY2VpdmluZ1BheWxvYWRDb250YWluZXJzKGZvcm1WYWx1ZXMpCiAgICAgIH0pOwogICAgICByZXR1cm4gYXBpQ2xpZW50LnBvc3QodXJsLCBmbGF0dGVuUmVxdWVzdChwYXlsb2FkKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxscyBzYXZlIG1ldGhvZC4KICAgICAqIEBwdWJsaWMKICAgICAqLwogIH0sIHsKICAgIGtleTogInNhdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmUoZm9ybVZhbHVlcywgY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgdGhpcy5zYXZlVmFsdWVzKGZvcm1WYWx1ZXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM2LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgX3RoaXM2LnNldFN0YXRlKHsKICAgICAgICAgIHZhbHVlczoge30KICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM2LnNldFN0YXRlKHsKICAgICAgICAgICAgdmFsdWVzOiBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlLmRhdGEuZGF0YSkKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInByZXZQYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2UGFnZSh2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIHRoaXMuc2F2ZVZhbHVlcyh2YWx1ZXMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczcucHJvcHMucHJldmlvdXNQYWdlKHZhbHVlcyk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtLCB7CiAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlcykgewogICAgICAgICAgcmV0dXJuIF90aGlzOC5vblN1Ym1pdCh2YWx1ZXMpOwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlLAogICAgICAgIG11dGF0b3JzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGFycmF5TXV0YXRvcnMpLCB7fSwgewogICAgICAgICAgc2V0VmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKF9yZWY1LCBzdGF0ZSwgX3JlZjYpIHsKICAgICAgICAgICAgdmFyIF9yZWY3ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjUsIDIpLAogICAgICAgICAgICAgIGZpZWxkID0gX3JlZjdbMF0sCiAgICAgICAgICAgICAgdmFsdWUgPSBfcmVmN1sxXTsKICAgICAgICAgICAgdmFyIGNoYW5nZVZhbHVlID0gX3JlZjYuY2hhbmdlVmFsdWU7CiAgICAgICAgICAgIGNoYW5nZVZhbHVlKHN0YXRlLCBmaWVsZCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgaW5pdGlhbFZhbHVlczogdGhpcy5zdGF0ZS52YWx1ZXMsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoX3JlZjgpIHsKICAgICAgICAgIHZhciBoYW5kbGVTdWJtaXQgPSBfcmVmOC5oYW5kbGVTdWJtaXQsCiAgICAgICAgICAgIHZhbHVlcyA9IF9yZWY4LnZhbHVlcywKICAgICAgICAgICAgZm9ybSA9IF9yZWY4LmZvcm07CiAgICAgICAgICBpZiAoIXdpbmRvdy5zZXRGb3JtVmFsdWUpIHsKICAgICAgICAgICAgd2luZG93LnNldEZvcm1WYWx1ZSA9IGZvcm0ubXV0YXRvcnMuc2V0VmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImZvcm0iLCB7CiAgICAgICAgICAgIG9uU3VibWl0OiBoYW5kbGVTdWJtaXQKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImNsYXNzaWMtZm9ybSBjbGFzc2ljLWZvcm0tY29uZGVuc2VkIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImJ1dHRvbnMtY29udGFpbmVyIGNsYXNzaWMtZm9ybS1idXR0b25zIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgIGNsYXNzTmFtZTogImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgZmxvYXQtcmlnaHQgYnRuLWZvcm0gYnRuLXhzIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnNhdmVBbmRFeGl0KF90aGlzOC5zdGF0ZS52YWx1ZXMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaXNhYmxlZDogX3RoaXM4LnN0YXRlLmNvbXBsZXRlZCB8fCAhXy5zaXplKF90aGlzOC5zdGF0ZS52YWx1ZXMuY29udGFpbmVycykKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImkiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImZhIGZhLXNpZ24tb3V0IHByLTIiCiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uc2F2ZUFuZEV4aXQubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNhdmUgYW5kIGV4aXQiCiAgICAgICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBmbG9hdC1yaWdodCBidG4tZm9ybSBidG4teHMiLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczgub25TYXZlKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRpc2FibGVkOiBfdGhpczguc3RhdGUuY29tcGxldGVkIHx8ICFfLnNpemUoX3RoaXM4LnN0YXRlLnZhbHVlcy5jb250YWluZXJzKQogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uc2F2ZS5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2F2ZSIKICAgICAgICAgIH0pKSwgX3RoaXM4LnByb3BzLmhhc1BhcnRpYWxSZWNlaXZpbmdTdXBwb3J0ID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgIGNsYXNzTmFtZTogImJ0biBidG4tb3V0bGluZS1kYW5nZXIgZmxvYXQtcmlnaHQgYnRuLWZvcm0gYnRuLXhzIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LmNhbmNlbEFsbFJlbWFpbmluZygpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaXNhYmxlZDogX3RoaXM4LnN0YXRlLmNvbXBsZXRlZCB8fCAhXy5zaXplKF90aGlzOC5zdGF0ZS52YWx1ZXMuY29udGFpbmVycykKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LnBhcnRpYWxSZWNlaXZpbmcuY2FuY2VsQWxsUmVtYWluaW5nLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDYW5jZWwgYWxsIHJlbWFpbmluZyIKICAgICAgICAgIH0pKSA6IG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmb3JtLXRpdGxlIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QucGFydGlhbFJlY2VpdmluZy5zaGlwbWVudEluZm9ybWF0aW9uLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTaGlwbWVudCBpbmZvcm1hdGlvbiIKICAgICAgICAgIH0pKSwgXy5tYXAoU0hJUE1FTlRfRklFTERTLCBmdW5jdGlvbiAoZmllbGRDb25maWcsIGZpZWxkTmFtZSkgewogICAgICAgICAgICByZXR1cm4gcmVuZGVyRm9ybUZpZWxkKGZpZWxkQ29uZmlnLCBmaWVsZE5hbWUsIHsKICAgICAgICAgICAgICBzYXZlRGlzYWJsZWQ6IF90aGlzOC5zdGF0ZS5jb21wbGV0ZWQgfHwgIV8uc2l6ZShfdGhpczguc3RhdGUudmFsdWVzLmNvbnRhaW5lcnMpLAogICAgICAgICAgICAgIGhhc0JpbkxvY2F0aW9uU3VwcG9ydDogX3RoaXM4LnByb3BzLmhhc0JpbkxvY2F0aW9uU3VwcG9ydCwKICAgICAgICAgICAgICBoYXNQYXJ0aWFsUmVjZWl2aW5nU3VwcG9ydDogX3RoaXM4LnByb3BzLmhhc1BhcnRpYWxSZWNlaXZpbmdTdXBwb3J0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJteS0yIHRhYmxlLWZvcm0iCiAgICAgICAgICB9LCBfLm1hcChUQUJMRV9GSUVMRFMsIGZ1bmN0aW9uIChmaWVsZENvbmZpZywgZmllbGROYW1lKSB7CiAgICAgICAgICAgIHJldHVybiByZW5kZXJGb3JtRmllbGQoZmllbGRDb25maWcsIGZpZWxkTmFtZSwgewogICAgICAgICAgICAgIHNhdmVEaXNhYmxlZDogX3RoaXM4LnN0YXRlLmNvbXBsZXRlZCB8fCAhXy5zaXplKF90aGlzOC5zdGF0ZS52YWx1ZXMuY29udGFpbmVycyksCiAgICAgICAgICAgICAgc2F2ZUFuZEV4aXQ6IF90aGlzOC5vbkV4aXQsCiAgICAgICAgICAgICAgaGFzQmluTG9jYXRpb25TdXBwb3J0OiBfdGhpczgucHJvcHMuaGFzQmluTG9jYXRpb25TdXBwb3J0LAogICAgICAgICAgICAgIGNhbmNlbEFsbFJlbWFpbmluZzogX3RoaXM4LmNhbmNlbEFsbFJlbWFpbmluZywKICAgICAgICAgICAgICBoYXNQYXJ0aWFsUmVjZWl2aW5nU3VwcG9ydDogX3RoaXM4LnByb3BzLmhhc1BhcnRpYWxSZWNlaXZpbmdTdXBwb3J0LAogICAgICAgICAgICAgIHZhbHVlczogdmFsdWVzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJzdWJtaXQtYnV0dG9ucyIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtcHJpbWFyeSBidG4tZm9ybSBidG4teHMiLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczgucHJldlBhZ2UodmFsdWVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QucGFydGlhbFJlY2VpdmluZy5iYWNrVG9FZGl0LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJCYWNrIHRvIGVkaXQiCiAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJzdWJtaXQiLAogICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtc3VjY2VzcyBidG4tZm9ybSBmbG9hdC1yaWdodCBidG4teHMiLAogICAgICAgICAgICBkaXNhYmxlZDogX3RoaXM4LnN0YXRlLmNvbXBsZXRlZCB8fCAhXy5zaXplKF90aGlzOC5zdGF0ZS52YWx1ZXMuY29udGFpbmVycykKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LnBhcnRpYWxSZWNlaXZpbmcucmVjZWl2ZVNoaXBtZW50LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZWNlaXZlIHNoaXBtZW50IgogICAgICAgICAgfSkpKSk7CiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBSZWNlaXZpbmdDaGVja1NjcmVlbjsKfShDb21wb25lbnQpOwp2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7CiAgcmV0dXJuIHsKICAgIGhhc0JpbkxvY2F0aW9uU3VwcG9ydDogc3RhdGUuc2Vzc2lvbi5jdXJyZW50TG9jYXRpb24uaGFzQmluTG9jYXRpb25TdXBwb3J0LAogICAgaGFzUGFydGlhbFJlY2VpdmluZ1N1cHBvcnQ6IHN0YXRlLnNlc3Npb24uY3VycmVudExvY2F0aW9uLmhhc1BhcnRpYWxSZWNlaXZpbmdTdXBwb3J0CiAgfTsKfTsKZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIHsKICBzaG93U3Bpbm5lcjogc2hvd1NwaW5uZXIsCiAgaGlkZVNwaW5uZXI6IGhpZGVTcGlubmVyCn0pKFJlY2VpdmluZ0NoZWNrU2NyZWVuKTsKUmVjZWl2aW5nQ2hlY2tTY3JlZW4ucHJvcFR5cGVzID0gewogIC8qKiBJbmRpY2F0b3IgaWYgcGFydGlhbCByZWNlaXZpbmcgaGFzIGJlZW4gY29tcGxldGVkICovCiAgY29tcGxldGVkOiBQcm9wVHlwZXMuYm9vbCwKICAvKiogSXMgdHJ1ZSB3aGVuIGN1cnJlbnRseSBzZWxlY3RlZCBsb2NhdGlvbiBzdXBwb3J0cyBiaW5zICovCiAgaGFzQmluTG9jYXRpb25TdXBwb3J0OiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLAogIC8qKiBGdW5jdGlvbiBjaGFuZ2luZyB0aGUgdmFsdWUgb2YgYSBmaWVsZCBpbiB0aGUgUmVkdXggc3RvcmUgKi8KICAvKiogSXMgdHJ1ZSB3aGVuIGN1cnJlbnRseSBzZWxlY3RlZCBsb2NhdGlvbiBzdXBwb3J0cyBwYXJ0aWFsIHJlY2VpdmluZyAqLwogIGhhc1BhcnRpYWxSZWNlaXZpbmdTdXBwb3J0OiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLAogIC8qKiBGdW5jdGlvbiBjYWxsZWQgd2hlbiBkYXRhIGlzIGxvYWRpbmcgKi8KICBzaG93U3Bpbm5lcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICAvKiogRnVuY3Rpb24gY2FsbGVkIHdoZW4gZGF0YSBoYXMgbG9hZGVkICovCiAgaGlkZVNwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgbWF0Y2g6IFByb3BUeXBlcy5zaGFwZSh7CiAgICBwYXJhbXM6IFByb3BUeXBlcy5zaGFwZSh7CiAgICAgIHNoaXBtZW50SWQ6IFByb3BUeXBlcy5zdHJpbmcKICAgIH0pCiAgfSkuaXNSZXF1aXJlZCwKICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgcHJldmlvdXNQYWdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkCn07ClJlY2VpdmluZ0NoZWNrU2NyZWVuLmRlZmF1bHRQcm9wcyA9IHsKICBjb21wbGV0ZWQ6IGZhbHNlLAogIG1hdGNoOiB7fQp9Ow=="},null]}