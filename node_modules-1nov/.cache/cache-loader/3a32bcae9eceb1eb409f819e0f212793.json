{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/actions/index.js","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/actions/index.js","mtime":1698037746000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIF9yZWdlbmVyYXRvclJ1bnRpbWUoKSB7ICJ1c2Ugc3RyaWN0IjsgLyohIHJlZ2VuZXJhdG9yLXJ1bnRpbWUgLS0gQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuIC0tIGxpY2Vuc2UgKE1JVCk6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9ibG9iL21haW4vTElDRU5TRSAqLyBfcmVnZW5lcmF0b3JSdW50aW1lID0gZnVuY3Rpb24gX3JlZ2VuZXJhdG9yUnVudGltZSgpIHsgcmV0dXJuIGV4cG9ydHM7IH07IHZhciBleHBvcnRzID0ge30sIE9wID0gT2JqZWN0LnByb3RvdHlwZSwgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHksIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5IHx8IGZ1bmN0aW9uIChvYmosIGtleSwgZGVzYykgeyBvYmpba2V5XSA9IGRlc2MudmFsdWU7IH0sICRTeW1ib2wgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wgOiB7fSwgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8ICJAQGl0ZXJhdG9yIiwgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCAiQEBhc3luY0l0ZXJhdG9yIiwgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8ICJAQHRvU3RyaW5nVGFnIjsgZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkgeyByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSwgb2JqW2tleV07IH0gdHJ5IHsgZGVmaW5lKHt9LCAiIik7IH0gY2F0Y2ggKGVycikgeyBkZWZpbmUgPSBmdW5jdGlvbiBkZWZpbmUob2JqLCBrZXksIHZhbHVlKSB7IHJldHVybiBvYmpba2V5XSA9IHZhbHVlOyB9OyB9IGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHsgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3IsIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKSwgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTsgcmV0dXJuIGRlZmluZVByb3BlcnR5KGdlbmVyYXRvciwgIl9pbnZva2UiLCB7IHZhbHVlOiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIH0pLCBnZW5lcmF0b3I7IH0gZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7IHRyeSB7IHJldHVybiB7IHR5cGU6ICJub3JtYWwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07IH0gY2F0Y2ggKGVycikgeyByZXR1cm4geyB0eXBlOiAidGhyb3ciLCBhcmc6IGVyciB9OyB9IH0gZXhwb3J0cy53cmFwID0gd3JhcDsgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTsgZnVuY3Rpb24gR2VuZXJhdG9yKCkge30gZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fSBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9IHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9OyBkZWZpbmUoSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KTsgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLCBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTsgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiYgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkgJiYgKEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUpOyB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7IGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHsgWyJuZXh0IiwgInRocm93IiwgInJldHVybiJdLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkgeyBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7IH0pOyB9KTsgfSBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHsgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHsgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7IGlmICgidGhyb3ciICE9PSByZWNvcmQudHlwZSkgeyB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZywgdmFsdWUgPSByZXN1bHQudmFsdWU7IHJldHVybiB2YWx1ZSAmJiAib2JqZWN0IiA9PSBfdHlwZW9mKHZhbHVlKSAmJiBoYXNPd24uY2FsbCh2YWx1ZSwgIl9fYXdhaXQiKSA/IFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgaW52b2tlKCJuZXh0IiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgaW52b2tlKCJ0aHJvdyIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTsgfSkgOiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uICh1bndyYXBwZWQpIHsgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkLCByZXNvbHZlKHJlc3VsdCk7IH0sIGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gaW52b2tlKCJ0aHJvdyIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpOyB9KTsgfSByZWplY3QocmVjb3JkLmFyZyk7IH0gdmFyIHByZXZpb3VzUHJvbWlzZTsgZGVmaW5lUHJvcGVydHkodGhpcywgIl9pbnZva2UiLCB7IHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShtZXRob2QsIGFyZykgeyBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHsgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTsgfSk7IH0gcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9IHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLCBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZykgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpOyB9IH0pOyB9IGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkgeyB2YXIgc3RhdGUgPSAic3VzcGVuZGVkU3RhcnQiOyByZXR1cm4gZnVuY3Rpb24gKG1ldGhvZCwgYXJnKSB7IGlmICgiZXhlY3V0aW5nIiA9PT0gc3RhdGUpIHRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpOyBpZiAoImNvbXBsZXRlZCIgPT09IHN0YXRlKSB7IGlmICgidGhyb3ciID09PSBtZXRob2QpIHRocm93IGFyZzsgcmV0dXJuIGRvbmVSZXN1bHQoKTsgfSBmb3IgKGNvbnRleHQubWV0aG9kID0gbWV0aG9kLCBjb250ZXh0LmFyZyA9IGFyZzs7KSB7IHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7IGlmIChkZWxlZ2F0ZSkgeyB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTsgaWYgKGRlbGVnYXRlUmVzdWx0KSB7IGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7IHJldHVybiBkZWxlZ2F0ZVJlc3VsdDsgfSB9IGlmICgibmV4dCIgPT09IGNvbnRleHQubWV0aG9kKSBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7ZWxzZSBpZiAoInRocm93IiA9PT0gY29udGV4dC5tZXRob2QpIHsgaWYgKCJzdXNwZW5kZWRTdGFydCIgPT09IHN0YXRlKSB0aHJvdyBzdGF0ZSA9ICJjb21wbGV0ZWQiLCBjb250ZXh0LmFyZzsgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7IH0gZWxzZSAicmV0dXJuIiA9PT0gY29udGV4dC5tZXRob2QgJiYgY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuYXJnKTsgc3RhdGUgPSAiZXhlY3V0aW5nIjsgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpOyBpZiAoIm5vcm1hbCIgPT09IHJlY29yZC50eXBlKSB7IGlmIChzdGF0ZSA9IGNvbnRleHQuZG9uZSA/ICJjb21wbGV0ZWQiIDogInN1c3BlbmRlZFlpZWxkIiwgcmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7IHJldHVybiB7IHZhbHVlOiByZWNvcmQuYXJnLCBkb25lOiBjb250ZXh0LmRvbmUgfTsgfSAidGhyb3ciID09PSByZWNvcmQudHlwZSAmJiAoc3RhdGUgPSAiY29tcGxldGVkIiwgY29udGV4dC5tZXRob2QgPSAidGhyb3ciLCBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmcpOyB9IH07IH0gZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkgeyB2YXIgbWV0aG9kTmFtZSA9IGNvbnRleHQubWV0aG9kLCBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvclttZXRob2ROYW1lXTsgaWYgKHVuZGVmaW5lZCA9PT0gbWV0aG9kKSByZXR1cm4gY29udGV4dC5kZWxlZ2F0ZSA9IG51bGwsICJ0aHJvdyIgPT09IG1ldGhvZE5hbWUgJiYgZGVsZWdhdGUuaXRlcmF0b3JbInJldHVybiJdICYmIChjb250ZXh0Lm1ldGhvZCA9ICJyZXR1cm4iLCBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZCwgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCksICJ0aHJvdyIgPT09IGNvbnRleHQubWV0aG9kKSB8fCAicmV0dXJuIiAhPT0gbWV0aG9kTmFtZSAmJiAoY29udGV4dC5tZXRob2QgPSAidGhyb3ciLCBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJyIgKyBtZXRob2ROYW1lICsgIicgbWV0aG9kIikpLCBDb250aW51ZVNlbnRpbmVsOyB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpOyBpZiAoInRocm93IiA9PT0gcmVjb3JkLnR5cGUpIHJldHVybiBjb250ZXh0Lm1ldGhvZCA9ICJ0aHJvdyIsIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZywgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGwsIENvbnRpbnVlU2VudGluZWw7IHZhciBpbmZvID0gcmVjb3JkLmFyZzsgcmV0dXJuIGluZm8gPyBpbmZvLmRvbmUgPyAoY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWUsIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2MsICJyZXR1cm4iICE9PSBjb250ZXh0Lm1ldGhvZCAmJiAoY29udGV4dC5tZXRob2QgPSAibmV4dCIsIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkKSwgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGwsIENvbnRpbnVlU2VudGluZWwpIDogaW5mbyA6IChjb250ZXh0Lm1ldGhvZCA9ICJ0aHJvdyIsIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSwgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGwsIENvbnRpbnVlU2VudGluZWwpOyB9IGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7IHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07IDEgaW4gbG9jcyAmJiAoZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdKSwgMiBpbiBsb2NzICYmIChlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXSwgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdKSwgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpOyB9IGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHsgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307IHJlY29yZC50eXBlID0gIm5vcm1hbCIsIGRlbGV0ZSByZWNvcmQuYXJnLCBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkOyB9IGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHsgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiAicm9vdCIgfV0sIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKSwgdGhpcy5yZXNldCghMCk7IH0gZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7IGlmIChpdGVyYWJsZSkgeyB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07IGlmIChpdGVyYXRvck1ldGhvZCkgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpOyBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgaXRlcmFibGUubmV4dCkgcmV0dXJuIGl0ZXJhYmxlOyBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHsgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7IGZvciAoOyArK2kgPCBpdGVyYWJsZS5sZW5ndGg7KSB7IGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHJldHVybiBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV0sIG5leHQuZG9uZSA9ICExLCBuZXh0OyB9IHJldHVybiBuZXh0LnZhbHVlID0gdW5kZWZpbmVkLCBuZXh0LmRvbmUgPSAhMCwgbmV4dDsgfTsgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7IH0gfSByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07IH0gZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHsgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogITAgfTsgfSByZXR1cm4gR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGRlZmluZVByb3BlcnR5KEdwLCAiY29uc3RydWN0b3IiLCB7IHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgY29uZmlndXJhYmxlOiAhMCB9KSwgZGVmaW5lUHJvcGVydHkoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsICJjb25zdHJ1Y3RvciIsIHsgdmFsdWU6IEdlbmVyYXRvckZ1bmN0aW9uLCBjb25maWd1cmFibGU6ICEwIH0pLCBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgdG9TdHJpbmdUYWdTeW1ib2wsICJHZW5lcmF0b3JGdW5jdGlvbiIpLCBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiAoZ2VuRnVuKSB7IHZhciBjdG9yID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZ2VuRnVuICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjsgcmV0dXJuICEhY3RvciAmJiAoY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHwgIkdlbmVyYXRvckZ1bmN0aW9uIiA9PT0gKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSk7IH0sIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uIChnZW5GdW4pIHsgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKSA6IChnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGRlZmluZShnZW5GdW4sIHRvU3RyaW5nVGFnU3ltYm9sLCAiR2VuZXJhdG9yRnVuY3Rpb24iKSksIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKSwgZ2VuRnVuOyB9LCBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24gKGFyZykgeyByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTsgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKSwgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBhc3luY0l0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KSwgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvciwgZXhwb3J0cy5hc3luYyA9IGZ1bmN0aW9uIChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHsgdm9pZCAwID09PSBQcm9taXNlSW1wbCAmJiAoUHJvbWlzZUltcGwgPSBQcm9taXNlKTsgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcih3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSwgUHJvbWlzZUltcGwpOyByZXR1cm4gZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pID8gaXRlciA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTsgfSk7IH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCksIGRlZmluZShHcCwgdG9TdHJpbmdUYWdTeW1ib2wsICJHZW5lcmF0b3IiKSwgZGVmaW5lKEdwLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSksIGRlZmluZShHcCwgInRvU3RyaW5nIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gIltvYmplY3QgR2VuZXJhdG9yXSI7IH0pLCBleHBvcnRzLmtleXMgPSBmdW5jdGlvbiAodmFsKSB7IHZhciBvYmplY3QgPSBPYmplY3QodmFsKSwga2V5cyA9IFtdOyBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7IGtleXMucHVzaChrZXkpOyB9IHJldHVybiBrZXlzLnJldmVyc2UoKSwgZnVuY3Rpb24gbmV4dCgpIHsgZm9yICg7IGtleXMubGVuZ3RoOykgeyB2YXIga2V5ID0ga2V5cy5wb3AoKTsgaWYgKGtleSBpbiBvYmplY3QpIHJldHVybiBuZXh0LnZhbHVlID0ga2V5LCBuZXh0LmRvbmUgPSAhMSwgbmV4dDsgfSByZXR1cm4gbmV4dC5kb25lID0gITAsIG5leHQ7IH07IH0sIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzLCBDb250ZXh0LnByb3RvdHlwZSA9IHsgY29uc3RydWN0b3I6IENvbnRleHQsIHJlc2V0OiBmdW5jdGlvbiByZXNldChza2lwVGVtcFJlc2V0KSB7IGlmICh0aGlzLnByZXYgPSAwLCB0aGlzLm5leHQgPSAwLCB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkLCB0aGlzLmRvbmUgPSAhMSwgdGhpcy5kZWxlZ2F0ZSA9IG51bGwsIHRoaXMubWV0aG9kID0gIm5leHQiLCB0aGlzLmFyZyA9IHVuZGVmaW5lZCwgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSksICFza2lwVGVtcFJlc2V0KSBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHsgInQiID09PSBuYW1lLmNoYXJBdCgwKSAmJiBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJiAhaXNOYU4oK25hbWUuc2xpY2UoMSkpICYmICh0aGlzW25hbWVdID0gdW5kZWZpbmVkKTsgfSB9LCBzdG9wOiBmdW5jdGlvbiBzdG9wKCkgeyB0aGlzLmRvbmUgPSAhMDsgdmFyIHJvb3RSZWNvcmQgPSB0aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjsgaWYgKCJ0aHJvdyIgPT09IHJvb3RSZWNvcmQudHlwZSkgdGhyb3cgcm9vdFJlY29yZC5hcmc7IHJldHVybiB0aGlzLnJ2YWw7IH0sIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbiBkaXNwYXRjaEV4Y2VwdGlvbihleGNlcHRpb24pIHsgaWYgKHRoaXMuZG9uZSkgdGhyb3cgZXhjZXB0aW9uOyB2YXIgY29udGV4dCA9IHRoaXM7IGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkgeyByZXR1cm4gcmVjb3JkLnR5cGUgPSAidGhyb3ciLCByZWNvcmQuYXJnID0gZXhjZXB0aW9uLCBjb250ZXh0Lm5leHQgPSBsb2MsIGNhdWdodCAmJiAoY29udGV4dC5tZXRob2QgPSAibmV4dCIsIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkKSwgISFjYXVnaHQ7IH0gZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgeyB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV0sIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247IGlmICgicm9vdCIgPT09IGVudHJ5LnRyeUxvYykgcmV0dXJuIGhhbmRsZSgiZW5kIik7IGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7IHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCAiY2F0Y2hMb2MiKSwgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCAiZmluYWxseUxvYyIpOyBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkgeyBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsICEwKTsgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7IH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHsgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCAhMCk7IH0gZWxzZSB7IGlmICghaGFzRmluYWxseSkgdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpOyBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTsgfSB9IH0gfSwgYWJydXB0OiBmdW5jdGlvbiBhYnJ1cHQodHlwZSwgYXJnKSB7IGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHsgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldOyBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJiBoYXNPd24uY2FsbChlbnRyeSwgImZpbmFsbHlMb2MiKSAmJiB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7IHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTsgYnJlYWs7IH0gfSBmaW5hbGx5RW50cnkgJiYgKCJicmVhayIgPT09IHR5cGUgfHwgImNvbnRpbnVlIiA9PT0gdHlwZSkgJiYgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiYgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jICYmIChmaW5hbGx5RW50cnkgPSBudWxsKTsgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307IHJldHVybiByZWNvcmQudHlwZSA9IHR5cGUsIHJlY29yZC5hcmcgPSBhcmcsIGZpbmFsbHlFbnRyeSA/ICh0aGlzLm1ldGhvZCA9ICJuZXh0IiwgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MsIENvbnRpbnVlU2VudGluZWwpIDogdGhpcy5jb21wbGV0ZShyZWNvcmQpOyB9LCBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUocmVjb3JkLCBhZnRlckxvYykgeyBpZiAoInRocm93IiA9PT0gcmVjb3JkLnR5cGUpIHRocm93IHJlY29yZC5hcmc7IHJldHVybiAiYnJlYWsiID09PSByZWNvcmQudHlwZSB8fCAiY29udGludWUiID09PSByZWNvcmQudHlwZSA/IHRoaXMubmV4dCA9IHJlY29yZC5hcmcgOiAicmV0dXJuIiA9PT0gcmVjb3JkLnR5cGUgPyAodGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnLCB0aGlzLm1ldGhvZCA9ICJyZXR1cm4iLCB0aGlzLm5leHQgPSAiZW5kIikgOiAibm9ybWFsIiA9PT0gcmVjb3JkLnR5cGUgJiYgYWZ0ZXJMb2MgJiYgKHRoaXMubmV4dCA9IGFmdGVyTG9jKSwgQ29udGludWVTZW50aW5lbDsgfSwgZmluaXNoOiBmdW5jdGlvbiBmaW5pc2goZmluYWxseUxvYykgeyBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7IHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHJldHVybiB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKSwgcmVzZXRUcnlFbnRyeShlbnRyeSksIENvbnRpbnVlU2VudGluZWw7IH0gfSwgImNhdGNoIjogZnVuY3Rpb24gX2NhdGNoKHRyeUxvYykgeyBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7IHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7IHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uOyBpZiAoInRocm93IiA9PT0gcmVjb3JkLnR5cGUpIHsgdmFyIHRocm93biA9IHJlY29yZC5hcmc7IHJlc2V0VHJ5RW50cnkoZW50cnkpOyB9IHJldHVybiB0aHJvd247IH0gfSB0aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpOyB9LCBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbiBkZWxlZ2F0ZVlpZWxkKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7IHJldHVybiB0aGlzLmRlbGVnYXRlID0geyBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSwgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSwgbmV4dExvYzogbmV4dExvYyB9LCAibmV4dCIgPT09IHRoaXMubWV0aG9kICYmICh0aGlzLmFyZyA9IHVuZGVmaW5lZCksIENvbnRpbnVlU2VudGluZWw7IH0gfSwgZXhwb3J0czsgfQpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQpmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHsgdmFyIGtleSA9IF90b1ByaW1pdGl2ZShhcmcsICJzdHJpbmciKTsgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gInN5bWJvbCIgPyBrZXkgOiBTdHJpbmcoa2V5KTsgfQpmdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHsgaWYgKF90eXBlb2YoaW5wdXQpICE9PSAib2JqZWN0IiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0OyB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCAiZGVmYXVsdCIpOyBpZiAoX3R5cGVvZihyZXMpICE9PSAib2JqZWN0IikgcmV0dXJuIHJlczsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKTsgfSByZXR1cm4gKGhpbnQgPT09ICJzdHJpbmciID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7IH0KZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQovKiBlc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246IFsiZXJyb3IiLCB7ICJwcm9wcyI6IGZhbHNlIH1dICovCmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IGFkZFRyYW5zbGF0aW9uRm9yTGFuZ3VhZ2UgfSBmcm9tICdyZWFjdC1sb2NhbGl6ZS1yZWR1eCc7CmltcG9ydCB7IEFERF9JTkZPX0JBUiwgQUREX1NUT0NLX01PVkVNRU5UX0RSQUZULCBDSEFOR0VfQ1VSUkVOVF9MT0NBTEUsIENIQU5HRV9DVVJSRU5UX0xPQ0FUSU9OLCBDTE9TRV9JTkZPX0JBUiwgRkVUQ0hfQlVZRVJTLCBGRVRDSF9DT05GSUcsIEZFVENIX0NPTkZJR19BTkRfU0VUX0FDVElWRSwgRkVUQ0hfQ1VSUkVOQ0lFUywgRkVUQ0hfR1JBUEhTLCBGRVRDSF9JTlZPSUNFX1NUQVRVU0VTLCBGRVRDSF9JTlZPSUNFX1RZUEVfQ09ERVMsIEZFVENIX0xPQ0FUSU9OX1RZUEVTLCBGRVRDSF9NRU5VX0NPTkZJRywgRkVUQ0hfTlVNQkVSUywgRkVUQ0hfUEFZTUVOVF9URVJNUywgRkVUQ0hfUFVSQ0hBU0VfT1JERVJfU1RBVFVTRVMsIEZFVENIX1JFQVNPTkNPREVTLCBGRVRDSF9SRVFVSVNJVElPTl9TVEFUVVNfQ09ERVMsIEZFVENIX1NFU1NJT05fSU5GTywgRkVUQ0hfU0hJUE1FTlRfU1RBVFVTX0NPREVTLCBGRVRDSF9TSElQTUVOVF9UWVBFUywgRkVUQ0hfU1RPQ0tfVFJBTlNGRVJfU1RBVFVTRVMsIEZFVENIX1NVUFBMSUVSUywgRkVUQ0hfVVNFUlMsIEZJTFRFUl9GT1JNX1BBUkFNU19CVUlMVCwgSElERV9JTkZPX0JBUiwgSElERV9JTkZPX0JBUl9NT0RBTCwgSElERV9TUElOTkVSLCBSRUJVSUxEX0ZJTFRFUl9GT1JNX1BBUkFNUywgUkVNT1ZFX0ZST01fSU5ESUNBVE9SUywgUkVNT1ZFX1NUT0NLX01PVkVNRU5UX0RSQUZULCBSRU9SREVSX0lORElDQVRPUlMsIFJFU0VUX0lORElDQVRPUlMsIFNFVF9BQ1RJVkVfQ09ORklHLCBTRVRfT0ZGTElORSwgU0VUX09OTElORSwgU0hPV19JTkZPX0JBUiwgU0hPV19JTkZPX0JBUl9NT0RBTCwgU0hPV19TUElOTkVSLCBUT0dHTEVfVVNFUl9BQ1RJT05fTUVOVSwgVFJBTlNMQVRJT05TX0ZFVENIRUQgfSBmcm9tICdhY3Rpb25zL3R5cGVzJzsKaW1wb3J0IGdlbmVyaWNBcGkgZnJvbSAnYXBpL3NlcnZpY2VzL0dlbmVyaWNBcGknOwppbXBvcnQgbG9jYXRpb25BcGkgZnJvbSAnYXBpL3NlcnZpY2VzL0xvY2F0aW9uQXBpJzsKaW1wb3J0IHB1cmNoYXNlT3JkZXJBcGkgZnJvbSAnYXBpL3NlcnZpY2VzL1B1cmNoYXNlT3JkZXJBcGknOwppbXBvcnQgYXBpQ2xpZW50LCB7IHBhcnNlUmVzcG9uc2UgfSBmcm9tICd1dGlscy9hcGlDbGllbnQnOwppbXBvcnQgeyBtYXBTaGlwbWVudFR5cGVzIH0gZnJvbSAndXRpbHMvb3B0aW9uLXV0aWxzJzsKZXhwb3J0IGZ1bmN0aW9uIHNob3dTcGlubmVyKCkgewogIHJldHVybiB7CiAgICB0eXBlOiBTSE9XX1NQSU5ORVIsCiAgICBwYXlsb2FkOiB0cnVlCiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gaGlkZVNwaW5uZXIoKSB7CiAgcmV0dXJuIHsKICAgIHR5cGU6IEhJREVfU1BJTk5FUiwKICAgIHBheWxvYWQ6IGZhbHNlCiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gc2V0T25saW5lKCkgewogIHJldHVybiB7CiAgICB0eXBlOiBTRVRfT05MSU5FCiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gc2V0T2ZmbGluZSgpIHsKICByZXR1cm4gewogICAgdHlwZTogU0VUX09GRkxJTkUKICB9Owp9CmV4cG9ydCBmdW5jdGlvbiBzaG93VXNlckFjdGlvbnMoKSB7CiAgcmV0dXJuIHsKICAgIHR5cGU6IFRPR0dMRV9VU0VSX0FDVElPTl9NRU5VLAogICAgcGF5bG9hZDogdHJ1ZQogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGhpZGVVc2VyQWN0aW9ucygpIHsKICByZXR1cm4gewogICAgdHlwZTogVE9HR0xFX1VTRVJfQUNUSU9OX01FTlUsCiAgICBwYXlsb2FkOiBmYWxzZQogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGZldGNoUmVhc29uQ29kZXMoKSB7CiAgdmFyIHVybCA9ICcvb3BlbmJveGVzL2FwaS9yZWFzb25Db2Rlcyc7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkgewogICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBkaXNwYXRjaCh7CiAgICAgICAgdHlwZTogRkVUQ0hfUkVBU09OQ09ERVMsCiAgICAgICAgcGF5bG9hZDogcmVzLmRhdGEKICAgICAgfSk7CiAgICB9KTsKICB9Owp9CmV4cG9ydCBmdW5jdGlvbiBmZXRjaEN1cnJlbmNpZXMoKSB7CiAgdmFyIHVybCA9ICcvb3BlbmJveGVzL2FwaS91bml0T2ZNZWFzdXJlL2N1cnJlbmNpZXMnOwogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgZGlzcGF0Y2goewogICAgICAgIHR5cGU6IEZFVENIX0NVUlJFTkNJRVMsCiAgICAgICAgcGF5bG9hZDogcmVzLmRhdGEKICAgICAgfSk7CiAgICB9KTsKICB9Owp9CmV4cG9ydCBmdW5jdGlvbiBmZXRjaFVzZXJzKCkgewogIHZhciB1cmwgPSAnL29wZW5ib3hlcy9hcGkvcGVyc29ucyc7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkgewogICAgYXBpQ2xpZW50LmdldCh1cmwsIHsKICAgICAgcGFyYW1zOiB7CiAgICAgICAgc3RhdHVzOiB0cnVlCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBkaXNwYXRjaCh7CiAgICAgICAgdHlwZTogRkVUQ0hfVVNFUlMsCiAgICAgICAgcGF5bG9hZDogcmVzLmRhdGEKICAgICAgfSk7CiAgICB9KTsKICB9Owp9CmV4cG9ydCBmdW5jdGlvbiBmZXRjaFNlc3Npb25JbmZvKCkgewogIHJldHVybiBfZmV0Y2hTZXNzaW9uSW5mby5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIF9mZXRjaFNlc3Npb25JbmZvKCkgewogIF9mZXRjaFNlc3Npb25JbmZvID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgIHZhciB1cmwsIHJlczsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHVybCA9ICcvb3BlbmJveGVzL2FwaS9nZXRBcHBDb250ZXh0JzsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gYXBpQ2xpZW50LmdldCh1cmwpOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIGZ1bmN0aW9uIChkaXNwYXRjaCkgewogICAgICAgICAgICAgIGRpc3BhdGNoKHsKICAgICAgICAgICAgICAgIHR5cGU6IEZFVENIX1NFU1NJT05fSU5GTywKICAgICAgICAgICAgICAgIHBheWxvYWQ6IHJlcwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQpOwogIH0pKTsKICByZXR1cm4gX2ZldGNoU2Vzc2lvbkluZm8uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpleHBvcnQgZnVuY3Rpb24gZmV0Y2hNZW51Q29uZmlnKCkgewogIHZhciB1cmwgPSAnL29wZW5ib3hlcy9hcGkvZ2V0TWVudUNvbmZpZyc7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkgewogICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBkaXNwYXRjaCh7CiAgICAgICAgdHlwZTogRkVUQ0hfTUVOVV9DT05GSUcsCiAgICAgICAgcGF5bG9hZDogcmVzCiAgICAgIH0pOwogICAgfSk7CiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gY2hhbmdlQ3VycmVudExvY2F0aW9uKGxvY2F0aW9uKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkgewogICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9jaG9vc2VMb2NhdGlvbi8iLmNvbmNhdChsb2NhdGlvbi5pZCk7CiAgICByZXR1cm4gYXBpQ2xpZW50LnB1dCh1cmwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBkaXNwYXRjaCh7CiAgICAgICAgdHlwZTogQ0hBTkdFX0NVUlJFTlRfTE9DQVRJT04sCiAgICAgICAgcGF5bG9hZDogbG9jYXRpb24KICAgICAgfSk7CiAgICB9KTsKICB9Owp9CmV4cG9ydCBmdW5jdGlvbiBmZXRjaFRyYW5zbGF0aW9ucyhsYW5nLCBwcmVmaXgpIHsKICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7CiAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL2xvY2FsaXphdGlvbnM/bGFuZz0iLmNvbmNhdChsYW5nIHx8ICcnLCAiJnByZWZpeD1yZWFjdC4iKS5jb25jYXQocHJlZml4IHx8ICcnKTsKICAgIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICB2YXIgX3BhcnNlUmVzcG9uc2UgPSBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlLmRhdGEpLAogICAgICAgIG1lc3NhZ2VzID0gX3BhcnNlUmVzcG9uc2UubWVzc2FnZXMsCiAgICAgICAgY3VycmVudExvY2FsZSA9IF9wYXJzZVJlc3BvbnNlLmN1cnJlbnRMb2NhbGU7CiAgICAgIGRpc3BhdGNoKGFkZFRyYW5zbGF0aW9uRm9yTGFuZ3VhZ2UobWVzc2FnZXMsIGN1cnJlbnRMb2NhbGUpKTsKICAgICAgZGlzcGF0Y2goewogICAgICAgIHR5cGU6IFRSQU5TTEFUSU9OU19GRVRDSEVELAogICAgICAgIHBheWxvYWQ6IHByZWZpeAogICAgICB9KTsKICAgIH0pOwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZUN1cnJlbnRMb2NhbGUobG9jYWxlKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkgewogICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9jaG9vc2VMb2NhbGUvIi5jb25jYXQobG9jYWxlKTsKICAgIGFwaUNsaWVudC5wdXQodXJsKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgZGlzcGF0Y2goewogICAgICAgIHR5cGU6IENIQU5HRV9DVVJSRU5UX0xPQ0FMRSwKICAgICAgICBwYXlsb2FkOiBsb2NhbGUKICAgICAgfSk7CiAgICB9KTsKICB9Owp9CgovLyBOZXcgRGFzaGJvYXJkCgpmdW5jdGlvbiBnZXRQYXJhbWV0ZXJMaXN0KCkgewogIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogIHZhciBsb2NhdGlvbklkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJzsKICB2YXIgdXNlcklkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnJzsKICB2YXIgbGlzdEZpbHRlcnNTZWxlY3RlZCA9IFtdOwogIHZhciBsaXN0VmFsdWVzID0gW107CiAgdmFyIGRhc2hib2FyZEtleSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2Rhc2hib2FyZEtleScpOwogIHZhciBwYWdlQ29uZmlnID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdwYWdlQ29uZmlnJykpIHx8IHt9OwogIGlmICghcGFnZUNvbmZpZ1tkYXNoYm9hcmRLZXldKSB7CiAgICBwYWdlQ29uZmlnW2Rhc2hib2FyZEtleV0gPSB7fTsKICB9CiAgdmFyIGxpc3RQYXJhbXMgPSBwYXJhbXMgPT09ICcnID8gImxvY2F0aW9uSWQ9Ii5jb25jYXQobG9jYXRpb25JZCkgOiAiIi5jb25jYXQocGFyYW1zLCAiJmxvY2F0aW9uSWQ9IikuY29uY2F0KGxvY2F0aW9uSWQpOwogIGxpc3RQYXJhbXMgKz0gdXNlcklkID8gIiZ1c2VySWQ9Ii5jb25jYXQodXNlcklkKSA6ICcnOwoKICAvLyBMaXN0IG9mIGZpbHRlciBhbmQgY2F0ZWdvcnkKICAvLyBmaWx0ZXJbMF0gaXMgdGhlIGNhdGVnb3J5CiAgLy8gZmlsdGVyWzFdIHJlcHJlc2VudCB0aGUgdmFsdWVzCiAgT2JqZWN0LmVudHJpZXMocGFnZUNvbmZpZ1tkYXNoYm9hcmRLZXldKS5mb3JFYWNoKGZ1bmN0aW9uIChmaWx0ZXIpIHsKICAgIGxpc3RGaWx0ZXJzU2VsZWN0ZWQucHVzaChmaWx0ZXJbMF0pOwogICAgZmlsdGVyWzFdLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHJldHVybiBsaXN0VmFsdWVzLnB1c2godmFsdWUpOwogICAgfSk7CiAgfSk7CiAgLy8gQWRkIGNvbmRpdGlvbiB0byBjaGVjayBpZiBjdXJyZW50UGFnZSBoYXMgYW55IGZpbHRlcgogIGxpc3RGaWx0ZXJzU2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICBsaXN0UGFyYW1zID0gIiIuY29uY2F0KGxpc3RQYXJhbXMsICImbGlzdEZpbHRlcnNTZWxlY3RlZD0iKS5jb25jYXQoZmlsdGVyKTsKICB9KTsKICBsaXN0VmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICBsaXN0UGFyYW1zID0gIiIuY29uY2F0KGxpc3RQYXJhbXMsICImdmFsdWU9IikuY29uY2F0KHZhbHVlLmlkKTsKICB9KTsKICByZXR1cm4gbGlzdFBhcmFtczsKfQpmdW5jdGlvbiBmZXRjaEdyYXBoSW5kaWNhdG9yKGRpc3BhdGNoLCBpbmRpY2F0b3JDb25maWcpIHsKICB2YXIgbG9jYXRpb25JZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7CiAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJyc7CiAgdmFyIGlkID0gaW5kaWNhdG9yQ29uZmlnLm9yZGVyOwogIHZhciBsaXN0UGFyYW1zID0gZ2V0UGFyYW1ldGVyTGlzdChwYXJhbXMsIGxvY2F0aW9uSWQpOwogIHZhciB1cmwgPSAiIi5jb25jYXQoaW5kaWNhdG9yQ29uZmlnLmVuZHBvaW50LCAiPyIpLmNvbmNhdChsaXN0UGFyYW1zKTsKICBkaXNwYXRjaCh7CiAgICB0eXBlOiBGRVRDSF9HUkFQSFMsCiAgICBwYXlsb2FkOiB7CiAgICAgIGlkOiBpZCwKICAgICAgd2lkZ2V0SWQ6IGluZGljYXRvckNvbmZpZy53aWRnZXRJZCwKICAgICAgdGl0bGU6ICdMb2FkaW5nLi4uJywKICAgICAgaW5mbzogJ0xvYWRpbmcuLi4nLAogICAgICB0eXBlOiAnbG9hZGluZycsCiAgICAgIGRhdGE6IFtdCiAgICB9CiAgfSk7CiAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgdmFyIGluZGljYXRvckRhdGEgPSByZXMuZGF0YTsKICAgIGRpc3BhdGNoKHsKICAgICAgdHlwZTogRkVUQ0hfR1JBUEhTLAogICAgICBwYXlsb2FkOiB7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIHdpZGdldElkOiBpbmRpY2F0b3JDb25maWcud2lkZ2V0SWQsCiAgICAgICAgdGl0bGU6IGluZGljYXRvckNvbmZpZy50aXRsZSwKICAgICAgICBpbmZvOiBpbmRpY2F0b3JDb25maWcuaW5mbywKICAgICAgICB0eXBlOiBpbmRpY2F0b3JDb25maWcuZ3JhcGhUeXBlLAogICAgICAgIGRhdGE6IGluZGljYXRvckRhdGEuZGF0YSwKICAgICAgICB0aW1lRmlsdGVyOiBpbmRpY2F0b3JDb25maWcudGltZUZpbHRlciwKICAgICAgICB5ZWFyVHlwZUZpbHRlcjogaW5kaWNhdG9yQ29uZmlnLnllYXJUeXBlRmlsdGVyLAogICAgICAgIGxvY2F0aW9uRmlsdGVyOiBpbmRpY2F0b3JDb25maWcubG9jYXRpb25GaWx0ZXIsCiAgICAgICAgdGltZUxpbWl0OiBpbmRpY2F0b3JDb25maWcudGltZUxpbWl0LAogICAgICAgIGxpbms6IGluZGljYXRvckRhdGEubGluaywKICAgICAgICBsZWdlbmQ6IGluZGljYXRvckNvbmZpZy5sZWdlbmQsCiAgICAgICAgZG91YmxlQXhlWTogaW5kaWNhdG9yQ29uZmlnLmRvdWJsZUF4ZVksCiAgICAgICAgY29uZmlnOiB7CiAgICAgICAgICBzdGFja2VkOiBpbmRpY2F0b3JDb25maWcuc3RhY2tlZCwKICAgICAgICAgIGRhdGFsYWJlbDogaW5kaWNhdG9yQ29uZmlnLmRhdGFsYWJlbCwKICAgICAgICAgIGNvbG9yczogaW5kaWNhdG9yQ29uZmlnLmNvbG9ycwogICAgICAgIH0sCiAgICAgICAgc2l6ZTogaW5kaWNhdG9yQ29uZmlnLnNpemUKICAgICAgfQogICAgfSk7CiAgfSwgZnVuY3Rpb24gKCkgewogICAgZGlzcGF0Y2goewogICAgICB0eXBlOiBGRVRDSF9HUkFQSFMsCiAgICAgIHBheWxvYWQ6IHsKICAgICAgICBpZDogaWQsCiAgICAgICAgd2lkZ2V0SWQ6IGluZGljYXRvckNvbmZpZy53aWRnZXRJZCwKICAgICAgICB0aXRsZTogJ0luZGljYXRvciBjb3VsZCBub3QgYmUgbG9hZGVkJywKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIGRhdGE6IFtdCiAgICAgIH0KICAgIH0pOwogIH0pOwp9CmZ1bmN0aW9uIGZldGNoTnVtYmVySW5kaWNhdG9yKGRpc3BhdGNoLCBpbmRpY2F0b3JDb25maWcsIGxvY2F0aW9uSWQsIHVzZXJJZCkgewogIHZhciBpZCA9IGluZGljYXRvckNvbmZpZy5vcmRlcjsKICB2YXIgbGlzdFBhcmFtcyA9IGdldFBhcmFtZXRlckxpc3QoJycsIGxvY2F0aW9uSWQsIHVzZXJJZCk7CiAgdmFyIHVybCA9ICIiLmNvbmNhdChpbmRpY2F0b3JDb25maWcuZW5kcG9pbnQsICI/IikuY29uY2F0KGxpc3RQYXJhbXMpOwogIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIHZhciBpbmRpY2F0b3JEYXRhID0gcmVzLmRhdGE7CiAgICBkaXNwYXRjaCh7CiAgICAgIHR5cGU6IEZFVENIX05VTUJFUlMsCiAgICAgIHBheWxvYWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5kaWNhdG9yRGF0YSksIHt9LCB7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIHdpZGdldElkOiBpbmRpY2F0b3JDb25maWcud2lkZ2V0SWQsCiAgICAgICAgdGl0bGU6IGluZGljYXRvckNvbmZpZy50aXRsZSwKICAgICAgICBpbmZvOiBpbmRpY2F0b3JDb25maWcuaW5mbywKICAgICAgICBzdWJ0aXRsZTogaW5kaWNhdG9yQ29uZmlnLnN1YnRpdGxlLAogICAgICAgIG51bWJlclR5cGU6IGluZGljYXRvckNvbmZpZy5udW1iZXJUeXBlCiAgICAgIH0pCiAgICB9KTsKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gcmVsb2FkSW5kaWNhdG9yKGluZGljYXRvckNvbmZpZywgcGFyYW1zLCBsb2NhdGlvbklkKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkgewogICAgLy8gbmV3IHJlZmVyZW5jZSBzbyB0aGF0IHRoZSBvcmlnaW5hbCBjb25maWcgaXMgbm90IG1vZGlmaWVkCiAgICB2YXIgaW5kaWNhdG9yQ29uZmlnRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaW5kaWNhdG9yQ29uZmlnKSk7CiAgICBmZXRjaEdyYXBoSW5kaWNhdG9yKGRpc3BhdGNoLCBpbmRpY2F0b3JDb25maWdEYXRhLCBsb2NhdGlvbklkLCBwYXJhbXMpOwogIH07Cn0KZnVuY3Rpb24gZ2V0RGF0YShkaXNwYXRjaCwgZGFzaGJvYXJkQ29uZmlnLCBsb2NhdGlvbklkKSB7CiAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJ3BlcnNvbmFsJzsKICB2YXIgdXNlcklkID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiAnJzsKICAvLyBuZXcgcmVmZXJlbmNlIHNvIHRoYXQgdGhlIG9yaWdpbmFsIGNvbmZpZyBpcyBub3QgbW9kaWZpZWQKCiAgdmFyIGRhc2hib2FyZCA9IGRhc2hib2FyZENvbmZpZy5kYXNoYm9hcmRbY29uZmlnXSB8fCB7fTsKICB2YXIgd2lkZ2V0cyA9IF8ubWFwKGRhc2hib2FyZC53aWRnZXRzLCBmdW5jdGlvbiAod2lkZ2V0KSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkYXNoYm9hcmRDb25maWcuZGFzaGJvYXJkV2lkZ2V0c1t3aWRnZXQud2lkZ2V0SWRdKSwge30sIHsKICAgICAgb3JkZXI6IHdpZGdldC5vcmRlciwKICAgICAgd2lkZ2V0SWQ6IHdpZGdldC53aWRnZXRJZAogICAgfSk7CiAgfSk7CiAgdmFyIHZpc2libGVXaWRnZXRzID0gXy5jaGFpbih3aWRnZXRzKS5maWx0ZXIoZnVuY3Rpb24gKHdpZGdldCkgewogICAgcmV0dXJuIHdpZGdldC5lbmFibGVkOwogIH0pLnNvcnRCeShbJ29yZGVyJ10pLnZhbHVlKCk7CiAgXy5mb3JFYWNoKHZpc2libGVXaWRnZXRzLCBmdW5jdGlvbiAod2lkZ2V0Q29uZmlnKSB7CiAgICBpZiAod2lkZ2V0Q29uZmlnLnR5cGUgPT09ICdncmFwaCcpIHsKICAgICAgZmV0Y2hHcmFwaEluZGljYXRvcihkaXNwYXRjaCwgd2lkZ2V0Q29uZmlnLCBsb2NhdGlvbklkLCAnJyk7CiAgICB9IGVsc2UgaWYgKHdpZGdldENvbmZpZy50eXBlID09PSAnbnVtYmVyJykgewogICAgICBmZXRjaE51bWJlckluZGljYXRvcihkaXNwYXRjaCwgd2lkZ2V0Q29uZmlnLCBsb2NhdGlvbklkLCB1c2VySWQpOwogICAgfQogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBmZXRjaEluZGljYXRvcnMoY29uZmlnRGF0YSwgY29uZmlnLCBsb2NhdGlvbklkLCB1c2VySWQpIHsKICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7CiAgICBkaXNwYXRjaCh7CiAgICAgIHR5cGU6IFNFVF9BQ1RJVkVfQ09ORklHLAogICAgICBwYXlsb2FkOiB7CiAgICAgICAgZGF0YTogY29uZmlnCiAgICAgIH0KICAgIH0pOwogICAgZ2V0RGF0YShkaXNwYXRjaCwgY29uZmlnRGF0YSwgbG9jYXRpb25JZCwgY29uZmlnLCB1c2VySWQpOwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIHJlc2V0SW5kaWNhdG9ycygpIHsKICByZXR1cm4gewogICAgdHlwZTogUkVTRVRfSU5ESUNBVE9SUwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGFkZFRvSW5kaWNhdG9ycyh3aWRnZXRDb25maWcsIGxvY2F0aW9uSWQpIHsKICB2YXIgdXNlcklkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnJzsKICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7CiAgICBpZiAod2lkZ2V0Q29uZmlnLnR5cGUgPT09ICdncmFwaCcpIHsKICAgICAgZmV0Y2hHcmFwaEluZGljYXRvcihkaXNwYXRjaCwgd2lkZ2V0Q29uZmlnLCBsb2NhdGlvbklkLCAnJyk7CiAgICB9IGVsc2UgaWYgKHdpZGdldENvbmZpZy50eXBlID09PSAnbnVtYmVyJykgewogICAgICBmZXRjaE51bWJlckluZGljYXRvcihkaXNwYXRjaCwgd2lkZ2V0Q29uZmlnLCBsb2NhdGlvbklkLCB1c2VySWQpOwogICAgfQogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIHJlb3JkZXJJbmRpY2F0b3JzKF9yZWYsIGUsIHR5cGUpIHsKICB2YXIgb2xkSW5kZXggPSBfcmVmLm9sZEluZGV4LAogICAgbmV3SW5kZXggPSBfcmVmLm5ld0luZGV4OwogIGlmIChlLnRhcmdldC5pZCA9PT0gJ2FyY2hpdmUnKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiBSRU1PVkVfRlJPTV9JTkRJQ0FUT1JTLAogICAgICBwYXlsb2FkOiB7CiAgICAgICAgaW5kZXg6IG9sZEluZGV4LAogICAgICAgIHR5cGU6IHR5cGUKICAgICAgfQogICAgfTsKICB9CiAgcmV0dXJuIHsKICAgIHR5cGU6IFJFT1JERVJfSU5ESUNBVE9SUywKICAgIHBheWxvYWQ6IHsKICAgICAgb2xkSW5kZXg6IG9sZEluZGV4LAogICAgICBuZXdJbmRleDogbmV3SW5kZXgsCiAgICAgIHR5cGU6IHR5cGUKICAgIH0KICB9Owp9CmV4cG9ydCBmdW5jdGlvbiBmZXRjaENvbmZpZ0FuZERhdGEobG9jYXRpb25JZCkgewogIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdwZXJzb25hbCc7CiAgdmFyIHVzZXJJZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwogIHZhciBpZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkOwogIHZhciBmaWx0ZXJTZWxlY3RlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ID8gYXJndW1lbnRzWzRdIDogdW5kZWZpbmVkOwogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoIi9vcGVuYm94ZXMvYXBpL2Rhc2hib2FyZC8iLmNvbmNhdChpZCwgIi9jb25maWciKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGRpc3BhdGNoKHsKICAgICAgICB0eXBlOiBGRVRDSF9DT05GSUdfQU5EX1NFVF9BQ1RJVkUsCiAgICAgICAgcGF5bG9hZDogewogICAgICAgICAgZGF0YTogcmVzLmRhdGEsCiAgICAgICAgICBhY3RpdmVDb25maWc6IGNvbmZpZwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGdldERhdGEoZGlzcGF0Y2gsIHJlcy5kYXRhLCBsb2NhdGlvbklkLCBjb25maWcsIHVzZXJJZCwgZmlsdGVyU2VsZWN0ZWQpOwogICAgfSk7CiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gZmV0Y2hDb25maWcoaWQpIHsKICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7CiAgICBhcGlDbGllbnQuZ2V0KCIvb3BlbmJveGVzL2FwaS9kYXNoYm9hcmQvIi5jb25jYXQoaWQsICIvY29uZmlnIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBkaXNwYXRjaCh7CiAgICAgICAgdHlwZTogRkVUQ0hfQ09ORklHLAogICAgICAgIHBheWxvYWQ6IHsKICAgICAgICAgIGRhdGE6IHJlcy5kYXRhCiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGZldGNoUHVyY2hhc2VPcmRlclN0YXR1c2VzKCkgewogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoJy9vcGVuYm94ZXMvYXBpL29yZGVyU3VtbWFyeVN0YXR1cycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBkaXNwYXRjaCh7CiAgICAgICAgdHlwZTogRkVUQ0hfUFVSQ0hBU0VfT1JERVJfU1RBVFVTRVMsCiAgICAgICAgcGF5bG9hZDogcmVzLmRhdGEuZGF0YQogICAgICB9KTsKICAgIH0pOwogIH07Cn0KZXhwb3J0IHZhciBmZXRjaFBheW1lbnRUZXJtcyA9IGZ1bmN0aW9uIGZldGNoUGF5bWVudFRlcm1zKCkgewogIHJldHVybiAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKGRpc3BhdGNoKSB7CiAgICAgIHZhciBfcmVzcG9uc2UkZGF0YTsKICAgICAgdmFyIHJlc3BvbnNlOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHB1cmNoYXNlT3JkZXJBcGkuZ2V0UGF5bWVudFRlcm1zKCk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZGlzcGF0Y2goewogICAgICAgICAgICAgICAgdHlwZTogRkVUQ0hfUEFZTUVOVF9URVJNUywKICAgICAgICAgICAgICAgIHBheWxvYWQ6IHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Jlc3BvbnNlJGRhdGEgPSByZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcG9uc2UkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3BvbnNlJGRhdGEuZGF0YQogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKfTsKZXhwb3J0IGZ1bmN0aW9uIGZldGNoU3VwcGxpZXJzKCkgewogIHZhciBhY3RpdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoIi9vcGVuYm94ZXMvYXBpL29yZ2FuaXphdGlvbnM/cm9sZVR5cGU9Uk9MRV9TVVBQTElFUiZhY3RpdmU9Ii5jb25jYXQoYWN0aXZlKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChyZXMuZGF0YS5kYXRhKSB7CiAgICAgICAgdmFyIHN1cHBsaWVycyA9IHJlcy5kYXRhLmRhdGEubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBvYmouaWQsCiAgICAgICAgICAgIHZhbHVlOiBvYmouaWQsCiAgICAgICAgICAgIG5hbWU6IG9iai5uYW1lLAogICAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KG9iai5uYW1lKQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICBkaXNwYXRjaCh7CiAgICAgICAgICB0eXBlOiBGRVRDSF9TVVBQTElFUlMsCiAgICAgICAgICBwYXlsb2FkOiBzdXBwbGllcnMKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZGlzcGF0Y2goewogICAgICAgIHR5cGU6IEZFVENIX1NVUFBMSUVSUywKICAgICAgICBwYXlsb2FkOiBbXQogICAgICB9KTsKICAgIH0pOwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGZldGNoQnV5ZXJzKCkgewogIHZhciBhY3RpdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoIi9vcGVuYm94ZXMvYXBpL29yZ2FuaXphdGlvbnM/cm9sZVR5cGU9Uk9MRV9CVVlFUiZhY3RpdmU9Ii5jb25jYXQoYWN0aXZlKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChyZXMuZGF0YS5kYXRhKSB7CiAgICAgICAgdmFyIGJ1eWVycyA9IHJlcy5kYXRhLmRhdGEubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBvYmouaWQsCiAgICAgICAgICAgIHZhbHVlOiBvYmouaWQsCiAgICAgICAgICAgIG5hbWU6IG9iai5uYW1lLAogICAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KG9iai5uYW1lKQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICBkaXNwYXRjaCh7CiAgICAgICAgICB0eXBlOiBGRVRDSF9CVVlFUlMsCiAgICAgICAgICBwYXlsb2FkOiBidXllcnMKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZGlzcGF0Y2goewogICAgICAgIHR5cGU6IEZFVENIX0JVWUVSUywKICAgICAgICBwYXlsb2FkOiBbXQogICAgICB9KTsKICAgIH0pOwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGZldGNoSW52b2ljZVN0YXR1c2VzKCkgewogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoJy9vcGVuYm94ZXMvYXBpL2ludm9pY2VTdGF0dXNlcycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBkaXNwYXRjaCh7CiAgICAgICAgdHlwZTogRkVUQ0hfSU5WT0lDRV9TVEFUVVNFUywKICAgICAgICBwYXlsb2FkOiByZXMuZGF0YS5kYXRhCiAgICAgIH0pOwogICAgfSk7CiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gZmV0Y2hJbnZvaWNlVHlwZUNvZGVzKCkgewogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoJy9vcGVuYm94ZXMvYXBpL2ludm9pY2VUeXBlQ29kZXMnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgZGlzcGF0Y2goewogICAgICAgIHR5cGU6IEZFVENIX0lOVk9JQ0VfVFlQRV9DT0RFUywKICAgICAgICBwYXlsb2FkOiByZXMuZGF0YS5kYXRhCiAgICAgIH0pOwogICAgfSk7CiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gZmV0Y2hTaGlwbWVudFN0YXR1c0NvZGVzKCkgewogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoJy9vcGVuYm94ZXMvYXBpL3N0b2NrTW92ZW1lbnRzL3NoaXBtZW50U3RhdHVzQ29kZXMnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgZGlzcGF0Y2goewogICAgICAgIHR5cGU6IEZFVENIX1NISVBNRU5UX1NUQVRVU19DT0RFUywKICAgICAgICBwYXlsb2FkOiByZXMuZGF0YS5kYXRhCiAgICAgIH0pOwogICAgfSk7CiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gZmV0Y2hSZXF1aXNpdGlvblN0YXR1c0NvZGVzKCkgewogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoJy9vcGVuYm94ZXMvYXBpL3N0b2NrTW92ZW1lbnRzL3JlcXVpc2l0aW9uc1N0YXR1c0NvZGVzJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGRpc3BhdGNoKHsKICAgICAgICB0eXBlOiBGRVRDSF9SRVFVSVNJVElPTl9TVEFUVVNfQ09ERVMsCiAgICAgICAgcGF5bG9hZDogcmVzLmRhdGEuZGF0YQogICAgICB9KTsKICAgIH0pOwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGZldGNoU3RvY2tUcmFuc2ZlclN0YXR1c2VzKCkgewogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIGFwaUNsaWVudC5nZXQoJy9vcGVuYm94ZXMvYXBpL3N0b2NrVHJhbnNmZXJzL3N0YXR1c09wdGlvbnMnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgZGlzcGF0Y2goewogICAgICAgIHR5cGU6IEZFVENIX1NUT0NLX1RSQU5TRkVSX1NUQVRVU0VTLAogICAgICAgIHBheWxvYWQ6IHJlcy5kYXRhLmRhdGEKICAgICAgfSk7CiAgICB9KTsKICB9Owp9CmV4cG9ydCB2YXIgc2V0U2hvdWxkUmVidWlsZEZpbHRlclBhcmFtcyA9IGZ1bmN0aW9uIHNldFNob3VsZFJlYnVpbGRGaWx0ZXJQYXJhbXMoKSB7CiAgdmFyIGZsYWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkgewogICAgLy8gaWYgZmxhZyBpcyB0cnVlLCB3ZSB3YW50IHRvIHRyaWdnZXIgdGhlIHJlYnVpbGQgb2YgZmlsdGVyIGZvcm0gcGFyYW1zCiAgICBpZiAoZmxhZykgewogICAgICByZXR1cm4gZGlzcGF0Y2goewogICAgICAgIHR5cGU6IFJFQlVJTERfRklMVEVSX0ZPUk1fUEFSQU1TCiAgICAgIH0pOwogICAgfQogICAgLy8gb3RoZXJ3aXNlIHdlIHdhbnQgdG8gdW5tYXJrIGl0IHRvIHRoZSAic3RhbmRieSIgKGZhbHNlKSBwb3NpdGlvbgogICAgcmV0dXJuIGRpc3BhdGNoKHsKICAgICAgdHlwZTogRklMVEVSX0ZPUk1fUEFSQU1TX0JVSUxUCiAgICB9KTsKICB9Owp9OwpleHBvcnQgdmFyIGFkZFN0b2NrTW92ZW1lbnREcmFmdCA9IGZ1bmN0aW9uIGFkZFN0b2NrTW92ZW1lbnREcmFmdChfcmVmMykgewogIHZhciB3b3JrZmxvdyA9IF9yZWYzLndvcmtmbG93LAogICAgbGluZUl0ZW1zID0gX3JlZjMubGluZUl0ZW1zLAogICAgaWQgPSBfcmVmMy5pZCwKICAgIHN0YXR1c0NvZGUgPSBfcmVmMy5zdGF0dXNDb2RlOwogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIHJldHVybiBkaXNwYXRjaCh7CiAgICAgIHR5cGU6IEFERF9TVE9DS19NT1ZFTUVOVF9EUkFGVCwKICAgICAgcGF5bG9hZDogewogICAgICAgIHdvcmtmbG93OiB3b3JrZmxvdywKICAgICAgICBsaW5lSXRlbXM6IGxpbmVJdGVtcywKICAgICAgICBzdGF0dXNDb2RlOiBzdGF0dXNDb2RlLAogICAgICAgIGlkOiBpZAogICAgICB9CiAgICB9KTsKICB9Owp9OwpleHBvcnQgdmFyIHJlbW92ZVN0b2NrTW92ZW1lbnREcmFmdCA9IGZ1bmN0aW9uIHJlbW92ZVN0b2NrTW92ZW1lbnREcmFmdChpZCkgewogIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIHJldHVybiBkaXNwYXRjaCh7CiAgICAgIHR5cGU6IFJFTU9WRV9TVE9DS19NT1ZFTUVOVF9EUkFGVCwKICAgICAgcGF5bG9hZDogewogICAgICAgIGlkOiBpZAogICAgICB9CiAgICB9KTsKICB9Owp9OwpleHBvcnQgdmFyIGZldGNoU2hpcG1lbnRUeXBlcyA9IGZ1bmN0aW9uIGZldGNoU2hpcG1lbnRUeXBlcygpIHsKICByZXR1cm4gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoZGlzcGF0Y2gpIHsKICAgICAgdmFyIF9yZXNwb25zZSRkYXRhMjsKICAgICAgdmFyIHJlc3BvbnNlLCBzaGlwbWVudFR5cGVzOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJpY0FwaS5nZXRTaGlwbWVudFR5cGVzKCk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHNoaXBtZW50VHlwZXMgPSBtYXBTaGlwbWVudFR5cGVzKHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Jlc3BvbnNlJGRhdGEyID0gcmVzcG9uc2UuZGF0YSkgPT09IG51bGwgfHwgX3Jlc3BvbnNlJGRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzcG9uc2UkZGF0YTIuZGF0YSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGRpc3BhdGNoKHsKICAgICAgICAgICAgICAgIHR5cGU6IEZFVENIX1NISVBNRU5UX1RZUEVTLAogICAgICAgICAgICAgICAgcGF5bG9hZDogc2hpcG1lbnRUeXBlcwogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpOwogICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKfTsKZXhwb3J0IHZhciBmZXRjaExvY2F0aW9uVHlwZXMgPSBmdW5jdGlvbiBmZXRjaExvY2F0aW9uVHlwZXMoY29uZmlnKSB7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGRpc3BhdGNoKSB7CiAgICAgIHZhciBfcmVzcG9uc2UkZGF0YTM7CiAgICAgIHZhciByZXNwb25zZSwgZGF0YTsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uQXBpLmdldExvY2F0aW9uVHlwZXMoY29uZmlnKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Jlc3BvbnNlJGRhdGEzID0gcmVzcG9uc2UuZGF0YSkgPT09IG51bGwgfHwgX3Jlc3BvbnNlJGRhdGEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzcG9uc2UkZGF0YTMuZGF0YTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgZGlzcGF0Y2goewogICAgICAgICAgICAgICAgdHlwZTogRkVUQ0hfTE9DQVRJT05fVFlQRVMsCiAgICAgICAgICAgICAgICBwYXlsb2FkOiBkYXRhCiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICByZXR1cm4gX3JlZjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwp9OwpleHBvcnQgdmFyIGNyZWF0ZUluZm9CYXIgPSBmdW5jdGlvbiBjcmVhdGVJbmZvQmFyKF9yZWY2KSB7CiAgdmFyIG5hbWUgPSBfcmVmNi5uYW1lLAogICAgdmVyc2lvbkxhYmVsID0gX3JlZjYudmVyc2lvbkxhYmVsLAogICAgdGl0bGUgPSBfcmVmNi50aXRsZTsKICByZXR1cm4gewogICAgdHlwZTogQUREX0lORk9fQkFSLAogICAgcGF5bG9hZDogewogICAgICBuYW1lOiBuYW1lLAogICAgICB2ZXJzaW9uTGFiZWw6IHZlcnNpb25MYWJlbCwKICAgICAgdGl0bGU6IHRpdGxlLAogICAgICBzaG93OiB0cnVlCiAgICB9CiAgfTsKfTsKZXhwb3J0IHZhciBoaWRlSW5mb0JhciA9IGZ1bmN0aW9uIGhpZGVJbmZvQmFyKG5hbWUpIHsKICByZXR1cm4gewogICAgdHlwZTogSElERV9JTkZPX0JBUiwKICAgIHBheWxvYWQ6IHsKICAgICAgbmFtZTogbmFtZQogICAgfQogIH07Cn07CmV4cG9ydCB2YXIgY2xvc2VJbmZvQmFyID0gZnVuY3Rpb24gY2xvc2VJbmZvQmFyKG5hbWUpIHsKICByZXR1cm4gewogICAgdHlwZTogQ0xPU0VfSU5GT19CQVIsCiAgICBwYXlsb2FkOiB7CiAgICAgIG5hbWU6IG5hbWUKICAgIH0KICB9Owp9OwpleHBvcnQgdmFyIHNob3dJbmZvQmFyID0gZnVuY3Rpb24gc2hvd0luZm9CYXIobmFtZSkgewogIHJldHVybiB7CiAgICB0eXBlOiBTSE9XX0lORk9fQkFSLAogICAgcGF5bG9hZDogewogICAgICBuYW1lOiBuYW1lCiAgICB9CiAgfTsKfTsKZXhwb3J0IHZhciBzaG93SW5mb0Jhck1vZGFsID0gZnVuY3Rpb24gc2hvd0luZm9CYXJNb2RhbChuYW1lKSB7CiAgcmV0dXJuIHsKICAgIHR5cGU6IFNIT1dfSU5GT19CQVJfTU9EQUwsCiAgICBwYXlsb2FkOiB7CiAgICAgIG5hbWU6IG5hbWUKICAgIH0KICB9Owp9OwpleHBvcnQgdmFyIGhpZGVJbmZvQmFyTW9kYWwgPSBmdW5jdGlvbiBoaWRlSW5mb0Jhck1vZGFsKG5hbWUpIHsKICByZXR1cm4gewogICAgdHlwZTogSElERV9JTkZPX0JBUl9NT0RBTCwKICAgIHBheWxvYWQ6IHsKICAgICAgbmFtZTogbmFtZQogICAgfQogIH07Cn07"},null]}