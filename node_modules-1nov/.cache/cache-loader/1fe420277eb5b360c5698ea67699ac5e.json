{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/stock-transfer/CreateStockTransfer.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/stock-transfer/CreateStockTransfer.jsx","mtime":1698037750000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSAhPSBudWxsIHx8IGl0ZXJbIkBAaXRlcmF0b3IiXSAhPSBudWxsKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9CmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgInByb3RvdHlwZSIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQpmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHsgdmFyIGtleSA9IF90b1ByaW1pdGl2ZShhcmcsICJzdHJpbmciKTsgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gInN5bWJvbCIgPyBrZXkgOiBTdHJpbmcoa2V5KTsgfQpmdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHsgaWYgKF90eXBlb2YoaW5wdXQpICE9PSAib2JqZWN0IiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0OyB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCAiZGVmYXVsdCIpOyBpZiAoX3R5cGVvZihyZXMpICE9PSAib2JqZWN0IikgcmV0dXJuIHJlczsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKTsgfSByZXR1cm4gKGhpbnQgPT09ICJzdHJpbmciID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7IH0KaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgUmVhY3RUYWJsZSBmcm9tICdyZWFjdC10YWJsZSc7CmltcG9ydCBzZWxlY3RUYWJsZUhPQyBmcm9tICdyZWFjdC10YWJsZS9saWIvaG9jL3NlbGVjdFRhYmxlJzsKaW1wb3J0IHsgaGlkZVNwaW5uZXIsIHNob3dTcGlubmVyIH0gZnJvbSAnYWN0aW9ucyc7CmltcG9ydCBhcGlDbGllbnQsIHsgZmxhdHRlblJlcXVlc3QsIHBhcnNlUmVzcG9uc2UgfSBmcm9tICd1dGlscy9hcGlDbGllbnQnOwppbXBvcnQgY3VzdG9tVHJlZVRhYmxlSE9DIGZyb20gJ3V0aWxzL0N1c3RvbVRyZWVUYWJsZSc7CmltcG9ydCBGaWx0ZXIgZnJvbSAndXRpbHMvRmlsdGVyJzsKaW1wb3J0IFRyYW5zbGF0ZSBmcm9tICd1dGlscy9UcmFuc2xhdGUnOwppbXBvcnQgJ3JlYWN0LXRhYmxlL3JlYWN0LXRhYmxlLmNzcyc7CnZhciBTZWxlY3RUcmVlVGFibGUgPSBzZWxlY3RUYWJsZUhPQyhjdXN0b21UcmVlVGFibGVIT0MoUmVhY3RUYWJsZSkpOwoKLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi8KCmZ1bmN0aW9uIGdldE5vZGVzKGRhdGEpIHsKICB2YXIgbm9kZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZW0sICdfc3ViUm93cycpICYmIGl0ZW0uX3N1YlJvd3MpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduCiAgICAgIG5vZGUgPSBnZXROb2RlcyhpdGVtLl9zdWJSb3dzLCBub2RlKTsKICAgIH0gZWxzZSB7CiAgICAgIG5vZGUucHVzaChpdGVtLl9vcmlnaW5hbCk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIG5vZGU7Cn0KCi8qKgogKiBUaGUgZmlyc3QgcGFnZSBvZiBzdG9jayB0cmFuc2ZlciB3aGVyZSB1c2VyIGNob29zZXMgcHJvZHVjdCB0byB0cmFuc2ZlcgogKi8KdmFyIENyZWF0ZVN0b2NrVHJhbnNmZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoQ3JlYXRlU3RvY2tUcmFuc2ZlciwgX0NvbXBvbmVudCk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihDcmVhdGVTdG9ja1RyYW5zZmVyKTsKICBmdW5jdGlvbiBDcmVhdGVTdG9ja1RyYW5zZmVyKF9wcm9wcykgewogICAgdmFyIF90aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENyZWF0ZVN0b2NrVHJhbnNmZXIpOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBfcHJvcHMpOwogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0Q29sdW1ucyIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgSGVhZGVyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgIGlkOiAicmVhY3Quc3RvY2tUcmFuc2Zlci5jb2RlLmxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ29kZSIKICAgICAgICB9KSwKICAgICAgICBhY2Nlc3NvcjogJ3Byb2R1Y3QucHJvZHVjdENvZGUnLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB3aGl0ZVNwYWNlOiAnbm9ybWFsJwogICAgICAgIH0sCiAgICAgICAgRmlsdGVyOiBGaWx0ZXIKICAgICAgfSwgewogICAgICAgIEhlYWRlcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICBpZDogInJlYWN0LnN0b2NrVHJhbnNmZXIucHJvZHVjdC5sYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlByb2R1Y3QiCiAgICAgICAgfSksCiAgICAgICAgYWNjZXNzb3I6ICdwcm9kdWN0Lm5hbWUnLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB3aGl0ZVNwYWNlOiAnbm9ybWFsJwogICAgICAgIH0sCiAgICAgICAgRmlsdGVyOiBGaWx0ZXIKICAgICAgfSwgewogICAgICAgIEhlYWRlcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICBpZDogInJlYWN0LnN0b2NrVHJhbnNmZXIubG90LmxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTG90IgogICAgICAgIH0pLAogICAgICAgIGFjY2Vzc29yOiAnbG90TnVtYmVyJywKICAgICAgICBzdHlsZTogewogICAgICAgICAgd2hpdGVTcGFjZTogJ25vcm1hbCcKICAgICAgICB9LAogICAgICAgIEZpbHRlcjogRmlsdGVyCiAgICAgIH0sIHsKICAgICAgICBIZWFkZXI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja1RyYW5zZmVyLmV4cGlyeS5sYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkV4cGlyeSIKICAgICAgICB9KSwKICAgICAgICBhY2Nlc3NvcjogJ2V4cGlyYXRpb25EYXRlJywKICAgICAgICBzdHlsZTogewogICAgICAgICAgd2hpdGVTcGFjZTogJ25vcm1hbCcKICAgICAgICB9LAogICAgICAgIEZpbHRlcjogRmlsdGVyCiAgICAgIH0sIHsKICAgICAgICBIZWFkZXI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja1RyYW5zZmVyLnpvbmUubGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJab25lIgogICAgICAgIH0pLAogICAgICAgIGFjY2Vzc29yOiAnb3JpZ2luWm9uZScsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHdoaXRlU3BhY2U6ICdub3JtYWwnCiAgICAgICAgfSwKICAgICAgICBGaWx0ZXI6IEZpbHRlcgogICAgICB9LCB7CiAgICAgICAgSGVhZGVyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgIGlkOiAicmVhY3Quc3RvY2tUcmFuc2Zlci5iaW5Mb2NhdGlvbi5sYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkJpbiBMb2NhdGlvbiIKICAgICAgICB9KSwKICAgICAgICBhY2Nlc3NvcjogJ29yaWdpbkJpbkxvY2F0aW9uLm5hbWUnLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB3aGl0ZVNwYWNlOiAnbm9ybWFsJwogICAgICAgIH0sCiAgICAgICAgRmlsdGVyOiBGaWx0ZXIKICAgICAgfSwgewogICAgICAgIEhlYWRlcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICBpZDogInJlYWN0LnN0b2NrVHJhbnNmZXIucXVhbnRpdHlPbkhhbmQubGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJRT0giCiAgICAgICAgfSksCiAgICAgICAgYWNjZXNzb3I6ICdxdWFudGl0eU9uSGFuZCcsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHdoaXRlU3BhY2U6ICdub3JtYWwnCiAgICAgICAgfSwKICAgICAgICBDZWxsOiBmdW5jdGlvbiBDZWxsKHByb3BzKSB7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBwcm9wcy52YWx1ZSA/IHByb3BzLnZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycpIDogcHJvcHMudmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgRmlsdGVyOiBGaWx0ZXIKICAgICAgfSwgewogICAgICAgIEhlYWRlcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICBpZDogInJlYWN0LnN0b2NrVHJhbnNmZXIucXVhbnRpdHlBdmFpbGFibGVUb1RyYW5zZmVyLmxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUXVhbnRpdHkgQXZhaWxhYmxlIHRvIFRyYW5zZmVyIgogICAgICAgIH0pLAogICAgICAgIGFjY2Vzc29yOiAncXVhbnRpdHlOb3RQaWNrZWQnLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB3aGl0ZVNwYWNlOiAnbm9ybWFsJwogICAgICAgIH0sCiAgICAgICAgQ2VsbDogZnVuY3Rpb24gQ2VsbChwcm9wcykgewogICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgcHJvcHMudmFsdWUgPyBwcm9wcy52YWx1ZS50b0xvY2FsZVN0cmluZygnZW4tVVMnKSA6IHByb3BzLnZhbHVlKTsKICAgICAgICB9LAogICAgICAgIEZpbHRlcjogRmlsdGVyCiAgICAgIH1dOwogICAgfSk7CiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkYXRhRmV0Y2hlZCIsIGZhbHNlKTsKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImZpbHRlck1ldGhvZCIsIGZ1bmN0aW9uIChmaWx0ZXIsIHJvdykgewogICAgICB2YXIgdmFsID0gcm93W2ZpbHRlci5pZF07CiAgICAgIHJldHVybiBfLnRvU3RyaW5nKHZhbCkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXIudmFsdWUudG9Mb3dlckNhc2UoKSk7CiAgICB9KTsKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInRvZ2dsZUFsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgLyoKICAgICAgICBTZWxlY3QgQUxMIHRoZSByZWNvcmRzIHRoYXQgYXJlIGluIHRoZSBjdXJyZW50IGZpbHRlcmVkIGRhdGEKICAgICAgKi8KICAgICAgdmFyIHNlbGVjdEFsbCA9ICFfdGhpcy5zdGF0ZS5zZWxlY3RBbGw7CiAgICAgIHZhciBzZWxlY3Rpb24gPSBbXTsKICAgICAgLy8gd2UgbmVlZCB0byBnZXQgYXQgdGhlIGludGVybmFscyBvZiBSZWFjdFRhYmxlCiAgICAgIHZhciB3cmFwcGVkSW5zdGFuY2UgPSBfdGhpcy5zZWxlY3RUYWJsZS5nZXRXcmFwcGVkSW5zdGFuY2UoKTsKICAgICAgLy8gdGhlICdzb3J0ZWREYXRhJyBwcm9wZXJ0eSBjb250YWlucyB0aGUgY3VycmVudGx5IGFjY2Vzc2libGUKICAgICAgLy8gcmVjb3JkcyBiYXNlZCBvbiB0aGUgZmlsdGVyIGFuZCBzb3J0CiAgICAgIHZhciBjdXJyZW50UmVjb3JkcyA9IHdyYXBwZWRJbnN0YW5jZS5nZXRSZXNvbHZlZFN0YXRlKCkuc29ydGVkRGF0YTsKICAgICAgLy8gd2UgbmVlZCB0byBnZXQgYWxsIHRoZSAncmVhbCcgKG9yaWdpbmFsKSByZWNvcmRzIG91dCB0byBnZXQgYXQgdGhlaXIgSURzCiAgICAgIHZhciBub2RlcyA9IGdldE5vZGVzKGN1cnJlbnRSZWNvcmRzKTsKICAgICAgLy8gd2UganVzdCBwdXNoIGFsbCB0aGUgSURzIG9udG8gdGhlIHNlbGVjdGlvbiBhcnJheQogICAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5xdWFudGl0eU5vdFBpY2tlZCAhPT0gMCkgewogICAgICAgICAgc2VsZWN0aW9uLnB1c2goaXRlbS5faWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIF90aGlzLnRvZ2dsZVNlbGVjdGlvbihzZWxlY3Rpb24sIHNlbGVjdEFsbCk7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RBbGw6IHNlbGVjdEFsbAogICAgICB9KTsKICAgIH0pOwogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaXNTZWxlY3RlZCIsIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgcmV0dXJuIF8uaW5jbHVkZXMoX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzLnN0YXRlLnNlbGVjdGlvbiksIGtleSk7CiAgICB9KTsKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInRvZ2dsZVNlbGVjdGlvbiIsIGZ1bmN0aW9uIChrZXlzLCBjaGVja2VkKSB7CiAgICAgIHZhciBzZWxlY3Rpb24gPSBuZXcgU2V0KF90aGlzLnN0YXRlLnNlbGVjdGlvbik7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGtleXMpKSB7CiAgICAgICAgaWYgKGNoZWNrZWQpIHsKICAgICAgICAgIF8uZm9yRWFjaChrZXlzLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBzZWxlY3Rpb24uYWRkKGl0ZW0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF8uZm9yRWFjaChrZXlzLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBzZWxlY3Rpb25bImRlbGV0ZSJdKGl0ZW0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbi5oYXMoa2V5cykpIHsKICAgICAgICBzZWxlY3Rpb25bImRlbGV0ZSJdKGtleXMpOwogICAgICB9IGVsc2UgaWYgKCFzZWxlY3Rpb24uaGFzKGtleXMpKSB7CiAgICAgICAgc2VsZWN0aW9uLmFkZChrZXlzKTsKICAgICAgfQogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24KICAgICAgfSk7CiAgICB9KTsKICAgIHZhciBjb2x1bW5zID0gX3RoaXMuZ2V0Q29sdW1ucygpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIHN0b2NrVHJhbnNmZXJJdGVtczogW10sCiAgICAgIGNvbHVtbnM6IGNvbHVtbnMsCiAgICAgIHNlbGVjdGlvbjogbmV3IFNldCgpLAogICAgICBzZWxlY3RBbGw6IGZhbHNlLAogICAgICBzZWxlY3RUeXBlOiAnY2hlY2tib3gnCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoQ3JlYXRlU3RvY2tUcmFuc2ZlciwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHRoaXMucHJvcHMuc3RvY2tUcmFuc2ZlclRyYW5zbGF0aW9uc0ZldGNoZWQpIHsKICAgICAgICB0aGlzLmRhdGFGZXRjaGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLmZldGNoU3RvY2tUcmFuc2ZlckNhbmRpZGF0ZXModGhpcy5wcm9wcy5sb2NhdGlvbklkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgIGlmIChuZXh0UHJvcHMuc3RvY2tUcmFuc2ZlclRyYW5zbGF0aW9uc0ZldGNoZWQpIHsKICAgICAgICBpZiAoIXRoaXMuZGF0YUZldGNoZWQpIHsKICAgICAgICAgIHRoaXMuZGF0YUZldGNoZWQgPSB0cnVlOwogICAgICAgICAgdGhpcy5mZXRjaFN0b2NrVHJhbnNmZXJDYW5kaWRhdGVzKHRoaXMucHJvcHMubG9jYXRpb25JZCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmxvY2F0aW9uSWQgIT09IG5leHRQcm9wcy5sb2NhdGlvbklkKSB7CiAgICAgICAgICB0aGlzLmZldGNoU3RvY2tUcmFuc2ZlckNhbmRpZGF0ZXMobmV4dFByb3BzLmxvY2F0aW9uSWQpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBjb2x1bW5zIHdoaWNoIGFyZSBwYXNzZWQgdG8gdGhlIHRhYmxlLgogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAiZmV0Y2hTdG9ja1RyYW5zZmVyQ2FuZGlkYXRlcyIsCiAgICB2YWx1ZToKICAgIC8qKgogICAgICogRmV0Y2hlcyBhdmFpbGFibGUgaXRlbXMgdG8gc3RvY2sgdHJhbnNmZXIgZnJvbSBBUEkuCiAgICAgKiBAcHVibGljCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZldGNoU3RvY2tUcmFuc2ZlckNhbmRpZGF0ZXMobG9jYXRpb25JZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL3N0b2NrVHJhbnNmZXJzL2NhbmRpZGF0ZXM/bG9jYXRpb24uaWQ9Ii5jb25jYXQobG9jYXRpb25JZCk7CiAgICAgIHJldHVybiBhcGlDbGllbnQuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHZhciBzdG9ja1RyYW5zZmVyQ2FuZGlkYXRlcyA9IHBhcnNlUmVzcG9uc2UocmVzcC5kYXRhLmRhdGEpOwogICAgICAgIHZhciBzdG9ja1RyYW5zZmVySXRlbXMgPSBbXTsKICAgICAgICBzdG9ja1RyYW5zZmVyQ2FuZGlkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAvLyB0aGlzIF9pZCBpcyB1c2VkIGludGVybmFsbHkgaW4gVHJlZVRhYmxlCiAgICAgICAgICB2YXIgX2lkID0gXy51bmlxdWVJZCgnaXRlbV8nKTsKICAgICAgICAgIHN0b2NrVHJhbnNmZXJJdGVtcy5wdXNoKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBfaWQ6IF9pZAogICAgICAgICAgfSwgaXRlbSkpOwogICAgICAgIH0pOwogICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICBzdG9ja1RyYW5zZmVySXRlbXM6IHN0b2NrVHJhbnNmZXJJdGVtcwogICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczIucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczIucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlU3RvY2tUcmFuc2ZlciIsCiAgICB2YWx1ZToKICAgIC8qKgogICAgICogU2VuZHMgYWxsIGNoYW5nZXMgbWFkZSBieSB1c2VyIGluIHRoaXMgc3RlcCBvZiBzdG9jayB0cmFuc2ZlciB0byBBUEkgYW5kIHVwZGF0ZXMgZGF0YS4KICAgICAqIEBwdWJsaWMKICAgICAqLwogICAgZnVuY3Rpb24gY3JlYXRlU3RvY2tUcmFuc2ZlcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgdmFyIHVybCA9ICcvb3BlbmJveGVzL2FwaS9zdG9ja1RyYW5zZmVycy8nOwogICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICBzdG9ja1RyYW5zZmVySXRlbXM6IF8uZmlsdGVyKHRoaXMuc3RhdGUuc3RvY2tUcmFuc2Zlckl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIF8uaW5jbHVkZXMoX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzMy5zdGF0ZS5zZWxlY3Rpb24pLCBpdGVtLl9pZCk7CiAgICAgICAgfSkKICAgICAgfTsKICAgICAgYXBpQ2xpZW50LnBvc3QodXJsLCBmbGF0dGVuUmVxdWVzdChwYXlsb2FkKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgc3RvY2tUcmFuc2ZlciA9IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UuZGF0YS5kYXRhKTsKICAgICAgICBfdGhpczMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICBfdGhpczMucHJvcHMuaGlzdG9yeS5wdXNoKCIvb3BlbmJveGVzL3N0b2NrVHJhbnNmZXIvY3JlYXRlLyIuY29uY2F0KHN0b2NrVHJhbnNmZXIuaWQpKTsKICAgICAgICBfdGhpczMucHJvcHMubmV4dFBhZ2UoewogICAgICAgICAgc3RvY2tUcmFuc2Zlcjogc3RvY2tUcmFuc2ZlcgogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZHMgYWxsIGl0ZW1zIHRoYXQgYXJlIGluIHRoZSBjdXJyZW50IGZpbHRlcmVkIGRhdGEgdG8gc2VsZWN0aW9uIGFycmF5LgogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB2YXIgdG9nZ2xlU2VsZWN0aW9uID0gdGhpcy50b2dnbGVTZWxlY3Rpb24sCiAgICAgICAgdG9nZ2xlQWxsID0gdGhpcy50b2dnbGVBbGwsCiAgICAgICAgaXNTZWxlY3RlZCA9IHRoaXMuaXNTZWxlY3RlZDsKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICBzdG9ja1RyYW5zZmVySXRlbXMgPSBfdGhpcyRzdGF0ZS5zdG9ja1RyYW5zZmVySXRlbXMsCiAgICAgICAgY29sdW1ucyA9IF90aGlzJHN0YXRlLmNvbHVtbnMsCiAgICAgICAgc2VsZWN0QWxsID0gX3RoaXMkc3RhdGUuc2VsZWN0QWxsLAogICAgICAgIHNlbGVjdFR5cGUgPSBfdGhpcyRzdGF0ZS5zZWxlY3RUeXBlOwogICAgICB2YXIgZXh0cmFQcm9wcyA9IHsKICAgICAgICBzZWxlY3RBbGw6IHNlbGVjdEFsbCwKICAgICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLAogICAgICAgIHRvZ2dsZUFsbDogdG9nZ2xlQWxsLAogICAgICAgIHRvZ2dsZVNlbGVjdGlvbjogdG9nZ2xlU2VsZWN0aW9uLAogICAgICAgIHNlbGVjdFR5cGU6IHNlbGVjdFR5cGUKICAgICAgfTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAic3RvY2stdHJhbnNmZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIHN0b2NrLXRyYW5zZmVyLWJ1dHRvbnMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiY291bnQtc2VsZWN0ZWQgIgogICAgICB9LCB0aGlzLnN0YXRlLnNlbGVjdGlvbi5zaXplLCAiICIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgIGlkOiAicmVhY3Quc3RvY2tUcmFuc2Zlci5zZWxlY3RlZC5sYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZWxlY3RlZCIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgIGRpc2FibGVkOiB0aGlzLnN0YXRlLnNlbGVjdGlvbi5zaXplIDwgMSwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5jcmVhdGVTdG9ja1RyYW5zZmVyKCk7CiAgICAgICAgfSwKICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtcHJpbWFyeSBidG4tZm9ybSBmbG9hdC1yaWdodCBidG4teHMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgIGlkOiAicmVhY3Quc3RvY2tUcmFuc2Zlci5zdGFydFN0b2NrVHJhbnNmZXIubGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU3RhcnQgU3RvY2sgVHJhbnNmZXIiCiAgICAgIH0pKSksIHN0b2NrVHJhbnNmZXJJdGVtcyA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdFRyZWVUYWJsZSwgX2V4dGVuZHMoewogICAgICAgIGRhdGE6IHN0b2NrVHJhbnNmZXJJdGVtcywKICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKHIpIHsKICAgICAgICAgIF90aGlzNC5zZWxlY3RUYWJsZSA9IHI7CiAgICAgICAgfSwKICAgICAgICBjbGFzc05hbWU6ICItc3RyaXBlZCAtaGlnaGxpZ2h0IgogICAgICB9LCBleHRyYVByb3BzLCB7CiAgICAgICAgZGVmYXVsdFBhZ2VTaXplOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwKICAgICAgICBtaW5Sb3dzOiAwLAogICAgICAgIHNob3dQYWdpbmF0aW9uQm90dG9tOiBmYWxzZSwKICAgICAgICBmaWx0ZXJhYmxlOiB0cnVlLAogICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IHRoaXMuZmlsdGVyTWV0aG9kLAogICAgICAgIFNlbGVjdElucHV0Q29tcG9uZW50OiBmdW5jdGlvbiBTZWxlY3RJbnB1dENvbXBvbmVudChfcmVmKSB7CiAgICAgICAgICB2YXIgaWQgPSBfcmVmLmlkLAogICAgICAgICAgICBjaGVja2VkID0gX3JlZi5jaGVja2VkLAogICAgICAgICAgICBfb25DbGljayA9IF9yZWYub25DbGljaywKICAgICAgICAgICAgcm93ID0gX3JlZi5yb3c7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICB0eXBlOiBzZWxlY3RUeXBlLAogICAgICAgICAgICBjaGVja2VkOiBjaGVja2VkLAogICAgICAgICAgICBkaXNhYmxlZDogcm93ICYmIHJvdy5xdWFudGl0eU5vdFBpY2tlZCA9PT0gMCwKICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge30sCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkgewogICAgICAgICAgICAgIHZhciBzaGlmdEtleSA9IGUuc2hpZnRLZXk7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICBfb25DbGljayhpZCwgc2hpZnRLZXksIHJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkpIDogbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJzdWJtaXQtYnV0dG9ucyIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICBkaXNhYmxlZDogdGhpcy5zdGF0ZS5zZWxlY3Rpb24uc2l6ZSA8IDEsCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgIHJldHVybiBfdGhpczQuY3JlYXRlU3RvY2tUcmFuc2ZlcigpOwogICAgICAgIH0sCiAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLWZvcm0gZmxvYXQtcmlnaHQgYnRuLXhzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICBpZDogInJlYWN0LnN0b2NrVHJhbnNmZXIuc3RhcnRTdG9ja1RyYW5zZmVyLmxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlN0YXJ0IFN0b2NrIFRyYW5zZmVyIgogICAgICB9KSkpKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIENyZWF0ZVN0b2NrVHJhbnNmZXI7Cn0oQ29tcG9uZW50KTsKdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkgewogIHJldHVybiB7CiAgICBzdG9ja1RyYW5zZmVyVHJhbnNsYXRpb25zRmV0Y2hlZDogc3RhdGUuc2Vzc2lvbi5mZXRjaGVkVHJhbnNsYXRpb25zLnN0b2NrVHJhbnNmZXIKICB9Owp9OwpleHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCB7CiAgc2hvd1NwaW5uZXI6IHNob3dTcGlubmVyLAogIGhpZGVTcGlubmVyOiBoaWRlU3Bpbm5lcgp9KShDcmVhdGVTdG9ja1RyYW5zZmVyKSk7CkNyZWF0ZVN0b2NrVHJhbnNmZXIucHJvcFR5cGVzID0gewogIC8qKiBGdW5jdGlvbiBjYWxsZWQgd2hlbiBkYXRhIGlzIGxvYWRpbmcgKi8KICBzaG93U3Bpbm5lcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICAvKiogRnVuY3Rpb24gY2FsbGVkIHdoZW4gZGF0YSBoYXMgbG9hZGVkICovCiAgaGlkZVNwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqIEZ1bmN0aW9uIHRha2luZyB1c2VyIHRvIHRoZSBuZXh0IHBhZ2UgKi8KICBuZXh0UGFnZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICAvKiogTG9jYXRpb24gSUQgKGN1cnJlbnRseSBjaG9zZW4pLiBUbyBiZSB1c2VkIGluIHN0b2NrIHRyYW5zZmVyIHJlcXVlc3RzLiAqLwogIGxvY2F0aW9uSWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwKICAvKiogUmVhY3Qgcm91dGVyJ3Mgb2JqZWN0IHVzZWQgdG8gbWFuYWdlIHNlc3Npb24gaGlzdG9yeSAqLwogIGhpc3Rvcnk6IFByb3BUeXBlcy5zaGFwZSh7CiAgICBwdXNoOiBQcm9wVHlwZXMuZnVuYwogIH0pLmlzUmVxdWlyZWQsCiAgc3RvY2tUcmFuc2ZlclRyYW5zbGF0aW9uc0ZldGNoZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQKfTs="},null]}