{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/returns/inbound/AddItemsPage.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/returns/inbound/AddItemsPage.jsx","mtime":1698037749000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9CmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgYXJyYXlNdXRhdG9ycyBmcm9tICdmaW5hbC1mb3JtLWFycmF5cyc7CmltcG9ydCB1cGRhdGUgZnJvbSAnaW1tdXRhYmlsaXR5LWhlbHBlcic7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IHsgY29uZmlybUFsZXJ0IH0gZnJvbSAncmVhY3QtY29uZmlybS1hbGVydCc7CmltcG9ydCB7IEZvcm0gfSBmcm9tICdyZWFjdC1maW5hbC1mb3JtJzsKaW1wb3J0IHsgZ2V0VHJhbnNsYXRlIH0gZnJvbSAncmVhY3QtbG9jYWxpemUtcmVkdXgnOwppbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgQWxlcnQgZnJvbSAncmVhY3Qtcy1hbGVydCc7CmltcG9ydCB7IGZldGNoVXNlcnMsIGhpZGVTcGlubmVyLCBzaG93U3Bpbm5lciB9IGZyb20gJ2FjdGlvbnMnOwppbXBvcnQgQXJyYXlGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvQXJyYXlGaWVsZCc7CmltcG9ydCBCdXR0b25GaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvQnV0dG9uRmllbGQnOwppbXBvcnQgRGF0ZUZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9EYXRlRmllbGQnOwppbXBvcnQgUHJvZHVjdFNlbGVjdEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9Qcm9kdWN0U2VsZWN0RmllbGQnOwppbXBvcnQgU2VsZWN0RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL1NlbGVjdEZpZWxkJzsKaW1wb3J0IFRleHRGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvVGV4dEZpZWxkJzsKaW1wb3J0IGFwaUNsaWVudCwgeyBmbGF0dGVuUmVxdWVzdCwgcGFyc2VSZXNwb25zZSB9IGZyb20gJ3V0aWxzL2FwaUNsaWVudCc7CmltcG9ydCB7IHJlbmRlckZvcm1GaWVsZCB9IGZyb20gJ3V0aWxzL2Zvcm0tdXRpbHMnOwppbXBvcnQgVHJhbnNsYXRlLCB7IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZSB9IGZyb20gJ3V0aWxzL1RyYW5zbGF0ZSc7CmltcG9ydCAncmVhY3QtY29uZmlybS1hbGVydC9zcmMvcmVhY3QtY29uZmlybS1hbGVydC5jc3MnOwp2YXIgREVMRVRFX0JVVFRPTl9GSUVMRCA9IHsKICB0eXBlOiBCdXR0b25GaWVsZCwKICBsYWJlbDogJ3JlYWN0LmRlZmF1bHQuYnV0dG9uLmRlbGV0ZS5sYWJlbCcsCiAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUnLAogIGZsZXhXaWR0aDogJzEnLAogIGZpZWxkS2V5OiAnJywKICBidXR0b25MYWJlbDogJ3JlYWN0LmRlZmF1bHQuYnV0dG9uLmRlbGV0ZS5sYWJlbCcsCiAgYnV0dG9uRGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUnLAogIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmKSB7CiAgICB2YXIgZmllbGRWYWx1ZSA9IF9yZWYuZmllbGRWYWx1ZSwKICAgICAgcmVtb3ZlSXRlbSA9IF9yZWYucmVtb3ZlSXRlbSwKICAgICAgcmVtb3ZlUm93ID0gX3JlZi5yZW1vdmVSb3c7CiAgICByZXR1cm4gewogICAgICBvbkNsaWNrOiBmaWVsZFZhbHVlICYmIGZpZWxkVmFsdWUuaWQgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVtb3ZlSXRlbShmaWVsZFZhbHVlLmlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJlbW92ZVJvdygpOwogICAgICAgIH0pOwogICAgICB9IDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiByZW1vdmVSb3coKTsKICAgICAgfSwKICAgICAgZGlzYWJsZWQ6IGZpZWxkVmFsdWUgJiYgZmllbGRWYWx1ZS5zdGF0dXNDb2RlID09PSAnU1VCU1RJVFVURUQnCiAgICB9OwogIH0sCiAgYXR0cmlidXRlczogewogICAgY2xhc3NOYW1lOiAnYnRuIGJ0bi1vdXRsaW5lLWRhbmdlcicKICB9Cn07CnZhciBGSUVMRFMgPSB7CiAgcmV0dXJuSXRlbXM6IHsKICAgIHR5cGU6IEFycmF5RmllbGQsCiAgICBhcnJvd3NOYXZpZ2F0aW9uOiB0cnVlLAogICAgYWRkQnV0dG9uOiBmdW5jdGlvbiBhZGRCdXR0b24oX3JlZjIpIHsKICAgICAgdmFyIGFkZFJvdyA9IF9yZWYyLmFkZFJvdywKICAgICAgICBnZXRTb3J0T3JkZXIgPSBfcmVmMi5nZXRTb3J0T3JkZXIsCiAgICAgICAgdmFsdWVzID0gX3JlZjIudmFsdWVzLAogICAgICAgIHVwZGF0ZUZvcm1WYWx1ZXMgPSBfcmVmMi51cGRhdGVGb3JtVmFsdWVzOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtc3VjY2VzcyBidG4teHMiLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICB2YXIgcm93ID0gewogICAgICAgICAgICBzb3J0T3JkZXI6IGdldFNvcnRPcmRlcigpCiAgICAgICAgICB9OwogICAgICAgICAgYWRkUm93KHJvdyk7CiAgICAgICAgICB1cGRhdGVGb3JtVmFsdWVzKHVwZGF0ZSh2YWx1ZXMsIHsKICAgICAgICAgICAgcmV0dXJuSXRlbXM6IHsKICAgICAgICAgICAgICAkcHVzaDogW3Jvd10KICAgICAgICAgICAgfQogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1wbHVzIHByLTIiCiAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLmFkZExpbmUubGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQWRkIGxpbmUiCiAgICAgIH0pKSk7CiAgICB9LAogICAgZmllbGRzOiB7CiAgICAgIHByb2R1Y3Q6IHsKICAgICAgICB0eXBlOiBQcm9kdWN0U2VsZWN0RmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5pbmJvdW5kUmV0dXJucy5wcm9kdWN0LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Byb2R1Y3QnLAogICAgICAgIGhlYWRlckFsaWduOiAnbGVmdCcsCiAgICAgICAgZmxleFdpZHRoOiAnNCcsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYzKSB7CiAgICAgICAgICB2YXIgdXBkYXRlRm9ybVZhbHVlcyA9IF9yZWYzLnVwZGF0ZUZvcm1WYWx1ZXMsCiAgICAgICAgICAgIHJvd0luZGV4ID0gX3JlZjMucm93SW5kZXgsCiAgICAgICAgICAgIHZhbHVlcyA9IF9yZWYzLnZhbHVlcywKICAgICAgICAgICAgb3JpZ2luSWQgPSBfcmVmMy5vcmlnaW5JZCwKICAgICAgICAgICAgZm9jdXNGaWVsZCA9IF9yZWYzLmZvY3VzRmllbGQ7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsb2NhdGlvbklkOiBvcmlnaW5JZCwKICAgICAgICAgICAgb25FeGFjdFByb2R1Y3RTZWxlY3RlZDogZnVuY3Rpb24gb25FeGFjdFByb2R1Y3RTZWxlY3RlZChfcmVmNCkgewogICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gX3JlZjQucHJvZHVjdDsKICAgICAgICAgICAgICBpZiAoZm9jdXNGaWVsZCAmJiBwcm9kdWN0KSB7CiAgICAgICAgICAgICAgICBmb2N1c0ZpZWxkKHJvd0luZGV4LCAncXVhbnRpdHknKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkgewogICAgICAgICAgICAgIHJldHVybiB1cGRhdGVGb3JtVmFsdWVzKHZhbHVlcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LAogICAgICBsb3ROdW1iZXI6IHsKICAgICAgICB0eXBlOiBUZXh0RmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5pbmJvdW5kUmV0dXJucy5sb3QubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTG90JywKICAgICAgICBmbGV4V2lkdGg6ICcxJywKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjUpIHsKICAgICAgICAgIHZhciB2YWx1ZXMgPSBfcmVmNS52YWx1ZXMsCiAgICAgICAgICAgIHVwZGF0ZUZvcm1WYWx1ZXMgPSBfcmVmNS51cGRhdGVGb3JtVmFsdWVzOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUZvcm1WYWx1ZXModmFsdWVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGV4cGlyYXRpb25EYXRlOiB7CiAgICAgICAgdHlwZTogRGF0ZUZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3QuaW5ib3VuZFJldHVybnMuZXhwaXJ5LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0V4cGlyeScsCiAgICAgICAgZmxleFdpZHRoOiAnMS41JywKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBkYXRlRm9ybWF0OiAnTU0vREQvWVlZWScsCiAgICAgICAgICBhdXRvQ29tcGxldGU6ICdvZmYnLAogICAgICAgICAgcGxhY2Vob2xkZXJUZXh0OiAnTU0vREQvWVlZWScKICAgICAgICB9LAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmNikgewogICAgICAgICAgdmFyIHZhbHVlcyA9IF9yZWY2LnZhbHVlcywKICAgICAgICAgICAgdXBkYXRlRm9ybVZhbHVlcyA9IF9yZWY2LnVwZGF0ZUZvcm1WYWx1ZXM7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBvbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRm9ybVZhbHVlcyh2YWx1ZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgcXVhbnRpdHk6IHsKICAgICAgICB0eXBlOiBUZXh0RmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5pbmJvdW5kUmV0dXJucy5xdWFudGl0eS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdRdHknLAogICAgICAgIGZsZXhXaWR0aDogJzEnLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIHR5cGU6ICdudW1iZXInCiAgICAgICAgfSwKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjcpIHsKICAgICAgICAgIHZhciB2YWx1ZXMgPSBfcmVmNy52YWx1ZXMsCiAgICAgICAgICAgIHVwZGF0ZUZvcm1WYWx1ZXMgPSBfcmVmNy51cGRhdGVGb3JtVmFsdWVzOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUZvcm1WYWx1ZXModmFsdWVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlY2lwaWVudDogewogICAgICAgIHR5cGU6IFNlbGVjdEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3QuaW5ib3VuZFJldHVybnMucmVjaXBpZW50LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1JlY2lwaWVudCcsCiAgICAgICAgZmxleFdpZHRoOiAnMS41JywKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjgpIHsKICAgICAgICAgIHZhciByZWNpcGllbnRzID0gX3JlZjgucmVjaXBpZW50cywKICAgICAgICAgICAgYWRkUm93ID0gX3JlZjguYWRkUm93LAogICAgICAgICAgICByb3dDb3VudCA9IF9yZWY4LnJvd0NvdW50LAogICAgICAgICAgICByb3dJbmRleCA9IF9yZWY4LnJvd0luZGV4LAogICAgICAgICAgICBnZXRTb3J0T3JkZXIgPSBfcmVmOC5nZXRTb3J0T3JkZXIsCiAgICAgICAgICAgIHVwZGF0ZUZvcm1WYWx1ZXMgPSBfcmVmOC51cGRhdGVGb3JtVmFsdWVzLAogICAgICAgICAgICB2YWx1ZXMgPSBfcmVmOC52YWx1ZXM7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBvcHRpb25zOiByZWNpcGllbnRzLAogICAgICAgICAgICBvblRhYlByZXNzOiByb3dDb3VudCA9PT0gcm93SW5kZXggKyAxID8gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBhZGRSb3coewogICAgICAgICAgICAgICAgc29ydE9yZGVyOiBnZXRTb3J0T3JkZXIoKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgYXJyb3dSaWdodDogcm93Q291bnQgPT09IHJvd0luZGV4ICsgMSA/IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYWRkUm93KHsKICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogZ2V0U29ydE9yZGVyKCkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSA6IG51bGwsCiAgICAgICAgICAgIGFycm93RG93bjogcm93Q291bnQgPT09IHJvd0luZGV4ICsgMSA/IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYWRkUm93KHsKICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogZ2V0U29ydE9yZGVyKCkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSA6IG51bGwsCiAgICAgICAgICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkgewogICAgICAgICAgICAgIHJldHVybiB1cGRhdGVGb3JtVmFsdWVzKHZhbHVlcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBsYWJlbEtleTogJ25hbWUnLAogICAgICAgICAgb3Blbk9uQ2xpY2s6IGZhbHNlCiAgICAgICAgfQogICAgICB9LAogICAgICBkZWxldGVCdXR0b246IERFTEVURV9CVVRUT05fRklFTEQKICAgIH0KICB9Cn07CnZhciBBZGRJdGVtc1BhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoQWRkSXRlbXNQYWdlLCBfQ29tcG9uZW50KTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEFkZEl0ZW1zUGFnZSk7CiAgZnVuY3Rpb24gQWRkSXRlbXNQYWdlKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRkSXRlbXNQYWdlKTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZGF0YUZldGNoZWQiLCBmYWxzZSk7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgaW5ib3VuZFJldHVybjoge30sCiAgICAgIHNvcnRPcmRlcjogMCwKICAgICAgZm9ybVZhbHVlczogewogICAgICAgIHJldHVybkl0ZW1zOiBbXQogICAgICB9CiAgICAgIC8vIGlzRmlyc3RQYWdlTG9hZGVkOiBmYWxzZSwKICAgIH07CgogICAgX3RoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgIF90aGlzLnJlbW92ZUl0ZW0gPSBfdGhpcy5yZW1vdmVJdGVtLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMuZ2V0U29ydE9yZGVyID0gX3RoaXMuZ2V0U29ydE9yZGVyLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMuY29uZmlybVNhdmUgPSBfdGhpcy5jb25maXJtU2F2ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLnZhbGlkYXRlID0gX3RoaXMudmFsaWRhdGUuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy51cGRhdGVGb3JtVmFsdWVzID0gX3RoaXMudXBkYXRlRm9ybVZhbHVlcy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIHJldHVybiBfdGhpczsKICB9CiAgX2NyZWF0ZUNsYXNzKEFkZEl0ZW1zUGFnZSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHRoaXMucHJvcHMuaW5ib3VuZFJldHVybnNUcmFuc2xhdGlvbnNGZXRjaGVkKSB7CiAgICAgICAgdGhpcy5kYXRhRmV0Y2hlZCA9IHRydWU7CiAgICAgICAgdGhpcy5mZXRjaEluYm91bmRSZXR1cm4oKTsKICAgICAgICB0aGlzLnByb3BzLmZldGNoVXNlcnMoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgIGlmIChuZXh0UHJvcHMuaW5ib3VuZFJldHVybnNUcmFuc2xhdGlvbnNGZXRjaGVkICYmICF0aGlzLmRhdGFGZXRjaGVkKSB7CiAgICAgICAgdGhpcy5kYXRhRmV0Y2hlZCA9IHRydWU7CiAgICAgICAgdGhpcy5mZXRjaEluYm91bmRSZXR1cm4oKTsKICAgICAgICB0aGlzLnByb3BzLmZldGNoVXNlcnMoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldFNvcnRPcmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U29ydE9yZGVyKCkgewogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBzb3J0T3JkZXI6IHRoaXMuc3RhdGUuc29ydE9yZGVyICsgMTAwCiAgICAgIH0pOwogICAgICByZXR1cm4gdGhpcy5zdGF0ZS5zb3J0T3JkZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlRm9ybVZhbHVlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRm9ybVZhbHVlcyh2YWx1ZXMpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZm9ybVZhbHVlczogdmFsdWVzCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInZhbGlkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZSh2YWx1ZXMpIHsKICAgICAgdmFyIGVycm9ycyA9IHt9OwogICAgICBlcnJvcnMucmV0dXJuSXRlbXMgPSBbXTsKICAgICAgdmFyIGRhdGUgPSBtb21lbnQodGhpcy5wcm9wcy5taW5pbXVtRXhwaXJhdGlvbkRhdGUsICdNTS9ERC9ZWVlZJyk7CiAgICAgIF8uZm9yRWFjaCh2YWx1ZXMucmV0dXJuSXRlbXMsIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgICAgICBlcnJvcnMucmV0dXJuSXRlbXNba2V5XSA9IHt9OwogICAgICAgIGlmICghXy5pc05pbChpdGVtLnByb2R1Y3QpICYmICghaXRlbS5xdWFudGl0eSB8fCBpdGVtLnF1YW50aXR5IDwgMCkpIHsKICAgICAgICAgIGVycm9ycy5yZXR1cm5JdGVtc1trZXldID0gewogICAgICAgICAgICBxdWFudGl0eTogJ3JlYWN0LmluYm91bmRSZXR1cm5zLmVycm9yLmVudGVyUXVhbnRpdHkubGFiZWwnCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB2YXIgZGF0ZVJlcXVlc3RlZCA9IG1vbWVudChpdGVtLmV4cGlyYXRpb25EYXRlLCAnTU0vREQvWVlZWScpOwogICAgICAgIGlmIChkYXRlLmRpZmYoZGF0ZVJlcXVlc3RlZCkgPiAwKSB7CiAgICAgICAgICBlcnJvcnMucmV0dXJuSXRlbXNba2V5XSA9IHsKICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGU6ICdyZWFjdC5pbmJvdW5kUmV0dXJucy5lcnJvci5pbnZhbGlkRGF0ZS5sYWJlbCcKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmIChpdGVtLmV4cGlyYXRpb25EYXRlICYmIChfLmlzTmlsKGl0ZW0ubG90TnVtYmVyKSB8fCBfLmlzRW1wdHkoaXRlbS5sb3ROdW1iZXIpKSkgewogICAgICAgICAgZXJyb3JzLnJldHVybkl0ZW1zW2tleV0gPSB7CiAgICAgICAgICAgIGxvdE51bWJlcjogJ3JlYWN0LmluYm91bmRSZXR1cm5zLmVycm9yLmV4cGlyeVdpdGhvdXRMb3QubGFiZWwnCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBpZiAoIV8uaXNOaWwoaXRlbS5wcm9kdWN0KSAmJiBpdGVtLnByb2R1Y3QubG90QW5kRXhwaXJ5Q29udHJvbCkgewogICAgICAgICAgaWYgKCFpdGVtLmV4cGlyYXRpb25EYXRlICYmIChfLmlzTmlsKGl0ZW0ubG90TnVtYmVyKSB8fCBfLmlzRW1wdHkoaXRlbS5sb3ROdW1iZXIpKSkgewogICAgICAgICAgICBlcnJvcnMucmV0dXJuSXRlbXNba2V5XSA9IHsKICAgICAgICAgICAgICBleHBpcmF0aW9uRGF0ZTogJ3JlYWN0LmluYm91bmRSZXR1cm5zLmVycm9yLmxvdEFuZEV4cGlyeUNvbnRyb2wubGFiZWwnLAogICAgICAgICAgICAgIGxvdE51bWJlcjogJ3JlYWN0LmluYm91bmRSZXR1cm5zLmVycm9yLmxvdEFuZEV4cGlyeUNvbnRyb2wubGFiZWwnCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgaWYgKCFpdGVtLmV4cGlyYXRpb25EYXRlKSB7CiAgICAgICAgICAgIGVycm9ycy5yZXR1cm5JdGVtc1trZXldID0gewogICAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlOiAncmVhY3QuaW5ib3VuZFJldHVybnMuZXJyb3IubG90QW5kRXhwaXJ5Q29udHJvbC5sYWJlbCcKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSBpZiAoXy5pc05pbChpdGVtLmxvdE51bWJlcikgfHwgXy5pc0VtcHR5KGl0ZW0ubG90TnVtYmVyKSkgewogICAgICAgICAgICBlcnJvcnMucmV0dXJuSXRlbXNba2V5XSA9IHsKICAgICAgICAgICAgICBsb3ROdW1iZXI6ICdyZWFjdC5pbmJvdW5kUmV0dXJucy5lcnJvci5sb3RBbmRFeHBpcnlDb250cm9sLmxhYmVsJwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBlcnJvcnM7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29uZmlybVNhdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmZpcm1TYXZlKG9uQ29uZmlybSkgewogICAgICBjb25maXJtQWxlcnQoewogICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuaW5ib3VuZFJldHVybnMubWVzc2FnZS5jb25maXJtU2F2ZS5sYWJlbCcsICdDb25maXJtIHNhdmUnKSwKICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuaW5ib3VuZFJldHVybnMuY29uZmlybVNhdmUubWVzc2FnZScsICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2F2ZT8gVGhlcmUgYXJlIHNvbWUgbGluZXMgd2l0aCBlbXB0eSBvciB6ZXJvIHF1YW50aXR5LCB0aG9zZSBsaW5lcyB3aWxsIGJlIGRlbGV0ZWQuJyksCiAgICAgICAgYnV0dG9uczogW3sKICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC55ZXMubGFiZWwnLCAnWWVzJyksCiAgICAgICAgICBvbkNsaWNrOiBvbkNvbmZpcm0KICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LmRlZmF1bHQubm8ubGFiZWwnLCAnTm8nKQogICAgICAgIH1dCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoSW5ib3VuZFJldHVybiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hJbmJvdW5kUmV0dXJuKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmluYm91bmRSZXR1cm5JZCkgewogICAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL3N0b2NrVHJhbnNmZXJzLyIuY29uY2F0KHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmluYm91bmRSZXR1cm5JZCk7CiAgICAgICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIHZhciBpbmJvdW5kUmV0dXJuID0gcGFyc2VSZXNwb25zZShyZXNwLmRhdGEuZGF0YSk7CiAgICAgICAgICB2YXIgcmV0dXJuSXRlbXMgPSBpbmJvdW5kUmV0dXJuLnN0b2NrVHJhbnNmZXJJdGVtcy5sZW5ndGggPyBpbmJvdW5kUmV0dXJuLnN0b2NrVHJhbnNmZXJJdGVtcyA6IG5ldyBBcnJheSgxKS5maWxsKHsKICAgICAgICAgICAgc29ydE9yZGVyOiAxMDAKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHNvcnRPcmRlciA9IF8udG9JbnRlZ2VyKF8ubGFzdChyZXR1cm5JdGVtcykuc29ydE9yZGVyKSArIDEwMDsKICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgIGluYm91bmRSZXR1cm46IGluYm91bmRSZXR1cm4sCiAgICAgICAgICAgIGZvcm1WYWx1ZXM6IHsKICAgICAgICAgICAgICByZXR1cm5JdGVtczogcmV0dXJuSXRlbXMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc29ydE9yZGVyOiBzb3J0T3JkZXIKICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgICAgfSk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAibmV4dFBhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG5leHRQYWdlKGZvcm1WYWx1ZXMpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciByZXR1cm5JdGVtcyA9IF8uZmlsdGVyKGZvcm1WYWx1ZXMucmV0dXJuSXRlbXMsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICByZXR1cm4gIV8uaXNFbXB0eSh2YWwpICYmIHZhbC5wcm9kdWN0OwogICAgICB9KTsKICAgICAgaWYgKF8uc29tZShyZXR1cm5JdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gIWl0ZW0ucXVhbnRpdHkgfHwgaXRlbS5xdWFudGl0eSA9PT0gJzAnOwogICAgICB9KSkgewogICAgICAgIHRoaXMuY29uZmlybVNhdmUoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5zYXZlU3RvY2tUcmFuc2ZlcihyZXR1cm5JdGVtcywgX3RoaXMzLnN0YXRlLmluYm91bmRSZXR1cm4uc3RhdHVzICE9PSAnUExBQ0VEJyA/ICdQTEFDRUQnIDogbnVsbCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy5wcm9wcy5uZXh0UGFnZShfdGhpczMuc3RhdGUuaW5ib3VuZFJldHVybik7CiAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2F2ZVN0b2NrVHJhbnNmZXIocmV0dXJuSXRlbXMsIHRoaXMuc3RhdGUuaW5ib3VuZFJldHVybi5zdGF0dXMgIT09ICdQTEFDRUQnID8gJ1BMQUNFRCcgOiBudWxsKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy5wcm9wcy5uZXh0UGFnZShfdGhpczMuc3RhdGUuaW5ib3VuZFJldHVybik7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZVN0b2NrVHJhbnNmZXJJbkN1cnJlbnRTdGVwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlU3RvY2tUcmFuc2ZlckluQ3VycmVudFN0ZXAocmV0dXJuSXRlbXMpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgcmV0dXJuIHRoaXMuc2F2ZVN0b2NrVHJhbnNmZXIocmV0dXJuSXRlbXMsIG51bGwpWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM0LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVTdG9ja1RyYW5zZmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlU3RvY2tUcmFuc2ZlcihyZXR1cm5JdGVtcywgc3RhdHVzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB2YXIgaXRlbXNUb1NhdmUgPSBfLmZpbHRlcihyZXR1cm5JdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wcm9kdWN0ICYmIGl0ZW0ucXVhbnRpdHkgPiAwOwogICAgICB9KTsKICAgICAgdmFyIHVwZGF0ZUl0ZW1zVXJsID0gIi9vcGVuYm94ZXMvYXBpL3N0b2NrVHJhbnNmZXJzLyIuY29uY2F0KHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmluYm91bmRSZXR1cm5JZCk7CiAgICAgIHZhciBwYXlsb2FkID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnN0YXRlLmluYm91bmRSZXR1cm4pLCB7fSwgewogICAgICAgIHN0b2NrVHJhbnNmZXJJdGVtczogaXRlbXNUb1NhdmUKICAgICAgfSk7CiAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICBwYXlsb2FkLnN0YXR1cyA9IHN0YXR1czsKICAgICAgfQogICAgICBpZiAocGF5bG9hZC5zdG9ja1RyYW5zZmVySXRlbXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICAgIHJldHVybiBhcGlDbGllbnQucG9zdCh1cGRhdGVJdGVtc1VybCwgZmxhdHRlblJlcXVlc3QocGF5bG9hZCkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNS5mZXRjaEluYm91bmRSZXR1cm4oKTsKICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczUucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoX3RoaXM1LnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuaW5ib3VuZFJldHVybnMuZXJyb3Iuc2F2ZU9yZGVySXRlbXMubGFiZWwnLCAnQ291bGQgbm90IHNhdmUgb3JkZXIgaXRlbXMnKSkpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNhdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmUoZm9ybVZhbHVlcykgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdmFyIHJldHVybkl0ZW1zID0gXy5maWx0ZXIoZm9ybVZhbHVlcy5yZXR1cm5JdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gIV8uaXNFbXB0eShpdGVtKTsKICAgICAgfSk7CiAgICAgIGlmIChfLnNvbWUocmV0dXJuSXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuICFpdGVtLnF1YW50aXR5IHx8IGl0ZW0ucXVhbnRpdHkgPT09ICcwJzsKICAgICAgfSkpIHsKICAgICAgICB0aGlzLmNvbmZpcm1TYXZlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczYuc2F2ZUl0ZW1zKHJldHVybkl0ZW1zKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNhdmVJdGVtcyhyZXR1cm5JdGVtcyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlQW5kRXhpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUFuZEV4aXQoZm9ybVZhbHVlcykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgdmFyIGVycm9ycyA9IHRoaXMudmFsaWRhdGUoZm9ybVZhbHVlcykucmV0dXJuSXRlbXM7CiAgICAgIGlmIChlcnJvcnMubGVuZ3RoICYmIGVycm9ycy5ldmVyeShmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgcmV0dXJuIF90eXBlb2Yob2JqKSA9PT0gJ29iamVjdCcgJiYgXy5pc0VtcHR5KG9iaik7CiAgICAgIH0pKSB7CiAgICAgICAgdGhpcy5zYXZlU3RvY2tUcmFuc2ZlckluQ3VycmVudFN0ZXAoZm9ybVZhbHVlcy5yZXR1cm5JdGVtcykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAiL29wZW5ib3hlcy9zdG9ja01vdmVtZW50L3Nob3cvIi5jb25jYXQoX3RoaXM3LnByb3BzLm1hdGNoLnBhcmFtcy5pbmJvdW5kUmV0dXJuSWQpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbmZpcm1BbGVydCh7CiAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LmluYm91bmRSZXR1cm5zLmNvbmZpcm1TYXZlLmxhYmVsJywgJ0NvbmZpcm0gc2F2ZScpLAogICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LmluYm91bmRSZXR1cm5zLmNvbmZpcm1FeGl0Lm1lc3NhZ2UnLCAnVmFsaWRhdGlvbiBlcnJvcnMgb2NjdXJyZWQuIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBleGl0IGFuZCBsb3NlIHVuc2F2ZWQgZGF0YT8nKSwKICAgICAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC55ZXMubGFiZWwnLCAnWWVzJyksCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gIi9vcGVuYm94ZXMvc3RvY2tNb3ZlbWVudC9zaG93LyIuY29uY2F0KF90aGlzNy5wcm9wcy5tYXRjaC5wYXJhbXMuaW5ib3VuZFJldHVybklkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgewogICAgICAgICAgICBsYWJlbDogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LmRlZmF1bHQubm8ubGFiZWwnLCAnTm8nKQogICAgICAgICAgfV0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVJdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUl0ZW1zKHJldHVybkl0ZW1zKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgIHRoaXMuc2F2ZVN0b2NrVHJhbnNmZXJJbkN1cnJlbnRTdGVwKHJldHVybkl0ZW1zKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczgucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICBBbGVydC5zdWNjZXNzKF90aGlzOC5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LmluYm91bmRSZXR1cm5zLmFsZXJ0LnNhdmVTdWNjZXNzLmxhYmVsJywgJ0NoYW5nZXMgc2F2ZWQgc3VjY2Vzc2Z1bGx5JyksIHsKICAgICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczgucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVmcmVzaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgIGNvbmZpcm1BbGVydCh7CiAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5pbmJvdW5kUmV0dXJucy5tZXNzYWdlLmNvbmZpcm1SZWZyZXNoLmxhYmVsJywgJ0NvbmZpcm0gcmVmcmVzaCcpLAogICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5pbmJvdW5kUmV0dXJucy5jb25maXJtUmVmcmVzaC5tZXNzYWdlJywgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZWZyZXNoPyBZb3VyIHByb2dyZXNzIHNpbmNlIGxhc3Qgc2F2ZSB3aWxsIGJlIGxvc3QuJyksCiAgICAgICAgYnV0dG9uczogW3sKICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC55ZXMubGFiZWwnLCAnWWVzJyksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXM5LmZldGNoSW5ib3VuZFJldHVybigpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC5uby5sYWJlbCcsICdObycpCiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlSXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlSXRlbShpdGVtSWQpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwogICAgICB2YXIgcmVtb3ZlSXRlbXNVcmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tUcmFuc2Zlckl0ZW1zLyIuY29uY2F0KGl0ZW1JZCk7CiAgICAgIHJldHVybiBhcGlDbGllbnRbImRlbGV0ZSJdKHJlbW92ZUl0ZW1zVXJsKVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMC5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3JlYWN0LmluYm91bmRSZXR1cm5zLmVycm9yLmRlbGV0ZU9yZGVySXRlbS5sYWJlbCcpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlQWxsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVBbGwoKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB2YXIgcmVtb3ZlSXRlbXNVcmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tUcmFuc2ZlcnMvIi5jb25jYXQodGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMuaW5ib3VuZFJldHVybklkLCAiL3JlbW92ZUFsbEl0ZW1zIik7CiAgICAgIHJldHVybiBhcGlDbGllbnRbImRlbGV0ZSJdKHJlbW92ZUl0ZW1zVXJsKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMxMS5mZXRjaEluYm91bmRSZXR1cm4oKTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTEucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdyZWFjdC5pbmJvdW5kUmV0dXJucy5lcnJvci5kZWxldGVPcmRlckl0ZW0ubGFiZWwnKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInByZXZpb3VzUGFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJldmlvdXNQYWdlKHZhbHVlcywgaW52YWxpZCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CiAgICAgIGlmICghaW52YWxpZCkgewogICAgICAgIHRoaXMuc2F2ZVN0b2NrVHJhbnNmZXJJbkN1cnJlbnRTdGVwKHZhbHVlcy5yZXR1cm5JdGVtcykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMxMi5wcm9wcy5wcmV2aW91c1BhZ2UoX3RoaXMxMi5zdGF0ZS5pbmJvdW5kUmV0dXJuKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25maXJtQWxlcnQoewogICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5pbmJvdW5kUmV0dXJucy5jb25maXJtUHJldmlvdXNQYWdlLmxhYmVsJywgJ1ZhbGlkYXRpb24gZXJyb3InKSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5pbmJvdW5kUmV0dXJucy5jb25maXJtUHJldmlvdXNQYWdlLm1lc3NhZ2UnLCAnQ2Fubm90IHNhdmUgZHVlIHRvIHZhbGlkYXRpb24gZXJyb3Igb24gcGFnZScpLAogICAgICAgICAgYnV0dG9uczogW3sKICAgICAgICAgICAgbGFiZWw6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5pbmJvdW5kUmV0dXJucy5jb25maXJtUHJldmlvdXNQYWdlLmNvcnJlY3RFcnJvci5sYWJlbCcsICdDb3JyZWN0IGVycm9yJykKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbGFiZWw6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5pbmJvdW5kUmV0dXJucy5jb25maXJtUHJldmlvdXNQYWdlLmNvbnRpbnVlLmxhYmVsJywgJ0NvbnRpbnVlIChsb3NlIHVuc2F2ZWQgd29yayknKSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMi5wcm9wcy5wcmV2aW91c1BhZ2UoX3RoaXMxMi5zdGF0ZS5pbmJvdW5kUmV0dXJuKTsKICAgICAgICAgICAgfQogICAgICAgICAgfV0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtLCB7CiAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkge30sCiAgICAgICAgdmFsaWRhdGU6IHRoaXMudmFsaWRhdGUsCiAgICAgICAgbXV0YXRvcnM6IF9vYmplY3RTcHJlYWQoe30sIGFycmF5TXV0YXRvcnMpLAogICAgICAgIGluaXRpYWxWYWx1ZXM6IHRoaXMuc3RhdGUuZm9ybVZhbHVlcywKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihfcmVmOSkgewogICAgICAgICAgdmFyIGhhbmRsZVN1Ym1pdCA9IF9yZWY5LmhhbmRsZVN1Ym1pdCwKICAgICAgICAgICAgdmFsdWVzID0gX3JlZjkudmFsdWVzLAogICAgICAgICAgICBpbnZhbGlkID0gX3JlZjkuaW52YWxpZDsKICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXggZmxleC1jb2x1bW4iCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnV0dG9ucy1jb250YWluZXIiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgZGlzYWJsZWQ6IGludmFsaWQsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTMuc2F2ZSh2YWx1ZXMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJmbG9hdC1yaWdodCBtYi0xIGJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYWxpZ24tc2VsZi1lbmQgbWwtMSBidG4teHMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1zYXZlIHByLTIiCiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uc2F2ZS5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2F2ZSIKICAgICAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBkaXNhYmxlZDogaW52YWxpZCwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMy5zYXZlQW5kRXhpdCh2YWx1ZXMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJmbG9hdC1yaWdodCBtYi0xIGJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYWxpZ24tc2VsZi1lbmQgbWwtMSBidG4teHMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1zaWduLW91dCBwci0yIgogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnNhdmVBbmRFeGl0LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTYXZlIGFuZCBleGl0IgogICAgICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgIGRpc2FibGVkOiBpbnZhbGlkLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczEzLnJlbW92ZUFsbCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJmbG9hdC1yaWdodCBtYi0xIGJ0biBidG4tb3V0bGluZS1kYW5nZXIgYWxpZ24tc2VsZi1lbmQgYnRuLXhzIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZmEgZmEtcmVtb3ZlIHByLTIiCiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uZGVsZXRlQWxsLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEZWxldGUgYWxsIgogICAgICAgICAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJmb3JtIiwgewogICAgICAgICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0CiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJ0YWJsZS1mb3JtIgogICAgICAgICAgfSwgXy5tYXAoRklFTERTLCBmdW5jdGlvbiAoZmllbGRDb25maWcsIGZpZWxkTmFtZSkgewogICAgICAgICAgICByZXR1cm4gcmVuZGVyRm9ybUZpZWxkKGZpZWxkQ29uZmlnLCBmaWVsZE5hbWUsIHsKICAgICAgICAgICAgICByZWNpcGllbnRzOiBfdGhpczEzLnByb3BzLnJlY2lwaWVudHMsCiAgICAgICAgICAgICAgcmVtb3ZlSXRlbTogX3RoaXMxMy5yZW1vdmVJdGVtLAogICAgICAgICAgICAgIGdldFNvcnRPcmRlcjogX3RoaXMxMy5nZXRTb3J0T3JkZXIsCiAgICAgICAgICAgICAgdXBkYXRlRm9ybVZhbHVlczogX3RoaXMxMy51cGRhdGVGb3JtVmFsdWVzLAogICAgICAgICAgICAgIG9yaWdpbklkOiBfdGhpczEzLnByb3BzLmluaXRpYWxWYWx1ZXMub3JpZ2luLmlkLAogICAgICAgICAgICAgIHZhbHVlczogdmFsdWVzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJzdWJtaXQtYnV0dG9ucyIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczEzLnByZXZpb3VzUGFnZSh2YWx1ZXMsIGludmFsaWQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtcHJpbWFyeSBidG4tZm9ybSBidG4teHMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5kZWZhdWx0LmJ1dHRvbi5wcmV2aW91cy5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUHJldmlvdXMiCiAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJzdWJtaXQiLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIGlmICghaW52YWxpZCkgewogICAgICAgICAgICAgICAgX3RoaXMxMy5uZXh0UGFnZSh2YWx1ZXMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLWZvcm0gZmxvYXQtcmlnaHQgYnRuLXhzIiwKICAgICAgICAgICAgZGlzYWJsZWQ6ICFfLnNvbWUodmFsdWVzLnJldHVybkl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgIHJldHVybiBpdGVtLnByb2R1Y3QgJiYgXy5wYXJzZUludChpdGVtLnF1YW50aXR5KTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLm5leHQubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk5leHQiCiAgICAgICAgICB9KSkpKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEFkZEl0ZW1zUGFnZTsKfShDb21wb25lbnQpOwp2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7CiAgcmV0dXJuIHsKICAgIHJlY2lwaWVudHM6IHN0YXRlLnVzZXJzLmRhdGEsCiAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZShnZXRUcmFuc2xhdGUoc3RhdGUubG9jYWxpemUpKSwKICAgIGluYm91bmRSZXR1cm5zVHJhbnNsYXRpb25zRmV0Y2hlZDogc3RhdGUuc2Vzc2lvbi5mZXRjaGVkVHJhbnNsYXRpb25zLmluYm91bmRSZXR1cm5zLAogICAgbWluaW11bUV4cGlyYXRpb25EYXRlOiBzdGF0ZS5zZXNzaW9uLm1pbmltdW1FeHBpcmF0aW9uRGF0ZQogIH07Cn07CmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCB7CiAgc2hvd1NwaW5uZXI6IHNob3dTcGlubmVyLAogIGhpZGVTcGlubmVyOiBoaWRlU3Bpbm5lciwKICBmZXRjaFVzZXJzOiBmZXRjaFVzZXJzCn0pKEFkZEl0ZW1zUGFnZSk7CkFkZEl0ZW1zUGFnZS5wcm9wVHlwZXMgPSB7CiAgaW5pdGlhbFZhbHVlczogUHJvcFR5cGVzLnNoYXBlKHsKICAgIG9yaWdpbjogUHJvcFR5cGVzLnNoYXBlKHsKICAgICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcKICAgIH0pCiAgfSkuaXNSZXF1aXJlZCwKICBwcmV2aW91c1BhZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgbmV4dFBhZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgc2hvd1NwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgaGlkZVNwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgZmV0Y2hVc2VyczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICByZWNpcGllbnRzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc2hhcGUoe30pKS5pc1JlcXVpcmVkLAogIHRyYW5zbGF0ZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBpbmJvdW5kUmV0dXJuc1RyYW5zbGF0aW9uc0ZldGNoZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsCiAgbWluaW11bUV4cGlyYXRpb25EYXRlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCiAgbWF0Y2g6IFByb3BUeXBlcy5zaGFwZSh7CiAgICBwYXJhbXM6IFByb3BUeXBlcy5zaGFwZSh7CiAgICAgIGluYm91bmRSZXR1cm5JZDogUHJvcFR5cGVzLnN0cmluZwogICAgfSkKICB9KS5pc1JlcXVpcmVkCn07"},null]}