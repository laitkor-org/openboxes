{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/stock-movement-wizard/outbound/SendMovementPage.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/stock-movement-wizard/outbound/SendMovementPage.jsx","mtime":1698037750000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IHZhciBfaSA9IG51bGwgPT0gYXJyID8gbnVsbCA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyWyJAQGl0ZXJhdG9yIl07IGlmIChudWxsICE9IF9pKSB7IHZhciBfcywgX2UsIF94LCBfciwgX2FyciA9IFtdLCBfbiA9ICEwLCBfZCA9ICExOyB0cnkgeyBpZiAoX3ggPSAoX2kgPSBfaS5jYWxsKGFycikpLm5leHQsIDAgPT09IGkpIHsgaWYgKE9iamVjdChfaSkgIT09IF9pKSByZXR1cm47IF9uID0gITE7IH0gZWxzZSBmb3IgKDsgIShfbiA9IChfcyA9IF94LmNhbGwoX2kpKS5kb25lKSAmJiAoX2Fyci5wdXNoKF9zLnZhbHVlKSwgX2Fyci5sZW5ndGggIT09IGkpOyBfbiA9ICEwKSB7IDsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSAhMCwgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgbnVsbCAhPSBfaVsicmV0dXJuIl0gJiYgKF9yID0gX2lbInJldHVybiJdKCksIE9iamVjdChfcikgIT09IF9yKSkgcmV0dXJuOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gfQpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH0KZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfQpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgInByb3RvdHlwZSIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH0KZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBrZXkgPSBfdG9Qcm9wZXJ0eUtleShrZXkpOyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7IHZhciBrZXkgPSBfdG9QcmltaXRpdmUoYXJnLCAic3RyaW5nIik7IHJldHVybiBfdHlwZW9mKGtleSkgPT09ICJzeW1ib2wiID8ga2V5IDogU3RyaW5nKGtleSk7IH0KZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7IGlmIChfdHlwZW9mKGlucHV0KSAhPT0gIm9iamVjdCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDsgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7IHZhciByZXMgPSBwcmltLmNhbGwoaW5wdXQsIGhpbnQgfHwgImRlZmF1bHQiKTsgaWYgKF90eXBlb2YocmVzKSAhPT0gIm9iamVjdCIpIHJldHVybiByZXM7IHRocm93IG5ldyBUeXBlRXJyb3IoIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuIik7IH0gcmV0dXJuIChoaW50ID09PSAic3RyaW5nIiA/IFN0cmluZyA6IE51bWJlcikoaW5wdXQpOyB9CmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBhcnJheU11dGF0b3JzIGZyb20gJ2ZpbmFsLWZvcm0tYXJyYXlzJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnOwppbXBvcnQgeyBjb25maXJtQWxlcnQgfSBmcm9tICdyZWFjdC1jb25maXJtLWFsZXJ0JzsKaW1wb3J0IERyb3B6b25lIGZyb20gJ3JlYWN0LWRyb3B6b25lJzsKaW1wb3J0IHsgRm9ybSB9IGZyb20gJ3JlYWN0LWZpbmFsLWZvcm0nOwppbXBvcnQgeyBnZXRUcmFuc2xhdGUgfSBmcm9tICdyZWFjdC1sb2NhbGl6ZS1yZWR1eCc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCBBbGVydCBmcm9tICdyZWFjdC1zLWFsZXJ0JzsKaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ3JlYWN0LXRpcHB5JzsKaW1wb3J0IHsgaGlkZVNwaW5uZXIsIHNob3dTcGlubmVyIH0gZnJvbSAnYWN0aW9ucyc7CmltcG9ydCBEb2N1bWVudEJ1dHRvbiBmcm9tICdjb21wb25lbnRzL0RvY3VtZW50QnV0dG9uJzsKaW1wb3J0IEFycmF5RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0FycmF5RmllbGQnOwppbXBvcnQgRGF0ZUZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9EYXRlRmllbGQnOwppbXBvcnQgTGFiZWxGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvTGFiZWxGaWVsZCc7CmltcG9ydCBTZWxlY3RGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvU2VsZWN0RmllbGQnOwppbXBvcnQgVGV4dEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9UZXh0RmllbGQnOwppbXBvcnQgQWxlcnRNZXNzYWdlIGZyb20gJ3V0aWxzL0FsZXJ0TWVzc2FnZSc7CmltcG9ydCB7IGhhbmRsZUVycm9yLCBoYW5kbGVTdWNjZXNzIH0gZnJvbSAndXRpbHMvYXBpQ2xpZW50JzsKaW1wb3J0IHsgcmVuZGVyRm9ybUZpZWxkIH0gZnJvbSAndXRpbHMvZm9ybS11dGlscyc7CmltcG9ydCB7IGZvcm1hdFByb2R1Y3REaXNwbGF5TmFtZSB9IGZyb20gJ3V0aWxzL2Zvcm0tdmFsdWVzLXV0aWxzJzsKaW1wb3J0IHsgZGVib3VuY2VMb2NhdGlvbnNGZXRjaCB9IGZyb20gJ3V0aWxzL29wdGlvbi11dGlscyc7CmltcG9ydCBUcmFuc2xhdGUsIHsgdHJhbnNsYXRlV2l0aERlZmF1bHRNZXNzYWdlIH0gZnJvbSAndXRpbHMvVHJhbnNsYXRlJzsKaW1wb3J0IHNwbGl0VHJhbnNsYXRpb24gZnJvbSAndXRpbHMvdHJhbnNsYXRpb24tdXRpbHMnOwppbXBvcnQgJ3JlYWN0LWNvbmZpcm0tYWxlcnQvc3JjL3JlYWN0LWNvbmZpcm0tYWxlcnQuY3NzJzsKdmFyIFNISVBNRU5UX0ZJRUxEUyA9IHsKICAnb3JpZ2luLm5hbWUnOiB7CiAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQub3JpZ2luLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnT3JpZ2luJywKICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUocGFyYW1zKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0RmllbGQsIHBhcmFtcyk7CiAgICB9LAogICAgYXR0cmlidXRlczogewogICAgICBkaXNhYmxlZDogdHJ1ZQogICAgfQogIH0sCiAgZGVzdGluYXRpb246IHsKICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5kZXN0aW5hdGlvbi5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0Rlc3RpbmF0aW9uJywKICAgIGZpZWxkS2V5OiAnJywKICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUocGFyYW1zKSB7CiAgICAgIGlmIChwYXJhbXMuY2FuQmVFZGl0ZWQgJiYgIXBhcmFtcy5oYXNTdG9ja0xpc3QpIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0RmllbGQsIHBhcmFtcyk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAogICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYpIHsKICAgICAgdmFyIGNhbkJlRWRpdGVkID0gX3JlZi5jYW5CZUVkaXRlZCwKICAgICAgICBoYXNTdG9ja0xpc3QgPSBfcmVmLmhhc1N0b2NrTGlzdCwKICAgICAgICBkZWJvdW5jZWRMb2NhdGlvbnNGZXRjaCA9IF9yZWYuZGVib3VuY2VkTG9jYXRpb25zRmV0Y2g7CiAgICAgIGlmIChjYW5CZUVkaXRlZCAmJiAhaGFzU3RvY2tMaXN0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgYXN5bmM6IHRydWUsCiAgICAgICAgICBzaG93VmFsdWVUb29sdGlwOiB0cnVlLAogICAgICAgICAgb3Blbk9uQ2xpY2s6IGZhbHNlLAogICAgICAgICAgYXV0b2xvYWQ6IGZhbHNlLAogICAgICAgICAgbG9hZE9wdGlvbnM6IGRlYm91bmNlZExvY2F0aW9uc0ZldGNoLAogICAgICAgICAgY2FjaGU6IGZhbHNlLAogICAgICAgICAgb3B0aW9uczogW10sCiAgICAgICAgICBmaWx0ZXJPcHRpb25zOiBmdW5jdGlvbiBmaWx0ZXJPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZShmaWVsZFZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gXy5nZXQoZmllbGRWYWx1ZSwgJ25hbWUnKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwKICAnZGVzdGluYXRpb24ubmFtZSc6IHsKICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5kZXN0aW5hdGlvbi5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0Rlc3RpbmF0aW9uJywKICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUocGFyYW1zKSB7CiAgICAgIGlmIChwYXJhbXMuY2FuQmVFZGl0ZWQgJiYgIXBhcmFtcy5oYXNTdG9ja0xpc3QpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEZpZWxkLCBwYXJhbXMpOwogICAgfSwKICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMikgewogICAgICB2YXIgY2FuQmVFZGl0ZWQgPSBfcmVmMi5jYW5CZUVkaXRlZCwKICAgICAgICBoYXNTdG9ja0xpc3QgPSBfcmVmMi5oYXNTdG9ja0xpc3Q7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGlzYWJsZWQ6ICFjYW5CZUVkaXRlZCB8fCBoYXNTdG9ja0xpc3QKICAgICAgfTsKICAgIH0KICB9LAogIGRhdGVTaGlwcGVkOiB7CiAgICB0eXBlOiBEYXRlRmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuc2hpcERhdGUubGFiZWwnLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdTaGlwbWVudCBkYXRlJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgZGF0ZUZvcm1hdDogJ01NL0REL1lZWVkgSEg6bW0gWicsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBzaG93VGltZVNlbGVjdDogdHJ1ZSwKICAgICAgYXV0b0NvbXBsZXRlOiAnb2ZmJywKICAgICAgc2hvd0Vycm9yOiB0cnVlCiAgICB9LAogICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYzKSB7CiAgICAgIHZhciBpc3N1ZWQgPSBfcmVmMy5pc3N1ZWQsCiAgICAgICAgc2hvd09ubHkgPSBfcmVmMy5zaG93T25seTsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXNhYmxlZDogaXNzdWVkIHx8IHNob3dPbmx5CiAgICAgIH07CiAgICB9CiAgfSwKICBzaGlwbWVudFR5cGU6IHsKICAgIHR5cGU6IFNlbGVjdEZpZWxkLAogICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LnNoaXBtZW50VHlwZS5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ1NoaXBtZW50IHR5cGUnLAogICAgYXR0cmlidXRlczogewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZSwKICAgICAgdmFsdWVLZXk6ICdpZCcsCiAgICAgIGxhYmVsS2V5OiAnbmFtZScKICAgIH0sCiAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjQpIHsKICAgICAgdmFyIHNoaXBtZW50VHlwZXMgPSBfcmVmNC5zaGlwbWVudFR5cGVzLAogICAgICAgIHJlY2VpdmVkID0gX3JlZjQucmVjZWl2ZWQsCiAgICAgICAgc2hvd09ubHkgPSBfcmVmNC5zaG93T25seTsKICAgICAgcmV0dXJuIHsKICAgICAgICBvcHRpb25zOiBzaGlwbWVudFR5cGVzLAogICAgICAgIGRpc2FibGVkOiBzaG93T25seSB8fCByZWNlaXZlZAogICAgICB9OwogICAgfQogIH0sCiAgdHJhY2tpbmdOdW1iZXI6IHsKICAgIHR5cGU6IFRleHRGaWVsZCwKICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC50cmFja2luZ051bWJlci5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ1RyYWNraW5nIG51bWJlcicsCiAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjUpIHsKICAgICAgdmFyIHJlY2VpdmVkID0gX3JlZjUucmVjZWl2ZWQsCiAgICAgICAgc2hvd09ubHkgPSBfcmVmNS5zaG93T25seTsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXNhYmxlZDogc2hvd09ubHkgfHwgcmVjZWl2ZWQKICAgICAgfTsKICAgIH0KICB9LAogIGRyaXZlck5hbWU6IHsKICAgIHR5cGU6IFRleHRGaWVsZCwKICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5kcml2ZXJOYW1lLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnRHJpdmVyIG5hbWUnLAogICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWY2KSB7CiAgICAgIHZhciByZWNlaXZlZCA9IF9yZWY2LnJlY2VpdmVkLAogICAgICAgIHNob3dPbmx5ID0gX3JlZjYuc2hvd09ubHk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGlzYWJsZWQ6IHNob3dPbmx5IHx8IHJlY2VpdmVkCiAgICAgIH07CiAgICB9CiAgfSwKICBjb21tZW50czogewogICAgdHlwZTogVGV4dEZpZWxkLAogICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LmNvbW1lbnRzLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnQ29tbWVudHMnLAogICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWY3KSB7CiAgICAgIHZhciByZWNlaXZlZCA9IF9yZWY3LnJlY2VpdmVkLAogICAgICAgIHNob3dPbmx5ID0gX3JlZjcuc2hvd09ubHk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGlzYWJsZWQ6IHNob3dPbmx5IHx8IHJlY2VpdmVkCiAgICAgIH07CiAgICB9CiAgfSwKICBleHBlY3RlZERlbGl2ZXJ5RGF0ZTogewogICAgdHlwZTogRGF0ZUZpZWxkLAogICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LmV4cGVjdGVkRGVsaXZlcnlEYXRlLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnRXhwZWN0ZWQgcmVjZWlwdCBkYXRlJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgZGF0ZUZvcm1hdDogJ01NL0REL1lZWVknLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgc2hvd1RpbWVTZWxlY3Q6IGZhbHNlLAogICAgICBhdXRvQ29tcGxldGU6ICdvZmYnCiAgICB9CiAgfQp9Owp2YXIgRklFTERTID0gewogIHRhYmxlSXRlbXM6IHsKICAgIHR5cGU6IEFycmF5RmllbGQsCiAgICB2aXJ0dWFsaXplZDogdHJ1ZSwKICAgIHRvdGFsQ291bnQ6IGZ1bmN0aW9uIHRvdGFsQ291bnQoX3JlZjgpIHsKICAgICAgdmFyIF90b3RhbENvdW50ID0gX3JlZjgudG90YWxDb3VudDsKICAgICAgcmV0dXJuIF90b3RhbENvdW50OwogICAgfSwKICAgIGlzUm93TG9hZGVkOiBmdW5jdGlvbiBpc1Jvd0xvYWRlZChfcmVmOSkgewogICAgICB2YXIgX2lzUm93TG9hZGVkID0gX3JlZjkuaXNSb3dMb2FkZWQ7CiAgICAgIHJldHVybiBfaXNSb3dMb2FkZWQ7CiAgICB9LAogICAgbG9hZE1vcmVSb3dzOiBmdW5jdGlvbiBsb2FkTW9yZVJvd3MoX3JlZjEwKSB7CiAgICAgIHZhciBfbG9hZE1vcmVSb3dzID0gX3JlZjEwLmxvYWRNb3JlUm93czsKICAgICAgcmV0dXJuIF9sb2FkTW9yZVJvd3MoKTsKICAgIH0sCiAgICBpc0ZpcnN0UGFnZUxvYWRlZDogZnVuY3Rpb24gaXNGaXJzdFBhZ2VMb2FkZWQoX3JlZjExKSB7CiAgICAgIHZhciBfaXNGaXJzdFBhZ2VMb2FkZWQgPSBfcmVmMTEuaXNGaXJzdFBhZ2VMb2FkZWQ7CiAgICAgIHJldHVybiBfaXNGaXJzdFBhZ2VMb2FkZWQ7CiAgICB9LAogICAgZ2V0RHluYW1pY1Jvd0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNSb3dBdHRyKF9yZWYxMikgewogICAgICB2YXIgcm93VmFsdWVzID0gX3JlZjEyLnJvd1ZhbHVlczsKICAgICAgcmV0dXJuIHsKICAgICAgICBjbGFzc05hbWU6IHJvd1ZhbHVlcy5yZWNhbGxlZCA/ICdyZWNhbGxlZCAnIDogJycKICAgICAgfTsKICAgIH0sCiAgICBmaWVsZHM6IHsKICAgICAgcmVjYWxsZWQ6IHsKICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSBwYXJhbXMuZmllbGRWYWx1ZTsKICAgICAgICAgIGlmIChmaWVsZFZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWNlbnRlciIKICAgICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgICAgICAgIGh0bWw6IHBhcmFtcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQucmVjYWxsZWRMb3QubWVzc2FnZScsICdUaGlzIGxvdCBoYXMgYmVlbiByZWNhbGxlZCcpLAogICAgICAgICAgICAgIHRoZW1lOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICAgIGRlbGF5OiAiMTUwIiwKICAgICAgICAgICAgICBkdXJhdGlvbjogIjI1MCIsCiAgICAgICAgICAgICAgaGlkZURlbGF5OiAiNTAiCiAgICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJiIiwgbnVsbCwgIlx1MjRDNyIpKSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9LAogICAgICAgIGxhYmVsOiAnJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJycsCiAgICAgICAgZmxleFdpZHRoOiAnMC41JwogICAgICB9LAogICAgICBwYWxsZXROYW1lOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQucGFja0xldmVsMS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQYWNrIGxldmVsIDEnLAogICAgICAgIGZsZXhXaWR0aDogJzMnLAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMTMpIHsKICAgICAgICAgIHZhciBpc1BhbGxldE5hbWVFbXB0eSA9IF9yZWYxMy5pc1BhbGxldE5hbWVFbXB0eTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGhpZGU6IGlzUGFsbGV0TmFtZUVtcHR5CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgYm94TmFtZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LnBhY2tMZXZlbDIubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUGFjayBsZXZlbCAyJywKICAgICAgICBmbGV4V2lkdGg6ICczJywKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjE0KSB7CiAgICAgICAgICB2YXIgaXNCb3hOYW1lRW1wdHkgPSBfcmVmMTQuaXNCb3hOYW1lRW1wdHk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoaWRlOiBpc0JveE5hbWVFbXB0eQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHByb2R1Y3RDb2RlOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuY29kZS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDb2RlJywKICAgICAgICBmbGV4V2lkdGg6ICczLjUnCiAgICAgIH0sCiAgICAgIHByb2R1Y3Q6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5wcm9kdWN0LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Byb2R1Y3QnLAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMTUpIHsKICAgICAgICAgIHZhciBfZmllbGRWYWx1ZSRkaXNwbGF5TmE7CiAgICAgICAgICB2YXIgaXNCb3hOYW1lRW1wdHkgPSBfcmVmMTUuaXNCb3hOYW1lRW1wdHksCiAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBfcmVmMTUuZmllbGRWYWx1ZSwKICAgICAgICAgICAgaXNQYWxsZXROYW1lRW1wdHkgPSBfcmVmMTUuaXNQYWxsZXROYW1lRW1wdHk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBmbGV4V2lkdGg6IDcgKyAoaXNCb3hOYW1lRW1wdHkgPyAzIDogMCkgKyAoaXNQYWxsZXROYW1lRW1wdHkgPyAzIDogMCksCiAgICAgICAgICAgIHNob3dWYWx1ZVRvb2x0aXA6ICEhKGZpZWxkVmFsdWUgIT09IG51bGwgJiYgZmllbGRWYWx1ZSAhPT0gdm9pZCAwICYmIChfZmllbGRWYWx1ZSRkaXNwbGF5TmEgPSBmaWVsZFZhbHVlLmRpc3BsYXlOYW1lcykgIT09IG51bGwgJiYgX2ZpZWxkVmFsdWUkZGlzcGxheU5hICE9PSB2b2lkIDAgJiYgX2ZpZWxkVmFsdWUkZGlzcGxheU5hWyJkZWZhdWx0Il0pLAogICAgICAgICAgICB0b29sdGlwVmFsdWU6IGZpZWxkVmFsdWUgPT09IG51bGwgfHwgZmllbGRWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmllbGRWYWx1ZS5uYW1lCiAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgY2xhc3NOYW1lOiAndGV4dC1sZWZ0JywKICAgICAgICAgIGZvcm1hdFZhbHVlOiBmb3JtYXRQcm9kdWN0RGlzcGxheU5hbWUKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxvdE51bWJlcjogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LmxvdC5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdMb3QnLAogICAgICAgIGZsZXhXaWR0aDogJzMuNScKICAgICAgfSwKICAgICAgZXhwaXJhdGlvbkRhdGU6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5leHBpcnkubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXhwaXJ5JywKICAgICAgICBmbGV4V2lkdGg6ICczLjUnCiAgICAgIH0sCiAgICAgIHF1YW50aXR5U2hpcHBlZDogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgZml4ZWRXaWR0aDogJzE1MHB4JywKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQucXVhbnRpdHlQaWNrZWQubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUXR5IFBpY2tlZCcKICAgICAgfSwKICAgICAgYmluTG9jYXRpb246IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC5iaW5Mb2NhdGlvbi5sYWJlbCcsCiAgICAgICAgZmxleFdpZHRoOiAnMy41JywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0JpbiBMb2NhdGlvbicsCiAgICAgICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYxNikgewogICAgICAgICAgdmFyIGhhc0JpbkxvY2F0aW9uU3VwcG9ydCA9IF9yZWYxNi5oYXNCaW5Mb2NhdGlvblN1cHBvcnQ7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoaWRlOiAhaGFzQmluTG9jYXRpb25TdXBwb3J0CiAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZSwKICAgICAgICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZShmaWVsZFZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IgogICAgICAgICAgICB9LCBmaWVsZFZhbHVlLnpvbmVOYW1lID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJ0ZXh0LXRydW5jYXRlIiwKICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgbWluV2lkdGg6IDMwLAogICAgICAgICAgICAgICAgZmxleFNocmluazogMjAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZpZWxkVmFsdWUuem9uZU5hbWUpIDogJycsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAidGV4dC10cnVuY2F0ZSIKICAgICAgICAgICAgfSwgZmllbGRWYWx1ZS56b25lTmFtZSA/ICI6ICIuY29uY2F0KGZpZWxkVmFsdWUubmFtZSkgOiBmaWVsZFZhbHVlLm5hbWUpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgICdyZWNpcGllbnQubmFtZSc6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGZsZXhXaWR0aDogJzMuNScsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LnJlY2lwaWVudC5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWNpcGllbnQnCiAgICAgIH0KICAgIH0KICB9Cn07CnZhciBhcGlDbGllbnQgPSBheGlvcy5jcmVhdGUoe30pOwoKLyoqCiAqIFRoZSBsYXN0IHN0ZXAgb2Ygc3RvY2sgbW92ZW1lbnQgd2hlcmUgdXNlciBjYW4gc2VlIHRoZSB3aG9sZSBtb3ZlbWVudCwKICogcHJpbnQgZG9jdW1lbnRzLCB1cGxvYWQgZG9jdW1lbnRzLCBhZGQgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhbmQgc2VuZCBpdC4KICovCnZhciBTZW5kTW92ZW1lbnRQYWdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFNlbmRNb3ZlbWVudFBhZ2UsIF9Db21wb25lbnQpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU2VuZE1vdmVtZW50UGFnZSk7CiAgZnVuY3Rpb24gU2VuZE1vdmVtZW50UGFnZShwcm9wcykgewogICAgdmFyIF90aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlbmRNb3ZlbWVudFBhZ2UpOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7CiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkYXRhRmV0Y2hlZCIsIGZhbHNlKTsKICAgIF90aGlzLnN0YXRlID0gewogICAgICBzaGlwbWVudFR5cGVzOiBbXSwKICAgICAgZG9jdW1lbnRzOiBbXSwKICAgICAgZmlsZXM6IFtdLAogICAgICB2YWx1ZXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXMucHJvcHMuaW5pdGlhbFZhbHVlcyksIHt9LCB7CiAgICAgICAgdGFibGVJdGVtczogW10KICAgICAgfSksCiAgICAgIHRvdGFsQ291bnQ6IDAsCiAgICAgIGlzRmlyc3RQYWdlTG9hZGVkOiBmYWxzZSwKICAgICAgaXNEcm9wZG93blZpc2libGU6IGZhbHNlLAogICAgICBzaG93QWxlcnQ6IGZhbHNlLAogICAgICBhbGVydE1lc3NhZ2U6ICcnCiAgICB9OwogICAgX3RoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgIF90aGlzLm9uRHJvcCA9IF90aGlzLm9uRHJvcC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLmlzUm93TG9hZGVkID0gX3RoaXMuaXNSb3dMb2FkZWQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy5sb2FkTW9yZVJvd3MgPSBfdGhpcy5sb2FkTW9yZVJvd3MuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy50b2dnbGVEcm9wZG93biA9IF90aGlzLnRvZ2dsZURyb3Bkb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMudmFsaWRhdGUgPSBfdGhpcy52YWxpZGF0ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLmhhbmRsZVZhbGlkYXRpb25FcnJvcnMgPSBfdGhpcy5oYW5kbGVWYWxpZGF0aW9uRXJyb3JzLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMuZGVib3VuY2VkTG9jYXRpb25zRmV0Y2ggPSBkZWJvdW5jZUxvY2F0aW9uc0ZldGNoKF90aGlzLnByb3BzLmRlYm91bmNlVGltZSwgX3RoaXMucHJvcHMubWluU2VhcmNoTGVuZ3RoKTsKICAgIGFwaUNsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGhhbmRsZVN1Y2Nlc3MsIF90aGlzLmhhbmRsZVZhbGlkYXRpb25FcnJvcnMpOwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoU2VuZE1vdmVtZW50UGFnZSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICBpZiAodGhpcy5wcm9wcy5zdG9ja01vdmVtZW50VHJhbnNsYXRpb25zRmV0Y2hlZCkgewogICAgICAgIHRoaXMuZGF0YUZldGNoZWQgPSB0cnVlOwogICAgICAgIHRoaXMuZmV0Y2hTdG9ja01vdmVtZW50RGF0YSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHsKICAgICAgaWYgKG5leHRQcm9wcy5zdG9ja01vdmVtZW50VHJhbnNsYXRpb25zRmV0Y2hlZCAmJiAhdGhpcy5kYXRhRmV0Y2hlZCkgewogICAgICAgIHRoaXMuZGF0YUZldGNoZWQgPSB0cnVlOwogICAgICAgIHRoaXMuZmV0Y2hTdG9ja01vdmVtZW50RGF0YSgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgZmlsZXMnIGFycmF5IGFmdGVyIGRyb3BwaW5nIHRoZW0gdG8gZHJvcHpvbmUgYXJlYS4KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBuZXdGaWxlcwogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAib25Ecm9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyb3AobmV3RmlsZXMpIHsKICAgICAgdmFyIGZpbGVzID0gdGhpcy5zdGF0ZS5maWxlczsKICAgICAgdmFyIGRpZmZlcmVuY2UgPSBfLmRpZmZlcmVuY2VCeShmaWxlcywgbmV3RmlsZXMsICduYW1lJyk7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGZpbGVzOiBfLmNvbmNhdChkaWZmZXJlbmNlLCBuZXdGaWxlcykKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25TYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNhdmUodmFsdWVzKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgIHRoaXMuc2F2ZVZhbHVlcyh2YWx1ZXMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgIGlmICh2YWx1ZXMuc3RhdHVzQ29kZSA9PT0gJ0RJU1BBVENIRUQnKSB7CiAgICAgICAgICBfdGhpczIuZmV0Y2hTdG9ja01vdmVtZW50RGF0YSgpOwogICAgICAgIH0KICAgICAgICBBbGVydC5zdWNjZXNzKF90aGlzMi5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuYWxlcnQuc2F2ZVN1Y2Nlc3MubGFiZWwnLCAnQ2hhbmdlcyBzYXZlZCBzdWNjZXNzZnVsbHknKSwgewogICAgICAgICAgdGltZW91dDogMzAwMAogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlVmFsdWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlVmFsdWVzKHZhbHVlcykgewogICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICAnZGVzdGluYXRpb24uaWQnOiB2YWx1ZXMuZGVzdGluYXRpb24uaWQsCiAgICAgICAgZGF0ZVNoaXBwZWQ6IHZhbHVlcy5kYXRlU2hpcHBlZCwKICAgICAgICAnc2hpcG1lbnRUeXBlLmlkJzogdmFsdWVzLnNoaXBtZW50VHlwZS5pZCwKICAgICAgICB0cmFja2luZ051bWJlcjogdmFsdWVzLnRyYWNraW5nTnVtYmVyIHx8ICcnLAogICAgICAgIGRyaXZlck5hbWU6IHZhbHVlcy5kcml2ZXJOYW1lIHx8ICcnLAogICAgICAgIGNvbW1lbnRzOiB2YWx1ZXMuY29tbWVudHMgfHwgJycsCiAgICAgICAgZXhwZWN0ZWREZWxpdmVyeURhdGU6IHZhbHVlcy5leHBlY3RlZERlbGl2ZXJ5RGF0ZSB8fCAnJwogICAgICB9OwogICAgICByZXR1cm4gdGhpcy5zYXZlU2hpcG1lbnQocGF5bG9hZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmVzIGEgZmlsZSBieSBuYW1lIGZyb20gZmlsZXMgYXJyYXkKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGaWxlKG5hbWUpIHsKICAgICAgdmFyIGZpbGVzID0gdGhpcy5zdGF0ZS5maWxlczsKICAgICAgXy5yZW1vdmUoZmlsZXMsIGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgcmV0dXJuIGZpbGUubmFtZSA9PT0gbmFtZTsKICAgICAgfSk7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGZpbGVzOiBmaWxlcwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBidWxrIG9mIGZpbGVzIGJ5IG5hbWUgZnJvbSBmaWxlcyBhcnJheQogICAgICogQHBhcmFtIHtBcnJheX0gbmFtZXMKICAgICAqIEBwdWJsaWMKICAgICAqLwogIH0sIHsKICAgIGtleTogInJlbW92ZUZpbGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGaWxlcyhuYW1lcykgewogICAgICB2YXIgZmlsZXMgPSB0aGlzLnN0YXRlLmZpbGVzOwogICAgICBfLmZvckVhY2gobmFtZXMsIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgXy5yZW1vdmUoZmlsZXMsIGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lID09PSBuYW1lOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZmlsZXM6IGZpbGVzCiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogRmV0Y2hlcyBhdmFpbGFibGUgc2hpcG1lbnQgdHlwZXMgZnJvbSBBUEkuCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJmZXRjaFNoaXBtZW50VHlwZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoU2hpcG1lbnRUeXBlcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciB1cmwgPSAnL29wZW5ib3hlcy9hcGkvZ2VuZXJpYy9zaGlwbWVudFR5cGUnOwogICAgICByZXR1cm4gYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHNoaXBtZW50VHlwZXMgPSBfLm1hcChyZXNwb25zZS5kYXRhLmRhdGEsIGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgICB2YXIgXyRzcGxpdCA9IF8uc3BsaXQodHlwZS5uYW1lLCAnfGZyOicpLAogICAgICAgICAgICBfJHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF8kc3BsaXQsIDIpLAogICAgICAgICAgICBlbiA9IF8kc3BsaXQyWzBdLAogICAgICAgICAgICBmciA9IF8kc3BsaXQyWzFdOwogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdHlwZSksIHt9LCB7CiAgICAgICAgICAgIGxhYmVsOiBfdGhpczMucHJvcHMubG9jYWxlID09PSAnZnInICYmIGZyID8gZnIgOiBlbgogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMzLnNldFN0YXRlKHsKICAgICAgICAgIHNoaXBtZW50VHlwZXM6IHNoaXBtZW50VHlwZXMKICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoU3RvY2tNb3ZlbWVudEl0ZW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaFN0b2NrTW92ZW1lbnRJdGVtcygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tNb3ZlbWVudHMvIi5jb25jYXQodGhpcy5zdGF0ZS52YWx1ZXMuc3RvY2tNb3ZlbWVudElkLCAiL3N0b2NrTW92ZW1lbnRJdGVtcz9zdGVwTnVtYmVyPTYiKTsKICAgICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgdmFyIHRhYmxlSXRlbXMgPSBkYXRhOwogICAgICAgIF90aGlzNC5zZXRTdGF0ZSh7CiAgICAgICAgICB2YWx1ZXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXM0LnN0YXRlLnZhbHVlcyksIHt9LCB7CiAgICAgICAgICAgIHRhYmxlSXRlbXM6IHRhYmxlSXRlbXMKICAgICAgICAgIH0pCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWRNb3JlUm93cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZE1vcmVSb3dzKF9yZWYxNykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdmFyIHN0YXJ0SW5kZXggPSBfcmVmMTcuc3RhcnRJbmRleDsKICAgICAgaWYgKHRoaXMuc3RhdGUudG90YWxDb3VudCkgewogICAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tNb3ZlbWVudHMvIi5jb25jYXQodGhpcy5zdGF0ZS52YWx1ZXMuc3RvY2tNb3ZlbWVudElkLCAiL3N0b2NrTW92ZW1lbnRJdGVtcz9vZmZzZXQ9IikuY29uY2F0KHN0YXJ0SW5kZXgsICImbWF4PSIpLmNvbmNhdCh0aGlzLnByb3BzLnBhZ2VTaXplLCAiJnN0ZXBOdW1iZXI9NiIpOwogICAgICAgIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICBfdGhpczUuc2V0U3RhdGUoewogICAgICAgICAgICB2YWx1ZXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXM1LnN0YXRlLnZhbHVlcyksIHt9LCB7CiAgICAgICAgICAgICAgdGFibGVJdGVtczogXy51bmlxQnkoXy5jb25jYXQoX3RoaXM1LnN0YXRlLnZhbHVlcy50YWJsZUl0ZW1zLCBkYXRhKSwgJ3NoaXBtZW50SXRlbUlkJykKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGlzRmlyc3RQYWdlTG9hZGVkOiB0cnVlCiAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpczUuc3RhdGUudmFsdWVzLnRhYmxlSXRlbXMubGVuZ3RoICE9PSBfdGhpczUuc3RhdGUudG90YWxDb3VudCkgewogICAgICAgICAgICAgIF90aGlzNS5sb2FkTW9yZVJvd3MoewogICAgICAgICAgICAgICAgc3RhcnRJbmRleDogc3RhcnRJbmRleCArIF90aGlzNS5wcm9wcy5wYWdlU2l6ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImlzUm93TG9hZGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1Jvd0xvYWRlZChfcmVmMTgpIHsKICAgICAgdmFyIGluZGV4ID0gX3JlZjE4LmluZGV4OwogICAgICByZXR1cm4gISF0aGlzLnN0YXRlLnZhbHVlcy50YWJsZUl0ZW1zW2luZGV4XTsKICAgIH0KCiAgICAvKioKICAgICAqIEZldGNoZXMgNXRoIHN0ZXAgZGF0YSBmcm9tIGN1cnJlbnQgc3RvY2sgbW92ZW1lbnQuCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJmZXRjaFN0b2NrTW92ZW1lbnREYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaFN0b2NrTW92ZW1lbnREYXRhKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja01vdmVtZW50cy8iLmNvbmNhdCh0aGlzLnN0YXRlLnZhbHVlcy5zdG9ja01vdmVtZW50SWQsICI/c3RlcE51bWJlcj02Iik7CiAgICAgIHJldHVybiBhcGlDbGllbnQuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgc3RvY2tNb3ZlbWVudERhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgdmFyIGFzc29jaWF0aW9ucyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5hc3NvY2lhdGlvbnM7CiAgICAgICAgdmFyIHRvdGFsQ291bnQgPSByZXNwb25zZS5kYXRhLnRvdGFsQ291bnQ7CiAgICAgICAgdmFyIGRvY3VtZW50cyA9IF8uZmlsdGVyKGFzc29jaWF0aW9ucy5kb2N1bWVudHMsIGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICAgIHJldHVybiBkb2Muc3RlcE51bWJlciA9PT0gNTsKICAgICAgICB9KTsKICAgICAgICB2YXIgZGVzdGluYXRpb25UeXBlID0gc3RvY2tNb3ZlbWVudERhdGEuZGVzdGluYXRpb24ubG9jYXRpb25UeXBlOwogICAgICAgIF90aGlzNi5zZXRTdGF0ZSh7CiAgICAgICAgICBkb2N1bWVudHM6IGRvY3VtZW50cywKICAgICAgICAgIHRvdGFsQ291bnQ6IHRvdGFsQ291bnQsCiAgICAgICAgICB2YWx1ZXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXM2LnN0YXRlLnZhbHVlcyksIHt9LCB7CiAgICAgICAgICAgIGRhdGVTaGlwcGVkOiBzdG9ja01vdmVtZW50RGF0YS5kYXRlU2hpcHBlZCwKICAgICAgICAgICAgc2hpcG1lbnRUeXBlOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0b2NrTW92ZW1lbnREYXRhLnNoaXBtZW50VHlwZSksIHt9LCB7CiAgICAgICAgICAgICAgbGFiZWw6IHNwbGl0VHJhbnNsYXRpb24oc3RvY2tNb3ZlbWVudERhdGEuc2hpcG1lbnRUeXBlLm5hbWUsIF90aGlzNi5wcm9wcy5sb2NhbGUpCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0cmFja2luZ051bWJlcjogc3RvY2tNb3ZlbWVudERhdGEudHJhY2tpbmdOdW1iZXIsCiAgICAgICAgICAgIGRyaXZlck5hbWU6IHN0b2NrTW92ZW1lbnREYXRhLmRyaXZlck5hbWUsCiAgICAgICAgICAgIGNvbW1lbnRzOiBzdG9ja01vdmVtZW50RGF0YS5jb21tZW50cywKICAgICAgICAgICAgZXhwZWN0ZWREZWxpdmVyeURhdGU6IHN0b2NrTW92ZW1lbnREYXRhLmV4cGVjdGVkRGVsaXZlcnlEYXRlLAogICAgICAgICAgICAvLyBCZWxvdyB2YWx1ZXMgYXJlIHJlYXNzaWduZWQgaW4gY2FzZSBvZiBlZGl0aW5nIGRlc3RpbmF0aW9uIG9yIGRlc2NyaXB0aW9uCiAgICAgICAgICAgIG5hbWU6IHN0b2NrTW92ZW1lbnREYXRhLm5hbWUsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzdG9ja01vdmVtZW50RGF0YS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgZGVzdGluYXRpb246IHsKICAgICAgICAgICAgICBpZDogc3RvY2tNb3ZlbWVudERhdGEuZGVzdGluYXRpb24uaWQsCiAgICAgICAgICAgICAgdHlwZTogZGVzdGluYXRpb25UeXBlID8gZGVzdGluYXRpb25UeXBlLmxvY2F0aW9uVHlwZUNvZGUgOiBudWxsLAogICAgICAgICAgICAgIG5hbWU6IHN0b2NrTW92ZW1lbnREYXRhLmRlc3RpbmF0aW9uLm5hbWUsCiAgICAgICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChzdG9ja01vdmVtZW50RGF0YS5kZXN0aW5hdGlvbi5uYW1lLCAiXG4gICAgICAgICAgICAgICAgWyIpLmNvbmNhdChkZXN0aW5hdGlvblR5cGUgPyBkZXN0aW5hdGlvblR5cGUuZGVzY3JpcHRpb24gOiBudWxsLCAiXSIpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlcXVlc3RUeXBlOiB7CiAgICAgICAgICAgICAgbmFtZTogc3RvY2tNb3ZlbWVudERhdGEucmVxdWVzdFR5cGUubmFtZSwKICAgICAgICAgICAgICBsYWJlbDogc3RvY2tNb3ZlbWVudERhdGEucmVxdWVzdFR5cGUubmFtZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzaGlwbWVudFN0YXR1czogc3RvY2tNb3ZlbWVudERhdGEuc2hpcG1lbnRTdGF0dXMKICAgICAgICAgIH0pCiAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM2LnByb3BzLm5leHRQYWdlKF90aGlzNi5zdGF0ZS52YWx1ZXMpOwogICAgICAgICAgX3RoaXM2LmZldGNoU2hpcG1lbnRUeXBlcygpOwogICAgICAgICAgaWYgKCFfdGhpczYucHJvcHMuaXNQYWdpbmF0ZWQpIHsKICAgICAgICAgICAgX3RoaXM2LmZldGNoU3RvY2tNb3ZlbWVudEl0ZW1zKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZHMgZmlsZXMgdXBsb2FkZWQgYnkgdXNlciB0byBiYWNrZW5kLgogICAgICogQHBhcmFtIHtvYmplY3R9IGZpbGUKICAgICAqIEBwdWJsaWMKICAgICAqLwogIH0sIHsKICAgIGtleTogInNlbmRGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kRmlsZShmaWxlKSB7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9zdG9ja01vdmVtZW50L3VwbG9hZERvY3VtZW50LyIuY29uY2F0KHRoaXMuc3RhdGUudmFsdWVzLnN0b2NrTW92ZW1lbnRJZCk7CiAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGRhdGEuYXBwZW5kKCdmaWxlQ29udGVudHMnLCBmaWxlKTsKICAgICAgcmV0dXJuIGFwaUNsaWVudC5wb3N0KHVybCwgZGF0YSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBCdWxrIHNlbmQgb2YgZmlsZXMgdXBsb2FkZWQgYnkgdXNlciB0byBiYWNrZW5kLgogICAgICogQHBhcmFtIHtBcnJheX0gZmlsZXMKICAgICAqIEBwdWJsaWMKICAgICAqLwogIH0sIHsKICAgIGtleTogInNlbmRGaWxlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZEZpbGVzKGZpbGVzKSB7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9zdG9ja01vdmVtZW50L3VwbG9hZERvY3VtZW50cy8iLmNvbmNhdCh0aGlzLnN0YXRlLnZhbHVlcy5zdG9ja01vdmVtZW50SWQpOwogICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBfLmZvckVhY2goZmlsZXMsIGZ1bmN0aW9uIChmaWxlLCBpZHgpIHsKICAgICAgICBkYXRhLmFwcGVuZCgiZmlsZXNDb250ZW50c1siLmNvbmNhdChpZHgsICJdIiksIGZpbGUpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGFwaUNsaWVudC5wb3N0KHVybCwgZGF0YSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTYXZlcyBkYXRhIHdpdGggc2hpcG1lbnQgZGV0YWlscy4KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXlsb2FkCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJzYXZlU2hpcG1lbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVTaGlwbWVudChwYXlsb2FkKSB7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tNb3ZlbWVudHMvIi5jb25jYXQodGhpcy5zdGF0ZS52YWx1ZXMuc3RvY2tNb3ZlbWVudElkLCAiL3VwZGF0ZVNoaXBtZW50Iik7CiAgICAgIHJldHVybiBhcGlDbGllbnQucG9zdCh1cmwsIHBheWxvYWQpOwogICAgfQoKICAgIC8qKgogICAgICogVXBkYXRlcyBzdG9jayBtb3ZlbWVudCBzdGF0dXMgdG8gRElTUEFUQ0hFRCB3aXRoIHBvc3QgbWV0aG9kLgogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAic3RhdGVUcmFuc2l0aW9uVG9Jc3N1ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXRlVHJhbnNpdGlvblRvSXNzdWVkKCkgewogICAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL3N0b2NrTW92ZW1lbnRzLyIuY29uY2F0KHRoaXMuc3RhdGUudmFsdWVzLnN0b2NrTW92ZW1lbnRJZCwgIi9zdGF0dXMiKTsKICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgc3RhdHVzOiAnRElTUEFUQ0hFRCcKICAgICAgfTsKICAgICAgcmV0dXJuIGFwaUNsaWVudC5wb3N0KHVybCwgcGF5bG9hZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVcGxvYWRzIGZpbGVzIGFuZCBzZW5kcyB0aGUgd2hvbGUgc3RvY2sgbW92ZW1lbnQuCiAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVzCiAgICAgKiBAcHVibGljCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJzZW5kRmlsZXNBbmRTYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kRmlsZXNBbmRTYXZlKHZhbHVlcykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgdmFyIGVycm9ycyA9IHRoaXMudmFsaWRhdGUodmFsdWVzKTsKICAgICAgaWYgKF8uaXNFbXB0eShlcnJvcnMpKSB7CiAgICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICAgIHZhciBmaWxlcyA9IHRoaXMuc3RhdGUuZmlsZXM7CiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIHRoaXMuc2VuZEZpbGVzKGZpbGVzKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQWxlcnQuc3VjY2VzcyhfdGhpczcucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja01vdmVtZW50LmFsZXJ0LmZpbGVzU3VjY2Vzcy5sYWJlbCcsICdGaWxlcyB1cGxvYWRlZCBzdWNjZXNzZnVseSEnKSwgewogICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzNy5yZW1vdmVGaWxlcyhfLm1hcChmaWxlcywgZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lOwogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIF90aGlzNy5wcmVwYXJlUmVxdWVzdEFuZFN1Ym1pdFN0b2NrTW92ZW1lbnQodmFsdWVzKTsKICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIEFsZXJ0LmVycm9yKF90aGlzNy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuYWxlcnQuZmlsZXNFcnJvci5sYWJlbCcsICdFcnJvciBvY2N1cmVkIGR1cmluZyBmaWxlcyB1cGxvYWQhJykpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgIHRoaXMuc2VuZEZpbGUoZmlsZXNbMF0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBBbGVydC5zdWNjZXNzKF90aGlzNy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuYWxlcnQuZmlsZVN1Y2Nlc3MubGFiZWwnLCAnRmlsZSB1cGxvYWRlZCBzdWNjZXNzZnVseSEnKSwgewogICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzNy5yZW1vdmVGaWxlKGZpbGVzWzBdLm5hbWUpOwogICAgICAgICAgICBfdGhpczcucHJlcGFyZVJlcXVlc3RBbmRTdWJtaXRTdG9ja01vdmVtZW50KHZhbHVlcyk7CiAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBBbGVydC5lcnJvcihfdGhpczcucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja01vdmVtZW50LmFsZXJ0LmZpbGVFcnJvci5sYWJlbCcsICdFcnJvciBvY2N1cmVkIGR1cmluZyBmaWxlIHVwbG9hZCEnKSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5wcmVwYXJlUmVxdWVzdEFuZFN1Ym1pdFN0b2NrTW92ZW1lbnQodmFsdWVzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcmVwYXJlUmVxdWVzdEFuZFN1Ym1pdFN0b2NrTW92ZW1lbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZXBhcmVSZXF1ZXN0QW5kU3VibWl0U3RvY2tNb3ZlbWVudCh2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHZhciBwYXlsb2FkID0gewogICAgICAgIGRhdGVTaGlwcGVkOiB2YWx1ZXMuZGF0ZVNoaXBwZWQsCiAgICAgICAgJ3NoaXBtZW50VHlwZS5pZCc6IHZhbHVlcy5zaGlwbWVudFR5cGUuaWQsCiAgICAgICAgdHJhY2tpbmdOdW1iZXI6IHZhbHVlcy50cmFja2luZ051bWJlciB8fCAnJywKICAgICAgICBkcml2ZXJOYW1lOiB2YWx1ZXMuZHJpdmVyTmFtZSB8fCAnJywKICAgICAgICBjb21tZW50czogdmFsdWVzLmNvbW1lbnRzIHx8ICcnLAogICAgICAgIGV4cGVjdGVkRGVsaXZlcnlEYXRlOiB2YWx1ZXMuZXhwZWN0ZWREZWxpdmVyeURhdGUgfHwgJycKICAgICAgfTsKICAgICAgaWYgKHRoaXMucHJvcHMuY3VycmVudExvY2F0aW9uSWQgIT09IHZhbHVlcy5vcmlnaW4uaWQgJiYgdmFsdWVzLm9yaWdpbi50eXBlICE9PSAnU1VQUExJRVInICYmIHZhbHVlcy5oYXNNYW5hZ2VJbnZlbnRvcnkpIHsKICAgICAgICBBbGVydC5lcnJvcih0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5hbGVydC5zZW5kU3RvY2tNb3ZlbWVudC5sYWJlbCcsICdZb3UgYXJlIG5vdCBhYmxlIHRvIHNlbmQgc2hpcG1lbnQgZnJvbSBhIGxvY2F0aW9uIG90aGVyIHRoYW4gb3JpZ2luLiBDaGFuZ2UgeW91ciBjdXJyZW50IGxvY2F0aW9uLicpKTsKICAgICAgICB0aGlzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWVzLnNoaXBtZW50VHlwZS5pZCA9PT0gXy5maW5kKHRoaXMuc3RhdGUuc2hpcG1lbnRUeXBlcywgZnVuY3Rpb24gKHNoaXBtZW50VHlwZSkgewogICAgICAgIHJldHVybiBzaGlwbWVudFR5cGUubGFiZWwgPT09ICdEZWZhdWx0JzsKICAgICAgfSkuaWQpIHsKICAgICAgICBBbGVydC5lcnJvcih0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5hbGVydC5wb3B1bGF0ZVNoaXBtZW50VHlwZS5sYWJlbCcsICdQbGVhc2UgcG9wdWxhdGUgc2hpcG1lbnQgdHlwZSBiZWZvcmUgY29udGludWluZycpKTsKICAgICAgICB0aGlzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0gZWxzZSBpZiAobW9tZW50KCkuc3RhcnRPZignZGF5JykuZGlmZih2YWx1ZXMuZGF0ZVNoaXBwZWQpID4gMCkgewogICAgICAgIGNvbmZpcm1BbGVydCh7CiAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQubWVzc2FnZS5jb25maXJtU2VuZC5sYWJlbCcsICdDb25maXJtIHNlbmQnKSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja01vdmVtZW50LmFsZXJ0LnNlbmRXaXRoUGFzdERhdGUubWVzc2FnZS5sYWJlbCcsICdZb3UgYXJlIHNlbmRpbmcgYSBzaGlwbWVudCB3aXRoIGEgc2hpcCBkYXRlIGluIHRoZSBwYXN0LiBXb3VsZCB5b3UgbGlrZSB0byB1cGRhdGUgdGhlIHNoaXAgZGF0ZSB0byB0b2RheT8nKSwKICAgICAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC55ZXMubGFiZWwnLCAnWWVzJyksCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcGF5bG9hZC5kYXRlU2hpcHBlZCA9IG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoJ01NL0REL1lZWVkgSEg6bW0gWicpOwogICAgICAgICAgICAgIF90aGlzOC5zYXZlQW5kVHJhbnNpdGlvblRvSXNzdWVkKHBheWxvYWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC5uby5sYWJlbCcsICdObycpLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczguc2F2ZUFuZFRyYW5zaXRpb25Ub0lzc3VlZChwYXlsb2FkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfV0sCiAgICAgICAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSwKICAgICAgICAgIGNsb3NlT25DbGlja091dHNpZGU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zYXZlQW5kVHJhbnNpdGlvblRvSXNzdWVkKHBheWxvYWQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZUFuZFRyYW5zaXRpb25Ub0lzc3VlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUFuZFRyYW5zaXRpb25Ub0lzc3VlZChwYXlsb2FkKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICB0aGlzLnNhdmVTaGlwbWVudChwYXlsb2FkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczkuc3RhdGVUcmFuc2l0aW9uVG9Jc3N1ZWQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHJlZGlyZWN0IHRvIHJlcXVpc2l0aW9uIGxpc3QKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICIvb3BlbmJveGVzL3N0b2NrTW92ZW1lbnQvc2hvdy8iLmNvbmNhdChfdGhpczkuc3RhdGUudmFsdWVzLnN0b2NrTW92ZW1lbnRJZCk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzOS5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzOS5wcm9wcy5oaWRlU3Bpbm5lcigpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFNhdmVzIGNoYW5nZXMgbWFkZSBieSB1c2VyIGluIHRoaXMgc3RlcCBhbmQgZ28gYmFjayB0byBwcmV2aW91cyBwYWdlCiAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVzCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGludmFsaWQKICAgICAqIEBwdWJsaWMKICAgICAqLwogIH0sIHsKICAgIGtleTogInByZXZpb3VzUGFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJldmlvdXNQYWdlKHZhbHVlcywgaW52YWxpZCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CiAgICAgIGlmICghaW52YWxpZCkgewogICAgICAgIHRoaXMuc2F2ZVZhbHVlcyh2YWx1ZXMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTAucHJvcHMucHJldmlvdXNQYWdlKHZhbHVlcyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uZmlybUFsZXJ0KHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5jb25maXJtUHJldmlvdXNQYWdlLmxhYmVsJywgJ1ZhbGlkYXRpb24gZXJyb3InKSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja01vdmVtZW50LmNvbmZpcm1QcmV2aW91c1BhZ2UubWVzc2FnZS5sYWJlbCcsICdDYW5ub3Qgc2F2ZSBkdWUgdG8gdmFsaWRhdGlvbiBlcnJvciBvbiBwYWdlJyksCiAgICAgICAgICBidXR0b25zOiBbewogICAgICAgICAgICBsYWJlbDogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuY29uZmlybVByZXZpb3VzUGFnZS5jb3JyZWN0RXJyb3IubGFiZWwnLCAnQ29ycmVjdCBlcnJvcicpCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5jb25maXJtUHJldmlvdXNQYWdlLmNvbnRpbnVlLmxhYmVsJywgJ0NvbnRpbnVlIChsb3NlIHVuc2F2ZWQgd29yayknKSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5wcm9wcy5wcmV2aW91c1BhZ2UodmFsdWVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfV0KICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2F2ZXMgY2hhbmdlcyBtYWRlIGJ5IHVzZXIgaW4gdGhpcyBzdGVwIGFuZCByZWRpcmVjdHMgdG8gdGhlIHNoaXBtZW50IHZpZXcgcGFnZQogICAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlcwogICAgICogQHB1YmxpYwogICAgICovCiAgfSwgewogICAga2V5OiAic2F2ZUFuZEV4aXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVBbmRFeGl0KHZhbHVlcykgewogICAgICB2YXIgZXJyb3JzID0gdGhpcy52YWxpZGF0ZSh2YWx1ZXMpOwogICAgICBpZiAoXy5pc0VtcHR5KGVycm9ycykpIHsKICAgICAgICB0aGlzLnNhdmVWYWx1ZXModmFsdWVzKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICIvb3BlbmJveGVzL3N0b2NrTW92ZW1lbnQvc2hvdy8iLmNvbmNhdCh2YWx1ZXMuc3RvY2tNb3ZlbWVudElkKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25maXJtQWxlcnQoewogICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja01vdmVtZW50LmNvbmZpcm1FeGl0LmxhYmVsJywgJ0NvbmZpcm0gc2F2ZScpLAogICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuY29uZmlybUV4aXQubWVzc2FnZScsICdWYWxpZGF0aW9uIGVycm9ycyBvY2N1cnJlZC4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGV4aXQgYW5kIGxvc2UgdW5zYXZlZCBkYXRhPycpLAogICAgICAgICAgYnV0dG9uczogW3sKICAgICAgICAgICAgbGFiZWw6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5kZWZhdWx0Lnllcy5sYWJlbCcsICdZZXMnKSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAiL29wZW5ib3hlcy9zdG9ja01vdmVtZW50L3Nob3cvIi5jb25jYXQodmFsdWVzLnN0b2NrTW92ZW1lbnRJZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbGFiZWw6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5kZWZhdWx0Lm5vLmxhYmVsJywgJ05vJykKICAgICAgICAgIH1dCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJvbGxiYWNrIHN0b2NrIG1vdmVtZW50IGlmIGl0IGhhcyBiZWVuIHNoaXBwZWQKICAgICAqIEBwdWJsaWMKICAgICAqLwogIH0sIHsKICAgIGtleTogInJvbGxiYWNrU3RvY2tNb3ZlbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcm9sbGJhY2tTdG9ja01vdmVtZW50KHZhbHVlcykgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja01vdmVtZW50cy8iLmNvbmNhdCh0aGlzLnN0YXRlLnZhbHVlcy5zdG9ja01vdmVtZW50SWQsICIvc3RhdHVzIik7CiAgICAgIHZhciBwYXlsb2FkID0gewogICAgICAgIHJvbGxiYWNrOiB0cnVlCiAgICAgIH07CiAgICAgIHZhciBpc09yaWdpbiA9IHRoaXMucHJvcHMuY3VycmVudExvY2F0aW9uSWQgPT09IHZhbHVlcy5vcmlnaW4uaWQ7CiAgICAgIHZhciBpc0Rlc3RpbmF0aW9uID0gdGhpcy5wcm9wcy5jdXJyZW50TG9jYXRpb25JZCA9PT0gdmFsdWVzLmRlc3RpbmF0aW9uLmlkOwogICAgICBpZiAodmFsdWVzLmhhc01hbmFnZUludmVudG9yeSAmJiBpc09yaWdpbiB8fCAhdmFsdWVzLmhhc01hbmFnZUludmVudG9yeSAmJiBpc0Rlc3RpbmF0aW9uKSB7CiAgICAgICAgYXBpQ2xpZW50LnBvc3QodXJsLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMTEucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgQWxlcnQuZXJyb3IodGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuYWxlcnQucm9sbGJhY2tTaGlwbWVudC5sYWJlbCcsICdZb3UgYXJlIG5vdCBhYmxlIHRvIHJvbGxiYWNrIHNoaXBtZW50IGZyb20geW91ciBsb2NhdGlvbi4nKSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRvZ2dsZSB0aGUgZG93bmxvYWRhYmxlIGZpbGVzCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJ0b2dnbGVEcm9wZG93biIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlRHJvcGRvd24oKSB7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGlzRHJvcGRvd25WaXNpYmxlOiAhdGhpcy5zdGF0ZS5pc0Ryb3Bkb3duVmlzaWJsZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGUodmFsdWVzKSB7CiAgICAgIHZhciBlcnJvcnMgPSB7fTsKICAgICAgdmFyIGRhdGUgPSBtb21lbnQodGhpcy5wcm9wcy5taW5pbXVtRXhwaXJhdGlvbkRhdGUsICdNTS9ERC9ZWVlZJyk7CiAgICAgIHZhciBkYXRlU2hpcHBlZCA9IG1vbWVudCh2YWx1ZXMuZGF0ZVNoaXBwZWQsICdNTS9ERC9ZWVlZJyk7CiAgICAgIHZhciBleHBlY3RlZERlbGl2ZXJ5RGF0ZSA9IG1vbWVudCh2YWx1ZXMuZXhwZWN0ZWREZWxpdmVyeURhdGUsICdNTS9ERC9ZWVlZJyk7CiAgICAgIGlmIChkYXRlLmRpZmYoZGF0ZVNoaXBwZWQpID4gMCkgewogICAgICAgIGVycm9ycy5kYXRlU2hpcHBlZCA9ICdyZWFjdC5zdG9ja01vdmVtZW50LmVycm9yLmludmFsaWREYXRlLmxhYmVsJzsKICAgICAgfQogICAgICBpZiAoIXZhbHVlcy5kYXRlU2hpcHBlZCkgewogICAgICAgIGVycm9ycy5kYXRlU2hpcHBlZCA9ICdyZWFjdC5kZWZhdWx0LmVycm9yLnJlcXVpcmVkRmllbGQubGFiZWwnOwogICAgICB9CiAgICAgIGlmICghdmFsdWVzLnNoaXBtZW50VHlwZSkgewogICAgICAgIGVycm9ycy5zaGlwbWVudFR5cGUgPSAncmVhY3QuZGVmYXVsdC5lcnJvci5yZXF1aXJlZEZpZWxkLmxhYmVsJzsKICAgICAgfQogICAgICBpZiAoIXZhbHVlcy5leHBlY3RlZERlbGl2ZXJ5RGF0ZSkgewogICAgICAgIGVycm9ycy5leHBlY3RlZERlbGl2ZXJ5RGF0ZSA9ICdyZWFjdC5kZWZhdWx0LmVycm9yLnJlcXVpcmVkRmllbGQubGFiZWwnOwogICAgICB9CiAgICAgIGlmIChtb21lbnQoZGF0ZVNoaXBwZWQpLmRpZmYoZXhwZWN0ZWREZWxpdmVyeURhdGUpID4gMCkgewogICAgICAgIGVycm9ycy5leHBlY3RlZERlbGl2ZXJ5RGF0ZSA9ICdyZWFjdC5zdG9ja01vdmVtZW50LmVycm9yLmRlbGl2ZXJ5RGF0ZUJlZm9yZVNoaXBEYXRlLmxhYmVsJzsKICAgICAgICBlcnJvcnMuZGF0ZVNoaXBwZWQgPSAncmVhY3Quc3RvY2tNb3ZlbWVudC5lcnJvci5kZWxpdmVyeURhdGVCZWZvcmVTaGlwRGF0ZS5sYWJlbCc7CiAgICAgIH0KICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVWYWxpZGF0aW9uRXJyb3JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzKGVycm9yKSB7CiAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMCkgewogICAgICAgIC8vIEZJWE1FOiBSZWZhY3RvciB0aGlzIGVycm9yIG1hc3NhZ2UgaGFuZGxpbmcgdG8gZ2V0IHByZXR0aWVyIGRlZmF1bHQgZXJyb3JNZXNzYWdlIGZhbGxiYWNrCiAgICAgICAgdmFyIGFsZXJ0TWVzc2FnZSA9IF8uam9pbihfLmdldChlcnJvciwgJ3Jlc3BvbnNlLmRhdGEuZXJyb3JNZXNzYWdlcycsICcnKSwgJyAnKTsKICAgICAgICBpZiAoYWxlcnRNZXNzYWdlID09PSAnJykgewogICAgICAgICAgYWxlcnRNZXNzYWdlID0gXy5nZXQoZXJyb3IsICdyZXNwb25zZS5kYXRhLmVycm9yTWVzc2FnZScsICcnKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBhbGVydE1lc3NhZ2U6IGFsZXJ0TWVzc2FnZSwKICAgICAgICAgIHNob3dBbGVydDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICAgIH0KICAgICAgcmV0dXJuIGhhbmRsZUVycm9yKGVycm9yKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwogICAgICB2YXIgc2hvd09ubHkgPSB0aGlzLnByb3BzLnNob3dPbmx5OwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm0sIHsKICAgICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7fSwKICAgICAgICB2YWxpZGF0ZTogdGhpcy52YWxpZGF0ZSwKICAgICAgICBtdXRhdG9yczogX29iamVjdFNwcmVhZCh7fSwgYXJyYXlNdXRhdG9ycyksCiAgICAgICAgaW5pdGlhbFZhbHVlczogdGhpcy5zdGF0ZS52YWx1ZXMsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoX3JlZjE5KSB7CiAgICAgICAgICB2YXIgaGFuZGxlU3VibWl0ID0gX3JlZjE5LmhhbmRsZVN1Ym1pdCwKICAgICAgICAgICAgdmFsdWVzID0gX3JlZjE5LnZhbHVlcywKICAgICAgICAgICAgaW52YWxpZCA9IF9yZWYxOS5pbnZhbGlkOwogICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJmb3JtIiwgewogICAgICAgICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0CiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBbGVydE1lc3NhZ2UsIHsKICAgICAgICAgICAgc2hvdzogX3RoaXMxMi5zdGF0ZS5zaG93QWxlcnQsCiAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzMTIuc3RhdGUuYWxlcnRNZXNzYWdlLAogICAgICAgICAgICBkYW5nZXI6IHRydWUKICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJjbGFzc2ljLWZvcm0gY2xhc3NpYy1mb3JtLWNvbmRlbnNlZCIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJidXR0b25zLWNvbnRhaW5lciBjbGFzc2ljLWZvcm0tYnV0dG9ucyIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImRyb3B6b25lIGZsb2F0LXJpZ2h0IG1iLTEgYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBhbGlnbi1zZWxmLWVuZCBidG4teHMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEcm9wem9uZSwgewogICAgICAgICAgICBkaXNhYmxlZDogdmFsdWVzLnN0YXR1c0NvZGUgPT09ICdESVNQQVRDSEVEJyB8fCBzaG93T25seSwKICAgICAgICAgICAgb25Ecm9wOiBfdGhpczEyLm9uRHJvcCwKICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImkiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImZhIGZhLXVwbG9hZCBwci0yIgogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LnN0b2NrTW92ZW1lbnQudXBsb2FkRG9jdW1lbnRzLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVcGxvYWQgRG9jdW1lbnRzIgogICAgICAgICAgfSkpLCBfLm1hcChfdGhpczEyLnN0YXRlLmZpbGVzLCBmdW5jdGlvbiAoZmlsZSkgewogICAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICBrZXk6IGZpbGUubmFtZSwKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJjaG9zZW4tZmlsZSBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXIiCiAgICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAidGV4dC10cnVuY2F0ZSIKICAgICAgICAgICAgfSwgZmlsZS5uYW1lKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgICAgICAgICAgaHJlZjogIiMiLAogICAgICAgICAgICAgIGNsYXNzTmFtZTogInJlbW92ZS1idXR0b24iLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgICAgIF90aGlzMTIucmVtb3ZlRmlsZShmaWxlLm5hbWUpOwogICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1yZW1vdmUiCiAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJkcm9wZG93biIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBvbkNsaWNrOiBfdGhpczEyLnRvZ2dsZURyb3Bkb3duLAogICAgICAgICAgICBjbGFzc05hbWU6ICJkcm9wZG93bi1idXR0b24gZmxvYXQtcmlnaHQgbWItMSBidG4gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IGFsaWduLXNlbGYtZW5kIGJ0bi14cyIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImkiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImZhIGZhLXNpZ24tb3V0IHByLTIiCiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uZG93bmxvYWQubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRvd25sb2FkIgogICAgICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZHJvcGRvd24tY29udGVudCBwcmludC1idXR0b25zLWNvbnRhaW5lciBjb2wtbWQtMyBmbGV4LWdyb3ctMVxuICAgICAgICAgICAgICAgICAgICAgICIuY29uY2F0KF90aGlzMTIuc3RhdGUuaXNEcm9wZG93blZpc2libGUgPyAndmlzaWJsZScgOiAnJykKICAgICAgICAgIH0sIF90aGlzMTIuc3RhdGUuZG9jdW1lbnRzLmxlbmd0aCAmJiBfLm1hcChfdGhpczEyLnN0YXRlLmRvY3VtZW50cywgZnVuY3Rpb24gKGRvY3VtZW50LCBpZHgpIHsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LmhpZGRlbikgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEb2N1bWVudEJ1dHRvbiwgX2V4dGVuZHMoewogICAgICAgICAgICAgIGxpbms6IGRvY3VtZW50LnVyaSwKICAgICAgICAgICAgICBidXR0b25UaXRsZTogZG9jdW1lbnQubmFtZQogICAgICAgICAgICB9LCBkb2N1bWVudCwgewogICAgICAgICAgICAgIGtleTogaWR4LAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMi5zYXZlVmFsdWVzKHZhbHVlcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9KSkpLCAhc2hvd09ubHkgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczEyLm9uU2F2ZSh2YWx1ZXMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IGZsb2F0LXJpZ2h0IGJ0bi1mb3JtIGJ0bi14cyIsCiAgICAgICAgICAgIGRpc2FibGVkOiBpbnZhbGlkCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1zYXZlIHByLTIiCiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uc2F2ZS5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2F2ZSIKICAgICAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczEyLnNhdmVBbmRFeGl0KHZhbHVlcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsYXNzTmFtZTogImZsb2F0LXJpZ2h0IG1iLTEgYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBhbGlnbi1zZWxmLWVuZCBidG4teHMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1zaWduLW91dCBwci0yIgogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnNhdmVBbmRFeGl0LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTYXZlIGFuZCBleGl0IgogICAgICAgICAgfSkpKSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL29wZW5ib3hlcy9zdG9ja01vdmVtZW50L2xpc3Q/ZGlyZWN0aW9uPU9VVEJPVU5EJzsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZmxvYXQtcmlnaHQgbWItMSBidG4gYnRuLW91dGxpbmUtZGFuZ2VyIGFsaWduLXNlbGYtZW5kIGJ0bi14cyBtci0yIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZmEgZmEtc2lnbi1vdXQgcHItMiIKICAgICAgICAgIH0pLCAiICIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLmV4aXQubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkV4aXQiCiAgICAgICAgICB9KSwgIiAiKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmb3JtLXRpdGxlIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3Quc3RvY2tNb3ZlbWVudC5zZW5kaW5nT3B0aW9ucy5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2VuZGluZyBvcHRpb25zIgogICAgICAgICAgfSkpLCBfLm1hcChTSElQTUVOVF9GSUVMRFMsIGZ1bmN0aW9uIChmaWVsZENvbmZpZywgZmllbGROYW1lKSB7CiAgICAgICAgICAgIHJldHVybiByZW5kZXJGb3JtRmllbGQoZmllbGRDb25maWcsIGZpZWxkTmFtZSwgewogICAgICAgICAgICAgIHNoaXBtZW50VHlwZXM6IF90aGlzMTIuc3RhdGUuc2hpcG1lbnRUeXBlcywKICAgICAgICAgICAgICBpc3N1ZWQ6IHZhbHVlcy5zdGF0dXNDb2RlID09PSAnRElTUEFUQ0hFRCcsCiAgICAgICAgICAgICAgcmVjZWl2ZWQ6IHZhbHVlcy5yZWNlaXZlZCwKICAgICAgICAgICAgICBzaG93T25seTogc2hvd09ubHksCiAgICAgICAgICAgICAgY2FuQmVFZGl0ZWQ6ICF2YWx1ZXMucmVjZWl2ZWQsCiAgICAgICAgICAgICAgZGVib3VuY2VkTG9jYXRpb25zRmV0Y2g6IF90aGlzMTIuZGVib3VuY2VkTG9jYXRpb25zRmV0Y2gsCiAgICAgICAgICAgICAgaGFzU3RvY2tMaXN0OiAhIV8uZ2V0KHZhbHVlcy5zdG9ja2xpc3QsICdpZCcpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAic3VibWl0LWJ1dHRvbnMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLWZvcm0gYnRuLXhzIiwKICAgICAgICAgICAgZGlzYWJsZWQ6IHZhbHVlcy5zdGF0dXNDb2RlID09PSAnRElTUEFUQ0hFRCcgfHwgc2hvd09ubHksCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTIucHJldmlvdXNQYWdlKHZhbHVlcywgaW52YWxpZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnByZXZpb3VzLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJQcmV2aW91cyIKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgX3RoaXMxMi5zZW5kRmlsZXNBbmRTYXZlKHZhbHVlcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsYXNzTmFtZTogIiIuY29uY2F0KHZhbHVlcy5zaGlwcGVkID8gJ2J0biBidG4tb3V0bGluZS1zZWNvbmRhcnknIDogJ2J0biBidG4tb3V0bGluZS1zdWNjZXNzJywgIiBmbG9hdC1yaWdodCBidG4tZm9ybSBidG4teHMiKSwKICAgICAgICAgICAgZGlzYWJsZWQ6IHZhbHVlcy5zdGF0dXNDb2RlID09PSAnRElTUEFUQ0hFRCcgfHwgc2hvd09ubHkKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LnN0b2NrTW92ZW1lbnQuc2VuZFNoaXBtZW50LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZW5kIHNoaXBtZW50IgogICAgICAgICAgfSkpLCB2YWx1ZXMuc2hpcHBlZCAmJiBfdGhpczEyLnByb3BzLmlzVXNlckFkbWluID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgX3RoaXMxMi5yb2xsYmFja1N0b2NrTW92ZW1lbnQodmFsdWVzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXN1Y2Nlc3MgZmxvYXQtcmlnaHQgYnRuLXhzIiwKICAgICAgICAgICAgZGlzYWJsZWQ6IGludmFsaWQgfHwgdmFsdWVzLnN0YXR1c0NvZGUgIT09ICdESVNQQVRDSEVEJyB8fCBzaG93T25seQogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZmEgZmEtdW5kbyBwci0yIgogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnJvbGxiYWNrLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSb2xsYmFjayIKICAgICAgICAgIH0pKSkgOiBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAibXktMiB0YWJsZS1mb3JtIgogICAgICAgICAgfSwgXy5tYXAoRklFTERTLCBmdW5jdGlvbiAoZmllbGRDb25maWcsIGZpZWxkTmFtZSkgewogICAgICAgICAgICByZXR1cm4gcmVuZGVyRm9ybUZpZWxkKGZpZWxkQ29uZmlnLCBmaWVsZE5hbWUsIHsKICAgICAgICAgICAgICBoYXNCaW5Mb2NhdGlvblN1cHBvcnQ6IF90aGlzMTIucHJvcHMuaGFzQmluTG9jYXRpb25TdXBwb3J0LAogICAgICAgICAgICAgIHRvdGFsQ291bnQ6IF90aGlzMTIuc3RhdGUudG90YWxDb3VudCwKICAgICAgICAgICAgICBsb2FkTW9yZVJvd3M6IF90aGlzMTIubG9hZE1vcmVSb3dzLAogICAgICAgICAgICAgIGlzUm93TG9hZGVkOiBfdGhpczEyLmlzUm93TG9hZGVkLAogICAgICAgICAgICAgIGlzUGFnaW5hdGVkOiBfdGhpczEyLnByb3BzLmlzUGFnaW5hdGVkLAogICAgICAgICAgICAgIGlzRmlyc3RQYWdlTG9hZGVkOiBfdGhpczEyLnN0YXRlLmlzRmlyc3RQYWdlTG9hZGVkLAogICAgICAgICAgICAgIHRyYW5zbGF0ZTogX3RoaXMxMi5wcm9wcy50cmFuc2xhdGUsCiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW4KICAgICAgICAgICAgICBpc0JveE5hbWVFbXB0eTogXy5ldmVyeShfdGhpczEyLnN0YXRlLnZhbHVlcy50YWJsZUl0ZW1zLCBmdW5jdGlvbiAoX3JlZjIwKSB7CiAgICAgICAgICAgICAgICB2YXIgYm94TmFtZSA9IF9yZWYyMC5ib3hOYW1lOwogICAgICAgICAgICAgICAgcmV0dXJuICFib3hOYW1lOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuCiAgICAgICAgICAgICAgaXNQYWxsZXROYW1lRW1wdHk6IF8uZXZlcnkoX3RoaXMxMi5zdGF0ZS52YWx1ZXMudGFibGVJdGVtcywgZnVuY3Rpb24gKF9yZWYyMSkgewogICAgICAgICAgICAgICAgdmFyIHBhbGxldE5hbWUgPSBfcmVmMjEucGFsbGV0TmFtZTsKICAgICAgICAgICAgICAgIHJldHVybiAhcGFsbGV0TmFtZTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pKSkpOwogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH1dKTsKICByZXR1cm4gU2VuZE1vdmVtZW50UGFnZTsKfShDb21wb25lbnQpOwp2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7CiAgcmV0dXJuIHsKICAgIHRyYW5zbGF0ZTogdHJhbnNsYXRlV2l0aERlZmF1bHRNZXNzYWdlKGdldFRyYW5zbGF0ZShzdGF0ZS5sb2NhbGl6ZSkpLAogICAgY3VycmVudExvY2F0aW9uSWQ6IHN0YXRlLnNlc3Npb24uY3VycmVudExvY2F0aW9uLmlkLAogICAgc3RvY2tNb3ZlbWVudFRyYW5zbGF0aW9uc0ZldGNoZWQ6IHN0YXRlLnNlc3Npb24uZmV0Y2hlZFRyYW5zbGF0aW9ucy5zdG9ja01vdmVtZW50LAogICAgZGVib3VuY2VUaW1lOiBzdGF0ZS5zZXNzaW9uLnNlYXJjaENvbmZpZy5kZWJvdW5jZVRpbWUsCiAgICBtaW5TZWFyY2hMZW5ndGg6IHN0YXRlLnNlc3Npb24uc2VhcmNoQ29uZmlnLm1pblNlYXJjaExlbmd0aCwKICAgIGxvY2FsZTogc3RhdGUuc2Vzc2lvbi5hY3RpdmVMYW5ndWFnZSwKICAgIGlzVXNlckFkbWluOiBzdGF0ZS5zZXNzaW9uLmlzVXNlckFkbWluLAogICAgaGFzQmluTG9jYXRpb25TdXBwb3J0OiBzdGF0ZS5zZXNzaW9uLmN1cnJlbnRMb2NhdGlvbi5oYXNCaW5Mb2NhdGlvblN1cHBvcnQsCiAgICBpc1BhZ2luYXRlZDogc3RhdGUuc2Vzc2lvbi5pc1BhZ2luYXRlZCwKICAgIHBhZ2VTaXplOiBzdGF0ZS5zZXNzaW9uLnBhZ2VTaXplLAogICAgbWluaW11bUV4cGlyYXRpb25EYXRlOiBzdGF0ZS5zZXNzaW9uLm1pbmltdW1FeHBpcmF0aW9uRGF0ZQogIH07Cn07CmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCB7CiAgc2hvd1NwaW5uZXI6IHNob3dTcGlubmVyLAogIGhpZGVTcGlubmVyOiBoaWRlU3Bpbm5lcgp9KShTZW5kTW92ZW1lbnRQYWdlKTsKU2VuZE1vdmVtZW50UGFnZS5wcm9wVHlwZXMgPSB7CiAgLyoqIEluaXRpYWwgY29tcG9uZW50J3MgZGF0YSAqLwogIGluaXRpYWxWYWx1ZXM6IFByb3BUeXBlcy5zaGFwZSh7fSkuaXNSZXF1aXJlZCwKICAvKiogRnVuY3Rpb24gcmV0dXJuaW5nIHVzZXIgdG8gdGhlIHByZXZpb3VzIHBhZ2UgKi8KICBwcmV2aW91c1BhZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRhdGEgaXMgbG9hZGluZyAqLwogIHNob3dTcGlubmVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIC8qKiBGdW5jdGlvbiBjYWxsZWQgd2hlbiBkYXRhIGhhcyBsb2FkZWQgKi8KICBoaWRlU3Bpbm5lcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBuZXh0UGFnZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqIE5hbWUgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBsb2NhdGlvbiAqLwogIGN1cnJlbnRMb2NhdGlvbklkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCiAgc3RvY2tNb3ZlbWVudFRyYW5zbGF0aW9uc0ZldGNoZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsCiAgZGVib3VuY2VUaW1lOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsCiAgbWluU2VhcmNoTGVuZ3RoOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsCiAgbG9jYWxlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCiAgaXNVc2VyQWRtaW46IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsCiAgLyoqIElzIHRydWUgd2hlbiBjdXJyZW50bHkgc2VsZWN0ZWQgbG9jYXRpb24gc3VwcG9ydHMgYmlucyAqLwogIGhhc0JpbkxvY2F0aW9uU3VwcG9ydDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCwKICAvKiogUmV0dXJuIHRydWUgaWYgcGFnaW5hdGlvbiBpcyBlbmFibGVkICovCiAgaXNQYWdpbmF0ZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsCiAgLyoqIFJldHVybiB0cnVlIGlmIHNob3cgb25seSAqLwogIHNob3dPbmx5OiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLAogIHBhZ2VTaXplOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsCiAgbWluaW11bUV4cGlyYXRpb25EYXRlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQKfTs="},null]}