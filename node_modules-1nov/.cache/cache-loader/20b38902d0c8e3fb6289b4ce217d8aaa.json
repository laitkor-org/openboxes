{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/stock-list-management/StocklistManagement.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/stock-list-management/StocklistManagement.jsx","mtime":1698037749000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9CmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgdXBkYXRlIGZyb20gJ2ltbXV0YWJpbGl0eS1oZWxwZXInOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnOwppbXBvcnQgeyBnZXRUcmFuc2xhdGUgfSBmcm9tICdyZWFjdC1sb2NhbGl6ZS1yZWR1eCc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCBBbGVydCBmcm9tICdyZWFjdC1zLWFsZXJ0JzsKaW1wb3J0IFJlYWN0VGFibGUgZnJvbSAncmVhY3QtdGFibGUnOwppbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAncmVhY3QtdGlwcHknOwppbXBvcnQgeyBmZXRjaFRyYW5zbGF0aW9ucywgaGlkZVNwaW5uZXIsIHNob3dTcGlubmVyIH0gZnJvbSAnYWN0aW9ucyc7CmltcG9ydCBFbWFpbE1vZGFsIGZyb20gJ2NvbXBvbmVudHMvc3RvY2stbGlzdC1tYW5hZ2VtZW50L0VtYWlsTW9kYWwnOwppbXBvcnQgYXBpQ2xpZW50LCB7IGZsYXR0ZW5SZXF1ZXN0LCBwYXJzZVJlc3BvbnNlIH0gZnJvbSAndXRpbHMvYXBpQ2xpZW50JzsKaW1wb3J0IElucHV0IGZyb20gJ3V0aWxzL0lucHV0JzsKaW1wb3J0IFNlbGVjdCBmcm9tICd1dGlscy9TZWxlY3QnOwppbXBvcnQgVHJhbnNsYXRlLCB7IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZSB9IGZyb20gJ3V0aWxzL1RyYW5zbGF0ZSc7CmltcG9ydCAncmVhY3QtdGFibGUvcmVhY3QtdGFibGUuY3NzJzsKdmFyIFN0b2NrbGlzdE1hbmFnZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoU3RvY2tsaXN0TWFuYWdlbWVudCwgX0NvbXBvbmVudCk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihTdG9ja2xpc3RNYW5hZ2VtZW50KTsKICBmdW5jdGlvbiBTdG9ja2xpc3RNYW5hZ2VtZW50KHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RvY2tsaXN0TWFuYWdlbWVudCk7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRhdGFGZXRjaGVkIiwgZmFsc2UpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGRhdGE6IFtdLAogICAgICBzZWxlY3RlZFN0b2NrbGlzdDogbnVsbCwKICAgICAgYXZhaWxhYmxlU3RvY2tsaXN0czogW10sCiAgICAgIHByb2R1Y3RJbmZvOiBudWxsLAogICAgICB1c2VyczogW10sCiAgICAgIGlzRGF0YUxvYWRpbmc6IHRydWUsCiAgICAgIHVzZXJzRmV0Y2hlZDogZmFsc2UsCiAgICAgIHN0b2NrbGlzdHNGZXRjaGVkOiBmYWxzZQogICAgfTsKICAgIF90aGlzLmFkZEl0ZW0gPSBfdGhpcy5hZGRJdGVtLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMuZWRpdEl0ZW0gPSBfdGhpcy5lZGl0SXRlbS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLnVwZGF0ZUl0ZW1GaWVsZCA9IF90aGlzLnVwZGF0ZUl0ZW1GaWVsZC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLnNhdmVJdGVtID0gX3RoaXMuc2F2ZUl0ZW0uYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy5kZWxldGVJdGVtID0gX3RoaXMuZGVsZXRlSXRlbS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIHJldHVybiBfdGhpczsKICB9CiAgX2NyZWF0ZUNsYXNzKFN0b2NrbGlzdE1hbmFnZW1lbnQsIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMucHJvcHMuZmV0Y2hUcmFuc2xhdGlvbnMoJycsICdzdG9ja0xpc3RNYW5hZ2VtZW50Jyk7CiAgICAgIGlmICh0aGlzLnByb3BzLnN0b2NrTGlzdE1hbmFnZW1lbnRUcmFuc2xhdGlvbnNGZXRjaGVkKSB7CiAgICAgICAgdGhpcy5kYXRhRmV0Y2hlZCA9IHRydWU7CiAgICAgICAgdGhpcy5mZXRjaERhdGEoKTsKICAgICAgICB0aGlzLmZldGNoQXZhaWxhYmxlU3RvY2tsaXN0cygpOwogICAgICAgIHRoaXMuZmV0Y2hQcm9kdWN0SW5mbygpOwogICAgICAgIHRoaXMuZmV0Y2hVc2VycygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHsKICAgICAgaWYgKHRoaXMucHJvcHMubG9jYWxlICYmIHRoaXMucHJvcHMubG9jYWxlICE9PSBuZXh0UHJvcHMubG9jYWxlKSB7CiAgICAgICAgdGhpcy5wcm9wcy5mZXRjaFRyYW5zbGF0aW9ucyhuZXh0UHJvcHMubG9jYWxlLCAnc3RvY2tMaXN0TWFuYWdlbWVudCcpOwogICAgICB9CiAgICAgIGlmIChuZXh0UHJvcHMuc3RvY2tMaXN0TWFuYWdlbWVudFRyYW5zbGF0aW9uc0ZldGNoZWQgJiYgIXRoaXMuZGF0YUZldGNoZWQpIHsKICAgICAgICB0aGlzLmRhdGFGZXRjaGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgICAgIHRoaXMuZmV0Y2hBdmFpbGFibGVTdG9ja2xpc3RzKCk7CiAgICAgICAgdGhpcy5mZXRjaFByb2R1Y3RJbmZvKCk7CiAgICAgICAgdGhpcy5mZXRjaFVzZXJzKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkgewogICAgICBpZiAoKCFwcmV2U3RhdGUudXNlcnNGZXRjaGVkIHx8ICFwcmV2U3RhdGUuc3RvY2tsaXN0c0ZldGNoZWQpICYmIHRoaXMuc3RhdGUudXNlcnNGZXRjaGVkICYmIHRoaXMuc3RhdGUuc3RvY2tsaXN0c0ZldGNoZWQpIHsKICAgICAgICB0aGlzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJmZXRjaFVzZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaFVzZXJzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB2YXIgdXJsID0gJy9vcGVuYm94ZXMvYXBpL3BlcnNvbnMnOwogICAgICBhcGlDbGllbnQuZ2V0KHVybCwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgc3RhdHVzOiB0cnVlCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICB1c2VyczogcmVzcG9uc2UuZGF0YS5kYXRhLAogICAgICAgICAgdXNlcnNGZXRjaGVkOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy5wcm9wcy5zaG93U3Bpbm5lcigpOwogICAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL3N0b2NrbGlzdEl0ZW1zP3Byb2R1Y3QuaWQ9Ii5jb25jYXQodGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMucHJvZHVjdElkIHx8ICcnKTsKICAgICAgYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLnNldFN0YXRlKHsKICAgICAgICAgIGRhdGE6IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UuZGF0YS5kYXRhKSwKICAgICAgICAgIGlzRGF0YUxvYWRpbmc6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKHRoaXMucHJvcHMuaGlkZVNwaW5uZXIoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hBdmFpbGFibGVTdG9ja2xpc3RzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaEF2YWlsYWJsZVN0b2NrbGlzdHMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgIHZhciB1cmwgPSAnL29wZW5ib3hlcy9hcGkvc3RvY2tsaXN0SXRlbXMvYXZhaWxhYmxlU3RvY2tsaXN0cyc7CiAgICAgIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNC5zZXRTdGF0ZSh7CiAgICAgICAgICBhdmFpbGFibGVTdG9ja2xpc3RzOiBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlLmRhdGEuZGF0YSksCiAgICAgICAgICBzdG9ja2xpc3RzRmV0Y2hlZDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXSh0aGlzLnByb3BzLmhpZGVTcGlubmVyKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoUHJvZHVjdEluZm8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoUHJvZHVjdEluZm8oKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvcHJvZHVjdHMvIi5jb25jYXQodGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMucHJvZHVjdElkLCAiL3dpdGhDYXRhbG9ncyIpOwogICAgICBhcGlDbGllbnQuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczUuc2V0U3RhdGUoewogICAgICAgICAgcHJvZHVjdEluZm86IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXSh0aGlzLnByb3BzLmhpZGVTcGlubmVyKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImFkZEl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEl0ZW0oc3RvY2tsaXN0KSB7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIHNlbGVjdGVkU3RvY2tsaXN0OiBudWxsLAogICAgICAgIGRhdGE6IHVwZGF0ZSh0aGlzLnN0YXRlLmRhdGEsIHsKICAgICAgICAgICRwdXNoOiBbewogICAgICAgICAgICBzdG9ja2xpc3RJZDogc3RvY2tsaXN0LmlkLAogICAgICAgICAgICBuYW1lOiBzdG9ja2xpc3QubmFtZSwKICAgICAgICAgICAgbG9jYXRpb246IHsKICAgICAgICAgICAgICBpZDogc3RvY2tsaXN0LmxvY2F0aW9uLmlkLAogICAgICAgICAgICAgIG5hbWU6IHN0b2NrbGlzdC5sb2NhdGlvbi5uYW1lCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvY2F0aW9uR3JvdXA6IHsKICAgICAgICAgICAgICBpZDogc3RvY2tsaXN0LmxvY2F0aW9uR3JvdXAuaWQsCiAgICAgICAgICAgICAgbmFtZTogc3RvY2tsaXN0LmxvY2F0aW9uR3JvdXAubmFtZQogICAgICAgICAgICB9LAogICAgICAgICAgICBtYW5hZ2VyOiB7CiAgICAgICAgICAgICAgaWQ6IHN0b2NrbGlzdC5tYW5hZ2VyLmlkLAogICAgICAgICAgICAgIG5hbWU6IHN0b2NrbGlzdC5tYW5hZ2VyLm5hbWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVwbGVuaXNobWVudFBlcmlvZDogc3RvY2tsaXN0LnJlcGxlbmlzaG1lbnRQZXJpb2QsCiAgICAgICAgICAgIG1heFF1YW50aXR5OiBudWxsLAogICAgICAgICAgICAibmV3IjogdHJ1ZQogICAgICAgICAgfV0KICAgICAgICB9KQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlZGl0SXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZWRpdEl0ZW0oaW5kZXgpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZGF0YTogdXBkYXRlKHRoaXMuc3RhdGUuZGF0YSwgX2RlZmluZVByb3BlcnR5KHt9LCBpbmRleCwgewogICAgICAgICAgZWRpdDogewogICAgICAgICAgICAkc2V0OiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfSkpCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZUl0ZW1GaWVsZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlSXRlbUZpZWxkKGluZGV4LCBpdGVtRmllbGQsIGZpZWxkVmFsdWUpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZGF0YTogdXBkYXRlKHRoaXMuc3RhdGUuZGF0YSwgX2RlZmluZVByb3BlcnR5KHt9LCBpbmRleCwgX2RlZmluZVByb3BlcnR5KHt9LCBpdGVtRmllbGQsIHsKICAgICAgICAgICRzZXQ6IGZpZWxkVmFsdWUKICAgICAgICB9KSkpCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVJdGVtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlSXRlbShpbmRleCwgaXRlbSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja2xpc3RJdGVtcz9wcm9kdWN0LmlkPSIuY29uY2F0KHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLnByb2R1Y3RJZCB8fCAnJyk7CiAgICAgIGlmICghaXRlbVsibmV3Il0pIHsKICAgICAgICB1cmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tsaXN0SXRlbXMvIi5jb25jYXQoaXRlbS5pZCk7CiAgICAgIH0KICAgICAgYXBpQ2xpZW50LnBvc3QodXJsLCBmbGF0dGVuUmVxdWVzdChpdGVtKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczYuc2V0U3RhdGUoewogICAgICAgICAgZGF0YTogdXBkYXRlKF90aGlzNi5zdGF0ZS5kYXRhLCBfZGVmaW5lUHJvcGVydHkoe30sIGluZGV4LCB7CiAgICAgICAgICAgICRzZXQ6IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UuZGF0YS5kYXRhKQogICAgICAgICAgfSkpCiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKHRoaXMucHJvcHMuaGlkZVNwaW5uZXIoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVsZXRlSXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlSXRlbShpbmRleCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgdmFyIGl0ZW0gPSB0aGlzLnN0YXRlLmRhdGFbaW5kZXhdOwogICAgICBpZiAoaXRlbVsibmV3Il0pIHsKICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oaW5kZXgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgICB2YXIgdXJsID0gIi9vcGVuYm94ZXMvYXBpL3N0b2NrbGlzdEl0ZW1zLyIuY29uY2F0KGl0ZW0uaWQpOwogICAgICAgIGFwaUNsaWVudFsiZGVsZXRlIl0odXJsKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNy5yZW1vdmVJdGVtKGluZGV4KTsKICAgICAgICB9KVsiY2F0Y2giXSh0aGlzLnByb3BzLmhpZGVTcGlubmVyKCkpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlSXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlSXRlbShpbmRleCkgewogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBkYXRhOiB1cGRhdGUodGhpcy5zdGF0ZS5kYXRhLCB7CiAgICAgICAgICAkc3BsaWNlOiBbW2luZGV4LCAxXV0KICAgICAgICB9KQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHZhciBkYXRhID0gdGhpcy5zdGF0ZS5kYXRhOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJtYWluLWNvbnRhaW5lciIKICAgICAgfSwgdGhpcy5zdGF0ZS5wcm9kdWN0SW5mbyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogIm1iLTIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGZsZXgtcm93IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImQtZmxleCBmbGV4LXJvdyBhbGlnbi1pdGVtcy1lbmQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoNiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJtYi0wIG1yLTEiCiAgICAgIH0sIHRoaXMuc3RhdGUucHJvZHVjdEluZm8ucHJvZHVjdENvZGUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaDUiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAibWItMCIKICAgICAgfSwgdGhpcy5zdGF0ZS5wcm9kdWN0SW5mby5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiYWxpZ24tc2VsZi1jZW50ZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLXhzIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gIi9vcGVuYm94ZXMvaW52ZW50b3J5SXRlbS9zaG93U3RvY2tDYXJkLyIuY29uY2F0KF90aGlzOC5zdGF0ZS5wcm9kdWN0SW5mby5pZCk7CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICBpZDogInJlYWN0LnN0b2NrTGlzdE1hbmFnZW1lbnQucmV0dXJuU3RvY2tDYXJkLmxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJldHVybiB0byBzdG9jayBjYXJkIgogICAgICB9KSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXggZmxleC1yb3ciCiAgICAgIH0sIF8ubWFwKHRoaXMuc3RhdGUucHJvZHVjdEluZm8uY2F0YWxvZ3MsIGZ1bmN0aW9uIChjYXRhbG9nKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICBrZXk6IGNhdGFsb2cuaWQsCiAgICAgICAgICBjbGFzc05hbWU6ICJzdG9ja2xpc3QtY2F0ZWdvcnkgcHgtMSBtci0xIgogICAgICAgIH0sIGNhdGFsb2cubmFtZSk7CiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0VGFibGUsIHsKICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgIHBpdm90Qnk6IFsnbG9jYXRpb25Hcm91cC5uYW1lJywgJ2xvY2F0aW9uLm5hbWUnXSwKICAgICAgICBzaG93UGFnaW5hdGlvbjogZmFsc2UsCiAgICAgICAgbWluUm93czogMCwKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgbm9EYXRhVGV4dDogdGhpcy5zdGF0ZS5pc0RhdGFMb2FkaW5nID8gJ0xvYWRpbmcuLi4nIDogJ05vIHJvd3MgZm91bmQnLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBtYXhIZWlnaHQ6IHRoaXMuc3RhdGUucHJvZHVjdEluZm8gJiYgXy5zb21lKHRoaXMuc3RhdGUucHJvZHVjdEluZm8uY2F0YWxvZ3MsIGZ1bmN0aW9uIChjYXRhbG9nKSB7CiAgICAgICAgICAgIHJldHVybiAhXy5pc0VtcHR5KGNhdGFsb2cpOwogICAgICAgICAgfSkgPyAnY2FsYygxMDB2aCAtIDI3NXB4KScgOiAnY2FsYygxMDB2aCAtIDI1MHB4KScKICAgICAgICB9LAogICAgICAgIGNvbGxhcHNlT25EYXRhQ2hhbmdlOiBmYWxzZSwKICAgICAgICBkZWZhdWx0U29ydGVkOiBbewogICAgICAgICAgaWQ6ICdsb2NhdGlvbkdyb3VwLm5hbWUnCiAgICAgICAgfV0sCiAgICAgICAgcmVzb2x2ZURhdGE6IGZ1bmN0aW9uIHJlc29sdmVEYXRhKHZhbHVlcykgewogICAgICAgICAgcmV0dXJuIHZhbHVlcy5tYXAoZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgICBpZiAoIV8uZ2V0KHJvdywgJ2xvY2F0aW9uR3JvdXAubmFtZScpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcm93KSwge30sIHsKICAgICAgICAgICAgICAgIGxvY2F0aW9uR3JvdXA6IHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ05vIGxvY2F0aW9uIGdyb3VwJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByb3c7CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGNvbHVtbnM6IFt7CiAgICAgICAgICBIZWFkZXI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50LmxvY2F0aW9uR3JvdXAubGFiZWwnLCAnTG9jYXRpb24gR3JvdXAgTmFtZScpLAogICAgICAgICAgICB0aGVtZTogInRyYW5zcGFyZW50IiwKICAgICAgICAgICAgZGVsYXk6ICIxNTAiLAogICAgICAgICAgICBkdXJhdGlvbjogIjI1MCIsCiAgICAgICAgICAgIGhpZGVEZWxheTogIjUwIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3Quc3RvY2tMaXN0TWFuYWdlbWVudC5sb2NhdGlvbkdyb3VwLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJMb2NhdGlvbiBHcm91cCBOYW1lIgogICAgICAgICAgfSkpLAogICAgICAgICAgYWNjZXNzb3I6ICdsb2NhdGlvbkdyb3VwLm5hbWUnLAogICAgICAgICAgY2xhc3NOYW1lOiAndy1zcGFjZS1ub3JtYWwnCiAgICAgICAgfSwgewogICAgICAgICAgSGVhZGVyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7CiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tMaXN0TWFuYWdlbWVudC5sb2NhdGlvbk5hbWUubGFiZWwnLCAnTG9jYXRpb24gTmFtZScpLAogICAgICAgICAgICB0aGVtZTogInRyYW5zcGFyZW50IiwKICAgICAgICAgICAgZGVsYXk6ICIxNTAiLAogICAgICAgICAgICBkdXJhdGlvbjogIjI1MCIsCiAgICAgICAgICAgIGhpZGVEZWxheTogIjUwIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3Quc3RvY2tMaXN0TWFuYWdlbWVudC5sb2NhdGlvbk5hbWUubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkxvY2F0aW9uIE5hbWUiCiAgICAgICAgICB9KSksCiAgICAgICAgICBhY2Nlc3NvcjogJ2xvY2F0aW9uLm5hbWUnLAogICAgICAgICAgYWdncmVnYXRlOiBmdW5jdGlvbiBhZ2dyZWdhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0sCiAgICAgICAgICBjbGFzc05hbWU6ICd3LXNwYWNlLW5vcm1hbCcKICAgICAgICB9LCB7CiAgICAgICAgICBIZWFkZXI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50LnN0b2NrTGlzdE5hbWUubGFiZWwnLCAnU3RvY2tsaXN0IE5hbWUnKSwKICAgICAgICAgICAgdGhlbWU6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgIGRlbGF5OiAiMTUwIiwKICAgICAgICAgICAgZHVyYXRpb246ICIyNTAiLAogICAgICAgICAgICBoaWRlRGVsYXk6ICI1MCIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LnN0b2NrTGlzdE1hbmFnZW1lbnQuc3RvY2tMaXN0TmFtZS5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU3RvY2tsaXN0IE5hbWUiCiAgICAgICAgICB9KSksCiAgICAgICAgICBhY2Nlc3NvcjogJ25hbWUnLAogICAgICAgICAgYWdncmVnYXRlOiBmdW5jdGlvbiBhZ2dyZWdhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvcHJvcC10eXBlcwogICAgICAgICAgQ2VsbDogZnVuY3Rpb24gQ2VsbChfcmVmKSB7CiAgICAgICAgICAgIHZhciBhZ2dyZWdhdGVkID0gX3JlZi5hZ2dyZWdhdGVkLAogICAgICAgICAgICAgIG9yaWdpbmFsID0gX3JlZi5vcmlnaW5hbDsKICAgICAgICAgICAgaWYgKGFnZ3JlZ2F0ZWQpIHsKICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgICAgICAgIGhyZWY6ICIvb3BlbmJveGVzL3JlcXVpc2l0aW9uVGVtcGxhdGUvc2hvdy8iLmNvbmNhdChvcmlnaW5hbC5zdG9ja2xpc3RJZCkKICAgICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgICAgICAgIHRpdGxlOiBvcmlnaW5hbC5uYW1lLAogICAgICAgICAgICAgIHRoZW1lOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICAgIGRlbGF5OiAiMTUwIiwKICAgICAgICAgICAgICBkdXJhdGlvbjogIjI1MCIsCiAgICAgICAgICAgICAgaGlkZURlbGF5OiAiNTAiCiAgICAgICAgICAgIH0sIG9yaWdpbmFsLm5hbWUpKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBIZWFkZXI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50Lm1vbnRobHlTdG9ja0xpc3RRdHkubGFiZWwnLCAnTW9udGhseSBTdG9ja2xpc3QgUXR5JyksCiAgICAgICAgICAgIHRoZW1lOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICBkZWxheTogIjE1MCIsCiAgICAgICAgICAgIGR1cmF0aW9uOiAiMjUwIiwKICAgICAgICAgICAgaGlkZURlbGF5OiAiNTAiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50Lm1vbnRobHlTdG9ja0xpc3RRdHkubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk1vbnRobHkgU3RvY2tsaXN0IFF0eSIKICAgICAgICAgIH0pKSwKICAgICAgICAgIGFjY2Vzc29yOiAnbW9udGhseURlbWFuZCcsCiAgICAgICAgICBhZ2dyZWdhdGU6IGZ1bmN0aW9uIGFnZ3JlZ2F0ZSh2YWxzKSB7CiAgICAgICAgICAgIHJldHVybiBfLnN1bSh2YWxzKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjbGFzc05hbWU6ICd0ZXh0LWNlbnRlcicsCiAgICAgICAgICBDZWxsOiBmdW5jdGlvbiBDZWxsKF9yZWYyKSB7CiAgICAgICAgICAgIHZhciBhZ2dyZWdhdGVkID0gX3JlZjIuYWdncmVnYXRlZCwKICAgICAgICAgICAgICBvcmlnaW5hbCA9IF9yZWYyLm9yaWdpbmFsOwogICAgICAgICAgICBpZiAoYWdncmVnYXRlZCkgewogICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgICAgICAgIHRpdGxlOiBvcmlnaW5hbC5tb250aGx5RGVtYW5kLAogICAgICAgICAgICAgIHRoZW1lOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICAgIGRlbGF5OiAiMTUwIiwKICAgICAgICAgICAgICBkdXJhdGlvbjogIjI1MCIsCiAgICAgICAgICAgICAgaGlkZURlbGF5OiAiNTAiCiAgICAgICAgICAgIH0sIG9yaWdpbmFsLm1vbnRobHlEZW1hbmQpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIEhlYWRlcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTGlzdE1hbmFnZW1lbnQubWFuYWdlci5sYWJlbCcsICdNYW5hZ2VyJyksCiAgICAgICAgICAgIHRoZW1lOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICBkZWxheTogIjE1MCIsCiAgICAgICAgICAgIGR1cmF0aW9uOiAiMjUwIiwKICAgICAgICAgICAgaGlkZURlbGF5OiAiNTAiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50Lm1hbmFnZXIubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk1hbmFnZXIiCiAgICAgICAgICB9KSksCiAgICAgICAgICBhY2Nlc3NvcjogJ21hbmFnZXIubmFtZScsCiAgICAgICAgICBhZ2dyZWdhdGU6IGZ1bmN0aW9uIGFnZ3JlZ2F0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgfSwKICAgICAgICAgIENlbGw6IGZ1bmN0aW9uIENlbGwoX3JlZjMpIHsKICAgICAgICAgICAgdmFyIGFnZ3JlZ2F0ZWQgPSBfcmVmMy5hZ2dyZWdhdGVkLAogICAgICAgICAgICAgIG9yaWdpbmFsID0gX3JlZjMub3JpZ2luYWw7CiAgICAgICAgICAgIGlmIChhZ2dyZWdhdGVkKSB7CiAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7CiAgICAgICAgICAgICAgdGl0bGU6IG9yaWdpbmFsLm1hbmFnZXIubmFtZSwKICAgICAgICAgICAgICB0aGVtZTogInRyYW5zcGFyZW50IiwKICAgICAgICAgICAgICBkZWxheTogIjE1MCIsCiAgICAgICAgICAgICAgZHVyYXRpb246ICIyNTAiLAogICAgICAgICAgICAgIGhpZGVEZWxheTogIjUwIgogICAgICAgICAgICB9LCBvcmlnaW5hbC5tYW5hZ2VyLm5hbWUpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIEhlYWRlcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTGlzdE1hbmFnZW1lbnQucmVwbGVuaXNobWVudFBlcmlvZC5sYWJlbCcsICdSZXBsZW5pc2htZW50IHBlcmlvZCcpLAogICAgICAgICAgICB0aGVtZTogInRyYW5zcGFyZW50IiwKICAgICAgICAgICAgZGVsYXk6ICIxNTAiLAogICAgICAgICAgICBkdXJhdGlvbjogIjI1MCIsCiAgICAgICAgICAgIGhpZGVEZWxheTogIjUwIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3Quc3RvY2tMaXN0TWFuYWdlbWVudC5yZXBsZW5pc2htZW50UGVyaW9kLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZXBsZW5pc2htZW50IHBlcmlvZCIKICAgICAgICAgIH0pKSwKICAgICAgICAgIGFjY2Vzc29yOiAncmVwbGVuaXNobWVudFBlcmlvZCcsCiAgICAgICAgICBhZ2dyZWdhdGU6IGZ1bmN0aW9uIGFnZ3JlZ2F0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgfSwKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtY2VudGVyJywKICAgICAgICAgIENlbGw6IGZ1bmN0aW9uIENlbGwoX3JlZjQpIHsKICAgICAgICAgICAgdmFyIGFnZ3JlZ2F0ZWQgPSBfcmVmNC5hZ2dyZWdhdGVkLAogICAgICAgICAgICAgIG9yaWdpbmFsID0gX3JlZjQub3JpZ2luYWw7CiAgICAgICAgICAgIGlmIChhZ2dyZWdhdGVkKSB7CiAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7CiAgICAgICAgICAgICAgdGl0bGU6IG9yaWdpbmFsLnJlcGxlbmlzaG1lbnRQZXJpb2QsCiAgICAgICAgICAgICAgdGhlbWU6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgICAgZGVsYXk6ICIxNTAiLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAiMjUwIiwKICAgICAgICAgICAgICBoaWRlRGVsYXk6ICI1MCIKICAgICAgICAgICAgfSwgb3JpZ2luYWwucmVwbGVuaXNobWVudFBlcmlvZCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgSGVhZGVyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7CiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tMaXN0TWFuYWdlbWVudC5yZXBsZW5pc2htZW50UXR5LmxhYmVsJywgJ1JlcGxlbmlzaG1lbnQgUXR5JyksCiAgICAgICAgICAgIHRoZW1lOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICBkZWxheTogIjE1MCIsCiAgICAgICAgICAgIGR1cmF0aW9uOiAiMjUwIiwKICAgICAgICAgICAgaGlkZURlbGF5OiAiNTAiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50LnJlcGxlbmlzaG1lbnRRdHkubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJlcGxlbmlzaG1lbnQgUXR5IgogICAgICAgICAgfSkpLAogICAgICAgICAgYWNjZXNzb3I6ICdtYXhRdWFudGl0eScsCiAgICAgICAgICBhZ2dyZWdhdGU6IGZ1bmN0aW9uIGFnZ3JlZ2F0ZSh2YWxzKSB7CiAgICAgICAgICAgIHJldHVybiBfLnN1bSh2YWxzKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjbGFzc05hbWU6ICd0ZXh0LWNlbnRlcicsCiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvcHJvcC10eXBlcwogICAgICAgICAgQ2VsbDogZnVuY3Rpb24gQ2VsbChfcmVmNSkgewogICAgICAgICAgICB2YXIgYWdncmVnYXRlZCA9IF9yZWY1LmFnZ3JlZ2F0ZWQsCiAgICAgICAgICAgICAgaW5kZXggPSBfcmVmNS5pbmRleCwKICAgICAgICAgICAgICBvcmlnaW5hbCA9IF9yZWY1Lm9yaWdpbmFsOwogICAgICAgICAgICBpZiAoYWdncmVnYXRlZCkgewogICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIW9yaWdpbmFsWyJuZXciXSAmJiAhb3JpZ2luYWwuZWRpdCkgewogICAgICAgICAgICAgIHJldHVybiBfLmlzTmlsKG9yaWdpbmFsLm1heFF1YW50aXR5KSA/ICcnIDogb3JpZ2luYWwubWF4UXVhbnRpdHk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBfLmlzTmlsKG9yaWdpbmFsLm1heFF1YW50aXR5KSB8fCBvcmlnaW5hbC5tYXhRdWFudGl0eSA9PT0gJycgPyAnaGFzLWVycm9yJyA6ICcnCiAgICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgICAgICAgICAgICB0aXRsZTogb3JpZ2luYWwubWF4UXVhbnRpdHksCiAgICAgICAgICAgICAgdGhlbWU6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgICAgZGVsYXk6ICIxNTAiLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAiMjUwIiwKICAgICAgICAgICAgICBoaWRlRGVsYXk6ICI1MCIKICAgICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXQsIHsKICAgICAgICAgICAgICB2YWx1ZTogb3JpZ2luYWwubWF4UXVhbnRpdHkgfHwgJycsCiAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnVwZGF0ZUl0ZW1GaWVsZChpbmRleCwgJ21heFF1YW50aXR5JywgdmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBIZWFkZXI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50LnVvbS5sYWJlbCcsICdVbml0IG9mIG1lYXN1cmUnKSwKICAgICAgICAgICAgdGhlbWU6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgIGRlbGF5OiAiMTUwIiwKICAgICAgICAgICAgZHVyYXRpb246ICIyNTAiLAogICAgICAgICAgICBoaWRlRGVsYXk6ICI1MCIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LnN0b2NrTGlzdE1hbmFnZW1lbnQudW9tLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVbml0IG9mIG1lYXN1cmUiCiAgICAgICAgICB9KSksCiAgICAgICAgICBhY2Nlc3NvcjogJ3VvbScsCiAgICAgICAgICBhZ2dyZWdhdGU6IGZ1bmN0aW9uIGFnZ3JlZ2F0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgfSwKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtY2VudGVyJywKICAgICAgICAgIENlbGw6IGZ1bmN0aW9uIENlbGwoX3JlZjYpIHsKICAgICAgICAgICAgdmFyIGFnZ3JlZ2F0ZWQgPSBfcmVmNi5hZ2dyZWdhdGVkLAogICAgICAgICAgICAgIG9yaWdpbmFsID0gX3JlZjYub3JpZ2luYWw7CiAgICAgICAgICAgIGlmIChhZ2dyZWdhdGVkKSB7CiAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7CiAgICAgICAgICAgICAgdGl0bGU6IG9yaWdpbmFsLnVvbSwKICAgICAgICAgICAgICB0aGVtZTogInRyYW5zcGFyZW50IiwKICAgICAgICAgICAgICBkZWxheTogIjE1MCIsCiAgICAgICAgICAgICAgZHVyYXRpb246ICIyNTAiLAogICAgICAgICAgICAgIGhpZGVEZWxheTogIjUwIgogICAgICAgICAgICB9LCBvcmlnaW5hbC51b20pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIEhlYWRlcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTGlzdE1hbmFnZW1lbnQuYWN0aW9ucy5sYWJlbCcsICdBY3Rpb25zJyksCiAgICAgICAgICAgIHRoZW1lOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICBkZWxheTogIjE1MCIsCiAgICAgICAgICAgIGR1cmF0aW9uOiAiMjUwIiwKICAgICAgICAgICAgaGlkZURlbGF5OiAiNTAiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50LmFjdGlvbnMubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFjdGlvbnMiCiAgICAgICAgICB9KSksCiAgICAgICAgICBhY2Nlc3NvcjogJ2VkaXQnLAogICAgICAgICAgbWluV2lkdGg6IDIzMCwKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtY2VudGVyJywKICAgICAgICAgIGFnZ3JlZ2F0ZTogZnVuY3Rpb24gYWdncmVnYXRlKCkgewogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICB9LAogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L3Byb3AtdHlwZXMKICAgICAgICAgIENlbGw6IGZ1bmN0aW9uIENlbGwoX3JlZjcpIHsKICAgICAgICAgICAgdmFyIGFnZ3JlZ2F0ZWQgPSBfcmVmNy5hZ2dyZWdhdGVkLAogICAgICAgICAgICAgIGluZGV4ID0gX3JlZjcuaW5kZXgsCiAgICAgICAgICAgICAgb3JpZ2luYWwgPSBfcmVmNy5vcmlnaW5hbDsKICAgICAgICAgICAgaWYgKGFnZ3JlZ2F0ZWQpIHsKICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGZsZXgtd3JhcCIKICAgICAgICAgICAgfSwgX3RoaXM4LnByb3BzLmlzVXNlckFkbWluID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLXhzIG1yLTEiLAogICAgICAgICAgICAgIGRpc2FibGVkOiBvcmlnaW5hbC5lZGl0IHx8IG9yaWdpbmFsWyJuZXciXSB8fCAhX3RoaXM4LnByb3BzLmlzVXNlckFkbWluLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LmVkaXRJdGVtKGluZGV4KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uZWRpdC5sYWJlbCIsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFZGl0IgogICAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLXhzIG1yLTEiLAogICAgICAgICAgICAgIGRpc2FibGVkOiAhb3JpZ2luYWwuZWRpdCAmJiAhb3JpZ2luYWxbIm5ldyJdIHx8ICFvcmlnaW5hbC5zdG9ja2xpc3RJZCB8fCBfLmlzTmlsKG9yaWdpbmFsLm1heFF1YW50aXR5KSB8fCBvcmlnaW5hbC5tYXhRdWFudGl0eSA9PT0gJycgfHwgIV90aGlzOC5wcm9wcy5pc1VzZXJBZG1pbiwKICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5zYXZlSXRlbShpbmRleCwgb3JpZ2luYWwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgICAgaWQ6ICJyZWFjdC5kZWZhdWx0LmJ1dHRvbi5zYXZlLmxhYmVsIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNhdmUiCiAgICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtZGFuZ2VyIGJ0bi14cyBtci0xIiwKICAgICAgICAgICAgICBkaXNhYmxlZDogIV90aGlzOC5wcm9wcy5pc1VzZXJBZG1pbiwKICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5kZWxldGVJdGVtKGluZGV4KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICAgIGlkOiAicmVhY3QuZGVmYXVsdC5idXR0b24uZGVsZXRlLmxhYmVsIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlbGV0ZSIKICAgICAgICAgICAgfSkpKSA6IG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYnRuLXhzIG1yLTEiLAogICAgICAgICAgICAgIGRpc2FibGVkOiBvcmlnaW5hbC5lZGl0IHx8IG9yaWdpbmFsWyJuZXciXSwKICAgICAgICAgICAgICBocmVmOiAiL29wZW5ib3hlcy9zdG9ja2xpc3QvcmVuZGVyUGRmLyIuY29uY2F0KG9yaWdpbmFsLnN0b2NrbGlzdElkKQogICAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnByaW50UGRmLmxhYmVsIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlByaW50IFBERiIKICAgICAgICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYSIsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IGJ0bi14cyBtci0xIiwKICAgICAgICAgICAgICBkaXNhYmxlZDogb3JpZ2luYWwuZWRpdCB8fCBvcmlnaW5hbFsibmV3Il0sCiAgICAgICAgICAgICAgaHJlZjogIi9vcGVuYm94ZXMvc3RvY2tsaXN0L2dlbmVyYXRlQ3N2LyIuY29uY2F0KG9yaWdpbmFsLnN0b2NrbGlzdElkKQogICAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnByaW50WGxzLmxhYmVsIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlByaW50IFhMUyIKICAgICAgICAgICAgfSkpLCBvcmlnaW5hbC5tYW5hZ2VyID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRW1haWxNb2RhbCwgewogICAgICAgICAgICAgIHN0b2NrbGlzdElkOiBvcmlnaW5hbC5zdG9ja2xpc3RJZCwKICAgICAgICAgICAgICB1c2VyczogX3RoaXM4LnN0YXRlLnVzZXJzLAogICAgICAgICAgICAgIG1hbmFnZXI6IG9yaWdpbmFsLm1hbmFnZXIKICAgICAgICAgICAgfSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYnRuLXhzIG1yLTEiLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gQWxlcnQuZXJyb3IoX3RoaXM4LnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tMaXN0TWFuYWdlbWVudC5hbGVydC5ub01hbmFnZXJBc3NvY2lhdGVkLmxhYmVsJywgJ1RoZXJlIGlzIG5vIG1hbmFnZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc3RvY2sgbGlzdC4gUGxlYXNlIGFkZCBhIG1hbmFnZXIgYW5kIHRyeSBhZ2Fpbi4nKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLmVtYWlsLmxhYmVsIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkVtYWlsIgogICAgICAgICAgICB9KSkpOwogICAgICAgICAgfQogICAgICAgIH1dCiAgICAgIH0pLCB0aGlzLnByb3BzLmlzVXNlckFkbWluID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXggZmxleC1yb3cgbXktMSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuc2VsZWN0ZWRTdG9ja2xpc3QsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LnNldFN0YXRlKHsKICAgICAgICAgICAgc2VsZWN0ZWRTdG9ja2xpc3Q6IHZhbHVlCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIG9wdGlvbnM6IHRoaXMuc3RhdGUuYXZhaWxhYmxlU3RvY2tsaXN0cywKICAgICAgICB2YWx1ZUtleTogImlkIiwKICAgICAgICBsYWJlbEtleTogIm5hbWUiLAogICAgICAgIGNsYXNzTmFtZTogInNlbGVjdC14cyBzdG9ja2xpc3Qtc2VsZWN0IgogICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtc3VjY2VzcyBidG4teHMgbWwtMSIsCiAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLnNlbGVjdGVkU3RvY2tsaXN0LAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICBfdGhpczguYWRkSXRlbShfdGhpczguc3RhdGUuc2VsZWN0ZWRTdG9ja2xpc3QpOwogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja0xpc3RNYW5hZ2VtZW50LmFkZFN0b2NrTGlzdC5sYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBZGQgc3RvY2tsaXN0IgogICAgICB9KSkpIDogbnVsbCk7CiAgICB9CiAgfV0pOwogIHJldHVybiBTdG9ja2xpc3RNYW5hZ2VtZW50Owp9KENvbXBvbmVudCk7CnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHsKICByZXR1cm4gewogICAgdHJhbnNsYXRlOiB0cmFuc2xhdGVXaXRoRGVmYXVsdE1lc3NhZ2UoZ2V0VHJhbnNsYXRlKHN0YXRlLmxvY2FsaXplKSksCiAgICBsb2NhbGU6IHN0YXRlLnNlc3Npb24uYWN0aXZlTGFuZ3VhZ2UsCiAgICBzdG9ja0xpc3RNYW5hZ2VtZW50VHJhbnNsYXRpb25zRmV0Y2hlZDogc3RhdGUuc2Vzc2lvbi5mZXRjaGVkVHJhbnNsYXRpb25zLnN0b2NrTGlzdE1hbmFnZW1lbnQsCiAgICBpc1VzZXJBZG1pbjogc3RhdGUuc2Vzc2lvbi5pc1VzZXJBZG1pbgogIH07Cn07CmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCB7CiAgc2hvd1NwaW5uZXI6IHNob3dTcGlubmVyLAogIGhpZGVTcGlubmVyOiBoaWRlU3Bpbm5lciwKICBmZXRjaFRyYW5zbGF0aW9uczogZmV0Y2hUcmFuc2xhdGlvbnMKfSkoU3RvY2tsaXN0TWFuYWdlbWVudCk7ClN0b2NrbGlzdE1hbmFnZW1lbnQucHJvcFR5cGVzID0gewogIC8qKiBSZWFjdCByb3V0ZXIncyBvYmplY3Qgd2hpY2ggY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdXJsIHZhcmFpYWJsZXMgYW5kIHBhcmFtcyAqLwogIG1hdGNoOiBQcm9wVHlwZXMuc2hhcGUoewogICAgcGFyYW1zOiBQcm9wVHlwZXMuc2hhcGUoewogICAgICBwcm9kdWN0SWQ6IFByb3BUeXBlcy5zdHJpbmcKICAgIH0pCiAgfSkuaXNSZXF1aXJlZCwKICAvKiogRnVuY3Rpb24gY2FsbGVkIHdoZW4gZGF0YSBpcyBsb2FkaW5nICovCiAgc2hvd1NwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgLyoqIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRhdGEgaGFzIGxvYWRlZCAqLwogIGhpZGVTcGlubmVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIHRyYW5zbGF0ZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBsb2NhbGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwKICBzdG9ja0xpc3RNYW5hZ2VtZW50VHJhbnNsYXRpb25zRmV0Y2hlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCwKICBmZXRjaFRyYW5zbGF0aW9uczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBpc1VzZXJBZG1pbjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZAp9Ow=="},null]}