{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/replenishment/CreateReplenishment.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/replenishment/CreateReplenishment.jsx","mtime":1698037749000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9CmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgYXJyYXlNdXRhdG9ycyBmcm9tICdmaW5hbC1mb3JtLWFycmF5cyc7CmltcG9ydCB1cGRhdGUgZnJvbSAnaW1tdXRhYmlsaXR5LWhlbHBlcic7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7CmltcG9ydCB7IGNvbmZpcm1BbGVydCB9IGZyb20gJ3JlYWN0LWNvbmZpcm0tYWxlcnQnOwppbXBvcnQgeyBGb3JtIH0gZnJvbSAncmVhY3QtZmluYWwtZm9ybSc7CmltcG9ydCB7IGdldFRyYW5zbGF0ZSB9IGZyb20gJ3JlYWN0LWxvY2FsaXplLXJlZHV4JzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgaGlkZVNwaW5uZXIsIHNob3dTcGlubmVyIH0gZnJvbSAnYWN0aW9ucyc7CmltcG9ydCBBcnJheUZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9BcnJheUZpZWxkJzsKaW1wb3J0IENoZWNrYm94RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0NoZWNrYm94RmllbGQnOwppbXBvcnQgTGFiZWxGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvTGFiZWxGaWVsZCc7CmltcG9ydCBUZXh0RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL1RleHRGaWVsZCc7CmltcG9ydCBhcGlDbGllbnQsIHsgZmxhdHRlblJlcXVlc3QsIHBhcnNlUmVzcG9uc2UgfSBmcm9tICd1dGlscy9hcGlDbGllbnQnOwppbXBvcnQgeyByZW5kZXJGb3JtRmllbGQgfSBmcm9tICd1dGlscy9mb3JtLXV0aWxzJzsKaW1wb3J0IFNlbGVjdCBmcm9tICd1dGlscy9TZWxlY3QnOwppbXBvcnQgVHJhbnNsYXRlLCB7IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZSB9IGZyb20gJ3V0aWxzL1RyYW5zbGF0ZSc7CmltcG9ydCAncmVhY3QtY29uZmlybS1hbGVydC9zcmMvcmVhY3QtY29uZmlybS1hbGVydC5jc3MnOwp2YXIgRklFTEQgPSB7CiAgcmVxdWlyZW1lbnRzOiB7CiAgICB0eXBlOiBBcnJheUZpZWxkLAogICAgYXJyb3dzTmF2aWdhdGlvbjogdHJ1ZSwKICAgIGZpZWxkczogewogICAgICBjaGVja2VkOiB7CiAgICAgICAgdHlwZTogQ2hlY2tib3hGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuc2VsZWN0QWxsLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlbGVjdCBBbGwnLAogICAgICAgIGZsZXhXaWR0aDogNCwKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZikgewogICAgICAgICAgdmFyIHJvd0luZGV4ID0gX3JlZi5yb3dJbmRleCwKICAgICAgICAgICAgYWxsUm93c1NlbGVjdGVkID0gX3JlZi5hbGxSb3dzU2VsZWN0ZWQsCiAgICAgICAgICAgIHNlbGVjdEFsbENvZGUgPSBfcmVmLnNlbGVjdEFsbENvZGUsCiAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkSXRlbXMgPSBfcmVmLnVwZGF0ZVNlbGVjdGVkSXRlbXM7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoZWFkZXJIdG1sOiBmdW5jdGlvbiBoZWFkZXJIdG1sKCkgewogICAgICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAibXQtMSIsCiAgICAgICAgICAgICAgICBjaGVja2VkOiBhbGxSb3dzU2VsZWN0ZWQsCiAgICAgICAgICAgICAgICBvbkNsaWNrOiBzZWxlY3RBbGxDb2RlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShjaGVja1N0YXRlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZVNlbGVjdGVkSXRlbXMoY2hlY2tTdGF0ZSwgcm93SW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgJ3Byb2R1Y3QucHJvZHVjdENvZGUnOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQucHJvZHVjdENvZGUubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ29kZScsCiAgICAgICAgZmxleFdpZHRoOiA1LAogICAgICAgIGhlYWRlckFsaWduOiAnbGVmdCcsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgY2VsbENsYXNzTmFtZTogJ3RleHQtbGVmdCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgICdwcm9kdWN0Lm5hbWUnOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQucHJvZHVjdC5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQcm9kdWN0JywKICAgICAgICBmbGV4V2lkdGg6IDMwLAogICAgICAgIGhlYWRlckFsaWduOiAnbGVmdCcsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgY2VsbENsYXNzTmFtZTogJ3RleHQtbGVmdCcsCiAgICAgICAgICBzaG93VmFsdWVUb29sdGlwOiB0cnVlCiAgICAgICAgfQogICAgICB9LAogICAgICB6b25lOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnJlcGxlbmlzaG1lbnQuem9uZS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdab25lJywKICAgICAgICBoZWFkZXJBbGlnbjogJ2xlZnQnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtbGVmdCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgICdiaW5Mb2NhdGlvbi5uYW1lJzogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5yZXBsZW5pc2htZW50LmJpbi5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCaW4nLAogICAgICAgIGhlYWRlckFsaWduOiAnbGVmdCcsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbHVlKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJ0RFRkFVTFQnOwogICAgICAgICAgfSwKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtbGVmdCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHF1YW50aXR5SW5CaW46IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3QucmVwbGVuaXNobWVudC5xdWFudGl0eUluQmluLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1F0eSBpbiBCaW4nLAogICAgICAgIGhlYWRlckFsaWduOiAncmlnaHQnLAogICAgICAgIGZsZXhXaWR0aDogOCwKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBjZWxsQ2xhc3NOYW1lOiAndGV4dC1yaWdodCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1heFF1YW50aXR5OiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnJlcGxlbmlzaG1lbnQubWF4UXVhbnRpdHkubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWF4IFF0eScsCiAgICAgICAgaGVhZGVyQWxpZ246ICdyaWdodCcsCiAgICAgICAgZmxleFdpZHRoOiA4LAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIGNlbGxDbGFzc05hbWU6ICd0ZXh0LXJpZ2h0JwogICAgICAgIH0KICAgICAgfSwKICAgICAgcXVhbnRpdHlBdmFpbGFibGU6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3QucmVwbGVuaXNobWVudC5xdWFudGl0eUF2YWlsYWJsZS5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdRdHkgYXZhaWxhYmxlJywKICAgICAgICBoZWFkZXJBbGlnbjogJ3JpZ2h0JywKICAgICAgICBmbGV4V2lkdGg6IDgsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgY2VsbENsYXNzTmFtZTogJ3RleHQtcmlnaHQnCiAgICAgICAgfQogICAgICB9LAogICAgICBxdWFudGl0eTogewogICAgICAgIHR5cGU6IFRleHRGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQucXVhbnRpdHlUb1RyYW5zZmVyLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1F0eSB0byBUcmFuc2ZlcicsCiAgICAgICAgaGVhZGVyQWxpZ246ICdjZW50ZXInLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgY2VsbENsYXNzTmFtZTogJ3RleHQtY2VudGVyJwogICAgICAgIH0sCiAgICAgICAgZmxleFdpZHRoOiAxMCwKICAgICAgICBmaWVsZEtleTogJycsCiAgICAgICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYyKSB7CiAgICAgICAgICB2YXIgdXBkYXRlUm93ID0gX3JlZjIudXBkYXRlUm93LAogICAgICAgICAgICB2YWx1ZXMgPSBfcmVmMi52YWx1ZXMsCiAgICAgICAgICAgIHJvd0luZGV4ID0gX3JlZjIucm93SW5kZXg7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBvbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlUm93KHZhbHVlcywgcm93SW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTsKZnVuY3Rpb24gdmFsaWRhdGUodmFsdWVzKSB7CiAgdmFyIGVycm9ycyA9IHt9OwogIGVycm9ycy5yZXF1aXJlbWVudHMgPSBbXTsKICBfLmZvckVhY2godmFsdWVzLnJlcXVpcmVtZW50cywgZnVuY3Rpb24gKGl0ZW0sIGtleSkgewogICAgLy8gSWYgaXRlbSBub3QgY2hlY2tlZCwgd2UgZG9uJ3Qgd2FudCB0byB2YWxpZGF0ZQogICAgaWYgKCFpdGVtLmNoZWNrZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCFpdGVtLnF1YW50aXR5KSB7CiAgICAgIGVycm9ycy5yZXF1aXJlbWVudHNba2V5XSA9IHsKICAgICAgICBxdWFudGl0eTogJ3JlYWN0LnJlcGxlbmlzaG1lbnQuZXJyb3IuZW1wdHlRdHlUb1RyYW5zZmVyLmxhYmVsJwogICAgICB9OwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoaXRlbS5xdWFudGl0eSA8IDEpIHsKICAgICAgZXJyb3JzLnJlcXVpcmVtZW50c1trZXldID0gewogICAgICAgIHF1YW50aXR5OiAncmVhY3QucmVwbGVuaXNobWVudC5lcnJvci5xdWFudGl0eS5sYWJlbCcKICAgICAgfTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKGl0ZW0ucXVhbnRpdHkgPiBpdGVtLnF1YW50aXR5QXZhaWxhYmxlKSB7CiAgICAgIGVycm9ycy5yZXF1aXJlbWVudHNba2V5XSA9IHsKICAgICAgICBxdWFudGl0eTogJ3JlYWN0LnJlcGxlbmlzaG1lbnQuZXJyb3IucXVhbnRpdHkuZ3JlYXRlclRoYW5RQVRQLmxhYmVsJwogICAgICB9OwogICAgfQogIH0pOwogIHZhciBhbnlSb3dTZWxlY3RlZCA9IF8uZmluZCh2YWx1ZXMucmVxdWlyZW1lbnRzLCBmdW5jdGlvbiAocm93KSB7CiAgICByZXR1cm4gcm93LmNoZWNrZWQ7CiAgfSk7CiAgaWYgKCFhbnlSb3dTZWxlY3RlZCkgewogICAgXy5mb3JFYWNoKHZhbHVlcy5yZXF1aXJlbWVudHMsIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgICAgZXJyb3JzLnJlcXVpcmVtZW50c1trZXldID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBlcnJvcnMucmVxdWlyZW1lbnRzW2tleV0pLCB7fSwgewogICAgICAgIGNoZWNrZWQ6ICdyZWFjdC5yZXBsZW5pc2htZW50LmVycm9yLnNlbGVjdGVkLmxhYmVsJwogICAgICB9KTsKICAgIH0pOwogIH0KICByZXR1cm4gZXJyb3JzOwp9CnZhciBERUZBVUxUX09QVElPTiA9ICdCRUxPV19NSU5JTVVNJzsKdmFyIENyZWF0ZVJlcGxlbmlzaG1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoQ3JlYXRlUmVwbGVuaXNobWVudCwgX0NvbXBvbmVudCk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihDcmVhdGVSZXBsZW5pc2htZW50KTsKICBmdW5jdGlvbiBDcmVhdGVSZXBsZW5pc2htZW50KHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ3JlYXRlUmVwbGVuaXNobWVudCk7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRhdGFGZXRjaGVkIiwgZmFsc2UpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGludmVudG9yeUxldmVsU3RhdHVzOiBERUZBVUxUX09QVElPTiwKICAgICAgc3RhdHVzT3B0aW9uczogW10sCiAgICAgIHZhbHVlczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5wcm9wcy5pbml0aWFsVmFsdWVzKSwge30sIHsKICAgICAgICByZXF1aXJlbWVudHM6IFtdCiAgICAgIH0pLAogICAgICBpc0RpcnR5OiBmYWxzZQogICAgfTsKICAgIF90aGlzLnVwZGF0ZVJvdyA9IF90aGlzLnVwZGF0ZVJvdy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLnVwZGF0ZVNlbGVjdGVkSXRlbXMgPSBfdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMuc2VsZWN0QWxsUm93cyA9IF90aGlzLnNlbGVjdEFsbFJvd3MuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICBfdGhpcy5hbGxSb3dzU2VsZWN0ZWQgPSBfdGhpcy5hbGxSb3dzU2VsZWN0ZWQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhDcmVhdGVSZXBsZW5pc2htZW50LCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICBpZiAodGhpcy5wcm9wcy5yZXBsZW5pc2htZW50VHJhbnNsYXRpb25zRmV0Y2hlZCkgewogICAgICAgIHRoaXMuZGF0YUZldGNoZWQgPSB0cnVlOwogICAgICAgIHRoaXMuZmV0Y2hTdGF0dXNPcHRpb25zKCk7CiAgICAgICAgdGhpcy5mZXRjaFJlcXVpcmVtZW50cyh0aGlzLnByb3BzLmxvY2F0aW9uSWQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHsKICAgICAgaWYgKG5leHRQcm9wcy5yZXBsZW5pc2htZW50VHJhbnNsYXRpb25zRmV0Y2hlZCkgewogICAgICAgIGlmICghdGhpcy5kYXRhRmV0Y2hlZCkgewogICAgICAgICAgdGhpcy5kYXRhRmV0Y2hlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLmZldGNoU3RhdHVzT3B0aW9ucygpOwogICAgICAgICAgdGhpcy5mZXRjaFJlcXVpcmVtZW50cyh0aGlzLnByb3BzLmxvY2F0aW9uSWQpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5sb2NhdGlvbklkICE9PSBuZXh0UHJvcHMubG9jYXRpb25JZCkgewogICAgICAgICAgdGhpcy5mZXRjaFJlcXVpcmVtZW50cyhuZXh0UHJvcHMubG9jYXRpb25JZCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYWxsUm93c1NlbGVjdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhbGxSb3dzU2VsZWN0ZWQoKSB7CiAgICAgIHJldHVybiAhXy5maW5kKHRoaXMuc3RhdGUudmFsdWVzLnJlcXVpcmVtZW50cywgZnVuY3Rpb24gKHJvdykgewogICAgICAgIHJldHVybiAhcm93LmNoZWNrZWQ7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNlbGVjdEFsbFJvd3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdEFsbFJvd3MoKSB7CiAgICAgIHZhciBpc0FsbFNlbGVjdGVkID0gdGhpcy5hbGxSb3dzU2VsZWN0ZWQoKTsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgdmFsdWVzOiB1cGRhdGUodGhpcy5zdGF0ZS52YWx1ZXMsIHsKICAgICAgICAgIHJlcXVpcmVtZW50czogewogICAgICAgICAgICAkYXBwbHk6IGZ1bmN0aW9uICRhcHBseShyZXEpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVxLm1hcChmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0KSwge30sIHsKICAgICAgICAgICAgICAgICAgY2hlY2tlZDogIWlzQWxsU2VsZWN0ZWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlU2VsZWN0ZWRJdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRJdGVtcyhjaGVja2VkVmFsdWUsIGluZGV4KSB7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIHZhbHVlczogdXBkYXRlKHRoaXMuc3RhdGUudmFsdWVzLCB7CiAgICAgICAgICByZXF1aXJlbWVudHM6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgaW5kZXgsIHsKICAgICAgICAgICAgY2hlY2tlZDogewogICAgICAgICAgICAgICRzZXQ6IGNoZWNrZWRWYWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVJvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUm93KHZhbHVlcywgaW5kZXgpIHsKICAgICAgdmFyIGl0ZW0gPSB2YWx1ZXMucmVxdWlyZW1lbnRzW2luZGV4XTsKICAgICAgaWYgKGl0ZW0ucXVhbnRpdHkgIT09IHRoaXMuc3RhdGUudmFsdWVzLnJlcXVpcmVtZW50c1tpbmRleF0ucXVhbnRpdHkpIHsKICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgIHZhbHVlczogdXBkYXRlKHZhbHVlcywgewogICAgICAgICAgICByZXF1aXJlbWVudHM6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgaW5kZXgsIHsKICAgICAgICAgICAgICAkc2V0OiBpdGVtCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KSwKICAgICAgICAgIGlzRGlydHk6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoU3RhdHVzT3B0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hTdGF0dXNPcHRpb25zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHVybCA9ICcvb3BlbmJveGVzL2FwaS9yZXBsZW5pc2htZW50cy9zdGF0dXNPcHRpb25zJzsKICAgICAgcmV0dXJuIGFwaUNsaWVudC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgdmFyIHN0YXR1c09wdGlvbnMgPSByZXNwLmRhdGEuZGF0YTsKICAgICAgICBfdGhpczIuc2V0U3RhdGUoewogICAgICAgICAgc3RhdHVzT3B0aW9uczogc3RhdHVzT3B0aW9ucwogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7fSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hSZXF1aXJlbWVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoUmVxdWlyZW1lbnRzKGxvY2F0aW9uSWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgdmFyIGludmVudG9yeUxldmVsU3RhdHVzID0gdGhpcy5zdGF0ZS5pbnZlbnRvcnlMZXZlbFN0YXR1czsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9yZXF1aXJlbWVudHM/bG9jYXRpb24uaWQ9Ii5jb25jYXQobG9jYXRpb25JZCk7CiAgICAgIGlmIChpbnZlbnRvcnlMZXZlbFN0YXR1cy5pZCkgewogICAgICAgIHVybCArPSAiJmludmVudG9yeUxldmVsU3RhdHVzPSIuY29uY2F0KGludmVudG9yeUxldmVsU3RhdHVzLmlkKTsKICAgICAgfQogICAgICByZXR1cm4gYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICB2YXIgcmVxdWlyZW1lbnRzID0gXy5tYXAocGFyc2VSZXNwb25zZShyZXNwLmRhdGEuZGF0YSksIGZ1bmN0aW9uIChyZXF1aXJlbWVudCkgewogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVxdWlyZW1lbnQpLCB7fSwgewogICAgICAgICAgICBxdWFudGl0eTogcmVxdWlyZW1lbnQucXVhbnRpdHlOZWVkZWQsCiAgICAgICAgICAgIGNoZWNrZWQ6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7CiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgcmVxdWlyZW1lbnRzOiByZXF1aXJlbWVudHMKICAgICAgICAgIH0sCiAgICAgICAgICBpc0RpcnR5OiBmYWxzZQogICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlUmVwbGVuaXNobWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVwbGVuaXNobWVudCh2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgdmFyIHVybCA9ICcvb3BlbmJveGVzL2FwaS9yZXBsZW5pc2htZW50cy8nOwogICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICByZXBsZW5pc2htZW50SXRlbXM6IHZhbHVlcy5yZXF1aXJlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5jaGVja2VkICYmIGl0ZW0ucXVhbnRpdHkgPiAwOwogICAgICAgIH0pCiAgICAgIH07CiAgICAgIGFwaUNsaWVudC5wb3N0KHVybCwgZmxhdHRlblJlcXVlc3QocGF5bG9hZCkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIF9yZXNwb25zZSRkYXRhLCBfcmVzcG9uc2UkZGF0YSRkYXRhLCBfcmVzcG9uc2UkZGF0YTI7CiAgICAgICAgX3RoaXM0LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgX3RoaXM0LnByb3BzLmhpc3RvcnkucHVzaCgiL29wZW5ib3hlcy9yZXBsZW5pc2htZW50L2NyZWF0ZS8iLmNvbmNhdCgoX3Jlc3BvbnNlJGRhdGEgPSByZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcG9uc2UkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9yZXNwb25zZSRkYXRhJGRhdGEgPSBfcmVzcG9uc2UkZGF0YS5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcG9uc2UkZGF0YSRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzcG9uc2UkZGF0YSRkYXRhLmlkKSk7CiAgICAgICAgX3RoaXM0LnByb3BzLm5leHRQYWdlKChfcmVzcG9uc2UkZGF0YTIgPSByZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcG9uc2UkZGF0YTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXNwb25zZSRkYXRhMi5kYXRhKTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczQucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW52ZW50b3J5TGV2ZWxTdGF0dXNDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGludmVudG9yeUxldmVsU3RhdHVzQ2hhbmdlKHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICBpZiAodGhpcy5zdGF0ZS5pc0RpcnR5KSB7CiAgICAgICAgY29uZmlybUFsZXJ0KHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QucmVwbGVuaXNobWVudC5tZXNzYWdlLmNvbmZpcm1TdGF0dXNDaGFuZ2UubGFiZWwnLCAnQ29uZmlybSBpbnZlbnRvcnkgbGV2ZWwgc3RhdHVzIGNoYW5nZScpLAogICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnJlcGxlbmlzaG1lbnQuY29uZmlybVN0YXR1c0NoYW5nZS5sYWJlbCcsICdQcmV2aW91c2x5IGVkaXRlZCBxdWFudGl0aWVzIHdpbGwgYmUgbG9zdCBhZnRlciB0aGlzIGNoYW5nZS4gQXJlIHlvdSBzdXJlPycpLAogICAgICAgICAgYnV0dG9uczogW3sKICAgICAgICAgICAgbGFiZWw6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5kZWZhdWx0Lnllcy5sYWJlbCcsICdZZXMnKSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGludmVudG9yeUxldmVsU3RhdHVzOiB2YWx1ZQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZmV0Y2hSZXF1aXJlbWVudHMoX3RoaXM1LnByb3BzLmxvY2F0aW9uSWQpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC5uby5sYWJlbCcsICdObycpCiAgICAgICAgICB9XQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgaW52ZW50b3J5TGV2ZWxTdGF0dXM6IHZhbHVlCiAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNS5mZXRjaFJlcXVpcmVtZW50cyhfdGhpczUucHJvcHMubG9jYXRpb25JZCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtLCB7CiAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkge30sCiAgICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlLAogICAgICAgIG11dGF0b3JzOiBfb2JqZWN0U3ByZWFkKHt9LCBhcnJheU11dGF0b3JzKSwKICAgICAgICBpbml0aWFsVmFsdWVzOiB0aGlzLnN0YXRlLnZhbHVlcywKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihfcmVmMykgewogICAgICAgICAgdmFyIGhhbmRsZVN1Ym1pdCA9IF9yZWYzLmhhbmRsZVN1Ym1pdCwKICAgICAgICAgICAgdmFsdWVzID0gX3JlZjMudmFsdWVzLAogICAgICAgICAgICBpbnZhbGlkID0gX3JlZjMuaW52YWxpZDsKICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXggZmxleC1jb2x1bW4iCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gc3VibWl0LWJ1dHRvbnMgbXQtMCBtYi0zIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGZsZXgtY29sdW1uIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImxhYmVsIiwgewogICAgICAgICAgICBodG1sRm9yOiAic3RvY2stbGV2ZWwtZmlsdGVyIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QucmVwbGVuaXNobWVudC5maWx0ZXIubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJlcGxlbmlzaCBiaW5zIHRoYXQgaGF2ZSBhIHN0b2NrIGxldmVsIgogICAgICAgICAgfSksICI6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICAgICAgICBuYW1lOiAic3RvY2stbGV2ZWwtZmlsdGVyIiwKICAgICAgICAgICAgdmFsdWU6IF90aGlzNi5zdGF0ZS5pbnZlbnRvcnlMZXZlbFN0YXR1cywKICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5pbnZlbnRvcnlMZXZlbFN0YXR1c0NoYW5nZSh2YWx1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wdGlvbnM6IF90aGlzNi5zdGF0ZS5zdGF0dXNPcHRpb25zLAogICAgICAgICAgICBjbGFzc05hbWU6ICJzZWxlY3Qtc20gc3RvY2tsaXN0LXNlbGVjdCIsCiAgICAgICAgICAgIGNsZWFyYWJsZTogZmFsc2UKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgaWYgKCFpbnZhbGlkKSB7CiAgICAgICAgICAgICAgICBfdGhpczYuY3JlYXRlUmVwbGVuaXNobWVudCh2YWx1ZXMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgZmxvYXQtcmlnaHQgYnRuLXhzIiwKICAgICAgICAgICAgZGlzYWJsZWQ6IGludmFsaWQKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LnJlcGxlbmlzaG1lbnQubmV4dC5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTmV4dCIKICAgICAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJmb3JtIiwgewogICAgICAgICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0CiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJ0YWJsZS1mb3JtIgogICAgICAgICAgfSwgXy5tYXAoRklFTEQsIGZ1bmN0aW9uIChmaWVsZENvbmZpZywgZmllbGROYW1lKSB7CiAgICAgICAgICAgIHJldHVybiByZW5kZXJGb3JtRmllbGQoZmllbGRDb25maWcsIGZpZWxkTmFtZSwgewogICAgICAgICAgICAgIHZhbHVlczogdmFsdWVzLAogICAgICAgICAgICAgIHVwZGF0ZVJvdzogX3RoaXM2LnVwZGF0ZVJvdywKICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZEl0ZW1zOiBfdGhpczYudXBkYXRlU2VsZWN0ZWRJdGVtcywKICAgICAgICAgICAgICBhbGxSb3dzU2VsZWN0ZWQ6IF90aGlzNi5hbGxSb3dzU2VsZWN0ZWQoKSwKICAgICAgICAgICAgICBzZWxlY3RBbGxDb2RlOiBfdGhpczYuc2VsZWN0QWxsUm93cwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAic3VibWl0LWJ1dHRvbnMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICBpZiAoIWludmFsaWQpIHsKICAgICAgICAgICAgICAgIF90aGlzNi5jcmVhdGVSZXBsZW5pc2htZW50KHZhbHVlcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtcHJpbWFyeSBidG4tZm9ybSBmbG9hdC1yaWdodCBidG4teHMiLAogICAgICAgICAgICBkaXNhYmxlZDogaW52YWxpZAogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCB7CiAgICAgICAgICAgIGlkOiAicmVhY3QucmVwbGVuaXNobWVudC5uZXh0LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJOZXh0IgogICAgICAgICAgfSkpKSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBDcmVhdGVSZXBsZW5pc2htZW50Owp9KENvbXBvbmVudCk7CnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHsKICByZXR1cm4gewogICAgcmVwbGVuaXNobWVudFRyYW5zbGF0aW9uc0ZldGNoZWQ6IHN0YXRlLnNlc3Npb24uZmV0Y2hlZFRyYW5zbGF0aW9ucy5yZXBsZW5pc2htZW50LAogICAgdHJhbnNsYXRlOiB0cmFuc2xhdGVXaXRoRGVmYXVsdE1lc3NhZ2UoZ2V0VHJhbnNsYXRlKHN0YXRlLmxvY2FsaXplKSkKICB9Owp9OwpleHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgewogIHNob3dTcGlubmVyOiBzaG93U3Bpbm5lciwKICBoaWRlU3Bpbm5lcjogaGlkZVNwaW5uZXIKfSkoQ3JlYXRlUmVwbGVuaXNobWVudCk7CkNyZWF0ZVJlcGxlbmlzaG1lbnQucHJvcFR5cGVzID0gewogIGluaXRpYWxWYWx1ZXM6IFByb3BUeXBlcy5zaGFwZSh7fSksCiAgc2hvd1NwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgaGlkZVNwaW5uZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgbmV4dFBhZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgbG9jYXRpb25JZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLAogIGhpc3Rvcnk6IFByb3BUeXBlcy5zaGFwZSh7CiAgICBwdXNoOiBQcm9wVHlwZXMuZnVuYwogIH0pLmlzUmVxdWlyZWQsCiAgcmVwbGVuaXNobWVudFRyYW5zbGF0aW9uc0ZldGNoZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsCiAgdHJhbnNsYXRlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkCn07CkNyZWF0ZVJlcGxlbmlzaG1lbnQuZGVmYXVsdFByb3BzID0gewogIGluaXRpYWxWYWx1ZXM6IHt9Cn07"},null]}