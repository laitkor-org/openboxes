{"remainingRequest":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js?presets[]=@babel/react&presets[]=@babel/env!/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js!/opt/MTOBS-BIKASH/src/js/components/returns/outbound/SendOutboundReturn.jsx","dependencies":[{"path":"/opt/MTOBS-BIKASH/src/js/components/returns/outbound/SendOutboundReturn.jsx","mtime":1698037749000},{"path":"/opt/MTOBS-BIKASH/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/MTOBS-BIKASH/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/MTOBS-BIKASH/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9CmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgYXJyYXlNdXRhdG9ycyBmcm9tICdmaW5hbC1mb3JtLWFycmF5cyc7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IHsgY29uZmlybUFsZXJ0IH0gZnJvbSAncmVhY3QtY29uZmlybS1hbGVydCc7CmltcG9ydCB7IEZvcm0gfSBmcm9tICdyZWFjdC1maW5hbC1mb3JtJzsKaW1wb3J0IHsgZ2V0VHJhbnNsYXRlIH0gZnJvbSAncmVhY3QtbG9jYWxpemUtcmVkdXgnOwppbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgQWxlcnQgZnJvbSAncmVhY3Qtcy1hbGVydCc7CmltcG9ydCB7IGhpZGVTcGlubmVyLCBzaG93U3Bpbm5lciB9IGZyb20gJ2FjdGlvbnMnOwppbXBvcnQgQXJyYXlGaWVsZCBmcm9tICdjb21wb25lbnRzL2Zvcm0tZWxlbWVudHMvQXJyYXlGaWVsZCc7CmltcG9ydCBEYXRlRmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL0RhdGVGaWVsZCc7CmltcG9ydCBMYWJlbEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9MYWJlbEZpZWxkJzsKaW1wb3J0IFNlbGVjdEZpZWxkIGZyb20gJ2NvbXBvbmVudHMvZm9ybS1lbGVtZW50cy9TZWxlY3RGaWVsZCc7CmltcG9ydCBUZXh0RmllbGQgZnJvbSAnY29tcG9uZW50cy9mb3JtLWVsZW1lbnRzL1RleHRGaWVsZCc7CmltcG9ydCBhcGlDbGllbnQsIHsgZmxhdHRlblJlcXVlc3QsIHBhcnNlUmVzcG9uc2UgfSBmcm9tICd1dGlscy9hcGlDbGllbnQnOwppbXBvcnQgeyByZW5kZXJGb3JtRmllbGQgfSBmcm9tICd1dGlscy9mb3JtLXV0aWxzJzsKaW1wb3J0IHsgZm9ybWF0UHJvZHVjdERpc3BsYXlOYW1lIH0gZnJvbSAndXRpbHMvZm9ybS12YWx1ZXMtdXRpbHMnOwppbXBvcnQgVHJhbnNsYXRlLCB7IHRyYW5zbGF0ZVdpdGhEZWZhdWx0TWVzc2FnZSB9IGZyb20gJ3V0aWxzL1RyYW5zbGF0ZSc7CmltcG9ydCBzcGxpdFRyYW5zbGF0aW9uIGZyb20gJ3V0aWxzL3RyYW5zbGF0aW9uLXV0aWxzJzsKaW1wb3J0ICdyZWFjdC1jb25maXJtLWFsZXJ0L3NyYy9yZWFjdC1jb25maXJtLWFsZXJ0LmNzcyc7CnZhciBTSElQTUVOVF9GSUVMRFMgPSB7CiAgJ29yaWdpbi5uYW1lJzogewogICAgbGFiZWw6ICdyZWFjdC5vdXRib3VuZFJldHVybnMub3JpZ2luLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnT3JpZ2luJywKICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUocGFyYW1zKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0RmllbGQsIHBhcmFtcyk7CiAgICB9LAogICAgYXR0cmlidXRlczogewogICAgICBkaXNhYmxlZDogdHJ1ZQogICAgfQogIH0sCiAgJ2Rlc3RpbmF0aW9uLm5hbWUnOiB7CiAgICBsYWJlbDogJ3JlYWN0Lm91dGJvdW5kUmV0dXJucy5kZXN0aW5hdGlvbi5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ09yaWdpbicsCiAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKHBhcmFtcykgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEZpZWxkLCBwYXJhbXMpOwogICAgfSwKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgZGlzYWJsZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGVTaGlwcGVkOiB7CiAgICB0eXBlOiBEYXRlRmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuc2hpcERhdGUubGFiZWwnLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdTaGlwbWVudCBkYXRlJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgZGF0ZUZvcm1hdDogJ01NL0REL1lZWVknLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgYXV0b0NvbXBsZXRlOiAnb2ZmJywKICAgICAgc2hvd0Vycm9yOiB0cnVlCiAgICB9LAogICAgZ2V0RHluYW1pY0F0dHI6IGZ1bmN0aW9uIGdldER5bmFtaWNBdHRyKF9yZWYpIHsKICAgICAgdmFyIGlzc3VlZCA9IF9yZWYuaXNzdWVkOwogICAgICByZXR1cm4gewogICAgICAgIGRpc2FibGVkOiBpc3N1ZWQKICAgICAgfTsKICAgIH0KICB9LAogIHNoaXBtZW50VHlwZTogewogICAgdHlwZTogU2VsZWN0RmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuc2hpcG1lbnRUeXBlLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnU2hpcG1lbnQgdHlwZScsCiAgICBhdHRyaWJ1dGVzOiB7CiAgICAgIHZhbHVlS2V5OiAnaWQnLAogICAgICBsYWJlbEtleTogJ25hbWUnLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZQogICAgfSwKICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmMikgewogICAgICB2YXIgc2hpcG1lbnRUeXBlcyA9IF9yZWYyLnNoaXBtZW50VHlwZXMsCiAgICAgICAgaXNzdWVkID0gX3JlZjIuaXNzdWVkOwogICAgICByZXR1cm4gewogICAgICAgIG9wdGlvbnM6IHNoaXBtZW50VHlwZXMsCiAgICAgICAgZGlzYWJsZWQ6IGlzc3VlZAogICAgICB9OwogICAgfQogIH0sCiAgdHJhY2tpbmdOdW1iZXI6IHsKICAgIHR5cGU6IFRleHRGaWVsZCwKICAgIGxhYmVsOiAncmVhY3Quc3RvY2tNb3ZlbWVudC50cmFja2luZ051bWJlci5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ1RyYWNraW5nIG51bWJlcicsCiAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjMpIHsKICAgICAgdmFyIGlzc3VlZCA9IF9yZWYzLmlzc3VlZDsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXNhYmxlZDogaXNzdWVkCiAgICAgIH07CiAgICB9CiAgfSwKICBkcml2ZXJOYW1lOiB7CiAgICB0eXBlOiBUZXh0RmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuZHJpdmVyTmFtZS5sYWJlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0RyaXZlciBuYW1lJywKICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmNCkgewogICAgICB2YXIgaXNzdWVkID0gX3JlZjQuaXNzdWVkOwogICAgICByZXR1cm4gewogICAgICAgIGRpc2FibGVkOiBpc3N1ZWQKICAgICAgfTsKICAgIH0KICB9LAogIGNvbW1lbnRzOiB7CiAgICB0eXBlOiBUZXh0RmllbGQsCiAgICBsYWJlbDogJ3JlYWN0LnN0b2NrTW92ZW1lbnQuY29tbWVudHMubGFiZWwnLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdDb21tZW50cycsCiAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjUpIHsKICAgICAgdmFyIGlzc3VlZCA9IF9yZWY1Lmlzc3VlZDsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXNhYmxlZDogaXNzdWVkCiAgICAgIH07CiAgICB9CiAgfSwKICBleHBlY3RlZERlbGl2ZXJ5RGF0ZTogewogICAgdHlwZTogRGF0ZUZpZWxkLAogICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LmV4cGVjdGVkRGVsaXZlcnlEYXRlLmxhYmVsJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnRXhwZWN0ZWQgcmVjZWlwdCBkYXRlJywKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgZGF0ZUZvcm1hdDogJ01NL0REL1lZWVknLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgYXV0b0NvbXBsZXRlOiAnb2ZmJwogICAgfSwKICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cihfcmVmNikgewogICAgICB2YXIgaXNzdWVkID0gX3JlZjYuaXNzdWVkOwogICAgICByZXR1cm4gewogICAgICAgIGRpc2FibGVkOiBpc3N1ZWQKICAgICAgfTsKICAgIH0KICB9Cn07CnZhciBGSUVMRFMgPSB7CiAgcGlja2xpc3RJdGVtczogewogICAgdHlwZTogQXJyYXlGaWVsZCwKICAgIGdldER5bmFtaWNSb3dBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljUm93QXR0cihfcmVmNykgewogICAgICB2YXIgcm93VmFsdWVzID0gX3JlZjcucm93VmFsdWVzLAogICAgICAgIHRyYW5zbGF0ZSA9IF9yZWY3LnRyYW5zbGF0ZTsKICAgICAgdmFyIGNsYXNzTmFtZSA9ICcnOwogICAgICB2YXIgdG9vbHRpcCA9ICcnOwogICAgICBpZiAocm93VmFsdWVzLnJlY2FsbGVkICYmIHJvd1ZhbHVlcy5vbkhvbGQpIHsKICAgICAgICBjbGFzc05hbWUgPSAncmVjYWxsZWQtYW5kLW9uLWhvbGQnOwogICAgICAgIHRvb2x0aXAgPSB0cmFuc2xhdGUoJ3JlYWN0Lm91dGJvdW5kUmV0dXJucy5yZWNhbGxlZEFuZE9uSG9sZC5sYWJlbCcpOwogICAgICB9IGVsc2UgaWYgKHJvd1ZhbHVlcy5yZWNhbGxlZCkgewogICAgICAgIGNsYXNzTmFtZSA9ICdyZWNhbGxlZCc7CiAgICAgICAgdG9vbHRpcCA9IHRyYW5zbGF0ZSgncmVhY3Qub3V0Ym91bmRSZXR1cm5zLnJlY2FsbGVkLmxhYmVsJyk7CiAgICAgIH0gZWxzZSBpZiAocm93VmFsdWVzLm9uSG9sZCkgewogICAgICAgIGNsYXNzTmFtZSA9ICdvbi1ob2xkJzsKICAgICAgICB0b29sdGlwID0gdHJhbnNsYXRlKCdyZWFjdC5vdXRib3VuZFJldHVybnMub25Ib2xkLmxhYmVsJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSwKICAgICAgICB0b29sdGlwOiB0b29sdGlwCiAgICAgIH07CiAgICB9LAogICAgZmllbGRzOiB7CiAgICAgICdwcm9kdWN0LnByb2R1Y3RDb2RlJzogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LnByb2R1Y3RDb2RlLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NvZGUnLAogICAgICAgIGZsZXhXaWR0aDogJzAuNScKICAgICAgfSwKICAgICAgcHJvZHVjdDogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5zdG9ja01vdmVtZW50LnByb2R1Y3QubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUHJvZHVjdCcsCiAgICAgICAgZmxleFdpZHRoOiAnMicsCiAgICAgICAgaGVhZGVyQWxpZ246ICdsZWZ0JywKICAgICAgICBnZXREeW5hbWljQXR0cjogZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHIoX3JlZjgpIHsKICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gX3JlZjguZmllbGRWYWx1ZTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRvb2x0aXBWYWx1ZTogZmllbGRWYWx1ZSA9PT0gbnVsbCB8fCBmaWVsZFZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaWVsZFZhbHVlLm5hbWUKICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBmb3JtYXRWYWx1ZTogZm9ybWF0UHJvZHVjdERpc3BsYXlOYW1lLAogICAgICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZSwKICAgICAgICAgIGNsYXNzTmFtZTogJ3RleHQtbGVmdCBtbC0xJwogICAgICAgIH0KICAgICAgfSwKICAgICAgb3JpZ2luWm9uZTogewogICAgICAgIHR5cGU6IExhYmVsRmllbGQsCiAgICAgICAgbGFiZWw6ICdyZWFjdC5vdXRib3VuZFJldHVybi56b25lLmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1pvbmUnLAogICAgICAgIGZsZXhXaWR0aDogJzAuNScsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgc2hvd1ZhbHVlVG9vbHRpcDogdHJ1ZQogICAgICAgIH0KICAgICAgfSwKICAgICAgJ29yaWdpbkJpbkxvY2F0aW9uLm5hbWUnOiB7CiAgICAgICAgdHlwZTogTGFiZWxGaWVsZCwKICAgICAgICBsYWJlbDogJ3JlYWN0Lm91dGJvdW5kUmV0dXJuLmJpbi5sYWJlbCcsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCaW4gTG9jYXRpb24nLAogICAgICAgIGZsZXhXaWR0aDogJzEnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIHNob3dWYWx1ZVRvb2x0aXA6IHRydWUKICAgICAgICB9LAogICAgICAgIGdldER5bmFtaWNBdHRyOiBmdW5jdGlvbiBnZXREeW5hbWljQXR0cigpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWx1ZSkgewogICAgICAgICAgICAgIHJldHVybiB2YWx1ZSB8fCAnREVGQVVMVCc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LAogICAgICBsb3ROdW1iZXI6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Qub3V0Ym91bmRSZXR1cm4ubG90LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0xvdCcsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfSwKICAgICAgZXhwaXJhdGlvbkRhdGU6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Qub3V0Ym91bmRSZXR1cm4uZXhwaXJ5LmxhYmVsJywKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0V4cGlyeScsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfSwKICAgICAgcXVhbnRpdHk6IHsKICAgICAgICB0eXBlOiBMYWJlbEZpZWxkLAogICAgICAgIGxhYmVsOiAncmVhY3Qub3V0Ym91bmRSZXR1cm4ucXVhbnRpdHkubGFiZWwnLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUXR5IHRvIFJldHVybicsCiAgICAgICAgZmxleFdpZHRoOiAnMScKICAgICAgfQogICAgfQogIH0KfTsKdmFyIFNlbmRNb3ZlbWVudFBhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoU2VuZE1vdmVtZW50UGFnZSwgX0NvbXBvbmVudCk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihTZW5kTW92ZW1lbnRQYWdlKTsKICBmdW5jdGlvbiBTZW5kTW92ZW1lbnRQYWdlKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VuZE1vdmVtZW50UGFnZSk7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRhdGFGZXRjaGVkIiwgZmFsc2UpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIHNoaXBtZW50VHlwZXM6IFtdLAogICAgICB2YWx1ZXM6IHsKICAgICAgICBvdXRib3VuZFJldHVybjogX29iamVjdFNwcmVhZCh7fSwgX3RoaXMucHJvcHMuaW5pdGlhbFZhbHVlcykKICAgICAgfQogICAgfTsKICAgIF90aGlzLmZldGNoT3V0Ym91bmRSZXR1cm4gPSBfdGhpcy5mZXRjaE91dGJvdW5kUmV0dXJuLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgX3RoaXMudmFsaWRhdGUgPSBfdGhpcy52YWxpZGF0ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLnJvbGxiYWNrUmV0dXJuT3JkZXIgPSBfdGhpcy5yb2xsYmFja1JldHVybk9yZGVyLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoU2VuZE1vdmVtZW50UGFnZSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHRoaXMucHJvcHMub3V0Ym91bmRSZXR1cm5zVHJhbnNsYXRpb25zRmV0Y2hlZCkgewogICAgICAgIHRoaXMuZGF0YUZldGNoZWQgPSB0cnVlOwogICAgICAgIHRoaXMuZmV0Y2hPdXRib3VuZFJldHVybigpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHsKICAgICAgaWYgKG5leHRQcm9wcy5vdXRib3VuZFJldHVybnNUcmFuc2xhdGlvbnNGZXRjaGVkICYmICF0aGlzLmRhdGFGZXRjaGVkKSB7CiAgICAgICAgdGhpcy5kYXRhRmV0Y2hlZCA9IHRydWU7CiAgICAgICAgdGhpcy5mZXRjaE91dGJvdW5kUmV0dXJuKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJmZXRjaFNoaXBtZW50VHlwZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoU2hpcG1lbnRUeXBlcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciB1cmwgPSAnL29wZW5ib3hlcy9hcGkvZ2VuZXJpYy9zaGlwbWVudFR5cGUnOwogICAgICByZXR1cm4gYXBpQ2xpZW50LmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHNoaXBtZW50VHlwZXMgPSBfLm1hcChyZXNwb25zZS5kYXRhLmRhdGEsIGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0eXBlKSwge30sIHsKICAgICAgICAgICAgbGFiZWw6IHNwbGl0VHJhbnNsYXRpb24odHlwZS5uYW1lLCBfdGhpczIucHJvcHMubG9jYWxlKQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgIHNoaXBtZW50VHlwZXM6IHNoaXBtZW50VHlwZXMKICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoT3V0Ym91bmRSZXR1cm4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoT3V0Ym91bmRSZXR1cm4oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLnByb3BzLnNob3dTcGlubmVyKCk7CiAgICAgIHZhciB1cmwgPSAiL29wZW5ib3hlcy9hcGkvc3RvY2tUcmFuc2ZlcnMvIi5jb25jYXQodGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMub3V0Ym91bmRSZXR1cm5JZCk7CiAgICAgIHJldHVybiBhcGlDbGllbnQuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHZhciBvdXRib3VuZFJldHVybiA9IHBhcnNlUmVzcG9uc2UocmVzcC5kYXRhLmRhdGEpOwogICAgICAgIHZhciBwaWNrbGlzdEl0ZW1zID0gXy5mbGF0dGVuKF8ubWFwKG91dGJvdW5kUmV0dXJuLnN0b2NrVHJhbnNmZXJJdGVtcywgJ3BpY2tsaXN0SXRlbXMnKSk7CiAgICAgICAgX3RoaXMzLnNldFN0YXRlKHsKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBvdXRib3VuZFJldHVybjogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvdXRib3VuZFJldHVybiksIHt9LCB7CiAgICAgICAgICAgICAgcGlja2xpc3RJdGVtczogcGlja2xpc3RJdGVtcywKICAgICAgICAgICAgICBzaGlwbWVudFR5cGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgb3V0Ym91bmRSZXR1cm4uc2hpcG1lbnRUeXBlKSwge30sIHsKICAgICAgICAgICAgICAgIGxhYmVsOiBzcGxpdFRyYW5zbGF0aW9uKG91dGJvdW5kUmV0dXJuLnNoaXBtZW50VHlwZS5uYW1lLCBfdGhpczMucHJvcHMubG9jYWxlKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5mZXRjaFNoaXBtZW50VHlwZXMoKTsKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczMucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicm9sbGJhY2tSZXR1cm5PcmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcm9sbGJhY2tSZXR1cm5PcmRlcih2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja1RyYW5zZmVycy8iLmNvbmNhdCh0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5vdXRib3VuZFJldHVybklkLCAiL3JvbGxiYWNrIik7CiAgICAgIHZhciBpc09yaWdpbiA9IHRoaXMucHJvcHMuY3VycmVudExvY2F0aW9uSWQgPT09IHZhbHVlcy5vcmlnaW4uaWQ7CiAgICAgIGlmIChpc09yaWdpbikgewogICAgICAgIGFwaUNsaWVudC5wb3N0KHVybCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczQucHJvcHMuaGlkZVNwaW5uZXIoKTsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgQWxlcnQuZXJyb3IodGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuYWxlcnQucm9sbGJhY2tTaGlwbWVudC5sYWJlbCcsICdZb3UgYXJlIG5vdCBhYmxlIHRvIHJvbGxiYWNrIHNoaXBtZW50IGZyb20geW91ciBsb2NhdGlvbi4nKSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kT3V0Ym91bmRSZXR1cm4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRPdXRib3VuZFJldHVybih2YWx1ZXMsIGludmFsaWQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIGlmICghaW52YWxpZCkgewogICAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgICB2YXIgcGF5bG9hZCA9IF9vYmplY3RTcHJlYWQoe30sIHZhbHVlcyk7CiAgICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja1RyYW5zZmVycy8iLmNvbmNhdCh0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5vdXRib3VuZFJldHVybklkLCAiL3NlbmRTaGlwbWVudCIpOwogICAgICAgIHRoaXMuc2F2ZVZhbHVlcyhwYXlsb2FkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGFwaUNsaWVudC5wb3N0KHVybCwgZmxhdHRlblJlcXVlc3QocGF5bG9hZCkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAiL29wZW5ib3hlcy9zdG9ja01vdmVtZW50L3Nob3cvIi5jb25jYXQoX3RoaXM1LnByb3BzLm1hdGNoLnBhcmFtcy5vdXRib3VuZFJldHVybklkKTsKICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM1LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM1LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGUodmFsdWVzKSB7CiAgICAgIHZhciBlcnJvcnMgPSB7fTsKICAgICAgdmFyIGRhdGUgPSBtb21lbnQodGhpcy5wcm9wcy5taW5pbXVtRXhwaXJhdGlvbkRhdGUsICdNTS9ERC9ZWVlZJyk7CiAgICAgIHZhciBkYXRlU2hpcHBlZCA9IG1vbWVudCh2YWx1ZXMuZGF0ZVNoaXBwZWQsICdNTS9ERC9ZWVlZJyk7CiAgICAgIHZhciBleHBlY3RlZERlbGl2ZXJ5RGF0ZSA9IG1vbWVudCh2YWx1ZXMuZXhwZWN0ZWREZWxpdmVyeURhdGUsICdNTS9ERC9ZWVlZJyk7CiAgICAgIGlmIChkYXRlLmRpZmYoZGF0ZVNoaXBwZWQpID4gMCkgewogICAgICAgIGVycm9ycy5kYXRlU2hpcHBlZCA9ICdyZWFjdC5zdG9ja01vdmVtZW50LmVycm9yLmludmFsaWREYXRlLmxhYmVsJzsKICAgICAgfQogICAgICBpZiAoIXZhbHVlcy5kYXRlU2hpcHBlZCkgewogICAgICAgIGVycm9ycy5kYXRlU2hpcHBlZCA9ICdyZWFjdC5kZWZhdWx0LmVycm9yLnJlcXVpcmVkRmllbGQubGFiZWwnOwogICAgICB9CiAgICAgIGlmICghdmFsdWVzLnNoaXBtZW50VHlwZSkgewogICAgICAgIGVycm9ycy5zaGlwbWVudFR5cGUgPSAncmVhY3QuZGVmYXVsdC5lcnJvci5yZXF1aXJlZEZpZWxkLmxhYmVsJzsKICAgICAgfQogICAgICBpZiAoIXZhbHVlcy5leHBlY3RlZERlbGl2ZXJ5RGF0ZSkgewogICAgICAgIGVycm9ycy5leHBlY3RlZERlbGl2ZXJ5RGF0ZSA9ICdyZWFjdC5kZWZhdWx0LmVycm9yLnJlcXVpcmVkRmllbGQubGFiZWwnOwogICAgICB9CiAgICAgIGlmIChtb21lbnQoZGF0ZVNoaXBwZWQpLmRpZmYoZXhwZWN0ZWREZWxpdmVyeURhdGUpID4gMCkgewogICAgICAgIGVycm9ycy5leHBlY3RlZERlbGl2ZXJ5RGF0ZSA9ICdyZWFjdC5zdG9ja01vdmVtZW50LmVycm9yLmRlbGl2ZXJ5RGF0ZUJlZm9yZVNoaXBEYXRlLmxhYmVsJzsKICAgICAgICBlcnJvcnMuZGF0ZVNoaXBwZWQgPSAncmVhY3Quc3RvY2tNb3ZlbWVudC5lcnJvci5kZWxpdmVyeURhdGVCZWZvcmVTaGlwRGF0ZS5sYWJlbCc7CiAgICAgIH0KICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlQW5kRXhpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUFuZEV4aXQodmFsdWVzKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB2YXIgZXJyb3JzID0gdGhpcy52YWxpZGF0ZSh2YWx1ZXMpOwogICAgICBpZiAoXy5pc0VtcHR5KGVycm9ycykpIHsKICAgICAgICB0aGlzLnNhdmVWYWx1ZXModmFsdWVzKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICIvb3BlbmJveGVzL3N0b2NrTW92ZW1lbnQvc2hvdy8iLmNvbmNhdChfdGhpczYucHJvcHMubWF0Y2gucGFyYW1zLm91dGJvdW5kUmV0dXJuSWQpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbmZpcm1BbGVydCh7CiAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuY29uZmlybUV4aXQubGFiZWwnLCAnQ29uZmlybSBzYXZlJyksCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5jb25maXJtRXhpdC5tZXNzYWdlJywgJ1ZhbGlkYXRpb24gZXJyb3JzIG9jY3VycmVkLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZXhpdCBhbmQgbG9zZSB1bnNhdmVkIGRhdGE/JyksCiAgICAgICAgICBidXR0b25zOiBbewogICAgICAgICAgICBsYWJlbDogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LmRlZmF1bHQueWVzLmxhYmVsJywgJ1llcycpLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICIvb3BlbmJveGVzL3N0b2NrTW92ZW1lbnQvc2hvdy8iLmNvbmNhdChfdGhpczYucHJvcHMubWF0Y2gucGFyYW1zLm91dGJvdW5kUmV0dXJuSWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3QuZGVmYXVsdC5uby5sYWJlbCcsICdObycpCiAgICAgICAgICB9XQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZSh2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIHRoaXMuc2F2ZVZhbHVlcyh2YWx1ZXMpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3AuZGF0YS5kYXRhOwogICAgICAgIHZhciBvdXRib3VuZFJldHVybiA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGFyc2VSZXNwb25zZShkYXRhKSksIHt9LCB7CiAgICAgICAgICBzaGlwbWVudFR5cGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YS5zaGlwbWVudFR5cGUpLCB7fSwgewogICAgICAgICAgICBsYWJlbDogc3BsaXRUcmFuc2xhdGlvbihkYXRhLnNoaXBtZW50VHlwZS5uYW1lLCBfdGhpczcucHJvcHMubG9jYWxlKQogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgICB2YXIgcGlja2xpc3RJdGVtcyA9IF8uZmxhdHRlbihfLm1hcChvdXRib3VuZFJldHVybi5zdG9ja1RyYW5zZmVySXRlbXMsICdwaWNrbGlzdEl0ZW1zJykpOwogICAgICAgIF90aGlzNy5zZXRTdGF0ZSh7CiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgb3V0Ym91bmRSZXR1cm46IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgb3V0Ym91bmRSZXR1cm4pLCB7fSwgewogICAgICAgICAgICAgIHBpY2tsaXN0SXRlbXM6IHBpY2tsaXN0SXRlbXMKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM3LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM3LnByb3BzLmhpZGVTcGlubmVyKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVWYWx1ZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVWYWx1ZXModmFsdWVzKSB7CiAgICAgIHRoaXMucHJvcHMuc2hvd1NwaW5uZXIoKTsKICAgICAgdmFyIHVybCA9ICIvb3BlbmJveGVzL2FwaS9zdG9ja1RyYW5zZmVycy8iLmNvbmNhdCh0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5vdXRib3VuZFJldHVybklkKTsKICAgICAgdmFyIHBheWxvYWQgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlcyksIHt9LCB7CiAgICAgICAgc2hpcG1lbnRUeXBlOiB7CiAgICAgICAgICBpZDogdmFsdWVzLnNoaXBtZW50VHlwZS5pZAogICAgICAgIH0sCiAgICAgICAgdHJhY2tpbmdOdW1iZXI6IHZhbHVlcy50cmFja2luZ051bWJlciB8fCAnJywKICAgICAgICBkcml2ZXJOYW1lOiB2YWx1ZXMuZHJpdmVyTmFtZSB8fCAnJywKICAgICAgICBjb21tZW50czogdmFsdWVzLmNvbW1lbnRzIHx8ICcnLAogICAgICAgIGRhdGVTaGlwcGVkOiB2YWx1ZXMuZGF0ZVNoaXBwZWQgfHwgJycsCiAgICAgICAgZXhwZWN0ZWREZWxpdmVyeURhdGU6IHZhbHVlcy5leHBlY3RlZERlbGl2ZXJ5RGF0ZSB8fCAnJwogICAgICB9KTsKICAgICAgcmV0dXJuIGFwaUNsaWVudC5wdXQodXJsLCBmbGF0dGVuUmVxdWVzdChwYXlsb2FkKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJldmlvdXNQYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2aW91c1BhZ2UodmFsdWVzLCBpbnZhbGlkKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICBpZiAoIWludmFsaWQpIHsKICAgICAgICB0aGlzLnNhdmVWYWx1ZXModmFsdWVzKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczgucHJvcHMucHJldmlvdXNQYWdlKHZhbHVlcyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uZmlybUFsZXJ0KHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5jb25maXJtUHJldmlvdXNQYWdlLmxhYmVsJywgJ1ZhbGlkYXRpb24gZXJyb3InKSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMudHJhbnNsYXRlKCdyZWFjdC5zdG9ja01vdmVtZW50LmNvbmZpcm1QcmV2aW91c1BhZ2UubWVzc2FnZS5sYWJlbCcsICdDYW5ub3Qgc2F2ZSBkdWUgdG8gdmFsaWRhdGlvbiBlcnJvciBvbiBwYWdlJyksCiAgICAgICAgICBidXR0b25zOiBbewogICAgICAgICAgICBsYWJlbDogdGhpcy5wcm9wcy50cmFuc2xhdGUoJ3JlYWN0LnN0b2NrTW92ZW1lbnQuY29uZmlybVByZXZpb3VzUGFnZS5jb3JyZWN0RXJyb3IubGFiZWwnLCAnQ29ycmVjdCBlcnJvcicpCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLnRyYW5zbGF0ZSgncmVhY3Quc3RvY2tNb3ZlbWVudC5jb25maXJtUHJldmlvdXNQYWdlLmNvbnRpbnVlLmxhYmVsJywgJ0NvbnRpbnVlIChsb3NlIHVuc2F2ZWQgd29yayknKSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnByb3BzLnByZXZpb3VzUGFnZSh2YWx1ZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9XQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICB2YXIgb3V0Ym91bmRSZXR1cm4gPSB0aGlzLnN0YXRlLnZhbHVlcy5vdXRib3VuZFJldHVybjsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm0sIHsKICAgICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7fSwKICAgICAgICB2YWxpZGF0ZTogdGhpcy52YWxpZGF0ZSwKICAgICAgICBtdXRhdG9yczogX29iamVjdFNwcmVhZCh7fSwgYXJyYXlNdXRhdG9ycyksCiAgICAgICAgaW5pdGlhbFZhbHVlczogb3V0Ym91bmRSZXR1cm4sCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoX3JlZjkpIHsKICAgICAgICAgIHZhciBoYW5kbGVTdWJtaXQgPSBfcmVmOS5oYW5kbGVTdWJtaXQsCiAgICAgICAgICAgIHZhbHVlcyA9IF9yZWY5LnZhbHVlcywKICAgICAgICAgICAgaW52YWxpZCA9IF9yZWY5LmludmFsaWQ7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImZvcm0iLCB7CiAgICAgICAgICAgIG9uU3VibWl0OiBoYW5kbGVTdWJtaXQKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImNsYXNzaWMtZm9ybSBjbGFzc2ljLWZvcm0tY29uZGVuc2VkIgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImJ1dHRvbnMtY29udGFpbmVyIGNsYXNzaWMtZm9ybS1idXR0b25zIgogICAgICAgICAgfSwgISh2YWx1ZXMgJiYgdmFsdWVzLnN0YXR1cyA9PT0gJ0NPTVBMRVRFRCcpID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LnNhdmUodmFsdWVzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBmbG9hdC1yaWdodCBidG4tZm9ybSBidG4teHMiLAogICAgICAgICAgICBkaXNhYmxlZDogaW52YWxpZAogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZmEgZmEtc2F2ZSBwci0yIgogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnNhdmUubGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNhdmUiCiAgICAgICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LnNhdmVBbmRFeGl0KHZhbHVlcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsYXNzTmFtZTogImZsb2F0LXJpZ2h0IG1iLTEgYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBhbGlnbi1zZWxmLWVuZCBidG4teHMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJmYSBmYS1zaWduLW91dCBwci0yIgogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnNhdmVBbmRFeGl0LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTYXZlIGFuZCBleGl0IgogICAgICAgICAgfSkpKSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgZGlzYWJsZWQ6IGludmFsaWQsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gIi9vcGVuYm94ZXMvc3RvY2tNb3ZlbWVudC9zaG93LyIuY29uY2F0KF90aGlzOS5wcm9wcy5tYXRjaC5wYXJhbXMub3V0Ym91bmRSZXR1cm5JZCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsYXNzTmFtZTogImZsb2F0LXJpZ2h0IG1iLTEgYnRuIGJ0bi1vdXRsaW5lLWRhbmdlciBhbGlnbi1zZWxmLWVuZCBidG4teHMgbXItMiIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImkiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImZhIGZhLXNpZ24tb3V0IHByLTIiCiAgICAgICAgICB9KSwgIiAiLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5kZWZhdWx0LmJ1dHRvbi5leGl0LmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFeGl0IgogICAgICAgICAgfSksICIgIikpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZm9ybS10aXRsZSIKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmF0dHJpYnV0ZS5vcHRpb25zLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZW5kaW5nIG9wdGlvbnMiCiAgICAgICAgICB9KSksIF8ubWFwKFNISVBNRU5UX0ZJRUxEUywgZnVuY3Rpb24gKGZpZWxkQ29uZmlnLCBmaWVsZE5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIHJlbmRlckZvcm1GaWVsZChmaWVsZENvbmZpZywgZmllbGROYW1lLCB7CiAgICAgICAgICAgICAgc2hpcG1lbnRUeXBlczogX3RoaXM5LnN0YXRlLnNoaXBtZW50VHlwZXMsCiAgICAgICAgICAgICAgaXNzdWVkOiB2YWx1ZXMgJiYgdmFsdWVzLnN0YXR1cyA9PT0gJ0NPTVBMRVRFRCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4iCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLWZvcm0gYnRuLXhzIG14LTAiLAogICAgICAgICAgICBkaXNhYmxlZDogdmFsdWVzICYmIHZhbHVlcy5zdGF0dXMgPT09ICdDT01QTEVURUQnLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczkucHJldmlvdXNQYWdlKHZhbHVlcywgaW52YWxpZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnByZXZpb3VzLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJQcmV2aW91cyIKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IgogICAgICAgICAgfSwgdmFsdWVzLnN0YXR1cyA9PT0gJ0NPTVBMRVRFRCcgJiYgX3RoaXM5LnByb3BzLmlzVXNlckFkbWluICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczkucm9sbGJhY2tSZXR1cm5PcmRlcih2YWx1ZXMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICJidG4gYnRuLW91dGxpbmUtc3VjY2VzcyBmbG9hdC1yaWdodCBidG4tZm9ybSBidG4teHMiCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZmEgZmEtdW5kbyBwci0yIgogICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zbGF0ZSwgewogICAgICAgICAgICBpZDogInJlYWN0LmRlZmF1bHQuYnV0dG9uLnJvbGxiYWNrLmxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSb2xsYmFjayIKICAgICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOS5zZW5kT3V0Ym91bmRSZXR1cm4odmFsdWVzLCBpbnZhbGlkKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1vdXRsaW5lLXN1Y2Nlc3MgZmxvYXQtcmlnaHQgYnRuLWZvcm0gYnRuLXhzIG14LTAiLAogICAgICAgICAgICBkaXNhYmxlZDogdmFsdWVzICYmIHZhbHVlcy5zdGF0dXMgPT09ICdDT01QTEVURUQnCiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2xhdGUsIHsKICAgICAgICAgICAgaWQ6ICJyZWFjdC5zdG9ja01vdmVtZW50LnNlbmRTaGlwbWVudC5sYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2VuZCBzaGlwbWVudCIKICAgICAgICAgIH0pKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJteS0yIHRhYmxlLWZvcm0iCiAgICAgICAgICB9LCBfLm1hcChGSUVMRFMsIGZ1bmN0aW9uIChmaWVsZENvbmZpZywgZmllbGROYW1lKSB7CiAgICAgICAgICAgIHJldHVybiByZW5kZXJGb3JtRmllbGQoZmllbGRDb25maWcsIGZpZWxkTmFtZSwgewogICAgICAgICAgICAgIHRyYW5zbGF0ZTogX3RoaXM5LnByb3BzLnRyYW5zbGF0ZSwKICAgICAgICAgICAgICB2YWx1ZXM6IHZhbHVlcwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pKSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBTZW5kTW92ZW1lbnRQYWdlOwp9KENvbXBvbmVudCk7CnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHsKICByZXR1cm4gewogICAgdHJhbnNsYXRlOiB0cmFuc2xhdGVXaXRoRGVmYXVsdE1lc3NhZ2UoZ2V0VHJhbnNsYXRlKHN0YXRlLmxvY2FsaXplKSksCiAgICBvdXRib3VuZFJldHVybnNUcmFuc2xhdGlvbnNGZXRjaGVkOiBzdGF0ZS5zZXNzaW9uLmZldGNoZWRUcmFuc2xhdGlvbnMub3V0Ym91bmRSZXR1cm5zLAogICAgbWluaW11bUV4cGlyYXRpb25EYXRlOiBzdGF0ZS5zZXNzaW9uLm1pbmltdW1FeHBpcmF0aW9uRGF0ZSwKICAgIGxvY2FsZTogc3RhdGUuc2Vzc2lvbi5hY3RpdmVMYW5ndWFnZSwKICAgIGlzVXNlckFkbWluOiBzdGF0ZS5zZXNzaW9uLmlzVXNlckFkbWluLAogICAgY3VycmVudExvY2F0aW9uSWQ6IHN0YXRlLnNlc3Npb24uY3VycmVudExvY2F0aW9uLmlkCiAgfTsKfTsKZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIHsKICBzaG93U3Bpbm5lcjogc2hvd1NwaW5uZXIsCiAgaGlkZVNwaW5uZXI6IGhpZGVTcGlubmVyCn0pKFNlbmRNb3ZlbWVudFBhZ2UpOwpTZW5kTW92ZW1lbnRQYWdlLnByb3BUeXBlcyA9IHsKICBpbml0aWFsVmFsdWVzOiBQcm9wVHlwZXMuc2hhcGUoe30pLmlzUmVxdWlyZWQsCiAgcHJldmlvdXNQYWdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIHNob3dTcGlubmVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIGhpZGVTcGlubmVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAogIHRyYW5zbGF0ZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwKICBvdXRib3VuZFJldHVybnNUcmFuc2xhdGlvbnNGZXRjaGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLAogIG1hdGNoOiBQcm9wVHlwZXMuc2hhcGUoewogICAgcGFyYW1zOiBQcm9wVHlwZXMuc2hhcGUoewogICAgICBvdXRib3VuZFJldHVybklkOiBQcm9wVHlwZXMuc3RyaW5nCiAgICB9KQogIH0pLmlzUmVxdWlyZWQsCiAgbWluaW11bUV4cGlyYXRpb25EYXRlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCiAgbG9jYWxlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCiAgaXNVc2VyQWRtaW46IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsCiAgY3VycmVudExvY2F0aW9uSWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZAp9Ow=="},null]}