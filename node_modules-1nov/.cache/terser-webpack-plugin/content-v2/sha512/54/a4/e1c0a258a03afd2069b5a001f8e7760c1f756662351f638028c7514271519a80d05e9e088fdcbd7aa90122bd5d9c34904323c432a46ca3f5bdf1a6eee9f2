{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{546:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),o=a(1),i=a.n(o),l=function(e){var t=e.show,a=e.message,n=e.danger,o=e.close,i=e.className;return t?r.a.createElement(\"div\",{\"data-testid\":\"alert-message\",className:\"\".concat(i,\" alert \").concat(n?\"alert-danger\":\"alert-warning\"),style:{cursor:o?\"pointer\":\"default\",whiteSpace:\"pre-line\"},role:\"presentation\",onClick:function(){return o()}},r.a.createElement(\"i\",{className:\"fa \".concat(n?\"fa-times-circle\":\"fa-exclamation-circle\",\" pr-2\")}),a):null};t.a=l,l.propTypes={className:i.a.string,close:i.a.func,danger:i.a.bool,message:i.a.string,show:i.a.bool},l.defaultProps={className:\"\",close:function(){return null},danger:!1,message:\"\",show:!1}},604:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),o=a(1),i=a.n(o),l=a(543),s=a(9);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=a){var n,r,o,i,l=[],s=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=o.call(a)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===a&&e.constructor&&(a=e.constructor.name);if(\"Map\"===a||\"Set\"===a)return Array.from(e);if(\"Arguments\"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var f=function(e){var t,a,n,o,i=e.onDrop,u=e.className,f=e.acceptedFileLabel,p=e.fileDialogLabel,d=e.dragDropHereLabel,m=e.file;return r.a.createElement(\"div\",{className:\"file-drop d-flex flex-column \".concat(u)},r.a.createElement(l.a,{style:{border:\"2px dashed #a0a0a0\",borderRadius:\"5px\"},className:\"bg-light d-flex flex-column justify-content-center align-items-center p-4\",onDrop:function(e){e&&e.length&&i(e[0])}},r.a.createElement(\"h5\",{className:\"font-italic text-secondary my-3\"},r.a.createElement(s.a,{id:d,defaultMessage:\"Drag and drop file here.\"})),r.a.createElement(\"button\",{type:\"button\",className:\"my-3 btn btn-light border border-secondary font-weight-bold\"},r.a.createElement(s.a,{id:p,defaultMessage:\"OPEN FILE DIALOG\"}))),r.a.createElement(\"p\",{className:\"align-self-start\"},r.a.createElement(\"span\",{className:\"font-weight-bold text-success\"},r.a.createElement(s.a,{id:f,defaultMessage:\"Accepted File\"}),\": \"),m&&m.name&&(t=m.name,a=c(t.split(\".\"),2),n=a[0],o=a[1],r.a.createElement(\"span\",null,n,o&&r.a.createElement(\"small\",{className:\"text-muted\"},\".\".concat(o))))))};t.a=f,f.defaultProps={className:\"\",acceptedFileLabel:\"react.default.acceptedFile.label\",dragDropHereLabel:\"react.default.dragDropHere.label\",fileDialogLabel:\"react.default.fileDialog.label\",file:{}},f.propTypes={onDrop:i.a.func.isRequired,file:i.a.shape({}),className:i.a.string,acceptedFileLabel:i.a.string,fileDialogLabel:i.a.string,dragDropHereLabel:i.a.string}},912:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),o=a(48),i=a.n(o),l=a(415),s=a.n(l),c=a(3),u=a.n(c),f=a(1),p=a.n(f),d=a(17),m=a(10),b=a(33),g=a.n(b),h=a(14),y=a(22),v=a(604),E=a(546),w=a(5),S=a(9);function L(e){return(L=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function C(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if(\"object\"!==L(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||\"default\");if(\"object\"!==L(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(r,\"string\"),\"symbol\"===L(o)?o:String(o)),n)}var r,o}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k(e);if(t){var r=k(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return O(this,a)}}function O(e,t){if(t&&(\"object\"===L(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return j(e)}function j(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=i.a.create({}),D=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&M(e,t)}(i,e);var t,a,n,o=N(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,i),(t=o.call(this,e)).state={file:null,alertMessage:\"\",showAlert:!1,showSuccessMessage:!1,supportLinks:{}},t.onDrop=t.onDrop.bind(j(t)),t.handleValidationErrors=t.handleValidationErrors.bind(j(t)),t.getSupportLinks=t.getSupportLinks.bind(j(t)),x.interceptors.response.use(w.d,t.handleValidationErrors),t}return t=i,(a=[{key:\"componentDidMount\",value:function(){this.getSupportLinks()}},{key:\"onDrop\",value:function(e){this.setState({file:e})}},{key:\"getSupportLinks\",value:function(){var e=this;x.get(y.y).then((function(t){var a=t.data.data;e.setState({supportLinks:a})}))}},{key:\"handleValidationErrors\",value:function(e){if(400===e.response.status){var t=u.a.get(e,\"response.data.errorMessage\",\"\").split(\"\\n\"),a=u.a.get(e,\"response.data.errorMessages\",\"\"),n=\"\".concat(t.length>0?t[0]:\"\",\" \\n \").concat(u.a.join(a,\"\\n\"));return this.setState({alertMessage:n,showAlert:!0}),Promise.reject(e)}return Object(w.c)(e)}},{key:\"importLocations\",value:function(){var e=this;this.props.showSpinner();var t=new FormData;return t.append(\"importFile\",this.state.file.slice(0,this.state.file.size,\"text/csv\")),x.post(\"/openboxes/api/locations/importCsv\",t,{headers:{\"content-type\":\"multipart/form-data\"}}).then((function(){e.props.hideSpinner(),g.a.success(e.props.translate(\"react.locationsConfiguration.importSuccess.label\",\"Locations Created Successfully\")),e.setState({showSuccessMessage:!0})})).catch((function(){e.props.hideSpinner()}))}},{key:\"downloadLocationsTemplate\",value:function(){var e=this;this.props.showSpinner(),x.get(y.c).then((function(t){s()(t.data,\"Locations_template.csv\",\"text/csv\"),e.props.hideSpinner()})).catch((function(){return e.props.hideSpinner()}))}},{key:\"render\",value:function(){var e=this;return r.a.createElement(\"div\",{className:\"content-wrap\"},r.a.createElement(\"div\",{className:\"d-flex flex-column p-5 m-4 classic-card\"},this.state.showSuccessMessage?r.a.createElement(r.a.Fragment,null,r.a.createElement(\"h3\",{className:\"align-self-center\"},r.a.createElement(S.a,{id:\"react.locationsConfiguration.importSuccess.label\",defaultMessage:\"Locations Created Successfully\"})),r.a.createElement(\"div\",{className:\"align-self-center\"},r.a.createElement(S.a,{id:\"react.locationsConfiguration.importSuccess.message\",defaultMessage:\"Your locations have been created. You can review or edit them at any time from the location list page.\"})),r.a.createElement(\"a\",{type:\"button\",className:\"btn btn-outline-primary align-self-center w-auto mt-5\",href:\"/openboxes/location/list\"},r.a.createElement(S.a,{id:\"react.locationsConfiguration.viewLocations.label\",defaultMessage:\"View Location List\"})),r.a.createElement(\"a\",{type:\"button\",className:\"btn btn-outline-primary align-self-center w-auto mt-3\",href:\"/openboxes/productsConfiguration/index\"},r.a.createElement(S.a,{id:\"react.locationsConfiguration.productWizard.label\",defaultMessage:\"Product Creation Wizard\"})),r.a.createElement(\"a\",{className:\"align-self-center w-auto mt-3\",href:\"/openboxes\"},r.a.createElement(S.a,{id:\"react.locationsConfiguration.exitToDashboard.label\",defaultMessage:\"Exit to Dashboard\"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(\"h3\",null,r.a.createElement(S.a,{id:\"react.locationsConfiguration.importLocationCsv.label\",defaultMessage:\"Import Locations\"})),r.a.createElement(\"div\",null,r.a.createElement(S.a,{id:\"react.locationsConfiguration.csvUpload.label\",defaultMessage:\"On this screen, you can import a list of locations from .csv file.\"}),\" \",r.a.createElement(S.a,{id:\"react.locationsConfiguration.click.label\",defaultMessage:\"Click\"}),\" \",r.a.createElement(\"a\",{href:\"#\",onClick:function(){return e.downloadLocationsTemplate()}},r.a.createElement(S.a,{id:\"react.locationsConfiguration.here.label\",defaultMessage:\"here\"})),\" \",r.a.createElement(S.a,{id:\"react.locationsConfiguration.templateInstructions.label\",defaultMessage:\"to download a template with instructions.\"}),\" \",r.a.createElement(S.a,{id:\"react.locationsConfiguration.click.label\",defaultMessage:\"Click\"}),\" \",r.a.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:this.state.supportLinks.configureOrganizationsAndLocations||\"#\"},r.a.createElement(S.a,{id:\"react.locationsConfiguration.here.label\",defaultMessage:\"here\"})),\" \",r.a.createElement(S.a,{id:\"react.locationsConfiguration.createInstructions.label\",defaultMessage:\"to read more about location creation.\"})),r.a.createElement(v.a,{className:\"my-3\",onDrop:this.onDrop,file:this.state.file}),r.a.createElement(E.a,{className:\"mt-2\",show:this.state.showAlert,message:this.state.alertMessage,danger:!0}),r.a.createElement(\"div\",{className:\"align-self-end mt-5\"},r.a.createElement(\"button\",{type:\"button\",className:\"btn btn-primary float-right\",onClick:function(){return e.importLocations()},disabled:!this.state.file},r.a.createElement(S.a,{id:\"react.locationsConfiguration.upload.label\",defaultMessage:\"Upload\"}))))))}}])&&C(t.prototype,a),n&&C(t,n),Object.defineProperty(t,\"prototype\",{writable:!1}),i}(n.Component);t.default=Object(m.a)((function(e){return{translate:Object(S.b)(Object(d.e)(e.localize))}}),{showSpinner:h.M,hideSpinner:h.C})(D),D.propTypes={showSpinner:p.a.func.isRequired,hideSpinner:p.a.func.isRequired,translate:p.a.func.isRequired}}}]);","extractedComments":[]}