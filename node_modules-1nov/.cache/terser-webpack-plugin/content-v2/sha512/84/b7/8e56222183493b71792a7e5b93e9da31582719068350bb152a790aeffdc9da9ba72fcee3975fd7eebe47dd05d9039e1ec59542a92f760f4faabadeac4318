{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{757:function(e,t,a){e.exports={default:\"#8798ad\",primary:\"#0ddbdd\",primaryDark:\"#08c6c8\",primaryLight:\"#52e8e8\",secondary:\"#ea6227\",secondaryDark:\"#d05622\",secondaryLight:\"#ff9c72\",tertiary:\"#0c60e5\",tertiaryDark:\"#0a58d5\",tertiaryLight:\"#186cf2\",state1:\"#f57c00\",state2:\"#f2a365\",state3:\"#00796b\",state4:\"#116979\",state5:\"#0288d1\",state6:\"#303f9f\",state7:\"#7b1fa2\",state8:\"#b80d57\",darkState1:\"#e65100\",darkState2:\"#bc5b10\",darkState3:\"#004d40\",darkState4:\"#0a3a43\",darkState5:\"#01579b\",darkState6:\"#1a237e\",darkState7:\"#4a148c\",darkState8:\"#770838\",lightState1:\"#ffa726\",lightState2:\"#f7c6a1\",lightState3:\"#26a69a\",lightState4:\"#199cb3\",lightState5:\"#29b6f6\",lightState6:\"#5c6bc0\",lightState7:\"#ab47bc\",lightState8:\"#f0287f\",success:\"#689f38\",warning:\"#fbc02d\",error:\"#d32f2f\",darkSuccess:\"#33691e\",darkWarning:\"#f57f17\",darkError:\"#b71c1c\",lightSuccess:\"#9ccc65\",lightWarning:\"#ffee58\",lightError:\"#ef5350\"}},917:function(e,t,a){\"use strict\";a.r(t);var r=a(0),n=a.n(r),i=a(3),o=a.n(i),s=a(1),l=a.n(s),c=a(638),d=a(10),u=a(61),p=a(14),f=a(5);function m(e){return(m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=a){var r,n,i,o,s=[],l=!0,c=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=i.call(a)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===a&&e.constructor&&(a=e.constructor.name);if(\"Map\"===a||\"Set\"===a)return Array.from(e);if(\"Arguments\"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function b(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=w(e);if(t){var n=w(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return E(this,a)}}function E(e,t){if(t&&(\"object\"===m(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return S(e)}function S(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,a){return(t=N(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e){var t=function(e,t){if(\"object\"!==m(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||\"default\");if(\"object\"!==m(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===m(t)?t:String(t)}var O=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&y(e,t)}(o,e);var t,a,r,i=v(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),C(S(t=i.call(this,e)),\"getCategoryRows\",(function(e){f.a.get(e).then((function(e){var a=e.data.data||[];a=a.filter((function(e){return!t.state.listFilterSelected.some((function(t){return t.id===e.id}))})),t.setState({listCategoryData:a,listCategoryDataFiltered:a})})).catch((function(){return t.setState({listCategoryData:[],listCategoryDataFiltered:[]})}))})),C(S(t),\"searchOnChange\",(function(e){var a=t.state.listCategoryData.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));t.setState({listCategoryDataFiltered:a,searchTerm:e.target.value})})),C(S(t),\"toggleAddingFilter\",(function(){t.setState({addingFilter:!t.state.addingFilter})})),C(S(t),\"toggleCategorySelected\",(function(e,a){a&&t.getCategoryRows(a.endpoint),t.setState({titlePopup:e||\"Add Filter\",categorySelected:e||\"\",searchTerm:\"\",filterCategorySelected:!t.state.filterCategorySelected})})),C(S(t),\"loadStoredFilters\",(function(){var e=t.props,a=e.pageFilters,r=e.activeConfig;if(a.length>0){var n=[],i=JSON.parse(sessionStorage.getItem(\"pageConfig\"));i||(i={},sessionStorage.setItem(\"pageConfig\",JSON.stringify(i))),i[r]||(i[r]={}),sessionStorage.setItem(\"pageConfig\",JSON.stringify(i)),a.forEach((function(e){(JSON.parse(sessionStorage.getItem(\"pageConfig\"))[t.props.activeConfig][e.name]||[]).forEach((function(e){n.push(e)}))})),t.setState({listFilterSelected:n,filterAvailable:!0})}else t.setState({filterAvailable:!1})})),C(S(t),\"addFilterToTheList\",(function(e,a){var r=t.props.activeConfig;t.state.listFilterSelected.push({id:a.id,name:a.name,nameCategory:e}),sessionStorage.getItem(\"pageConfig\")||sessionStorage.setItem(\"pageConfig\",JSON.stringify({}));var n=JSON.parse(sessionStorage.getItem(\"pageConfig\"));n[r][e]||(n[r][e]=[]),n[r][e].push({id:a.id,name:a.name,nameCategory:e}),sessionStorage.setItem(\"pageConfig\",JSON.stringify(n)),t.toggleAddingFilter(),t.toggleCategorySelected(),t.props.fetchData(r)})),C(S(t),\"removeFilterFromList\",(function(e){var a=t.props.activeConfig,r=t.state.listFilterSelected,n=r[e],i=JSON.parse(sessionStorage.getItem(\"pageConfig\"));i[a][n.nameCategory]=i[a][n.nameCategory].filter((function(e){return e.id!==n.id})),sessionStorage.setItem(\"pageConfig\",JSON.stringify(i));var o=r.slice(0,e).concat(r.slice(e+1,r.length));t.setState({listFilterSelected:o});var s=JSON.parse(sessionStorage.getItem(\"pageConfig\"));0===s[a][n.nameCategory].length&&(delete s[a][n.nameCategory],sessionStorage.setItem(\"pageConfig\",JSON.stringify(s))),t.props.fetchData(a)})),t.state={addingFilter:!1,filterCategorySelected:!1,filterAvailable:!1,listFilterSelected:[],listCategoryData:[],listCategoryDataFiltered:[],titlePopup:\"Add filter\",searchTerm:\"\",categorySelected:\"\"},t}return t=o,(a=[{key:\"componentDidMount\",value:function(){this.loadStoredFilters()}},{key:\"componentDidUpdate\",value:function(e){e.pageFilters===this.props.pageFilters&&e.activeConfig===this.props.activeConfig||this.loadStoredFilters()}},{key:\"render\",value:function(){var e=this;return this.state.filterAvailable?n.a.createElement(\"div\",{className:\"category-filter\"},this.state.listFilterSelected.map((function(t,a){return t&&n.a.createElement(\"div\",{key:\"\".concat(t.id,\" - \").concat(t.name),className:\"category-item\"},n.a.createElement(\"div\",{className:\"category-title\"},\" \",t.name),n.a.createElement(\"div\",{className:\"delete-button\",role:\"button\",tabIndex:0,onClick:function(){return e.removeFilterFromList(a)},onKeyPress:function(){return e.removeFilterFromList(a)}},\" x\"))})),n.a.createElement(\"div\",{className:\"category-item add-category-btn\",role:\"button\",tabIndex:0,onClick:this.toggleAddingFilter,onKeyPress:this.toggleAddingFilter,hidden:this.state.addingFilter},\"+ Add filter\"),n.a.createElement(\"div\",{className:\"add-category-popup\",hidden:!this.state.addingFilter},n.a.createElement(\"div\",null,n.a.createElement(\"span\",{role:\"button\",tabIndex:0,onClick:function(){return e.toggleCategorySelected()},onKeyPress:function(){return e.toggleCategorySelected()},hidden:!this.state.filterCategorySelected},\" \",\"<\"),\" \",this.state.titlePopup,n.a.createElement(\"span\",{role:\"button\",tabIndex:0,onClick:function(){e.toggleAddingFilter(),e.setState({filterCategorySelected:!1})},onKeyPress:function(){e.toggleAddingFilter(),e.setState({filterCategorySelected:!1})}},\" X\")),n.a.createElement(\"input\",{type:\"text\",placeholder:\"search...\",onChange:this.searchOnChange,hidden:!this.state.filterCategorySelected,value:this.state.searchTerm}),n.a.createElement(\"ul\",{className:\"filter-menu \".concat(this.state.filterCategorySelected?\"scrollable\":\"\")},this.state.filterCategorySelected?this.props.pageFilters.map((function(t){return t.name===e.state.categorySelected?Object.entries(e.state.listCategoryDataFiltered.sort((function(e,t){return e.name.localeCompare(t.name)}))).map((function(t){return n.a.createElement(\"li\",{key:t[1].id},n.a.createElement(\"span\",{className:\"category-value-to-select\",role:\"button\",tabIndex:0,onClick:function(){return e.addFilterToTheList(e.state.categorySelected,t[1])},onKeyPress:function(){return e.addFilterToTheList(e.state.categorySelected,t[1])}},t[1].name))})):null})):Object.entries(this.props.configs).map((function(t){var a=h(t,2),r=a[0],i=a[1];return r===e.props.activeConfig?Object.entries(i.filters).map((function(t){var a=h(t,2),r=a[0],i=a[1];return n.a.createElement(\"li\",{key:i.endpoint},n.a.createElement(\"div\",{role:\"button\",tabIndex:0,onClick:function(){return e.toggleCategorySelected(r,i)},onKeyPress:function(){return e.toggleCategorySelected(r,i)}},r,n.a.createElement(\"span\",null,\" \",\">\")))})):null}))))):null}}])&&b(t.prototype,a),r&&b(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),o}(r.Component),I=O;O.propTypes={configs:l.a.shape({}).isRequired,activeConfig:l.a.string.isRequired,fetchData:l.a.func.isRequired,pageFilters:l.a.arrayOf(l.a.shape({name:l.a.string.isRequired,endpoint:l.a.string.isRequired}).isRequired).isRequired};var R=a(17),j=a(41),D=Object(u.d)((function(){return n.a.createElement(\"span\",{className:\"drag-handler\"},n.a.createElement(\"i\",{className:\"fa fa-ellipsis-v\"}))})),q=a(710),k=a.n(q),F=a(16),T=function(){return n.a.createElement(\"div\",{className:\"loader-div\"},n.a.createElement(k.a,{type:\"bubbles\",color:Object(F.d)(),height:\"150px\",width:\"150px\"}))},P=function(e){return n.a.createElement(\"div\",{className:\"gyr-indicator\"},n.a.createElement(\"a\",{className:\"number-indicator\",href:e.data.first.link},n.a.createElement(\"div\",{className:\"value\"},n.a.createElement(\"div\",{className:\"circle\",style:{backgroundColor:e.options.colors.first}}),\" \",e.data.first.value),n.a.createElement(\"div\",{className:\"subtitle\"},e.data.first.subtitle)),n.a.createElement(\"a\",{className:\"number-indicator\",href:e.data.second.link},n.a.createElement(\"div\",{className:\"value\"},n.a.createElement(\"div\",{className:\"circle\",style:{backgroundColor:e.options.colors.second}}),\" \",e.data.second.value),n.a.createElement(\"div\",{className:\"subtitle\"},e.data.second.subtitle)),n.a.createElement(\"a\",{className:\"number-indicator\",href:e.data.third.link},n.a.createElement(\"div\",{className:\"value\"},n.a.createElement(\"div\",{className:\"circle\",style:{backgroundColor:e.options.colors.third}}),\" \",e.data.third.value),n.a.createElement(\"div\",{className:\"subtitle\"},e.data.third.subtitle)))};P.propTypes={data:l.a.shape({third:l.a.shape({subtitle:l.a.string,value:l.a.number,link:l.a.string}),second:l.a.shape({subtitle:l.a.string,value:l.a.number,link:l.a.string}),first:l.a.shape({subtitle:l.a.string,value:l.a.number,link:l.a.string})}),options:l.a.shape({colors:l.a.shape({first:l.a.string,second:l.a.string,third:l.a.string})}).isRequired},P.defaultProps={data:null};var A=P,x=function(e){var t=e.data;return n.a.createElement(\"div\",{className:\"big-gyr-indicator\"},t.listColorNumber.map((function(e,t){return n.a.createElement(\"a\",{className:\"number-indicator\",href:e.link,key:t},n.a.createElement(\"div\",{className:\"value\",style:{color:Object(F.c)(e.color,\"default\")}},n.a.createElement(\"span\",{className:\"circle\",style:{background:Object(F.c)(e.color,\"light\")}}),e.value),n.a.createElement(\"div\",{className:\"subtitle\"},e.subtitle))})))};x.propTypes={data:l.a.shape({listColorNumber:l.a.arrayOf(l.a.shape({link:l.a.string,color:l.a.string,subtitle:l.a.string,value:l.a.string}))}).isRequired};var L=x,H=function(e){return n.a.createElement(\"div\",{className:\"table-card\"},n.a.createElement(\"table\",null,n.a.createElement(\"thead\",null,n.a.createElement(\"tr\",null,n.a.createElement(\"th\",null,e.data.number),e.data.body.find((function(e){return e.icon}))?n.a.createElement(\"td\",null):null,n.a.createElement(\"th\",{className:\"mid\"},_.truncate(e.data.name,{length:50})),n.a.createElement(\"th\",null,_.truncate(e.data.value,{length:50})))),n.a.createElement(\"tbody\",null,e.data.body.map((function(e){return n.a.createElement(\"tr\",{onClick:function(){return window.open(e.link,\"_blank\")},key:\"item-\".concat(e.number),className:\"table-link\"},n.a.createElement(\"td\",null,e.number),e.icon?n.a.createElement(\"td\",null,n.a.createElement(\"img\",{alt:\"\",src:e.icon,width:\"20\",height:\"20\"})):null,n.a.createElement(\"td\",{className:\"mid\"},_.truncate(e.name,{length:80})),n.a.createElement(\"td\",null,_.truncate(e.value,{length:10})))})))))};H.propTypes={data:l.a.shape({number:l.a.string,name:l.a.string,value:l.a.string,body:l.a.arrayOf(l.a.shape({}))}).isRequired},H.defaultProps={};var z=H,M=function(e){return n.a.createElement(\"div\",{className:\"numbers-table-card\"},n.a.createElement(\"div\",{className:\"numbers-left\"},n.a.createElement(A,{data:e.data.numbersIndicator,options:e.options})),n.a.createElement(\"div\",{className:\"table-right\"},n.a.createElement(z,{data:e.data.tableData})))};M.propTypes={data:l.a.shape({numbersIndicator:l.a.shape({first:l.a.shape({link:l.a.string,value:l.a.number,subtitle:l.a.string}).isRequired,second:l.a.shape({link:l.a.string,value:l.a.number,subtitle:l.a.string}).isRequired,third:l.a.shape({link:l.a.string,value:l.a.number,subtitle:l.a.string}).isRequired}).isRequired,tableData:l.a.shape({number:l.a.string,name:l.a.string,value:l.a.string,body:l.a.arrayOf(l.a.shape({}))}).isRequired}).isRequired,options:l.a.shape({}).isRequired};var K=M,U=a(9);function J(e){return(J=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function W(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Y(e);if(t){var n=Y(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return V(this,a)}}function V(e,t){if(t&&(\"object\"===J(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return G(e)}function G(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){var t=function(e,t){if(\"object\"!==J(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||\"default\");if(\"object\"!==J(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===J(t)?t:String(t)}var Z=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&B(e,t)}(o,e);var t,a,r,i=$(o);function o(e){var t,a,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),t=i.call(this,e),a=G(t),n=function(e,a,r){var n=e.target,i=\"\",o=t.state.timeFrame||null,s=t.state.locationSelected||null;if(\"locationSelector\"===n.id){i=null!==o?\"querySize=\".concat(o,\"&\"):i,i=\"\".concat(i,\"destinationLocation=\").concat(n.value);var l=t.props.allLocations.find((function(e){return e.id===n.value}));t.setState({locationSelected:l})}\"timeFrameSelector\"===e.target.id&&(i=\"querySize=\".concat(n.value),i=null!==s?\"\".concat(i,\"&destinationLocation=\").concat(s.id):i,t.setState({timeFrame:n.value})),\"yearTypeSelector\"===e.target.id&&t.props.yearTypeFilter&&(i=\"\".concat(t.props.yearTypeFilter.parameter||\"querySize\",\"=\").concat(n.value),t.setState({yearType:n.value})),\"\"!==i&&r(t.props.widgetId,i),n.size=1},(r=X(r=\"handleChange\"))in a?Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[r]=n,t.state={timeFrame:6,locationSelected:\"\",yearType:\"\"},t}return t=o,(a=[{key:\"render\",value:function(){var e=this;return n.a.createElement(\"div\",{className:\"data-filter\"},this.props.locationFilter&&n.a.createElement(\"select\",{className:\"location-filter custom-select\",size:\"1\",onFocus:function(e){e.target.size=3},onBlur:function(e){e.target.size=1},onChange:function(t){return e.handleChange(t,e.props.cardId,e.props.loadIndicator)},disabled:!this.props.locationFilter,value:this.state.locationSelected.id,id:\"locationSelector\"},this.props.allLocations.map((function(t){return t.name.code&&t.name.message?n.a.createElement(\"option\",{key:t.id,value:t.id},e.props.translate(t.name.code,t.name.message)):n.a.createElement(\"option\",{key:t.id,value:t.id},\" \",t.name)}))),this.props.timeFilter&&n.a.createElement(\"select\",{className:\"time-filter custom-select\",onChange:function(t){return e.handleChange(t,e.props.cardId,e.props.loadIndicator)},disabled:!this.props.timeFilter,defaultValue:this.state.timeFrame,id:\"timeFrameSelector\"},n.a.createElement(\"option\",{value:\"1\"},this.props.translate(this.props.label[0],this.props.label[1],{number:\"\",timeUnit:this.props.translate(\"react.dashboard.timeFilter.month.label\",\"Month\")})),n.a.createElement(\"option\",{value:\"3\"},this.props.translate(this.props.label[0],this.props.label[1],{number:3,timeUnit:this.props.translate(\"react.dashboard.timeFilter.months.label\",\"Months\")})),n.a.createElement(\"option\",{value:\"6\"},this.props.translate(this.props.label[0],this.props.label[1],{number:6,timeUnit:this.props.translate(\"react.dashboard.timeFilter.months.label\",\"Months\")})),n.a.createElement(\"option\",{value:\"12\"},this.props.translate(this.props.label[0],this.props.label[1],{number:\"\",timeUnit:this.props.translate(\"react.dashboard.timeFilter.year.label\",\"Year\")})),24===this.props.timeLimit&&n.a.createElement(\"option\",{value:\"24\"},this.props.translate(this.props.label[0],this.props.label[1],{number:2,timeUnit:this.props.translate(\"react.dashboard.timeFilter.years.label\",\"Years\")}))),this.props.yearTypeFilter&&n.a.createElement(\"select\",{className:\"time-filter custom-select\",onChange:function(t){return e.handleChange(t,e.props.cardId,e.props.loadIndicator)},disabled:!this.props.yearTypeFilter,defaultValue:this.state.yearType||this.props.yearTypeFilter.defaultValue,id:\"yearTypeSelector\"},this.props.yearTypeFilter.options&&this.props.yearTypeFilter.options.map((function(t){return n.a.createElement(\"option\",{value:t.value},e.props.translate(t.label,t.label))}))))}}])&&W(t.prototype,a),r&&W(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),o}(r.Component),Q=function(e){var t=e[0]._chart.data.datasets[0].links[e[0]._index];t&&\"\"!==t&&(window.location=t)},ee=Object(u.b)((function(e){var t,a=e.cardId,r=e.widgetId,i=e.cardTitle,o=e.cardType,s=e.cardLink,l=e.cardInfo,d=e.data,u=e.options,p=e.loadIndicator,f=e.timeFilter,m=void 0!==f&&f,h=e.yearTypeFilter,g=void 0===h?null:h,b=e.timeLimit,y=void 0===b?24:b,v=e.locationFilter,E=void 0!==v&&v,S=e.allLocations,w=e.size,C=void 0===w?null:w,N=e.translate,O=e.hideDraghandle,I=[\"react.dashboard.timeFilter.last.label\",\"last ${0} ${1}\"];return\"line\"===o?(d.labels&&d.labels[0].code&&d.labels[0].message&&(d.labels=d.labels.map((function(e){return N(e.code,e.message)}))),t=n.a.createElement(c.d,{data:d,options:u,onElementsClick:function(e){return Q(e)}}),I=[\"react.dashboard.timeFilter.next.label\",\"next ${0} ${1}\"]):\"bar\"===o?t=n.a.createElement(c.a,{data:d,options:u}):\"doughnut\"===o?t=n.a.createElement(c.b,{data:d,options:u}):\"horizontalBar\"===o?t=n.a.createElement(c.c,{data:d,options:u,onElementsClick:function(e){return Q(e)}}):\"numbers\"===o?t=n.a.createElement(A,{data:d,options:u}):\"numbersCustomColors\"===o?t=n.a.createElement(L,{data:d}):\"table\"===o?t=n.a.createElement(z,{data:d}):\"numberTable\"===o?t=n.a.createElement(K,{data:d,options:u}):\"loading\"===o?t=n.a.createElement(T,null):\"error\"===o&&(t=n.a.createElement(\"button\",{onClick:function(){return p(r)}},n.a.createElement(\"i\",{className:\"fa fa-repeat\"}))),n.a.createElement(\"div\",{className:\"graph-card \".concat(\"big\"===C?\"big-size\":\"\",\" \").concat(\"error\"===o?\"error-card\":\"\")},n.a.createElement(\"div\",{className:\"header-card\"},s?n.a.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:s.code,className:\"title-link\"},n.a.createElement(\"span\",{className:\"title-link\"},N(i,i))):n.a.createElement(\"span\",{className:\"title-link\"},N(i,i)),l?n.a.createElement(\"div\",{className:\"graph-infos\"},n.a.createElement(j.Tooltip,{html:n.a.createElement(\"p\",null,N(l,l)),theme:\"transparent\",arrow:\"true\"},n.a.createElement(\"i\",{className:\"fa fa-info-circle\"}))):null,!O&&n.a.createElement(D,null)),n.a.createElement(\"div\",{className:\"content-card\"},n.a.createElement(Z,{cardId:a,widgetId:r,loadIndicator:p,locationFilter:E,timeLimit:y,timeFilter:m,yearTypeFilter:g,label:I,data:0===d.length?null:d,allLocations:S,translate:N}),n.a.createElement(\"div\",{className:\"graph-container\"},t)))})),te=Object(d.a)((function(e){return{translate:Object(U.b)(Object(R.e)(e.localize))}}))(ee);ee.propTypes={cardTitle:l.a.string.isRequired,cardType:l.a.string.isRequired,cardInfo:l.a.string.isRequired,timeLimit:l.a.number,loadIndicator:l.a.func.isRequired,translate:l.a.func.isRequired},Z.defaultProps={timeFilter:!1,locationFilter:!1,yearTypeFilter:null},Z.propTypes={locationFilter:l.a.bool,timeFilter:l.a.bool,yearTypeFilter:l.a.shape({parameter:l.a.string,defaultValue:l.a.string,options:l.a.arrayOf(l.a.shape({}))}),timeLimit:l.a.number.isRequired,label:l.a.arrayOf(l.a.string.isRequired).isRequired,cardId:l.a.number.isRequired,widgetId:l.a.string.isRequired,loadIndicator:l.a.func.isRequired,allLocations:l.a.arrayOf(l.a.shape({})).isRequired,translate:l.a.func.isRequired};var ae=function(){for(var e=[],t=0;t<4;t+=1)e.push(n.a.createElement(\"div\",{className:\"number-card\",key:t},n.a.createElement(\"div\",{className:\"loader-div\"},n.a.createElement(k.a,{type:\"bubbles\",color:Object(F.d)(),height:\"100px\",width:\"100px\"}))));return n.a.createElement(\"div\",{className:\"card-component\"},e)},re=(a(757),{responsive:!0,maintainAspectRatio:!0,legend:{display:!1},elements:{line:{borderColor:\"#000000\",borderWidth:1},point:{radius:0}},tooltips:{enabled:!1},scales:{yAxes:[{display:!1}],xAxes:[{display:!1}]},plugins:{datalabels:{display:!1}}}),ne=function(e){var t=e.cardTitle,a=e.cardInfo,r=e.color,i=e.value,o=e.goalDifference,s=e.sparklineData,l=e.translate;return n.a.createElement(\"div\",{className:\"number-div\"},n.a.createElement(\"div\",{className:\"number-body\"},n.a.createElement(\"span\",{className:\"title-card\"},l(t,t)),n.a.createElement(\"div\",{className:\"result-part\"},n.a.createElement(\"span\",{style:{color:Object(F.c)(r,\"default\")}},\" \",i,\"  \"),n.a.createElement(\"span\",{className:\"goal-difference\"},\" \",o,\" \")),n.a.createElement(c.d,{data:s,options:re,height:25})),n.a.createElement(\"div\",{className:\"number-infos\"},n.a.createElement(j.Tooltip,{html:n.a.createElement(\"p\",null,\" \",l(a,a),\" \"),theme:\"transparent\",arrow:\"true\",disabled:!a},n.a.createElement(\"i\",{className:\"fa fa-info-circle\"}))),n.a.createElement(D,null))},ie=Object(u.b)((function(e){var t=e.cardTitle,a=e.cardNumber,r=e.cardNumberType,i=e.cardSubtitle,o=e.cardLink,s=e.cardDataTooltip,l=e.cardInfo,c=e.sparklineData,d=void 0===c?null:c,u=e.translate,p=e.currencyCode,f=e.hideDraghandle,m=!1;null!=d&&null!=d.colorNumber&&(m=!0);var h=a?a.toLocaleString():(0).toLocaleString(),g=m?n.a.createElement(ne,{cardTitle:t,cardInfo:l,color:d.colorNumber.color,value:d.colorNumber.value,goalDifference:d.colorNumber.value2,sparklineData:d,translate:u}):n.a.createElement(j.Tooltip,{html:n.a.createElement(\"p\",{style:{whiteSpace:\"pre\"}},\" \",s,\" \"),theme:\"transparent\",arrow:\"true\",disabled:!s},n.a.createElement(\"div\",{className:\"number-div\"},n.a.createElement(\"div\",{className:\"number-body\"},n.a.createElement(\"span\",{className:\"title-card\"},u(t,t)),n.a.createElement(\"span\",{className:\"result-card\"},\" \",\"number\"===r?h:\"\".concat(h,\" \").concat(p),\" \"),n.a.createElement(\"span\",{className:\"subtitle-card text-overflow-ellipsis text-nowrap\"},u(i,i))),l?n.a.createElement(\"div\",{className:\"number-infos\"},n.a.createElement(j.Tooltip,{html:n.a.createElement(\"p\",null,u(l,l)),theme:\"transparent\",arrow:\"true\"},n.a.createElement(\"i\",{className:\"fa fa-info-circle\"}))):null,!f&&n.a.createElement(D,null)));return o?n.a.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:o,className:\"number-card\"},g):n.a.createElement(\"div\",{className:\"number-card\"},g)})),oe=Object(d.a)((function(e){return{translate:Object(U.b)(Object(R.e)(e.localize)),currencyCode:e.session.currencyCode}}))(ie);function se(e){return(se=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){de(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function de(e,t,a){return(t=function(e){var t=function(e,t){if(\"object\"!==se(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||\"default\");if(\"object\"!==se(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===se(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ue(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}(e)||function(e,t){if(!e)return;if(\"string\"==typeof e)return pe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===a&&e.constructor&&(a=e.constructor.name);if(\"Map\"===a||\"Set\"===a)return Array.from(e);if(\"Arguments\"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pe(e,t)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}ie.defaultProps={cardSubtitle:\"\"},ie.propTypes={cardTitle:l.a.string.isRequired,cardNumber:l.a.number,cardNumberType:l.a.string,cardSubtitle:l.a.string,cardLink:l.a.string,cardDataTooltip:l.a.string,cardInfo:l.a.string.isRequired,translate:l.a.func.isRequired,currencyCode:l.a.string.isRequired},ne.propTypes={cardTitle:l.a.string.isRequired,cardInfo:l.a.string.isRequired,color:l.a.string.isRequired,value:l.a.string.isRequired,goalDifference:l.a.string.isRequired,sparklineData:l.a.shape({}).isRequired,translate:l.a.func.isRequired};var fe=function(){var e=[\"green\",\"yellow\",\"red\"],t=\"circle \".concat(e[o.a.random(0,e.length-1)]);return n.a.createElement(\"div\",{className:\"value\"},n.a.createElement(\"div\",{className:t}),\" \",o.a.random(3,95))},me=function(e){return n.a.createElement(\"li\",{className:\"unarchived-item\"},n.a.createElement(\"div\",{className:\"archived-indicator\"},n.a.createElement(\"div\",{className:\"row\"},n.a.createElement(\"div\",{className:\"col col-3 graph-preview\"},e.children),n.a.createElement(\"div\",{className:\"col col-6\"},n.a.createElement(\"span\",{className:\"w-100 text-overflow-ellipsis text-nowrap text-left\"},e.translate(e.title,e.title))),n.a.createElement(\"div\",{className:\"col col-3\"},n.a.createElement(\"span\",{role:\"button\",tabIndex:0,className:\"unarchive-button\",onClick:function(){return e.handleAdd(e.widgetId)},onKeyDown:function(){return e.handleAdd(e.widgetId)}},\"Unarchive\")))))},he=function(e){return n.a.createElement(me,{title:e.title,index:e.index,widgetId:e.widgetId,handleAdd:e.handleAdd,type:\"number\",translate:e.translate},n.a.createElement(\"span\",null,o.a.random(3,95)))},ge=function(e){var t;return\"line\"===e.type?t=n.a.createElement(\"i\",{className:\"fa fa-line-chart\",style:{color:Object(F.d)()}}):\"bar\"===e.type||\"numbersCustomColors\"===e.type?t=n.a.createElement(\"i\",{className:\"fa fa-bar-chart\",style:{color:Object(F.d)()}}):\"doughnut\"===e.type?t=n.a.createElement(\"i\",{className:\"fa fa-pie-chart\",style:{color:Object(F.d)()}}):\"horizontalBar\"===e.type?t=n.a.createElement(\"i\",{className:\"fa fa-bar-chart horizontal-bar\",style:{color:Object(F.d)()}}):\"numbers\"===e.type?t=n.a.createElement(fe,null):\"loading\"===e.type?t=n.a.createElement(k.a,{type:\"bubbles\",color:Object(F.d)(),height:\"40px\",width:\"40px\"}):\"error\"===e.type?t=n.a.createElement(\"i\",{className:\"fa fa-repeat\"}):\"table\"!==e.type&&\"numberTable\"!==e.type||(t=n.a.createElement(\"i\",{className:\"fa fa-table\",style:{color:Object(F.d)()}})),n.a.createElement(me,{title:e.title,index:e.index,widgetId:e.widgetId,handleAdd:e.handleAdd,type:\"graph\",translate:e.translate},t)},be=function(e){return n.a.createElement(\"div\",null,e.widgets.map((function(t,a){return\"number\"===t.type?n.a.createElement(he,{key:\"item-\".concat(t.widgetId),index:a,widgetId:t.widgetId,title:t.title,handleAdd:e.handleAdd,unarchiveHandler:e.unarchiveHandler,size:e.size,translate:e.translate}):n.a.createElement(ge,{key:\"item-\".concat(t.widgetId),index:a,widgetId:t.widgetId,title:t.title,type:t.graphType,handleAdd:e.handleAdd,unarchiveHandler:e.unarchiveHandler,size:e.size,translate:e.translate})})))},ye=function(e){var t=[].concat(ue(e.graphData),ue(e.numberData)),a=o.a.chain(t).filter((function(e){return e&&e.widgetId})).map((function(e){return e.widgetId})).value(),r=o.a.chain(e.dashboardConfig.dashboardWidgets).omit(a).map((function(e,t){return ce(ce({},e),{},{widgetId:t})})).filter((function(e){return e.enabled})).value(),i=o.a.size(r);return n.a.createElement(\"div\",{className:e.showPopout?\"unarchived-items popover-active\":\"unarchived-items\"},n.a.createElement(\"div\",{className:\"unarchive\",role:\"button\",tabIndex:0,onClick:e.unarchiveHandler,onKeyDown:e.unarchiveHandler},n.a.createElement(\"span\",null,\"Archived Indicators (\",i,\") \",n.a.createElement(\"i\",{className:\"fa fa-archive\"}))),n.a.createElement(\"div\",{className:\"unarchive-popover\"},n.a.createElement(\"span\",{role:\"button\",tabIndex:0,className:\"close-button\",onClick:e.unarchiveHandler,onKeyDown:e.unarchiveHandler},\"Ã—\"),n.a.createElement(\"ul\",{className:\"unarchived-list\"},n.a.createElement(be,{widgets:r,handleAdd:e.handleAdd,unarchiveHandler:e.unarchiveHandler,size:i,translate:e.translate}))))},ve=Object(d.a)((function(e){return{translate:Object(U.b)(Object(R.e)(e.localize))}}))(ye);ye.propTypes={graphData:l.a.arrayOf(l.a.shape({})).isRequired,numberData:l.a.arrayOf(l.a.shape({})).isRequired,dashboardConfig:l.a.shape({dashboard:l.a.shape({}),dashboardWidgets:l.a.shape({})}).isRequired,unarchiveHandler:l.a.func.isRequired,handleAdd:l.a.func.isRequired,showPopout:l.a.bool.isRequired,translate:l.a.func.isRequired},me.propTypes={title:l.a.oneOfType([l.a.string.isRequired,l.a.shape({code:l.a.string.isRequired,message:l.a.string.isRequired}).isRequired]).isRequired,handleAdd:l.a.func.isRequired,widgetId:l.a.string.isRequired,children:l.a.node.isRequired,translate:l.a.func.isRequired},ge.propTypes={type:l.a.string.isRequired,title:l.a.oneOfType([l.a.string.isRequired,l.a.shape({code:l.a.string.isRequired,message:l.a.string.isRequired}).isRequired]).isRequired,handleAdd:l.a.func.isRequired,index:l.a.number.isRequired,widgetId:l.a.string.isRequired,translate:l.a.func.isRequired},he.propTypes={title:l.a.oneOfType([l.a.string.isRequired,l.a.shape({code:l.a.string.isRequired,message:l.a.string.isRequired}).isRequired]).isRequired,handleAdd:l.a.func.isRequired,index:l.a.number.isRequired,widgetId:l.a.string.isRequired,translate:l.a.func.isRequired},be.propTypes={widgets:l.a.arrayOf(l.a.shape({})).isRequired,unarchiveHandler:l.a.func.isRequired,handleAdd:l.a.func.isRequired,size:l.a.number.isRequired,translate:l.a.func.isRequired};a(437),a(375);function Ee(e){return(Ee=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(a),!0).forEach((function(t){De(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ce(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,qe(r.key),r)}}function Ne(e,t){return(Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=je(e);if(t){var n=je(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Ie(this,a)}}function Ie(e,t){if(t&&(\"object\"===Ee(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Re(e)}function Re(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t,a){return(t=qe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qe(e){var t=function(e,t){if(\"object\"!==Ee(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||\"default\");if(\"object\"!==Ee(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===Ee(t)?t:String(t)}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=a){var r,n,i,o,s=[],l=!0,c=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=i.call(a)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return Fe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===a&&e.constructor&&(a=e.constructor.name);if(\"Map\"===a||\"Set\"===a)return Array.from(e);if(\"Arguments\"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fe(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}c.e.scale.ticks.beginAtZero=!0;var Te=Object(u.a)((function(e){var t=e.data,a=e.loadIndicator,r=e.allLocations,i=e.personalDashboardActive;return n.a.createElement(\"div\",{className:\"card-component\"},t.map((function(e,t){return e&&n.a.createElement(te,{key:\"item-\".concat(e.id),index:t,cardId:e.id,widgetId:e.widgetId,cardTitle:e.title,cardType:e.type,cardLink:e.link,cardInfo:e.info,data:e.data,timeFilter:e.timeFilter,timeLimit:e.timeLimit,locationFilter:e.locationFilter,yearTypeFilter:e.yearTypeFilter,options:e.options,loadIndicator:a,allLocations:r,size:e.size,disabled:!i,hideDraghandle:!i})})))})),Pe=Object(u.a)((function(e){var t=e.data,a=e.personalDashboardActive;return n.a.createElement(\"div\",{className:\"card-component\"},t.map((function(e,t){return e&&n.a.createElement(oe,{key:\"item-\".concat(e.id),index:t,widgetId:e.widgetId,cardTitle:e.title,cardNumberType:e.numberType,cardNumber:e.number,cardSubtitle:e.subtitle,cardLink:e.link,cardDataTooltip:e.tooltipData,cardInfo:e.info,sparklineData:e.data,disabled:!a,hideDraghandle:!a})})))})),Ae=function(e){var t=e.hideArchive;return n.a.createElement(\"div\",{className:t?\"archive-div hide-archive\":\"archive-div\"},n.a.createElement(\"span\",null,n.a.createElement(U.a,{id:\"react.dashboard.archive.label\",defaultMessage:\"Archive indicator\"}),n.a.createElement(\"i\",{className:\"fa fa-archive ml-2\"})))},xe=function(e){var t=e.configs,a=e.activeConfig,r=e.loadConfigData,i=e.showNav,o=e.toggleNav,s=e.configModified,l=e.updateConfig;return t?n.a.createElement(\"div\",{className:\"configs-left-nav \".concat(i?\"\":\"hidden\")},n.a.createElement(\"button\",{className:\"toggle-nav\",onClick:o},i?n.a.createElement(\"i\",{className:\"fa fa-chevron-left\",\"aria-hidden\":\"true\"}):n.a.createElement(\"i\",{className:\"fa fa-chevron-right\",\"aria-hidden\":\"true\"})),n.a.createElement(\"ul\",{className:\"configs-list\"},Object.entries(t).map((function(e){var t=ke(e,2),i=t[0],o=t[1];return n.a.createElement(\"li\",{className:\"configs-list-item \".concat(a===i?\"active\":\"\"),key:i},n.a.createElement(\"button\",{onClick:function(){return r(i)}},n.a.createElement(\"i\",{className:\"fa fa-bar-chart\",\"aria-hidden\":\"true\"}),n.a.createElement(U.a,{id:\"react.dashboard.\".concat(i,\".label\"),defaultMessage:o.name})))}))),\"personal\"===a&&s?n.a.createElement(\"div\",{className:\"update-section\"},n.a.createElement(\"div\",{className:\"division-line\"}),n.a.createElement(\"span\",null,n.a.createElement(\"i\",{className:\"fa fa-info-circle\",\"aria-hidden\":\"true\"}),n.a.createElement(U.a,{id:\"react.dashboard.hasBeenEdited.message\",defaultMessage:\"The dashboard layout has been edited\"})),n.a.createElement(\"button\",{onClick:l},n.a.createElement(\"i\",{className:\"fa fa-floppy-o\",\"aria-hidden\":\"true\"}),n.a.createElement(U.a,{id:\"react.dashboard.saveConfiguration.label\",defaultMessage:\"Save configuration\"}))):null):null},Le=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&Ne(e,t)}(s,e);var t,a,r,i=Oe(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,s),De(Re(t=i.call(this,e)),\"dataFetched\",!1),De(Re(t),\"fetchData\",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"personal\";sessionStorage.setItem(\"dashboardKey\",e),t.props.resetIndicators(),t.props.dashboardConfig&&t.props.dashboardConfig.dashboard?(t.props.fetchIndicators(t.props.dashboardConfig,e,t.props.currentLocation,t.props.currentUser),t.loadPageFilters(e)):t.props.fetchConfigAndData(t.props.currentLocation,e,t.props.currentUser,t.getDashboardIdFromParams())})),De(Re(t),\"updateConfig\",(function(){var e=[];o.a.forEach(t.props.indicatorsData,(function(t,a){e.push({widgetId:t.widgetId,order:a+1})})),o.a.forEach(t.props.numberData,(function(t,a){e.push({widgetId:t.widgetId,order:a+1})}));var a=we(we({},t.props.dashboardConfig.dashboard),{},De({},t.props.activeConfig,we(we({},t.props.dashboardConfig.dashboard[t.props.activeConfig]),{},{widgets:e})));f.a.post(\"/openboxes/api/dashboard/config\",a).then((function(){t.props.fetchConfig(t.getDashboardIdFromParams()),t.setState({configModified:!1})}))})),De(Re(t),\"loadIndicator\",(function(e,a){var r=t.props.dashboardConfig.dashboard[t.props.activeConfig],n=o.a.find(r.widgets,(function(t){return t.widgetId===e})),i=we(we({},t.props.dashboardConfig.dashboardWidgets[e]),n);t.props.reloadIndicator(i,a,t.props.currentLocation)})),De(Re(t),\"toggleNav\",(function(){t.setState({showNav:!t.state.showNav})})),De(Re(t),\"sortStartHandle\",(function(){t.setState({isDragging:!0})})),De(Re(t),\"sortEndHandle\",(function(e,a,r){var n=e.oldIndex,i=e.newIndex,o=window.innerHeight-(6*window.innerHeight/100+80);a.clientY>o&&(a.target.id=\"archive\"),t.props.reorderIndicators({oldIndex:n,newIndex:i},a,r),\"personal\"!==t.props.activeConfig||n===i&&\"archive\"!==a.target.id?t.setState({isDragging:!1}):t.setState({configModified:!0,isDragging:!1})})),De(Re(t),\"sortEndHandleNumber\",(function(e,a){var r=e.oldIndex,n=e.newIndex;t.sortEndHandle({oldIndex:r,newIndex:n},a,\"number\")})),De(Re(t),\"sortEndHandleGraph\",(function(e,a){var r=e.oldIndex,n=e.newIndex;t.sortEndHandle({oldIndex:r,newIndex:n},a,\"graph\")})),De(Re(t),\"unarchiveHandler\",(function(){o.a.size(t.props.dashboardConfig.dashboardWidgets)-(t.props.indicatorsData.length+t.props.numberData.length)?t.setState({showPopout:!t.state.showPopout}):t.setState({showPopout:!1})})),De(Re(t),\"handleAdd\",(function(e){var a=t.props.dashboardConfig.dashboardWidgets[e],r=we(we({},a),{},{widgetId:e,order:(\"number\"===a.type?t.props.numberData.length:t.props.indicatorsData.length)+1});t.props.addToIndicators(r,t.props.currentLocation,t.props.currentUser);var n=o.a.size(t.props.dashboardConfig.dashboardWidgets)-(t.props.indicatorsData.length+t.props.numberData.length);\"personal\"===t.props.activeConfig?t.setState({configModified:!0,showPopout:n>0}):t.setState({showPopout:n>0})})),t.state={isDragging:!1,showPopout:!1,showNav:window.innerWidth>1115,configModified:!1,allLocations:[],pageFilters:[],subdashboardKeys:[]},t.fetchLocations(),t}return t=s,(a=[{key:\"componentDidMount\",value:function(){var e=this;\"\"!==this.props.currentLocation&&this.getSubdashboardKeys().then((function(){return e.fetchData(e.determineActiveConfig())})),this.loadPageFilters(this.props.activeConfig)}},{key:\"componentDidUpdate\",value:function(e){var t=this;e.currentLocation!==this.props.currentLocation&&this.getSubdashboardKeys().then((function(){return t.fetchData(t.determineActiveConfig())})),e.dashboardConfig.dashboard!==this.props.dashboardConfig.dashboard&&this.loadPageFilters(this.props.activeConfig)}},{key:\"getDashboardIdFromParams\",value:function(){var e=this.props.match.params.configId;return e&&\"index\"!==e?e:\"mainDashboard\"}},{key:\"getSubdashboardKeys\",value:function(){var e=this,t=this.getDashboardIdFromParams(),a=\"/openboxes/api/dashboard/\".concat(t,\"/subdashboardKeys\");return f.a.get(a).then((function(t){var a=t.data;a&&e.setState({subdashboardKeys:a})}))}},{key:\"determineActiveConfig\",value:function(){if(this.props.match.params.configId&&\"index\"!==this.props.match.params.configId)return this.props.match.params.configId;var e=sessionStorage.getItem(\"dashboardKey\");return e&&this.state.subdashboardKeys.includes(e)?e:\"personal\"}},{key:\"loadPageFilters\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=[];if(this.props.dashboardConfig.dashboard){var a=Object.entries(this.props.dashboardConfig.dashboard).map((function(e){var t=ke(e,2);return[t[0],t[1]]}));a.forEach((function(a){var r=Object.entries(a[1].filters).map((function(e){var t=ke(e,2);return{name:t[0],endpoint:t[1].endpoint}}));r.length>0&&a[0]===e&&(t=r)}))}this.setState({pageFilters:t})}},{key:\"fetchLocations\",value:function(){var e=this;return f.a.get(\"/openboxes/api/dashboard/fillRateDestinations\").then((function(t){e.setState({allLocations:t.data.data.sort((function(e,t){return e.id.localeCompare(t.id)}))})}))}},{key:\"isPersonalDashboardActive\",value:function(){return\"personal\"===this.props.activeConfig}},{key:\"render\",value:function(){var e,t=this.isPersonalDashboardActive();return e=this.props.numberData.length?n.a.createElement(Pe,{data:this.props.numberData,onSortStart:this.sortStartHandle,onSortEnd:this.sortEndHandleNumber,axis:\"xy\",useDragHandle:!0,personalDashboardActive:t}):n.a.createElement(ae,null),n.a.createElement(\"div\",{className:\"dashboard-container\"},n.a.createElement(xe,{configs:this.props.dashboardConfig.dashboard||{},loadConfigData:this.fetchData,activeConfig:this.props.activeConfig,showNav:this.state.showNav,toggleNav:this.toggleNav,configModified:this.state.configModified,updateConfig:this.updateConfig}),n.a.createElement(\"div\",{className:\"overlay \".concat(this.state.showNav?\"visible\":\"\"),role:\"button\",tabIndex:0,onClick:this.toggleNav,onKeyPress:this.toggleNav}),n.a.createElement(\"div\",{className:\"filter-and-cards-container\"},n.a.createElement(I,{configs:this.props.dashboardConfig.dashboard||{},activeConfig:this.props.activeConfig,fetchData:this.fetchData,pageFilters:this.state.pageFilters}),n.a.createElement(\"div\",{className:\"cards-container\"},e,n.a.createElement(Te,{allLocations:this.state.allLocations,data:this.props.indicatorsData.filter((function(e){return e})),onSortStart:this.sortStartHandle,onSortEnd:this.sortEndHandleGraph,loadIndicator:this.loadIndicator,axis:\"xy\",useDragHandle:!0,personalDashboardActive:t}),n.a.createElement(Ae,{hideArchive:!this.state.isDragging}),t&&n.a.createElement(ve,{graphData:this.props.indicatorsData,numberData:this.props.numberData,dashboardConfig:this.props.dashboardConfig,activeConfig:this.props.activeConfig,showPopout:this.state.showPopout,unarchiveHandler:this.unarchiveHandler,handleAdd:this.handleAdd}))))}}])&&Ce(t.prototype,a),r&&Ce(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),s}(r.Component);t.default=Object(d.a)((function(e){return{indicatorsData:e.indicators.data,numberData:e.indicators.numberData,dashboardConfig:e.indicators.config,activeConfig:e.indicators.activeConfig,currentLocation:e.session.currentLocation.id,currentUser:e.session.user.id}}),{fetchIndicators:p.k,reloadIndicator:p.D,addToIndicators:p.b,reorderIndicators:p.F,resetIndicators:p.G,fetchConfigAndData:p.i,fetchConfig:p.h})(Le);Le.defaultProps={currentLocation:\"\",currentUser:\"\",indicatorsData:null,numberData:[],configModified:!1,match:{params:{configId:\"personal\"}}},Le.propTypes={fetchIndicators:l.a.func.isRequired,reorderIndicators:l.a.func.isRequired,indicatorsData:l.a.arrayOf(l.a.shape({id:l.a.number})).isRequired,numberData:l.a.arrayOf(l.a.shape({id:l.a.number})).isRequired,dashboardConfig:l.a.shape({dashboard:l.a.shape({}),dashboardWidgets:l.a.shape({})}).isRequired,activeConfig:l.a.string.isRequired,currentLocation:l.a.string.isRequired,currentUser:l.a.string.isRequired,addToIndicators:l.a.func.isRequired,reloadIndicator:l.a.func.isRequired,resetIndicators:l.a.func.isRequired,fetchConfigAndData:l.a.func.isRequired,fetchConfig:l.a.func.isRequired,match:l.a.shape({params:l.a.shape({configId:l.a.string})})},Ae.propTypes={hideArchive:l.a.bool.isRequired},xe.propTypes={configs:l.a.shape({}).isRequired,activeConfig:l.a.string.isRequired,loadConfigData:l.a.func.isRequired,showNav:l.a.bool.isRequired,toggleNav:l.a.func.isRequired,updateConfig:l.a.func.isRequired,configModified:l.a.bool.isRequired}}}]);","extractedComments":[]}